/**
 * Jindo Mobile Component
 * @version 1.4.0
 * NHN_Library:Jindo_Mobile_Component-1.4.0;JavaScript Mobile Components for Jindo;
 */


jindo.Component=jindo.$Class({_htEventHandler:null,_htOption:null,$init:function(){var aInstance=this.constructor.getInstance();aInstance.push(this);this._htEventHandler={};this._htOption={};this._htOption._htSetter={};},option:function(sName,vValue){switch(typeof sName){case"undefined":return this._htOption;case"string":if(typeof vValue!="undefined"){if(sName=="htCustomEventHandler"){if(typeof this._htOption[sName]=="undefined"){this.attach(vValue);}else{return this;}}
this._htOption[sName]=vValue;if(typeof this._htOption._htSetter[sName]=="function"){this._htOption._htSetter[sName](vValue);}}else{return this._htOption[sName];}
break;case"object":for(var sKey in sName){if(sKey=="htCustomEventHandler"){if(typeof this._htOption[sKey]=="undefined"){this.attach(sName[sKey]);}else{continue;}}
this._htOption[sKey]=sName[sKey];if(typeof this._htOption._htSetter[sKey]=="function"){this._htOption._htSetter[sKey](sName[sKey]);}}
break;}
return this;},optionSetter:function(sName,fSetter){switch(typeof sName){case"undefined":return this._htOption._htSetter;case"string":if(typeof fSetter!="undefined"){this._htOption._htSetter[sName]=jindo.$Fn(fSetter,this).bind();}else{return this._htOption._htSetter[sName];}
break;case"object":for(var sKey in sName){this._htOption._htSetter[sKey]=jindo.$Fn(sName[sKey],this).bind();}
break;}
return this;},fireEvent:function(sEvent,oEvent){oEvent=oEvent||{};var fInlineHandler=this['on'+sEvent],aHandlerList=this._htEventHandler[sEvent]||[],bHasInlineHandler=typeof fInlineHandler=="function",bHasHandlerList=aHandlerList.length>0;if(!bHasInlineHandler&&!bHasHandlerList){return true;}
aHandlerList=aHandlerList.concat();oEvent.sType=sEvent;if(typeof oEvent._aExtend=='undefined'){oEvent._aExtend=[];oEvent.stop=function(){if(oEvent._aExtend.length>0){oEvent._aExtend[oEvent._aExtend.length-1].bCanceled=true;}};}
oEvent._aExtend.push({sType:sEvent,bCanceled:false});var aArg=[oEvent],i,nLen;for(i=2,nLen=arguments.length;i<nLen;i++){aArg.push(arguments[i]);}
if(bHasInlineHandler){fInlineHandler.apply(this,aArg);}
if(bHasHandlerList){var fHandler;for(i=0,fHandler;(fHandler=aHandlerList[i]);i++){fHandler.apply(this,aArg);}}
return!oEvent._aExtend.pop().bCanceled;},attach:function(sEvent,fHandlerToAttach){if(arguments.length==1){jindo.$H(arguments[0]).forEach(jindo.$Fn(function(fHandler,sEvent){this.attach(sEvent,fHandler);},this).bind());return this;}
var aHandler=this._htEventHandler[sEvent];if(typeof aHandler=='undefined'){aHandler=this._htEventHandler[sEvent]=[];}
aHandler.push(fHandlerToAttach);return this;},detach:function(sEvent,fHandlerToDetach){if(arguments.length==1){jindo.$H(arguments[0]).forEach(jindo.$Fn(function(fHandler,sEvent){this.detach(sEvent,fHandler);},this).bind());return this;}
var aHandler=this._htEventHandler[sEvent];if(aHandler){for(var i=0,fHandler;(fHandler=aHandler[i]);i++){if(fHandler===fHandlerToDetach){aHandler=aHandler.splice(i,1);break;}}}
return this;},detachAll:function(sEvent){var aHandler=this._htEventHandler;if(arguments.length){if(typeof aHandler[sEvent]=='undefined'){return this;}
delete aHandler[sEvent];return this;}
for(var o in aHandler){delete aHandler[o];}
return this;}});jindo.Component.factory=function(aObject,htOption){var aReturn=[],oInstance;if(typeof htOption=="undefined"){htOption={};}
for(var i=0,el;(el=aObject[i]);i++){oInstance=new this(el,htOption);aReturn[aReturn.length]=oInstance;}
return aReturn;};jindo.Component.getInstance=function(){if(typeof this._aInstance=="undefined"){this._aInstance=[];}
return this._aInstance;};if(typeof jindo.m=="undefined"&&typeof Node!="undefined"){var ___Old__addEventListener___=Node.prototype.addEventListener;Node.prototype.addEventListener=function(type,listener,useCapture){var callee=arguments.callee;if(callee&&type==="click"&&this.tagName==="A"){(this.___listeners___||(this.___listeners___=[])).push({listener:listener,useCapture:useCapture});}
return ___Old__addEventListener___.apply(this,arguments);};var ___Old__removeEventListener___=Node.prototype.removeEventListener;Node.prototype.removeEventListener=function(type,listener,useCapture){var callee=arguments.callee;if(callee&&type==="click"&&this.tagName==="A"){if(this.___listeners___){this.___listeners___.pop();}}
return ___Old__removeEventListener___.apply(this,arguments);};}
jindo.m=(function(){var __M__=jindo.$Class({$init:function(){this._initVar();this._initDeviceInfo();this._attachEvent();},_initVar:function(){this.MOVETYPE={0:'hScroll',1:'vScroll',2:'dScroll',3:'tap',4:'longTap',5:'doubleTap',6:'pinch',7:'rotate',8:'pinch-rotate'};this.sVersion="1.3.1";this._isVertical=null;this._nPreWidth=-1;this._nRotateTimer=null;this._htHandler={};this._htDeviceInfo={};},_getOrientationChangeEvt:function(){var bEvtName='onorientationchange'in window?'orientationchange':'resize';var htInfo=this.getDeviceInfo();if((htInfo.android&&htInfo.version==="2.1")){bEvtName='resize';}
return bEvtName;},_getVertical:function(){var bVertical=null,sEventType=this._getOrientationChangeEvt();if(sEventType==="resize"){var screenWidth=document.documentElement.clientWidth;if(screenWidth<this._nPreWidth){bVertical=true;}else if(screenWidth==this._nPreWidth){bVertical=this._isVertical;}else{bVertical=false;}
this._nPreWidth=screenWidth;}else{var windowOrientation=window.orientation;if(windowOrientation===0||windowOrientation==180){bVertical=true;}else if(windowOrientation==90||windowOrientation==-90){bVertical=false;}}
return bVertical;},_attachEvent:function(){this._rotateEvent=jindo.$Fn(this._onOrientationChange,this).attach(window,this._getOrientationChangeEvt()).attach(window,"load");this._pageShowEvent=jindo.$Fn(this._onPageshow,this).attach(window,"pageshow");},_initDeviceInfo:function(){var sName=navigator.userAgent;var ar=null;function f(s,h){return((h||"").indexOf(s)>-1);}
this._htDeviceInfo.iphone=f('iPhone',sName);this._htDeviceInfo.ipad=f('iPad',sName);this._htDeviceInfo.android=f('Android',sName);this._htDeviceInfo.galaxyTab=f('SHW-M180',sName);this._htDeviceInfo.galaxyTab2=f('SHW-M380',sName);this._htDeviceInfo.galaxyK=f('SHW-M130K',sName);this._htDeviceInfo.galaxyU=f('SHW-M130L',sName);this._htDeviceInfo.galaxyS=f('SHW-M110',sName);this._htDeviceInfo.galaxyS2=f('SHW-M250',sName);this._htDeviceInfo.galaxyS2LTE=f('SHV-E110',sName);this._htDeviceInfo.galaxyS3=f('SHV-E210',sName)||f('SHW-M440',sName);this._htDeviceInfo.galaxyNote=f('SHV-E160',sName);this._htDeviceInfo.galaxyNexus=f('Galaxy Nexus',sName);this._htDeviceInfo.optimusLte2=f('LG-F160',sName);this._htDeviceInfo.optimusVu=f('LG-F100',sName);this._htDeviceInfo.optimusLte=f('LG-LU6200',sName)||f('LG-SU640',sName)||f('LG-F120K',sName);this._htDeviceInfo.version='';this._htDeviceInfo.bChrome=this._htDeviceInfo.android&&(f('CrMo',sName)||f('Chrome',sName));this._htDeviceInfo.bInapp=false;if(this._htDeviceInfo.iphone||this._htDeviceInfo.ipad){ar=sName.match(/OS\s([\d|\_]+\s)/i);if(ar!==null&&ar.length>1){this._htDeviceInfo.version=ar[1];}}else if(this._htDeviceInfo.android){ar=sName.match(/Android\s([^\;]*)/i);if(ar!==null&&ar.length>1){this._htDeviceInfo.version=ar[1];}}
this._htDeviceInfo.version=this._htDeviceInfo.version.replace(/\_/g,'.');for(var x in this._htDeviceInfo){if(typeof this._htDeviceInfo[x]=="boolean"&&this._htDeviceInfo[x]&&this._htDeviceInfo.hasOwnProperty(x)){this._htDeviceInfo.name=x;}}
this._htDeviceInfo.samsung=f('GT-',sName)||f('SCH-',sName)||f('SHV-',sName)||f('SHW-',sName)||f('SPH',sName)||f('SWT-',sName)||f('SGH-',sName);this._htDeviceInfo.lg=f('LG-',sName);this._htDeviceInfo.pantech=f('IM-',sName);if(this._htDeviceInfo.iphone||this._htDeviceInfo.ipad){if(!f('Safari',sName)){this._htDeviceInfo.bInapp=true;}}else if(this._htDeviceInfo.android){sName=sName.toLowerCase();if(f('inapp',sName)||f('app',sName.replace('applewebkit',''))){this._htDeviceInfo.bInapp=true;}}},_onOrientationChange:function(we){var self=this;if(we.type==="load"){this._nPreWidth=document.documentElement.clientWidth;if(!this._htDeviceInfo.bInapp&&(this._htDeviceInfo.iphone||this._htDeviceInfo.ipad||this._getOrientationChangeEvt()!=="resize")){this._isVertical=this._getVertical();}else{if(this._nPreWidth>document.documentElement.clientHeight){this._isVertical=false;}else{this._isVertical=true;}}
return;}
if(this._getOrientationChangeEvt()==="resize"){setTimeout(function(){self._orientationChange(we);},0);}else{var nTime=200;if(this.getDeviceInfo().android){nTime=500;}
clearTimeout(this._nRotateTimer);this._nRotateTimer=setTimeout(function(){self._orientationChange(we);},nTime);}},_orientationChange:function(we){var nPreVertical=this._isVertical;this._isVertical=this._getVertical();if(jindo.$Agent().navigator().mobile||jindo.$Agent().os().ipad){if(nPreVertical!==this._isVertical){this.fireEvent("mobilerotate",{isVertical:this._isVertical});}}else{this.fireEvent("mobilerotate",{isVertical:this._isVertical});}},bindRotate:function(fHandlerToBind){var aHandler=this._htHandler["mobilerotate"];if(typeof aHandler=='undefined'){aHandler=this._htHandler["mobilerotate"]=[];}
aHandler.push(fHandlerToBind);this.attach("mobilerotate",fHandlerToBind);},unbindRotate:function(fHandlerToUnbind){var aHandler=this._htHandler["mobilerotate"];if(aHandler){for(var i=0,fHandler;(fHandler=aHandler[i]);i++){if(fHandler===fHandlerToUnbind){aHandler.splice(i,1);this.detach("mobilerotate",fHandlerToUnbind);break;}}}},_onPageshow:function(we){this._isVertical=this._getVertical();var self=this;setTimeout(function(){self.fireEvent("mobilePageshow",{});},300);},bindPageshow:function(fHandlerToBind){var aHandler=this._htHandler["mobilePageshow"];if(typeof aHandler=='undefined'){aHandler=this._htHandler["mobilePageshow"]=[];}
aHandler.push(fHandlerToBind);this.attach("mobilePageshow",fHandlerToBind);},unbindPageshow:function(fHandlerToUnbind){var aHandler=this._htHandler["mobilePageshow"];if(aHandler){for(var i=0,fHandler;(fHandler=aHandler[i]);i++){if(fHandler===fHandlerToUnbind){aHandler.splice(i,1);this.detach("mobilePageshow",fHandlerToUnbind);break;}}}},getDeviceInfo:function(){return this._htDeviceInfo;},isVertical:function(){if(this._isVertical===null){return this._getVertical();}else{return this._isVertical;}},getNodeElement:function(el){while(el.nodeType!=1){el=el.parentNode;}
return el;},getCssOffset:function(element){var htOffset;if(jindo.m.getDeviceInfo().android&&parseInt(jindo.m.getDeviceInfo().version,10)===3){htOffset=jindo.m._getCssOffsetFromStyle(element);}else{if('WebKitCSSMatrix'in window&&'m11'in new WebKitCSSMatrix()){htOffset=jindo.m._getCssOffsetFromCSSMatrix(element);}else{htOffset=jindo.m._getCssOffsetFromStyle(element);}}
return htOffset;},_getCssOffsetFromStyle:function(element){var nTop=nLeft=0,s=element.style[jindo.m.getCssPrefix()+"Transform"];if(!!s&&s.length>0){aTemp=s.match(/translate.{0,2}\((.*)\)/);if(!!aTemp&&aTemp.length>1){var a=aTemp[1].split(',');if(!!a&&a.length>1){nTop=parseInt(a[1],10);nLeft=parseInt(a[0],10);}}}
return{top:nTop,left:nLeft};},_getCssOffsetFromCSSMatrix:function(element){var curTransform=new WebKitCSSMatrix(window.getComputedStyle(element).webkitTransform);return{top:curTransform.m42,left:curTransform.m41};},attachTransitionEnd:function(element,fHandlerToBind){var nVersion=+jindo.$Jindo().version.replace(/[a-z.]/gi,"");if(nVersion>=151){element._jindo_fn_=jindo.$Fn(fHandlerToBind,this).attach(element,"transitionend");}else{element.addEventListener('webkitTransitionEnd',fHandlerToBind,false);}},detachTransitionEnd:function(element,fHandlerToUnbind){var nVersion=+jindo.$Jindo().version.replace(/[a-z.]/gi,"");if(nVersion>=151){if(element._jindo_fn_){element._jindo_fn_.detach(element,"transitionend");delete element._jindo_fn_;}}else{element.removeEventListener('webkitTransitionEnd',fHandlerToUnbind,false);}},getCssPrefix:function(){var sCssPrefix="";if(typeof document.body.style.MozTransition!=="undefined"){sCssPrefix="Moz";}else if(typeof document.body.style.webkitTransition!=="undefined"){sCssPrefix="webkit";}else if(typeof document.body.style.OTransition!=="undefined"){sCssPrefix="O";}
return sCssPrefix;},getClosest:function(sSelector,elBaseElement){var elClosest;var welBaseElement=jindo.$Element(elBaseElement);var reg=/<\/?(?:h[1-5]|[a-z]+(?:\:[a-z]+)?)[^>]*>/ig;if(reg.test(sSelector)){if("<"+elBaseElement.tagName.toUpperCase()+">"==sSelector.toUpperCase()){elClosest=elBaseElement;}else{elClosest=welBaseElement.parent(function(v){if("<"+v.$value().tagName.toUpperCase()+">"==sSelector.toUpperCase()){return v;}});elClosest=elClosest.length?elClosest[0].$value():false;}}else{if(sSelector.indexOf('.')==0){sSelector=sSelector.substring(1,sSelector.length)}
if(welBaseElement.hasClass(sSelector)){elClosest=elBaseElement;}else{elClosest=welBaseElement.parent(function(v){if(v.hasClass(sSelector)){return v;}});elClosest=elClosest.length?elClosest[0].$value():false;}}
return elClosest;},_isUseCss3d:function(isFlicking){if(typeof isFlicking==='undefined'){isFlicking=false;}
var bRet=false;if(this._htDeviceInfo.iphone||this._htDeviceInfo.ipad){bRet=true;}else if(this._htDeviceInfo.android){var s=navigator.userAgent.match(/\(.*\)/)[0];function f(s,h){return((h||"").indexOf(s)>-1);}
var isUseCss3d=f('SHW-',s)||f('SHV-',s)||f('GT-',s)||f('SCH-',s)||f('SGH-',s)||f('SPH-',s)||f('LG-F160',s)||f('LG-F100',s);var isEtc=(f('SHW-M250',s)&&(this._htDeviceInfo.version<="4.0.3"))||f('SHW-M420',s)||f('SHW-M200',s)||f('GT-S7562',s);if(!isFlicking){isEtc=isEtc||f('SHV-E110',s);}
if(this._htDeviceInfo.version>="4.0.3"&&isUseCss3d&&!isEtc){bRet=true;}}
return bRet;},_isUseFixed:function(){var isFixed=false;if(this._htDeviceInfo.bChrome||(this._htDeviceInfo.android&&parseInt(this._htDeviceInfo.version,10)>=3)||((this._htDeviceInfo.iphone||this._htDeviceInfo.ipad)&&(parseInt(this._htDeviceInfo.version,10)>=5))){isFixed=true;}
return isFixed;},_isUseTimingFunction:function(){var bUse=this._isUseCss3d();if(this._htDeviceInfo.android){bUse=false;}
return bUse},_clientSize:function(isMinSize){if(typeof isMinSize==='undefined'){isMinSize=false;}
var oSize={};var oRet=jindo.$Document().clientSize();var nVersion=parseInt(this._htDeviceInfo.version,10);if((this._htDeviceInfo.ipad||this._htDeviceInfo.iphone)||this._htDeviceInfo.bChrome){if(isMinSize&&this._htDeviceInfo.iphone){oRet.height=this.isVertical()?356:268;}
return oRet;}
switch(this._htDeviceInfo.name){case"galaxyTab":oSize={portrait:400,landscape:683};oSize.landscape-=92;oSize.portrait-=66;break;case"galaxyTab2":oSize={portrait:1280,landscape:800};oSize.landscape-=152;oSize.portrait-=152;break;case"galaxyS":oSize={portrait:320,landscape:533};oSize.landscape-=81;oSize.portrait-=81;break;case"galaxyS2LTE":case"galaxyS2":oSize={portrait:320,landscape:533};if(nVersion==4){oSize.landscape-=77;oSize.portrait-=77;}else{oSize.landscape-=83;oSize.portrait-=83;}
break;case"galaxyS3":oSize={portrait:360,landscape:640};oSize.landscape-=73;oSize.portrait-=73;break;case"galaxyNote":oSize={portrait:400,landscape:640};if(nVersion==4){oSize.landscape-=77;oSize.portrait-=77;}else{oSize.landscape-=103;oSize.portrait-=103;}
break;case"galaxyNexus":oSize={portrait:360,landscape:598};oSize.landscape-=83;oSize.portrait-=83;break;case"optimusLte":oSize={portrait:360,landscape:640};oSize.landscape-=73;oSize.portrait-=73;break;case"optimusLte2":oSize={portrait:360,landscape:640};oSize.landscape-=73;oSize.portrait-=73;break;case"optimusVu":oSize={portrait:439,landscape:585};oSize.landscape-=73;oSize.portrait-=73;break;}
if(this.isVertical()){if(isMinSize||(oSize.landscape&&oSize.landscape>oRet.height)){oRet.height=oSize.landscape;}}else{if(isMinSize||(oSize.portrait&&oSize.portrait>oRet.height)){oRet.height=oSize.portrait;}}
return oRet;},_getAdressSize:function(){var nSize=0;if(this._htDeviceInfo.bInapp){return nSize;}
var nVersion=parseInt(this._htDeviceInfo.version,10);if(this._htDeviceInfo.iphone){nSize=60;}else if(this._htDeviceInfo.android){switch(this._htDeviceInfo.name){case"galaxyTab":nSize=66;break;case"galaxyTab2":nSize=48;break;case"galaxyS":nSize=56;break;case"galaxyS2LTE":case"galaxyS2":if(nVersion==4){nSize=52;}else{nSize=58;}
break;case"galaxyS3":nSize=48;break;case"galaxyNote":if(nVersion==4){nSize=52;}else{nSize=78;}
break;case"galaxyNexus":nSize=52;break;case"optimusVu":case"optimusLte":case"optimusLte2":nSize=48;break;}}
return nSize;}}).extend(jindo.Component);return new __M__();})();jindo.UIComponent=jindo.$Class({$init:function(){this._bIsActivating=false;},isActivating:function(){return this._bIsActivating;},activate:function(){if(this.isActivating()){return this;}
this._bIsActivating=true;if(arguments.length>0){this._onActivate.apply(this,arguments);}else{this._onActivate();}
return this;},deactivate:function(){if(!this.isActivating()){return this;}
this._bIsActivating=false;if(arguments.length>0){this._onDeactivate.apply(this,arguments);}else{this._onDeactivate();}
return this;}}).extend(jindo.Component);jindo.m.Effect=jindo.$Class({$init:function(){this._sCssPrefix=jindo.m.getCssPrefix();var htDInfo=jindo.m.getDeviceInfo();this.bIos=(htDInfo.iphone||htDInfo.ipad);this.bIos3=htDInfo.iphone&&(htDInfo.version.length>0)&&(htDInfo.version.substring(0,1)=='3');this.bAndroid=htDInfo.android;this.bAndroid3Up=htDInfo.android&&(htDInfo.version.length>0)&&(htDInfo.version.substring(0,1)>='3');this.bAndroid2_1=htDInfo.android&&(htDInfo.version.length>0)&&(htDInfo.version==='2.1');this.sTranOpen=(this.bIos)?'translate3d(':'translate(';this.sTranEnd=(this.bIos)?',0px)':')';this._initVar();},_initVar:function(){this._htLayerInfo={};},setLayerInfo:function(htInfo){this._htLayerInfo={};for(var p in htInfo){this._htLayerInfo[p]=htInfo[p];}},getTransitionTask:function(){return null;},getBeforeCommand:function(){return null;},getCommand:function(){return null;}});jindo.m.Scroll=jindo.$Class({$init:function(el,htUserOption){this.option({bActivateOnload:true,bUseScrollbar:true,bUseFixedScrollbar:false,sScrollbarBorder:"1px solid white",sScrollbarColor:"#8e8e8e",bUsePullDown:false,bUsePullUp:false,sClassPrefix:"scroll_",bUseVScroll:true,bUseHScroll:false,bUseBounce:true,fnPullDownIdle:null,fnPullDownBeforeUpdate:null,fnPullDownUpdating:null,fnPullUpIdle:null,fnPullUpBeforeUpdate:null,fnPullUpUpdating:null,nOffsetTop:0,nOffsetBottom:0,bAutoResize:false});this.option(htUserOption||{});this._initVar();this._setWrapperElement(el);this._InitPullUpdateFunc();if(this.option("bActivateOnload")){this.activate();}},_initVar:function(){this._oCore=null;this._isPullDown=false;this._isPullUp=false;this._isUpdating=false;this._nOrgMaxScrollTop=null;this._nPropHScroll=0;this._nPropVScroll=0;this._htWElement={};},_setWrapperElement:function(el){this._htWElement["wrapper"]=jindo.$Element(el);this._htWElement["pullDown"]=jindo.$Element(this._htWElement["wrapper"].query("."+this.option("sClassPrefix")+"pullDown"));this._htWElement["pullUp"]=jindo.$Element(this._htWElement["wrapper"].query("."+this.option("sClassPrefix")+"pullUp"));},_InitPullUpdateFunc:function(){if(this.option("bUsePullDown")===true){if(!this.option("fnPullDownIdle")){this.option("fnPullDownIdle",function(wel){wel.html("업데이트하시려면 아래로 내려주세요");});}
if(!this.option("fnPullDownBeforeUpdate")){this.option("fnPullDownBeforeUpdate",function(wel){wel.html("업데이트 합니다");});}
if(!this.option("fnPullDownUpdating")){this.option("fnPullDownUpdating",function(wel){wel.html("업데이트 중입니다...");});}}
if(this.option("bUsePullUp")===true){if(!this.option("fnPullUpIdle")){this.option("fnPullUpIdle",function(wel){wel.html("더 보시려면 위로 올려주세요");});}
if(!this.option("fnPullUpBeforeUpdate")){this.option("fnPullUpBeforeUpdate",function(wel){wel.html("로드 합니다");});}
if(!this.option("fnPullUpUpdating")){this.option("fnPullUpUpdating",function(wel){wel.html("로드 중...");});}}},_onActivate:function(){if(this._oCore){this._oCore.activate();}
this.refresh();this._attachEvent();},setUsePullDown:function(bUse){this.option("bUsePullDown",bUse);this._refreshPullStatus();},setUsePullUp:function(bUse){this.option("bUsePullUp",bUse);this._refreshPullStatus();},width:function(nValue){if(nValue){this.option("nWidth",nValue);this.refresh();}else{if(this.option("nWidth")){return parseInt(this.option("nWidth"),10);}else{return this._htWElement["wrapper"].width();}}},height:function(nValue){if(nValue){this.option("nHeight",nValue);this.refresh();}else{if(this.option("nHeight")){return parseInt(this.option("nHeight"),10);}else{return this._htWElement["wrapper"].height();}}},_refreshPullStatus:function(){this._isUpdating=false;this._nOrgMaxScrollTop=null;this._isPullDown=this.option("bUsePullDown")&&this.option("bUseVScroll")&&!this.option("bUseHScroll")&&this.option("bUseBounce")&&(this._htWElement["pullDown"]!==null);this._isPullUp=this.option("bUsePullUp")&&this.option("bUseVScroll")&&!this.option("bUseHScroll")&&this.option("bUseBounce")&&(this._htWElement["pullUp"]!==null);if(this._isPullDown&&this.option("fnPullDownIdle")){this._htWElement["pullDown"]._isReady_=false;this._htWElement["pullDown"].show();this.option("fnPullDownIdle")(this._htWElement["pullDown"]);}
if(this._isPullUp&&this.option("fnPullUpIdle")){this._htWElement["pullUp"]._isReady_=false;this._htWElement["pullUp"].show();this.option("fnPullUpIdle")(this._htWElement["pullUp"]);}},refresh:function(){if(!this.isActivating()){return;}
this._refreshPullStatus();if(this._oCore){this._oCore.option({nOffsetTop:(this._isPullDown?this._htWElement["pullDown"].height():0)-this.option("nOffsetTop"),nOffsetBottom:(this._isPullUp?this._htWElement["pullUp"].height():0)-this.option("nOffsetBottom"),nWidth:this.option("nWidth"),nHeight:this.option("nHeight")});this._oCore.refresh();}else{var htOption=this.option();var htCloneOption={};for(var p in htOption){htCloneOption[p]=htOption[p];}
htCloneOption.bActivateOnload=true;htCloneOption.nOffsetTop=(this._isPullDown?this._htWElement["pullDown"].height():0)-this.option("nOffsetTop");htCloneOption.nOffsetBottom=(this._isPullUp?this._htWElement["pullUp"].height():0)-this.option("nOffsetBottom");this._oCore=new jindo.m.CoreScroll(this._htWElement["wrapper"],htCloneOption);}
if(this.option("bUseScrollbar")){this._refreshScroll("V");this._refreshScroll("H");}
if(!this.hasVScroll()){if(this._htWElement["pullDown"]!==null){this._htWElement["pullDown"].hide();}
if(this._htWElement["pullUp"]!==null){this._htWElement["pullUp"].hide();}}},scrollTo:function(nLeft,nTop,nDuration){nDuration=nDuration||0;nLeft=-Math.abs(nLeft);nTop=-Math.abs(nTop);nTop+=this.getTop();this._oCore.scrollTo((nLeft>=this.getLeft()?this.getLeft():(nLeft<=this.getRight()?this.getRight():nLeft)),(nTop>=this.getTop()?this.getTop():(nTop<=this.getBottom()?this.getBottom():nTop)),nDuration);},getRight:function(){return this._oCore.nMaxScrollLeft;},getLeft:function(){return 0;},getBottom:function(){return this._oCore.nMaxScrollTop;},getTop:function(){return this._oCore.nMinScrollTop;},getCurrentPos:function(){return this._oCore.getCurrentPos();},hasHScroll:function(){return this._oCore.bUseHScroll;},hasVScroll:function(){return this._oCore.bUseVScroll;},_onDeactivate:function(){this._detachEvent();this._oCore.deactivate();},_attachEvent:function(){this._htEvent={};this._oCore.attach({beforeTouchStart:jindo.$Fn(this._onBeforeTouchStart,this).bind(),touchStart:jindo.$Fn(this._onTouchStart,this).bind(),beforeTouchMove:jindo.$Fn(this._onBeforeTouchMove,this).bind(),touchMove:jindo.$Fn(this._onTouchMove,this).bind(),beforeTouchEnd:jindo.$Fn(this._onBeforeTouchEnd,this).bind(),touchEnd:jindo.$Fn(this._onTouchEnd,this).bind(),beforePosition:jindo.$Fn(this._onBeforePosition,this).bind(),position:jindo.$Fn(this._onPosition,this).bind(),setDuration:jindo.$Fn(this._onSetDuration,this).bind(),afterScroll:jindo.$Fn(this._onAfterScroll,this).bind()});if(this.option("bAutoResize")){this._htEvent["rotate"]=jindo.$Fn(this._onRotate,this).bind();jindo.m.bindRotate(this._htEvent["rotate"]);}},_onRotate:function(we){this.refresh();},_onSetDuration:function(we){if(this.option("bUseScrollbar")){if(we.bUseHScroll&&this._htWElement["HscrollbarIndicator"]){this._htWElement["HscrollbarIndicator"].css(this._oCore.sCssPrefix+"TransitionDuration",we.nDuration);}
if(we.bUseVScroll&&this._htWElement["VscrollbarIndicator"]){this._htWElement["VscrollbarIndicator"].css(this._oCore.sCssPrefix+"TransitionDuration",we.nDuration);}}},_onBeforeTouchStart:function(we){if(!this.fireEvent("beforeTouchStart",we)){we.stop();}},_onTouchStart:function(we){this.fireEvent("touchStart",we);},_onBeforeTouchMove:function(we){if(!this.fireEvent("beforeTouchMove",we)){we.stop();}},_onTouchMove:function(we){if(this._isPullDown||this._isPullUp){this._touchMoveForUpdate(we);}
this.fireEvent("touchMove",we);},_onBeforeTouchEnd:function(we){if(!this.fireEvent("beforeTouchEnd",we)){we.stop();}},_onTouchEnd:function(we){if(this._isPullDown&&this._htWElement["pullDown"]._isReady_){this._pullUploading(this._htWElement["pullDown"],false);}
if(this._isPullUp&&this._htWElement["pullUp"]._isReady_){this._pullUploading(this._htWElement["pullUp"],true);}
this.fireEvent("touchEnd",we);},_onBeforePosition:function(we){if(!this.fireEvent("beforePosition",we)){we.stop();}},_onPosition:function(we){if(this.option("bUseScrollbar")){this._setScrollBarPos("V",we.nTop);this._setScrollBarPos("H",we.nLeft);}
this.fireEvent("position",we);},_onAfterScroll:function(we){if(this.option("bUseScrollbar")&&!this.option("bUseFixedScrollbar")){this._hideScrollBar("H");this._hideScrollBar("V");}
this.fireEvent("afterScroll",we);},_hideScrollBar:function(sDirection){var wel=this._htWElement[sDirection+"scrollbar"],bUseScroll=(sDirection==="H"?this._oCore.bUseHScroll:this._oCore.bUseVScroll);if(bUseScroll&&wel){if(this._oCore.isPositionBug&&this._oCore.bUseHighlight){this._oCore.makeStylePos(this._htWElement[sDirection+"scrollbarIndicator"]);}
wel.hide();wel.css("left",wel.css("left")+"px");}},_fireEventPullDown:function(){if(!this._htWElement){return;}
this.fireEvent("pullDown",{welElement:this._htWElement["pullDown"],oScroll:this});},_fireEventPullUp:function(){if(!this._htWElement){return;}
this.fireEvent("pullUp",{welElement:this._htWElement["pullUp"],oScroll:this});},_pullUploading:function(wel,isUp){var fn=isUp?this.option("fnPullUpUpdating"):this.option("fnPullDownUpdating");var self=this;this._isUpdating=true;wel._isReady_=false;if(fn){setTimeout(function(){fn(wel);if(isUp){self._fireEventPullUp();}else{self._fireEventPullDown();}},0);}},_touchMoveForUpdate:function(we){if(this._isUpdating){return;}
var nTopMargin=this._oCore.option("nOffsetTop");var nBottomMargin=this._oCore.option("nOffsetBottom");we.nMaxScrollTop=this._nOrgMaxScrollTop?this._nOrgMaxScrollTop:we.nMaxScrollTop;if(this._isPullDown){if(this._htWElement["pullDown"]._isReady_){if(nTopMargin>we.nTop){this._htWElement["pullDown"]._isReady_=false;if(this.option("fnPullDownIdle")){this.option("fnPullDownIdle")(this._htWElement["pullDown"]);this._oCore.nMinScrollTop=-nTopMargin;}}}else{if(we.nTop>nTopMargin){this._htWElement["pullDown"]._isReady_=true;if(this.option("fnPullDownBeforeUpdate")){this.option("fnPullDownBeforeUpdate")(this._htWElement["pullDown"]);this._oCore.nMinScrollTop=0;}}}}
if(this._isPullUp){if(this._htWElement["pullUp"]._isReady_){if(we.nTop>=(we.nMaxScrollTop-nBottomMargin)){this._htWElement["pullUp"]._isReady_=false;if(this.option("fnPullUpIdle")){this.option("fnPullUpIdle")(this._htWElement["pullUp"]);this._oCore.nMaxScrollTop=we.nMaxScrollTop;}}}else{if(we.nTop<(we.nMaxScrollTop-nBottomMargin)){this._htWElement["pullUp"]._isReady_=true;if(this.option("fnPullUpBeforeUpdate")){this.option("fnPullUpBeforeUpdate")(this._htWElement["pullUp"]);this._nOrgMaxScrollTop=we.nMaxScrollTop;this._oCore.nMaxScrollTop=we.nMaxScrollTop-nBottomMargin;}}}}},isMoving:function(){return this._oCore.isMoving();},_detachEvent:function(){this._oCore.detachAll();if(this.option("bAutoResize")){jindo.m.unbindRotate(this._htEvent["rotate"]);}
this._htEvent=null;},_createScroll:function(sDirection){if(!(sDirection==="H"?this._oCore.bUseHScroll:this._oCore.bUseVScroll)){return;}
var welScrollbar=this._htWElement[sDirection+"scrollbar"],welScrollbarIndicator=this._htWElement[sDirection+"scrollbarIndicator"],welWrapper=this._htWElement["wrapper"];if(welScrollbar){welWrapper.remove(welScrollbar);this._htWElement[sDirection+"scrollbar"]=this._htWElement[sDirection+"scrollbarIndicator"]=null;}
welScrollbar=this._createScrollbar(sDirection);welScrollbarIndicator=this._createScrollbarIndicator(sDirection);this._htWElement[sDirection+"scrollbar"]=welScrollbar;this._htWElement[sDirection+"scrollbarIndicator"]=welScrollbarIndicator;welScrollbar.append(welScrollbarIndicator);welWrapper.append(welScrollbar);this._refreshScroll(sDirection);},_refreshScroll:function(sDirection){if(sDirection==="H"){if(!this._oCore.bUseHScroll||this._oCore.nWrapperW==this._oCore.nScrollW){return;}}else{if(!this._oCore.bUseVScroll||this._oCore.nWrapperH==this._oCore.nScrollH){return;}}
if(!this._htWElement[sDirection+"scrollbar"]){this._createScroll(sDirection);}
var welScrollbar=this._htWElement[sDirection+"scrollbar"],welScrollbarIndicator=this._htWElement[sDirection+"scrollbarIndicator"],nSize=0;if(sDirection==="H"){nSize=Math.max(Math.round(Math.pow(this._oCore.nWrapperW,2)/this._oCore.nScrollW),8);this._nPropHScroll=(this._oCore.nWrapperW-nSize)/this._oCore.nMaxScrollLeft;welScrollbar.width(this._oCore.nWrapperW);welScrollbarIndicator.width(isNaN(nSize)?0:nSize);}else{nSize=Math.max(Math.round(Math.pow(this._oCore.nWrapperH,2)/this._oCore.nScrollH),8);this._nPropVScroll=(this._oCore.nWrapperH-nSize)/this._oCore.nMaxScrollTop;welScrollbar.height(this._oCore.nWrapperH);welScrollbarIndicator.height(isNaN(nSize)?0:nSize);}},_createScrollbar:function(sDirection){var welScrollbar=jindo.$Element("<div>");welScrollbar.css({"position":"absolute","zIndex":100,"bottom":(sDirection==="H"?"1px":(this._oCore.bUseHScroll?'7':'2')+"px"),"right":(sDirection==="H"?(this._oCore.bUseVScroll?'7':'2')+"px":"1px"),"pointerEvents":"none"});if(this.option("bUseFixedScrollbar")){welScrollbar.show();}else{welScrollbar.hide();}
if(sDirection==="H"){welScrollbar.css({height:"5px",left:"2px"});}else{welScrollbar.css({width:"5px",top:"2px"});}
return welScrollbar;},_createScrollbarIndicator:function(sDirection){var welScrollbarIndicator=jindo.$Element("<div>").css({"position":"absolute","zIndex":100,"border":this.option("sScrollbarBorder"),"pointerEvents":"none","left":0,"top":0,"background-color":this.option("sScrollbarColor")});if(this._oCore.isIos){welScrollbarIndicator.css(this._oCore.sCssPrefix+"BorderRadius","12px");}
if(this._oCore.option("bUseTranslate")||this._oCore.option("bUseCss3d")){welScrollbarIndicator.css(this._oCore.sCssPrefix+"TransitionProperty","-webkit-transform").css(this._oCore.sCssPrefix+"Transform","translate"+this._oCore.sTransOpen+"0,0"+this._oCore.sTransEnd);}
if(this._oCore.option("bUseTimingFunction")){welScrollbarIndicator.css(this._oCore.sCssPrefix+"TransitionTimingFunction","cubic-bezier(0.33,0.66,0.66,1)");}
if(sDirection==="H"){welScrollbarIndicator.height(5);}else{welScrollbarIndicator.width(5);}
return welScrollbarIndicator;},_setScrollBarPos:function(sDirection,nPos){if(!(sDirection==="H"?this._oCore.bUseHScroll:this._oCore.bUseVScroll)){return;}
var welIndicator=this._htWElement[sDirection+"scrollbarIndicator"],welScrollbar=this._htWElement[sDirection+"scrollbar"];nPos=this["_nProp"+sDirection+'Scroll']*nPos;if(!this.option("bUseFixedScrollbar")&&!welScrollbar.visible()){welScrollbar.show();}
if(welIndicator){if(this._oCore.option("bUseTranslate")){if(this._oCore.isPositionBug&&this._oCore.bUseHighlight){var nBufferPos=parseInt((sDirection==="H"?welIndicator.css("left"):welIndicator.css("top")),10);nPos-=isNaN(nBufferPos)?0:nBufferPos;}
welIndicator.css(this._oCore.sCssPrefix+"Transform","translate"+this._oCore.sTranOpen+(sDirection==="H"?nPos+"px,0":"0,"+nPos+"px")+this._oCore.sTranEnd);}else{if(sDirection==="H"){welIndicator.css("left",nPos+"px");}else{welIndicator.css("top",nPos+"px");}}}},destroy:function(){this.deactivate();for(var p in this._htWElement){this._htWElement[p]=null;}
this._oCore.destroy();delete this._oCore;this._htWElement=null;}}).extend(jindo.UIComponent);jindo.m.Validator=jindo.$Class({validate:function(sValue,sFormat){var sCorrectedValue=this._getCorrectedValue(sValue,sFormat),htResult={bValid:this._isValid(sCorrectedValue,sFormat),sCorrectedValue:null};if(sCorrectedValue!==sValue){htResult.sCorrectedValue=sCorrectedValue;}
return htResult;}});jindo.m.CoreTab=jindo.$Class({$init:function(el,htUserOption){this.option({sClassPrefix:"tc-",nDefaultIndex:0,nPanelDuration:0,nHeight:0,nWidth:0,bActivateOnload:true});this.option(htUserOption||{});this._initVar();this._setWrapperElement(el);},_initVar:function(){this._sPrefix=this.option('sClassPrefix');this._nCurrentIndex=-1;this._aTab=[];this._aPanel=[];this._oPanelEffect=null;},_setWrapperElement:function(el){this._htWElement={};el=(typeof el=="string"?jindo.$(el):el);if(!el){return;}
this._htWElement["baseElement"]=jindo.$Element(el);this._htWElement["tab_container"]=jindo.$Element(this._htWElement["baseElement"].query('.'+this._sPrefix+'tab-cont'));this._htWElement["panel_container"]=jindo.$Element(this._htWElement["baseElement"].query('.'+this._sPrefix+'panel-cont'));if(this._htWElement["tab_container"]){this._htWElement["tab_container"].css('-'+jindo.m.getCssPrefix()+'-tap-highlight-color','rgba(0,0,0,0)');}},_initData:function(){var isPanelEffect=this.option("nPanelDuration"),nWidth,nHeight;this._aTab=this._htWElement["tab_container"].queryAll('.'+this._sPrefix+'tab');this._aPanel=this._htWElement["panel_container"].queryAll('.'+this._sPrefix+'panel');if(isPanelEffect){nWidth=(this.option("nWidth")==0?this._htWElement["panel_container"].width()-parseInt(this._aPanel[0].css("paddingLeft"),10)-parseInt(this._aPanel[0].css("paddingRight"),10):this.option("nWidth"))+"px";nHeight=this.option("nHeight")+"px";}
for(var i=0,nLength=this._aTab.length;i<nLength;i++){this._aTab[i]=jindo.$Element(this._aTab[i]).attr("data-index",i);this._aPanel[i]=jindo.$Element(this._aPanel[i]);if(isPanelEffect){this._aPanel[i].css({width:nWidth,height:nHeight,position:"absolute"});}}
if(isPanelEffect){this._oPanelEffect=new jindo.m.LayerEffect(this._aPanel[0].$value());this._htWElement["panel_container"].css({position:"relative","overflow":"hidde",height:nHeight});}},_getIdx:function(welElement){return parseInt(welElement.attr("data-index"),10);},_getTabElement:function(welElement){var sTabClassName=this._sPrefix+"tab",sMoreTabClassName=this._sPrefix+"more-tab";if(welElement.hasClass(sTabClassName)||welElement.hasClass(sMoreTabClassName)){return welElement;}else if(this._htWElement["tab_container"].isParentOf(welElement)&&(!welElement.hasClass(sTabClassName)||!welElement.hasClass(sMoreTabClassName))){return welElement.parent(function(v){return v.hasClass(sTabClassName)||v.hasClass(sMoreTabClassName);},2)[0];}
return welElement;},_onActivate:function(){this._attachEvent();},_onDeactivate:function(){this._detachEvent();},_attachEvent:function(){this._htEvent={};this._htEvent["tab_click"]={el:this._htWElement["tab_container"],ref:jindo.$Fn(this._onSelect,this).attach(this._htWElement["tab_container"],"click")};},_detachEvent:function(){for(var p in this._htEvent){var ht=this._htEvent[p];ht.ref.detach(ht.el,p.substring(p.lastIndexOf("_")+1));}
this._htEvent=null;if(this._oPanelEffect){this._oPanelEffect.detachAll();}},getCurrentIndex:function(){return this._nCurrentIndex;},getTab:function(nIdx){if(nIdx!==null&&this._aTab.length>nIdx){return this._aTab[nIdx];}else{return this._aTab;}},getPanel:function(nIdx){if(nIdx!==null&&this._aPanel.length>nIdx){return this._aPanel[nIdx];}else{return this._aPanel;}},_onSelect:function(we){if(we.element){if(this._oPanelEffect&&this._oPanelEffect.isPlaying()){we.stop(jindo.$Event.CANCEL_ALL);return false;}
var welElement=this._getTabElement(jindo.$Element(we.element));this._onAfterSelect(welElement);}},select:function(nIdx){if(nIdx!==null&&this._aTab.length>nIdx&&(this._nCurrentIndex!=nIdx)){if(this._fireEventBefore("beforeSelect")){var sSelect=this._sPrefix+"selected";this._beforeSelect(nIdx);this._aTab[nIdx].addClass(sSelect);this._aPanel[nIdx].addClass(sSelect);this._aPanel[nIdx].show();if(this._nCurrentIndex>-1){this._aTab[this._nCurrentIndex].removeClass(sSelect);if(this._oPanelEffect){this._slide(this._nCurrentIndex,nIdx);}else{this._aPanel[this._nCurrentIndex].removeClass(sSelect);this._aPanel[this._nCurrentIndex].hide();}}
this._nCurrentIndex=nIdx;this._fireEvent("select");}}},_slide:function(nBeforeIdx,nIdx){var self=this,isLeft=nBeforeIdx<nIdx,nWidth=this._aPanel[nIdx].width();if(this._fireEventBefore("beforeSlide")){this._oPanelEffect.setLayer(this._aPanel[nIdx].$value());this._oPanelEffect.attach("afterEffect",function(){self._onPannelAfterEffct(nBeforeIdx,nIdx);});this._aPanel[nIdx].css({"left":isLeft?nWidth:-nWidth,"zIndex":9});this._oPanelEffect.slide({sDirection:isLeft?'left':"right",nDuration:this.option("nPanelDuration"),nSize:nWidth});}},_onPannelAfterEffct:function(nBeforeIdx,nIdx){this._aPanel[nBeforeIdx].removeClass(this._sPrefix+"selected");this._aPanel[nBeforeIdx].hide();this._aPanel[nBeforeIdx].css("zIndex",1);this._aPanel[nIdx].css("zIndex",2);this._oPanelEffect.detachAll("afterEffect");this._fireEvent("slide");},_fireEventBefore:function(sType){return this.fireEvent(sType,{nIndex:this._nCurrentIndex,elTab:this._aTab[this._nCurrentIndex],elPanel:this._aPanel[this._nCurrentIndex]});},_fireEvent:function(sType){this.fireEvent(sType,{nIndex:this._nCurrentIndex,elTab:this._aTab[this._nCurrentIndex],elPanel:this._aPanel[this._nCurrentIndex]});},destroy:function(){for(var p in this._htWElement){this._htWElement[p]=null;}
this._htWElement=null;for(p in this._aTab){this._aTab[p]=null;}
this._aTab=null;for(p in this._aPanel){this._aPanel[p]=null;}
this._aPanel=null;if(this._oPanelEffect){this._oPanelEffect.destroy();this._oPanelEffect=null;}}}).extend(jindo.UIComponent);jindo.m.CorePagination=jindo.$Class({_nCurrentPage:1,$init:function(htUserOption){this.option({nItem:10,nItemPerPage:10,nPage:1,bActivateOnload:true});this.option(htUserOption||{});this._nCurrentPage=this.option('nPage');},getItemCount:function(){return this.option('nItem');},getItemPerPage:function(){return this.option('nItemPerPage');},getCurrentPage:function(){return this._nCurrentPage;},setItemCount:function(n){this.option('nItem',n);},setItemPerPage:function(n){this.option('nItemPerPage',n);},movePageTo:function(n){var nBefore=this._nCurrentPage;var nPage=this._convertToAvailPage(n);if(nPage!=this._nCurrentPage){this._nCurrentPage=nPage;}},nextPageTo:function(){var nPage=this._nCurrentPage+1;this.movePageTo(nPage);},previousPageTo:function(){var nPage=this._nCurrentPage-1;this.movePageTo(nPage);},hasNextPage:function(){var nPage=this.getCurrentPage(),totalPage=this.getTotalPages();return nPage&&(nPage<totalPage);},hasPreviousPage:function(){return(this.getCurrentPage()>1);},getTotalPages:function(){var nTotal=this.option('nItem'),nCount=this.option('nItemPerPage');if(!nCount){return null;}
return Math.ceil(nTotal/nCount);},getPageItemIndex:function(nPage){nPage=this._convertToAvailPage(nPage);var nTotal=this.option('nItem'),nCount=this.option('nItemPerPage'),start,end;if(!nPage||!nCount){return null;}
start=(nPage-1)*nCount;end=Math.min(start+nCount,nTotal)-1;return{nStart:start,nEnd:end};},getPageOfItem:function(n){return Math.ceil(n/this.getItemPerPage());},_convertToAvailPage:function(nPage){var nLastPage=this.getTotalPages();nPage=Math.max(nPage,1);nPage=Math.min(nPage,nLastPage);return nPage;}}).extend(jindo.UIComponent);jindo.m.FlickingAnimation=jindo.$Class({$init:function(){this._WrapperInstacne=null;this.bH=true;this._elTransition=null;this._sCssPrefix=jindo.m.getCssPrefix();this._wfTransitionEnd=jindo.$Fn(this._onTransitionEnd,this).bind();this._htOption={};},setOption:function(htOption){for(var sKey in htOption){this._htOption[sKey]=htOption[sKey];if(typeof this._htOption._htSetter[sKey]=="function"){this._htOption._htSetter[sKey](htOption[sKey]);}}
this.bH=this._htOption['bHorizontal'];},setWrapperElement:function(htWElement){this._htWElement={};for(var p in htWElement){this._htWElement[p]=htWElement[p];}},initAnimation:function(){this._initAnimation();},onStart:function(){this._onStart();},_onStart:function(){},moveTo:function(n,nTime,bFireEvent,bFireFlickEvent){this._moveTo(n,nTime,bFireEvent,bFireFlickEvent);},_moveTo:function(n,nTime,bResize,bFireMoveEvent,bFireFlickEvent){},refresh:function(n,bResize){this._refresh(n,bResize);},movePanel:function(nDistacne,nVector,nPos,nDuration,bEnd){this._movePanel(nDistacne,nVector,nPos,nDuration,bEnd);},setInstance:function(oIns){this._WrapperInstacne=oIns;},endAnimation:function(bFireEvent){if(typeof bFireEvent==='undefined'){bFireEvent=true;}
this._WrapperInstacne._endAnimation(bFireEvent);},restorePosition:function(){},_onTransitionEnd:function(){},moveNext:function(){},movePrev:function(n){},_attachTransitionEnd:function(el,nTime){if(el===this._WrapperInstacne.getElement().$value()||el===this._htWElement.container.$value()){this._elTransition=el;if(nTime===0){var self=this;setTimeout(function(){self._onTransitionEnd();},10);}else{var self=this;nTime+=10;setTimeout(function(){self._onTransitionEnd();},nTime);}}},_detachTransitionEnd:function(){if(this._elTransition){jindo.m.detachTransitionEnd(this._elTransition,this._wfTransitionEnd);}},});jindo.m.CheckRadioCore=jindo.$Class({$init:function(el,htUserOption){},_initVar:function(sFormType,sFormClass){this._sFormType=sFormType;this._sFormFixClass=sFormClass;this._sUnitClass=this.option("sClassPrefix")+sFormClass+"-unit";this._sOnClass=this.option("sClassPrefix")+sFormClass+"-on";this._sFormClass=this.option("sClassPrefix")+sFormClass;this._sDisableClass=this.option("sClassPrefix")+sFormClass+"-disable";var oDeviceInfo=jindo.m.getDeviceInfo();this._bMobile=(oDeviceInfo.iphone||oDeviceInfo.ipad||oDeviceInfo.android);this._sClickEvent=(this._bMobile)?"touchend":"click";this._bMove=false;},_setWrapperElement:function(el,sPrefix){this._htWElement={};this._aWElUnitList=[];this._aWElFormList=[];el=(typeof el=="string"?jindo.$(el):el);this._htWElement["base"]=jindo.$Element(el);this._htWElement["container"]=jindo.$Element(jindo.$$.getSingle('.'+sPrefix+this._sFormFixClass+'-cont',el));var aUnitList=this._htWElement["container"].queryAll('.'+this._sUnitClass);var aFormList=this._htWElement["container"].queryAll('.'+this._sFormClass);for(var i=0;i<aUnitList.length;i++){this._aWElUnitList[i]=jindo.$Element(aUnitList[i]);this._aWElFormList[i]=jindo.$Element(aFormList[i]);}},_onActivate:function(){this._attachEvent();},_onDeactivate:function(){this._detachEvent();},_attachEvent:function(){this._htEvent={};this._htEvent["form_touchmove"]={el:this._htWElement["container"].$value(),ref:jindo.$Fn(this._onTouchMove,this).attach(this._htWElement["container"].$value(),"touchmove")};this._htEvent["form_"+this._sClickEvent]={el:this._htWElement["container"].$value(),ref:jindo.$Fn(this._onCheck,this).attach(this._htWElement["container"].$value(),this._sClickEvent)};if(this._bMobile){for(var i=0;i<this._aWElFormList.length;i++){this._htEvent["form"+i+"_click"]={el:this._aWElFormList[i].$value(),ref:jindo.$Fn(this._onFormClick,this).attach(this._aWElFormList[i].$value(),"click")};}}},_detachEvent:function(){for(var p in this._htEvent){var ht=this._htEvent[p];ht.ref.detach(ht.el,p.substring(p.lastIndexOf("_")+1));}
this._htEvent=null;},_onTouchMove:function(we){this._bMove=true;},_onFormClick:function(we){var sClassName=this._sUnitClass;var welElement=jindo.$Element(we.element);welElement=welElement.parent(function(v){return v.hasClass(sClassName);})[0];var bCurrentChecked=we.element.checked;var sChecked=welElement.attr("data-cb-checked");var bChecked=(sChecked&&sChecked=="on")?true:false;if(bCurrentChecked!=bChecked){we.element.checked=bChecked;}},_onCheck:function(we){if(we.element&&!this._bMove){var elEventElement=jindo.m.getNodeElement(we.element);var welElement=jindo.$Element(elEventElement);var sClassName=this._sUnitClass;var sTagName=elEventElement.tagName.toLowerCase();var sType=elEventElement.getAttribute("type");sType=(sType)?sType:"";if(this._htWElement["container"].isParentOf(welElement)&&!welElement.hasClass(sClassName)){welElement=welElement.parent(function(v){return v.hasClass(sClassName);})[0];}else if((welElement.$value()===this._htWElement["container"].$value())){return false;}
if((welElement.hasClass(this._sDisableClass))){return false;}
var bClickOverForm=false;if(sTagName=="input"&&sType.toLowerCase()==this._sFormType){bClickOverForm=true;}
this._afterCheck(welElement,bClickOverForm);}
this._bMove=false;},_afterCheck:function(welElement,bClickOverForm){},_getFormIdx:function(vElement){var aIdxList=[];var aElList=[];var sUnitClassName=this._sUnitClass;var sFormClassName=this._sFormClass;var waElUnitList=jindo.$A(this._aWElUnitList);var waElFormList=jindo.$A(this._aWElFormList);if(vElement instanceof Array){aElList=vElement;}else if(typeof vElement=="object"){aElList.push(vElement);}else if(!vElement||vElement===null){var nLength=this._aWElUnitList.length;for(var i=0;i<nLength;i++){aIdxList.push(i);}}
var nIdx=-1;if(aElList.length>0){waElUnitList.forEach(function(welElement,nElIdx){for(var i=0;i<aElList.length;i++){if(aElList[i]===welElement.$value()){aIdxList.push(nElIdx);}}});if(aElList.length>aIdxList.length){waElFormList.forEach(function(welElement,nElIdx){for(var i=0;i<aElList.length;i++){if(aElList[i]===welElement.$value()){aIdxList.push(nElIdx);}}});}}
return aIdxList;},_useSettingForm:function(vElement,bUse){var aIdx=this._getFormIdx(vElement);var aElFormList=[];var aElUnitList=[];var sEvent=(bUse)?"enable":"disable";for(var i=0;i<aIdx.length;i++){this._setUsedForm(bUse,this._aWElFormList[aIdx[i]].$value(),this._aWElUnitList[aIdx[i]]);aElFormList[i]=this._aWElFormList[aIdx[i]].$value();aElUnitList[i]=this._aWElUnitList[aIdx[i]].$value();}
return{aFormList:aElFormList,aUnitList:aElUnitList};},_setUsedForm:function(bEnable,elForm,welUnit){if(!bEnable){welUnit.addClass(this._sDisableClass);elForm.disabled=true;}else{welUnit.removeClass(this._sDisableClass);elForm.disabled=false;}},destroy:function(){this.deactivate();for(var p in this._htWElement){this._htWElement[p]=null;}
this._htWElement=null;this._sUnitClass=null;this._sOnClass=null;this._sFormClass=null;this._sDisableClass=null;this._aWElUnitList=null;this._aWElFormList=null;}}).extend(jindo.UIComponent);jindo.m.Touch=jindo.$Class({$init:function(sId,htUserOption){this._el=jindo.$(sId);var htDefaultOption={nMomentumDuration:350,nMoveThreshold:7,nSlopeThreshold:25,nLongTapDuration:1000,nDoubleTapDuration:400,nTapThreshold:6,nPinchThreshold:0.1,nRotateThreshold:5,bActivateOnload:true};this.option(htDefaultOption);this.option(htUserOption||{});this._initVariable();this._setSlope();if(this.option("bActivateOnload")){this.activate();}},_initVariable:function(){this._hasTouchEvent='ontouchstart'in window;this._radianToDegree=180/Math.PI;this._htMoveInfo={nStartX:0,nStartY:0,nBeforeX:0,nBeforeY:0,nStartTime:0,nBeforeTime:0,nStartDistance:0,nBeforeDistance:0,nStartAngle:0,nLastAngle:0};this.bStart=false;this.bMove=false;this.nMoveType=-1;this.htEndInfo={};this._nVSlope=0;this._nHSlope=0;this.bSetSlope=false;},_attachEvents:function(){this._htEvent={};var bTouch=this._hasTouchEvent;this._htEvent[bTouch?'touchstart':'mousedown']={ref:jindo.$Fn(this._onStart,this).attach(this._el,(bTouch?'touchstart':'mousedown')),el:this._el};this._htEvent[bTouch?'touchmove':'mousemove']={ref:jindo.$Fn(this._onMove,this).attach(this._el,(bTouch?'touchmove':'mousemove')),el:this._el};this._htEvent[bTouch?'touchend':'mouseup']={ref:jindo.$Fn(this._onEnd,this).attach(this._el,(bTouch?'touchend':'mouseup')),el:this._el};this._htEvent["rotate"]=jindo.$Fn(this._onResize,this).bind();jindo.m.bindRotate(this._htEvent["rotate"]);if(bTouch){this._htEvent['touchcancel']={ref:jindo.$Fn(this._onCancel,this).attach(this._el,'touchcancel'),el:this._el};}},_detachEvents:function(){for(var p in this._htEvent){var htTargetEvent=this._htEvent[p];if(htTargetEvent.ref){htTargetEvent.ref.detach(htTargetEvent.el,p);}}
jindo.m.unbindRotate(this._htEvent["rotate"]);this._htEvent=null;},_onCancel:function(oEvent){this._onEnd(oEvent);},_onStart:function(oEvent){this._resetTouchInfo();var htInfo=this._getTouchInfo(oEvent);var htParam={element:htInfo[0].el,nX:htInfo[0].nX,nY:htInfo[0].nY,oEvent:oEvent};if(!this._fireCustomEvent('touchStart',htParam)){return;}
this.bStart=true;this._htMoveInfo.nStartX=htInfo[0].nX;this._htMoveInfo.nBeforeX=htInfo[0].nX;this._htMoveInfo.nStartY=htInfo[0].nY;this._htMoveInfo.nBeforeY=htInfo[0].nY;this._htMoveInfo.nStartTime=htInfo[0].nTime;this._htMoveInfo.aStartInfo=htInfo;this._startLongTapTimer(htInfo,oEvent);},_onMove:function(oEvent){if(!this.bStart){return;}
this.bMove=true;var htInfo=this._getTouchInfo(oEvent);var htParam=this._getCustomEventParam(htInfo,false);if(htInfo.length===1){if(this.nMoveType<0||this.nMoveType==3||this.nMoveType==4){this.nMoveType=this._getMoveType(htInfo);}}else{if(this.nMoveType!==8){this.nMoveType=this._getMoveType(htInfo);}}
htParam=this._getCustomEventParam(htInfo,false);if((typeof this._nLongTapTimer!='undefined')&&this.nMoveType!=3){this._deleteLongTapTimer();}
htParam.oEvent=oEvent;var nDis=0;if(this.nMoveType==0){nDis=Math.abs(htParam.nVectorX);}else if(this.nMoveType==1){nDis=Math.abs(htParam.nVectorY);}else{nDis=Math.abs(htParam.nVectorX)+Math.abs(htParam.nVectorY);}
if(nDis<this.option('nMoveThreshold')){return;}
if(!this.fireEvent('touchMove',htParam)){this.bStart=false;return;}
this._htMoveInfo.nBeforeX=htInfo[0].nX;this._htMoveInfo.nBeforeY=htInfo[0].nY;this._htMoveInfo.nBeforeTime=htInfo[0].nTime;},_onEnd:function(oEvent){if(!this.bStart){return;}
var self=this;this._deleteLongTapTimer();if(!this.bMove&&(this.nMoveType!=4)){this.nMoveType=3;}
if(this.nMoveType<0){return;}
var htInfo=this._getTouchInfo(oEvent);if(this._isDblTap(htInfo[0].nX,htInfo[0].nY,htInfo[0].nTime)){clearTimeout(this._nTapTimer);delete this._nTapTimer;this.nMoveType=5;}
var htParam=this._getCustomEventParam(htInfo,true);htParam.oEvent=oEvent;var sMoveType=htParam.sMoveType;if((typeof this._htEventHandler[jindo.m.MOVETYPE[5]]!='undefined'&&(this._htEventHandler[jindo.m.MOVETYPE[5]].length>0))&&(this.nMoveType==3)){this._nTapTimer=setTimeout(function(){self.fireEvent('touchEnd',htParam);self._fireCustomEvent(sMoveType,htParam);delete self._nTapTimer;},this.option('nDoubleTapDuration'));}else{this.fireEvent('touchEnd',htParam);if(this.nMoveType!=4){if(this.nMoveType===8){htParam.sMoveType=jindo.m.MOVETYPE[6];this._fireCustomEvent(jindo.m.MOVETYPE[6],htParam);htParam.sMoveType=jindo.m.MOVETYPE[7];this._fireCustomEvent(jindo.m.MOVETYPE[7],htParam);}else{setTimeout(function(){self._fireCustomEvent(sMoveType,htParam);},0);}}}
this._updateTouchEndInfo(htInfo);this._resetTouchInfo();},_fireCustomEvent:function(sEvent,htOption){return this.fireEvent(sEvent,htOption);},_getCustomEventParam:function(htTouchInfo,bTouchEnd){var sMoveType=jindo.m.MOVETYPE[this.nMoveType];var nDuration=htTouchInfo[0].nTime-this._htMoveInfo.nStartTime;var nVectorX=nVectorY=nMomentumX=nMomentumY=nSpeedX=nSpeedY=nDisX=nDisY=0;nDisX=(this.nMoveType===1)?0:htTouchInfo[0].nX-this._htMoveInfo.nStartX;nDisY=(this.nMoveType===0)?0:htTouchInfo[0].nY-this._htMoveInfo.nStartY;nVectorX=htTouchInfo[0].nX-this._htMoveInfo.nBeforeX;nVectorY=htTouchInfo[0].nY-this._htMoveInfo.nBeforeY;if(bTouchEnd&&(this.nMoveType==0||this.nMoveType==1||this.nMoveType==2)){if(nDuration<=this.option('nMomentumDuration')){nSpeedX=Math.abs(nDisX)/nDuration;nMomentumX=(nSpeedX*nSpeedX)/2;nSpeedY=Math.abs(nDisY)/nDuration;nMomentumY=(nSpeedY*nSpeedY)/2;}}
var htParam={element:htTouchInfo[0].el,nX:htTouchInfo[0].nX,nY:htTouchInfo[0].nY,nVectorX:nVectorX,nVectorY:nVectorY,nDistanceX:nDisX,nDistanceY:nDisY,sMoveType:sMoveType,nStartX:this._htMoveInfo.nStartX,nStartY:this._htMoveInfo.nStartY,nStartTimeStamp:this._htMoveInfo.nStartTime};if((htTouchInfo.length)>1||(this.nMoveType>=6)){htParam.nScale=this._getScale(htTouchInfo);htParam.nRotation=this._getRotation(htTouchInfo);if(htParam.nScale===null){htParam.nScale=this._htMoveInfo.nBeforeScale;}
if(htParam.nRotation===null){htParam.nRotation=this._htMoveInfo.nBeforeRotation;}}
if(htTouchInfo.length>=1){var aX=[];var aY=[];var aElement=[];for(var i=0,nLen=htTouchInfo.length;i<nLen;i++){aX.push(htTouchInfo[i].nX);aY.push(htTouchInfo[i].nY);aElement.push(htTouchInfo[i].el);}
htParam.aX=aX;htParam.aY=aY;htParam.aElement=aElement;}
if(bTouchEnd){htParam.nMomentumX=nMomentumX;htParam.nMomentumY=nMomentumY;htParam.nSpeedX=nSpeedX;htParam.nSpeedY=nSpeedY;htParam.nDuration=nDuration;}
return htParam;},_updateTouchEndInfo:function(htInfo){this.htEndInfo={element:htInfo[0].el,time:htInfo[0].nTime,movetype:this.nMoveType,nX:htInfo[0].nX,nY:htInfo[0].nY};},_deleteLongTapTimer:function(){if(typeof this._nLongTapTimer!='undefined'){clearTimeout(this._nLongTapTimer);delete this._nLongTapTimer;}},_startLongTapTimer:function(htInfo,oEvent){var self=this;if((typeof this._htEventHandler[jindo.m.MOVETYPE[4]]!='undefined')&&(this._htEventHandler[jindo.m.MOVETYPE[4]].length>0)){self._nLongTapTimer=setTimeout(function(){self.fireEvent('longTap',{element:htInfo[0].el,oEvent:oEvent,nX:htInfo[0].nX,nY:htInfo[0].nY});delete self._nLongTapTimer;self.nMoveType=4;},self.option('nLongTapDuration'));}},_onResize:function(){this._setSlope();},_isDblTap:function(nX,nY,nTime){if((typeof this._nTapTimer!='undefined')&&this.nMoveType==3){var nGap=this.option('nTapThreshold');if((Math.abs(this.htEndInfo.nX-nX)<=nGap)&&(Math.abs(this.htEndInfo.nY-nY)<=nGap)){return true;}}
return false;},_setSlope:function(){if(!this.bSetSlope){this._nHSlope=((window.innerHeight/2)/window.innerWidth).toFixed(2)*1;this._nVSlope=(window.innerHeight/(window.innerWidth/2)).toFixed(2)*1;}},setSlope:function(nVSlope,nHSlope){this._nHSlope=nHSlope;this._nVSlope=nVSlope;this.bSetSlope=true;},getSlope:function(){return{nVSlope:this._nVSlope,nHSlope:this._nHSlope}},_resetTouchInfo:function(){for(var x in this._htMoveInfo){this._htMoveInfo[x]=0;}
this._deleteLongTapTimer();this.bStart=false;this.bMove=false;this.nMoveType=-1;},_getMoveTypeBySingle:function(x,y){var nType=this.nMoveType;var nX=Math.abs(this._htMoveInfo.nStartX-x);var nY=Math.abs(this._htMoveInfo.nStartY-y);var nDis=nX+nY;var nGap=this.option('nTapThreshold');if((nX<=nGap)&&(nY<=nGap)){nType=3;}else{nType=-1;}
if(this.option('nSlopeThreshold')<=nDis){var nSlope=parseFloat((nY/nX).toFixed(2),10);if((this._nHSlope===-1)&&(this._nVSlope===-1)){nType=2;}else{if(nSlope<=this._nHSlope){nType=0;}else if(nSlope>=this._nVSlope){nType=1;}else{nType=2;}}}
return nType;},_getMoveTypeByMulti:function(aPos){var nType=-1;if((this.nMoveType===6)||Math.abs(1-this._htMoveInfo.nBeforeScale)>=this.option('nPinchThreshold')){nType=6;}
if((this.nMoveType===7)||Math.abs(0-this._htMoveInfo.nBeforeRotation)>=this.option('nRotateThreshold')){if(nType===6){nType=8;}else{nType=7;}}
if(nType===-1){return this.nMoveType;}
return nType;},_getScale:function(aPos){var nScale=-1;var nDistance=this._getDistance(aPos);if(nDistance<=0){return null;}
if(this._htMoveInfo.nStartDistance===0){nScale=1;this._htMoveInfo.nStartDistance=nDistance;}else{nScale=nDistance/this._htMoveInfo.nStartDistance;}
this._htMoveInfo.nBeforeScale=nScale;return nScale;},_getRotation:function(aPos){var nRotation=-1;var nAngle=this._getAngle(aPos);if(nAngle===null){return null;}
if(this._htMoveInfo.nStartAngle===0){this._htMoveInfo.nStartAngle=nAngle;nRotation=0;}else{nRotation=nAngle-this._htMoveInfo.nStartAngle;}
this._htMoveInfo.nLastAngle=nAngle;this._htMoveInfo.nBeforeRotation=nRotation;return nRotation;},_getMoveType:function(aPos){var nType=this.nMoveType;if(aPos.length===1){nType=this._getMoveTypeBySingle(aPos[0].nX,aPos[0].nY);}else if(aPos.length===2){nType=this._getMoveTypeByMulti(aPos);}
return nType;},_getDistance:function(aPos){if(aPos.length===1){return-1;}
return Math.sqrt(Math.pow(Math.abs(aPos[0].nX-aPos[1].nX),2)+
Math.pow(Math.abs(aPos[0].nY-aPos[1].nY),2));},_getAngle:function(aPos){if(aPos.length===1){return null;}
var deltaX=aPos[0].nX-aPos[1].nX,deltaY=aPos[0].nY-aPos[1].nY;var nAngle=Math.atan2(deltaY,deltaX)*this._radianToDegree;if(this._htMoveInfo.nLastAngle!==null){var nDiff=Math.abs(this._htMoveInfo.nLastAngle-nAngle);var nNext=nAngle+360;var nPrev=nAngle-360;if(Math.abs(nNext-this._htMoveInfo.nLastAngle)<nDiff){nAngle=nNext;}else if(Math.abs(nPrev-this._htMoveInfo.nLastAngle)<nDiff){nAngle=nPrev;}}
return nAngle;},_getTouchInfo:function(oEvent){var aReturn=[];var nTime=oEvent.$value().timeStamp;if(this._hasTouchEvent){var oTouch=oEvent.$value().changedTouches;for(var i=0,nLen=oTouch.length;i<nLen;i++){aReturn.push({el:jindo.m.getNodeElement(oTouch[i].target),nX:oTouch[i].pageX,nY:oTouch[i].pageY,nTime:nTime});}}else{aReturn.push({el:oEvent.element,nX:oEvent.pos().pageX,nY:oEvent.pos().pageY,nTime:nTime});}
return aReturn;},getBaseElement:function(el){return this._el;},_onDeactivate:function(){this._detachEvents();},_onActivate:function(){this._attachEvents();},destroy:function(){this.deactivate();this._el=null;for(var p in this._htMoveInfo){this._htMoveInfo[p]=null;}
this._htMoveInfo=null;for(var p in this.htEndInfo){this.htEndInfo[p]=null;}
this.htEndInfo=null;this.bStart=null;this.bMove=null;this.nMoveType=null;this._nVSlope=null;this._nHSlope=null;this.bSetSlope=null;}}).extend(jindo.UIComponent);jindo.m.DynamicScrollPlugin=jindo.$Class({$init:function(el,htUserOption){this.option({nRatio:1.5,sListElement:"li",sDirection:"V"});this.option(htUserOption||{});this._initVar(el);},_initVar:function(el){this._wel=jindo.$Element(el);this._aListElement=null;this._nStartIdx=-1;this._nEndIdx=-1;this._nRatio=parseInt(this.option("nRatio"),10);this._nPos=-1;this._nSize=-1;this._sDirection=this.option("sDirection");},refresh:function(nPos){var aListElement=this._wel.queryAll(this.option("sListElement"));if(!aListElement){return;}
this._aListElement=[];for(var i=0,nLength=aListElement.length;i<nLength;i++){wel=aListElement[i];this._aListElement.push({el:wel.$value(),wel:wel,htRange:this._getElementPos(wel),sDisplay:wel.css("display"),sPosition:wel.css("position")});}
this._nPos=nPos||0;this._nSize=this._sDirection=="V"?this._wel.height():this._wel.width();this._covertPositionType();},_covertPositionType:function(){var nStartPos=this._getStartBoundary(),nEndPos=this._getEndBoundary();for(var i=0,ht,nLength=this._aListElement.length;i<nLength;i++){ht=this._aListElement[i];if(this._sDirection=="V"){ht.wel.css({"top":ht.htRange.nStartPos+"px","width":"100%"});}else{ht.wel.css({"left":ht.htRange.nStartPos+"px","height":"100%"});}
ht.wel.css("position","absolute");if(ht.htRange.nStartPos<=-nStartPos){this._nStartIdx=i;}else if(ht.htRange.nEndPos<=-nEndPos){ht.el.style.display=ht.sDisplay;this._nEndIdx=i;}else{ht.el.style.display="none";}}},updateListStatus:function(sDirection,nPos){if(!this._aListElement){return;}
this._nPos=nPos;var nStartPos=this._getStartBoundary(),nEndPos=this._getEndBoundary(),nLength=this._aListElement.length,ht,i,nWelPos;if(sDirection=="forward"){for(i=this._nStartIdx+1;i<nLength;i++){ht=this._aListElement[i];nWelPos=ht.htRange.nEndPos;if(nWelPos<-nStartPos){ht.el.style.display="none";this._nStartIdx=i;}else{break;}}
for(i=this._nEndIdx;i<nLength;i++){ht=this._aListElement[i];nWelPos=ht.htRange.nStartPos;if(nWelPos<-nEndPos){ht.el.style.display=ht.sDisplay;this._nEndIdx++;}else{break;}}}else if(sDirection=="backward"){for(i=this._nEndIdx-1;i>=0;i--){ht=this._aListElement[i];nWelPos=ht.htRange.nStartPos;if(nWelPos<-nEndPos){break;}else{ht.el.style.display="none";this._nEndIdx--;}}
for(i=this._nStartIdx;i>=0;i--){ht=this._aListElement[i];nWelPos=ht.htRange.nEndPos;if(nWelPos<-nStartPos){break;}else{ht.el.style.display=ht.sDisplay;this._nStartIdx--;}}}},_getStartBoundary:function(){return this._nPos+(this._nSize*this._nRatio);},_getEndBoundary:function(){return this._nPos-this._nSize-(this._nSize*this._nRatio);},_getElementPos:function(wel){var nStartPos,nEndPos;if(this._sDirection=="V"){nStartPos=wel.offset().top-this._wel.offset().top;nEndPos=nStartPos+wel.height();}else{nStartPos=wel.offset().left-this._wel.offset().left;nEndPos=nStartPos+wel.width();}
return{nStartPos:nStartPos,nEndPos:nEndPos};}}).extend(jindo.Component);jindo.m.SlideEffect=jindo.$Class({sEffectName:"slide",getCommand:function(el,htOption){var sDirection=htOption.sDirection?htOption.sDirection:'left';var htCurOffset=jindo.m.getCssOffset(el);var toX=htCurOffset.left;var toY=htCurOffset.top;var nW,nH,wel;nW=(typeof htOption.nSize!='undefined')?htOption.nSize:this._htLayerInfo['nWidth'];nH=(typeof htOption.nSize!='undefined')?htOption.nSize:this._htLayerInfo['nHeight'];if(sDirection=='up'||sDirection=='down'){toY+=((sDirection=='up')?nH*-1:nH);}
if(sDirection=='left'||sDirection=='right'){toX+=((sDirection=='left')?nW*-1:nW);}
var htTransform={};if(typeof htOption.elBaseLayer!='undefined'){toX=0;toY=0;var welBaseLayer=jindo.$Element(htOption.elBaseLayer);wel=jindo.$Element(el);nH=(typeof htOption.nSize!='undefined')?htOption.nSize:welBaseLayer.height();nW=(typeof htOption.nSize!='undefined')?htOption.nSize:welBaseLayer.width();if(sDirection=='up'||sDirection=='down'){toY=(sDirection=='down')?nH*-1:nH;}
if(sDirection=='left'||sDirection=='right'){toX=(sDirection=='left')?nW:nW*-1;}
toX=toX*-1;toY=toY*-1;}
htTransform["transform"]=this.sTranOpen+toX+'px, '+toY+'px'+this.sTranEnd;var sPosition=this._htLayerInfo["sPosition"];var bAndroid=this.bAndroid;var bAndroid3Up=this.bAndroid3Up;var sClassHighligting=this._htLayerInfo['sClassHighligting'];var bAndroid2_1=this.bAndroid2_1;wel=jindo.$Element(el);return{sTaskName:this.sEffectName+"-"+sDirection,htStyle:htOption.htTo||{},htTransform:htTransform,fCallback:function(){var htCurOffset=jindo.m.getCssOffset(el);var top=wel.css('top').replace('px','')*1;var left=wel.css('left').replace('px','')*1;top=isNaN(top)?0:top;left=isNaN(left)?0:left;if(sPosition=="relative"){wel.css("position",'relative');}else{wel.css("position","absolute");}
var sPrefix=jindo.m.getCssPrefix();wel.css(sPrefix+'Transform','');if(bAndroid3Up){wel.offset();}
wel.$value().style.top=parseInt((top+htCurOffset.top),10)+"px";wel.$value().style.left=parseInt((htCurOffset.left+left),10)+"px";if(bAndroid&&!bAndroid3Up){var elFocus=jindo.$$.getSingle('.'+sClassHighligting,wel.$value());if(elFocus){if(bAndroid2_1){setTimeout(function(){elFocus.focus();},5);}else{elFocus.focus();}}}}};},getBeforeCommand:function(el,htOption){var sDirection=htOption.sDirection?htOption.sDirection:'left';var htBeforeStyle=htOption.htFrom||{};var htTransform={};var wel=jindo.$Element(el);if(typeof htOption.elBaseLayer!='undefined'){var welBaseLayer=jindo.$Element(htOption.elBaseLayer);if(!welBaseLayer.isParentOf(wel)){welBaseLayer.append(wel);var sPosition=wel.css('position');if(!(sPosition=='relative'||sPosition=='absolute')){wel.css('position','absolute');}
wel.css('opacity',0);}
var fromX=0,fromY=0;var nH=welBaseLayer.height();var nW=welBaseLayer.width();if(sDirection=='up'||sDirection=='down'){fromY=(sDirection=='down')?nH*-1:nH;}
if(sDirection=='left'||sDirection=='right'){fromX=(sDirection=='left')?nW:nW*-1;}
welBaseLayer.css('overflow','hidden');htBeforeStyle["left"]=fromX+"px";htBeforeStyle["top"]=fromY+"px";htBeforeStyle["opacity"]=this._htLayerInfo['nOpacity'];}
return{htStyle:htBeforeStyle,htTransform:htTransform};}}).extend(jindo.m.Effect);jindo.m.LayerEffect=jindo.$Class({$init:function(el,htUserOption){this.option({nDuration:250,bActivateOnload:true});this.option(htUserOption||{});this._initVar();this.setLayer(el);this._initTransition();if(this.option("bActivateOnload")){this.activate();}},_htEffect:{'expand':"jindo.m.ExpandEffect",'contract':"jindo.m.ContractEffect","fade":"jindo.m.FadeEffect","pop":"jindo.m.PopEffect","slide":"jindo.m.SlideEffect","flip":"jindo.m.FlipEffect"},_initVar:function(){this._htEffectInstance={};this._htLayerInfo={};this._htWElement={};this.bAndroid=jindo.m.getDeviceInfo().android;this.sClassHighligting='_effct_hide_highlighting_tmp';},_initTransition:function(){this._oTransition=new jindo.m.Transition();},_createEffect:function(sType){if(this._htEffect[sType]&&!this._htEffectInstance[sType]){try{this._htEffectInstance[sType]=eval("new "+this._htEffect[sType]+"()");}catch(e){}
this._htEffectInstance[sType].setLayerInfo(this._htLayerInfo);}},expand:function(htOption){var sType='expand';this._run(sType,htOption);},contract:function(htOption){var sType='contract';this._run(sType,htOption);},fade:function(htOption){var sType="fade";this._run(sType,htOption);},pop:function(htOption){var sType="pop";this._run(sType,htOption);},slide:function(htOption){var sType="slide";this._run(sType,htOption);},flip:function(htOption){var sType="flip";this._run(sType,htOption);},isPlaying:function(){return this._oTransition.isPlaying();},_fireCustomEvent:function(sType,htOption){return this.fireEvent(sType,htOption);},_run:function(sType,htOption){if(!this._isAvailableEffect()){return;}
this._createEffect(sType);if(typeof htOption==='undefined'){htOption={};}
var oEffect=this._htEffectInstance[sType];var el=this.getLayer();var nDuration=(typeof htOption.nDuration==='undefined')?this.option('nDuration'):parseInt(htOption.nDuration,10);var htBefore=oEffect.getBeforeCommand(el,htOption);var htCommand=oEffect.getCommand(el,htOption);if(!this._fireCustomEvent("beforeEffect",{elLayer:el,sEffect:htCommand.sTaskName,nDuration:nDuration})){return;}
if(htBefore){this._oTransition.queue(this.getLayer(),0,htBefore);}
this._oTransition.queue(this.getLayer(),nDuration,htCommand);this._oTransition.start();},setLayer:function(el){this._htWElement["el"]=jindo.$(el);this._htWElement["wel"]=jindo.$Element(this._htWElement["el"]);var elFocus;if(!!this.bAndroid){elFocus=jindo.$$.getSingle('.'+this.sClassHighligting,this._htWElement['el']);if(!elFocus){var sTpl='<a href="javascript:void(0)" style="position:absolute" class="'+this.sClassHighligting+'"></a>';elFocus=jindo.$(sTpl);this._htWElement['wel'].append(elFocus);elFocus.style.opacity='0';elFocus.style.width=0;elFocus.style.height=0;elFocus.style.left="-1000px";elFocus.style.top="-1000px";}}
this.setSize();},stop:function(bAfter){if(typeof bAfter==='undefined'){bAfter=true;}
if(this._oTransition){this._oTransition.stop(bAfter);}},clearEffect:function(bAfter){if(this._oTransition){this._oTransition.clear(bAfter);}},getLayer:function(){return this._htWElement["el"];},setSize:function(){var elToMeasure=this._htWElement['el'].cloneNode(true);var welToMeasure=jindo.$Element(elToMeasure);welToMeasure.opacity(0);this._htWElement['wel'].after(welToMeasure);welToMeasure.show();this._htLayerInfo["nWidth"]=this._htWElement["wel"].width();this._htLayerInfo["nHeight"]=this._htWElement["wel"].height();welToMeasure.css({position:"absolute",top:"0px",left:"0px"});this._htLayerInfo['nMarginLeft']=parseInt(welToMeasure.css('marginLeft'),10);this._htLayerInfo['nMarginTop']=parseInt(welToMeasure.css('marginTop'),10);this._htLayerInfo['nOpacity']=this._htWElement["wel"].opacity();this._htLayerInfo['sPosition']=this._htWElement["wel"].css('position');var sDisplay=this._htWElement['wel'].css('display');sDisplay=((sDisplay==='none')||(sDisplay.length===0))?'block':sDisplay;this._htLayerInfo['sDisplay']=sDisplay;this._htLayerInfo['sClassHighligting']=this.sClassHighligting;welToMeasure.leave();this._setEffectLayerInfo();},_setEffectLayerInfo:function(){for(var p in this._htEffectInstance){this._htEffectInstance[p].setLayerInfo(this._htLayerInfo);}},_onTransitionEnd:function(oCustomEvent){if(oCustomEvent.sTaskName){this._fireCustomEvent("afterEffect",{elLayer:oCustomEvent.element,sEffect:oCustomEvent.sTaskName,nDuration:oCustomEvent.nDuration});}},_onTransitionStop:function(oCustomEvent){if(oCustomEvent.sTaskName){this._fireCustomEvent("stop",{elLayer:oCustomEvent.element,sEffect:oCustomEvent.sTaskName,nDuration:oCustomEvent.nDuration});}},_isAvailableEffect:function(){return this.isActivating();},_onActivate:function(){this._attachEvent();},_onDeactivate:function(){this._detachEvent();},_attachEvent:function(){this._htEvent={};this._htEvent["end"]=jindo.$Fn(this._onTransitionEnd,this).bind();this._htEvent["stop"]=jindo.$Fn(this._onTransitionStop,this).bind();if(this._oTransition){this._oTransition.attach({"end":this._htEvent["end"],"stop":this._htEvent["stop"]});}},_detachEvent:function(){this._htEvent=null;if(this._oTransition){this._oTransition.detachAll();}},destroy:function(){this.deactivate();for(var p in this._htWElement){this._htWElement[p]=null;}
this._htWElement=null;}}).extend(jindo.UIComponent);if(typeof jindo.m.TimingFunction==='undefined'){jindo.m.TimingFunction={};}
jindo.m.TimingFunction._cubicBezier=function(x1,y1,x2,y2){return function(t){var cx=3.0*x1,bx=3.0*(x2-x1)-cx,ax=1.0-cx-bx,cy=3.0*y1,by=3.0*(y2-y1)-cy,ay=1.0-cy-by;function sampleCurveX(t){return((ax*t+bx)*t+cx)*t;}
function sampleCurveY(t){return((ay*t+by)*t+cy)*t;}
function sampleCurveDerivativeX(t){return(3.0*ax*t+2.0*bx)*t+cx;}
function solveCurveX(x,epsilon){var t0,t1,t2,x2,d2,i;for(t2=x,i=0;i<8;i++){x2=sampleCurveX(t2)-x;if(Math.abs(x2)<epsilon){return t2;}
d2=sampleCurveDerivativeX(t2);if(Math.abs(d2)<1e-6){break;}
t2=t2-x2/d2;}
t0=0.0;t1=1.0;t2=x;if(t2<t0){return t0;}
if(t2>t1){return t1;}
while(t0<t1){x2=sampleCurveX(t2);if(Math.abs(x2-x)<epsilon){return t2;}
if(x>x2){t0=t2;}else{t1=t2;}
t2=(t1-t0)*0.5+t0;}
return t2;}
return sampleCurveY(solveCurveX(t,1/200));};};jindo.m.TimingFunction.linear=jindo.m.TimingFunction._cubicBezier(0.0,0.0,1.0,1.0);jindo.m.TimingFunction.ease_out=jindo.m.TimingFunction._cubicBezier(0.0,0.0,0.58,1.0);jindo.m.TimingFunction.ease_in=jindo.m.TimingFunction._cubicBezier(0.42,0.0,1.0,1.0);jindo.m.TimingFunction.ease_in_out=jindo.m.TimingFunction._cubicBezier(0.42,0.0,0.58,1.0);jindo.m.TimingFunction.ease_out_in=jindo.m.TimingFunction._cubicBezier(0.00,0.42,1.0,0.58);jindo.m.TimingFunction.cubicBezier=function(x1,y1,x2,y2){return jindo.m.TimingFunction._cubicBezier(x1,y1,x2,y2);};jindo.m.Transition=jindo.$Class({_aTaskQueue:null,$init:function(htUserOption){this.option({sTransitionTimingFunction:'ease-in-out',bUseTimingFunction:jindo.m._isUseTimingFunction()});this.option(htUserOption||{});this._initVar();this._attachEvent();},_initVar:function(){this._aTaskQueue=[];this._bIsPlaying=false;this._sCssPrefix=jindo.m.getCssPrefix();this._aBeforeStatus=[];if(this._sCssPrefix.length>0){this._sCssPrefix='-'+this._sCssPrefix.toLowerCase()+'-';}
this._bNoUseCss3d=!this.option('bUseTimingFunction');this._nTimerAnimate=null;this._htCurrentTask=null;},start:function(){if((!this.isPlaying())&&this.isExistTask()){this._prepareTask();}},isPlaying:function(){return this._bIsPlaying;},isExistTask:function(){if(!this._aTaskQueue){return false;}
var nLen=this._aTaskQueue.length;bValue=(nLen>0)?true:false;return bValue;},queue:function(elTarget,nDuration,aCommand){var htTask={sType:'style',sTaskName:'',elTarget:elTarget,nDuration:nDuration};htTask.htDefault={};htTask.htStyle=aCommand.htStyle||{};htTask.htTransform=aCommand.htTransform||{};htTask.sTaskName=aCommand.sTaskName||null;htTask.fCallback=aCommand.fCallback;htTask.htDefault['transition-timing-function']=(typeof htTask.htTransform['transition-timing-function']==='undefined')?this._getDefaultTransition().sTransitionTimingFunction:htTask.htTransform['transition-timing-function'];htTask.htDefault['transition-property']=(typeof htTask.htTransform['transition-property']==='undefined')?"all":htTask.htTransform['transition-property'];htTask.htDefault['transition-duration']=nDuration+"ms";this._pushTask(htTask);return this;},stop:function(bAfter){if(!this.isPlaying()){return;}
if(typeof bAfter==='undefined'){bAfter=true;}
if(!this._fireCustomEvent('stop',{element:this._htCurrentTask.elTarget,sTaskName:this._htCurrentTask.sTaskName,nDuration:this._htCurrentTask.nDuration})){return;}
this._stopTransition(bAfter);},clear:function(bStopAfter){this.stop(bStopAfter);this._aTaskQueue=[];},_resume:function(){if(this._htCurrentTask){this._doTask();}},_stopTransition:function(bAfter){this._detachTransitionEnd();this._elCurrent.style[this._sCssPrefix+'transition-property']='none';this._initTransition();if(!bAfter){var nIndex=this._getBeforeStatusElement(this._elCurrent);if(nIndex>-1){jindo.$Element(this._elCurrent).attr('style',this._aBeforeStatus[nIndex].style);}}
this._htCurrentTask=null;this._bIsPlaying=false;},_prepareTask:function(){var htTask=this._popTask();if(htTask===null||!htTask){this._bIsPlaying=false;return;}
this._htCurrentTask=htTask;this._resume();},_pushTask:function(htTask){this._aTaskQueue.push(htTask);},_popTask:function(){if(!this.isExistTask()){return null;}
var htTask=this._aTaskQueue.shift();if(htTask){return htTask;}else{return null;}},_doTask:function(){if(this._htCurrentTask){this._bIsPlaying=true;if(!this._fireCustomEvent('start',{element:this._htCurrentTask.elTarget,sTaskName:this._htCurrentTask.sTaskName,nDuration:this._htCurrentTask.nDuration})){return;}
var el=this._htCurrentTask.elTarget;var wel=jindo.$Element(el);this._elCurrent=el;this._setBeforeStatus(wel);var nDuration=this._htCurrentTask.nDuration;var bAttachEvt=this._bAttachTransitionEvt();if(bAttachEvt){this._attachTransitionEnd(el);}
this._setDefaultTransition(wel,bAttachEvt);var bDiff=false;bDiff=this._setTransform(wel);bDiff=this._setStyle(wel,this._htCurrentTask.htStyle)||bDiff;if(nDuration===0){this._onTransitionEnd();}else{if(!bDiff){var self=this;setTimeout(function(){self._onTransitionEnd();},nDuration);}}}},_setDefaultTransition:function(wel,bAttachEvt){for(var p in this._htCurrentTask.htDefault){var sValue=this._htCurrentTask.htDefault[p];if(!(p.indexOf('duration')>-1&&!bAttachEvt)){wel.$value().style[this._sCssPrefix+p]=sValue;}}},_setStyle:function(wel,htOption){var bDiff=false;for(var p in htOption){var sCurrent=wel.css(p);if(sCurrent!=htOption[p]){bDiff=true;}
wel.css(p,htOption[p]);}
return bDiff;},_setStyleForAndroid:function(){},_setTransform:function(wel){var bDiff=false;if(this._bNoUseCss3d){bDiff=this._setTransformForAnrdoid(wel);}else{bDiff=this._setTransformForIos(wel);}
return bDiff;},_setTransformForIos:function(wel){var bDiff=false;for(var p in this._htCurrentTask.htTransform){var sValue=this._htCurrentTask.htTransform[p];wel.$value().style[this._sCssPrefix+p]=sValue;bDiff=true;}
return bDiff;},_setTransformForAnrdoid:function(wel){var bDiff=false;var el=wel.$value();for(var p in this._htCurrentTask.htTransform){var sValue=this._htCurrentTask.htTransform[p];if(sValue.indexOf('translate')>-1){var nDuration=this._htCurrentTask.nDuration;var reg=new RegExp(/(translate.*)\((.*)\)/);var aMatch=sValue.match(reg);var sPreValue=aMatch[1];var aTemp=aMatch[2].replace(/px/g,'').split(',');var sTransfrom="transform";var htBeforeOffset=jindo.m.getCssOffset(el);var startTime=(new Date()).getTime();var self=this;(function translate(){var now=(new Date()).getTime();if(now>=(startTime+nDuration)){clearTimeout(self._nTimerAnimate);el.style[self._sCssPrefix+sTransfrom]=sValue;self._onTransitionEnd();return;}
var nGap=(now-startTime);var nX=((sPreValue.indexOf('X')>-1)||(aTemp.length>1))?aTemp[0]:null;var nY=null;if(sPreValue.indexOf('Y')>-1){nY=aTemp[0];}else if(aTemp.length>1){nY=aTemp[1];}
var nZ=null;if(sPreValue.indexOf('Z')>-1){nZ=aTemp[0];}else if(aTemp.length>2){nZ=aTemp[2];}
var aText=[];var sX=(nX!==null)?self._getcubicBeziserPosition(htBeforeOffset.left,nX,nDuration,nGap)+"px":null;var sY=(nY!==null)?self._getcubicBeziserPosition(htBeforeOffset.top,nY,nDuration,nGap)+"px":null;var sZ=(nZ!==null)?nZ+"px":null;if(sX!==null){aText.push(sX);}
if(sY!==null){aText.push(sY);}
if(sZ!==null){aText.push(sZ);}
el.style[self._sCssPrefix+sTransfrom]=sPreValue+"("+aText.join(",")+")";self._nTimerAnimate=setTimeout(translate,1);})();}else{wel.$value().style[this._sCssPrefix+p]=sValue;}
bDiff=true;}
return bDiff;},_bAttachTransitionEvt:function(){var bValue=true;if(this._htCurrentTask.nDuration===0){bValue=false;}else{if(this._bNoUseCss3d){for(var p in this._htCurrentTask.htTransform){var sValue=this._htCurrentTask.htTransform[p];if(sValue.indexOf('translate')>-1){bValue=false;}}}}
return bValue;},_setBeforeStatus:function(wel){var nIndex=this._getBeforeStatusElement(wel.$value());if(nIndex>-1){this._aBeforeStatus[nIndex].style=wel.attr('style');}else{this._aBeforeStatus.push({el:wel.$value(),style:wel.attr('style')});}},_getBeforeStatusElement:function(el){var nIndex=-1;for(var i=0,nLen=this._aBeforeStatus.length;i<nLen;i++){if(this._aBeforeStatus[i].el===el){nIndex=i;break;}}
return nIndex;},_getDefaultTransition:function(){return{sTransitionTimingFunction:this.option('sTransitionTimingFunction'),TransitionProperty:'all'};},_fireCustomEvent:function(sName,htParam){return this.fireEvent(sName,htParam);},_onTransitionEnd:function(){this._detachTransitionEnd();this._initTransition();var self=this;if(this._htCurrentTask){var sCallbackType=typeof this._htCurrentTask.fCallback;if(sCallbackType=='function'){if(this._bNoUseCss3d){setTimeout(function(){self._htCurrentTask.fCallback();},5);}else{self._htCurrentTask.fCallback();}}else if(sCallbackType=='object'){var wel=jindo.$Element(this._htCurrentTask.elTarget),p;for(p in this._htCurrentTask.fCallback.htTransform){var sValue=this._htCurrentTask.fCallback.htTransform[p];if(p=='transform'){var sPrefix=this._sCssPrefix+p;var sText=wel.$value().style[sPrefix];if(sText.length>0){sValue=sValue;}}
wel.$value().style[this._sCssPrefix+p]=sValue;}
for(p in this._htCurrentTask.fCallback.htStyle){wel.css(p,this._htCurrentTask.fCallback.htStyle[p]);}}}
if(this._htCurrentTask){this._fireCustomEvent('end',{element:this._htCurrentTask.elTarget,sTaskName:this._htCurrentTask.sTaskName,nDuration:this._htCurrentTask.nDuration});}
setTimeout(function(){self._prepareTask();},10);},_initTransition:function(el){if(typeof el==='undefined'){el=this._elCurrent;}
el.style[this._sCssPrefix+'transition-duration']=null;el.style[this._sCssPrefix+'transition-timing-function']=null;el.style[this._sCssPrefix+'perspective']=null;el.style[this._sCssPrefix+'transform-style']=null;el.style[this._sCssPrefix+'transition-property']=null;},_getcubicBeziserPosition:function(nStart,nEnd,nDuration,nCurrentTime){nStart=nStart*1;nEnd=nEnd*1;var sFunction=this.option('sTransitionTimingFunction').replace(/-/g,'_');var f=jindo.m.TimingFunction[sFunction];var t=nCurrentTime/nDuration;t=(t>1)?1:t;var nCurrent=f(t);var nValue=nStart+((nEnd-nStart)*nCurrent.toFixed(2));return nValue;},_attachTransitionEnd:function(el){this._elTransition=el;jindo.m.attachTransitionEnd(this._elTransition,this._htEvent['transitionEnd']);},_detachTransitionEnd:function(){if(this._elTransition){jindo.m.detachTransitionEnd(this._elTransition,this._htEvent['transitionEnd']);this._elTransition=null;}},_attachEvent:function(){this._htEvent={};this._htEvent['transitionEnd']=jindo.$Fn(this._onTransitionEnd,this).bind();},_detachEvent:function(){this._detachTransitionEnd();this._htEvent=null;},destroy:function(){this._detachEvent();for(var p in this._htWElement){this._htWElement[p]=null;}
this._htWElement=null;this._aTaskQueue=null;this._bIsPlaying=null;this._sCssPrefix=null;this._aBeforeStatus=null;this._bNoUseCss3d=null;this._nTimerAnimate=null;this._htCurrentTask=null;}}).extend(jindo.Component);jindo.m.Flicking=jindo.$Class({$init:function(sId,htUserOption){this.option({bHorizontal:true,nDefaultIndex:0,sClassPrefix:'flick-',sContentClass:'ct',nDuration:100,nFlickThreshold:40,bUseCircular:false,sAnimation:'slide',nFlickDistanceOffset:null,bAutoResize:true,bAutoSize:true,nBounceDuration:100,bUseCss3d:jindo.m._isUseCss3d(true),bUseTimingFunction:jindo.m._isUseTimingFunction(),bUseTranslate:true,bActivateOnload:true});var htInfo=jindo.m.getDeviceInfo();if((typeof htUserOption!=='undefined')&&(typeof htUserOption["sAnimation"]!=='undefined')&&(htUserOption["sAnimation"]==="cover")){if((htInfo.android&&!htInfo.bChrome)&&(parseInt(htInfo.version,10)>=4)&&(htInfo.galaxyS2||htInfo.galaxyNote)){this.option('bUseCss3d',true);}}
this.option(htUserOption||{});this._setWrapperElement(sId);this._initVar();this._createDummyTag();this._initTouch();if(this.option("bActivateOnload")){this.activate();var n=this.option('nDefaultIndex');this.refresh(n,true,false);}},$static:{_htAnimation:{'circular-slide':'jindo.m.CircularSlideFlicking','slide':'jindo.m.SlideFlicking','cover':'jindo.m.CoverFlicking','circular-cover':'jindo.m.CoverFlicking','flip':'jindo.m.FlipFlicking','circular-flip':'jindo.m.FlipFlicking','alignFlip':'jindo.m.AlignFlipFlicking','circular-alignFlip':'jindo.m.AlignFlipFlicking'}},_initVar:function(){this._oTouch=null;this._oFlickingAnimation=null;this._htIndexInfo={nContentIndex:0,nNextContentIndex:0,welElement:this._htWElement.aPanel[0],welNextElement:this._htWElement.aPanel[0],sDirection:null};var htInfo=jindo.m.getDeviceInfo();this._isIos=(htInfo.iphone||htInfo.ipad);this._bAndroid=htInfo.android&&(!htInfo.bChrome);this._nVersion=htInfo.version;this._fnDummyFnc=function(){return false;};this._b3dExecption=this._bAndroid&&(navigator.userAgent.indexOf('LG')>-1)&&(this._nVersion>="4");this._bDummyTagException=(this._bAndroid&&(this._nVersion<"3"));this._bAnimation=false;},_setWrapperElement:function(el){this._htWElement={};el=jindo.$(el);var sClass='.'+this.option('sClassPrefix');this._htWElement.base=jindo.$Element(el);this._htWElement.container=jindo.$Element(jindo.$$.getSingle(sClass+'container',el));var aContents=jindo.$$(sClass+this.option('sContentClass'),el);this._htWElement.aPanel=jindo.$A(aContents).forEach(function(value,index,array){array[index]=jindo.$Element(value);}).$value();},_createDummyTag:function(){if(this._bDummyTagException){this._htWElement.aDummyTag=[];for(var i=0,nLen=this._htWElement.aPanel.length;i<nLen;i++){var wel=this._htWElement.aPanel[i];var elDummyTag=jindo.$$.getSingle("._cflick_dummy_atag_",wel.$value());if(!elDummyTag){elDummyTag=jindo.$("<a href='javascript:void(0);' class='_cflick_dummy_atag_'></a>");elDummyTag.style.position="absolute";elDummyTag.style.left="-1000px";elDummyTag.style.top="-1000px";elDummyTag.style.width=0;elDummyTag.style.height=0;wel.append(elDummyTag);}
this._htWElement.aDummyTag.push(elDummyTag);}}},_focusFixedBug:function(){if(typeof this._htWElement.aDummyTag==='undefined'){return;}
for(var i=0,nLen=this._htWElement.aDummyTag.length;i<nLen;i++){this._htWElement.aDummyTag[i].focus();}},_initTouch:function(){this._oTouch=new jindo.m.Touch(this._htWElement.base.$value(),{nSlopeThreshold:4,nMoveThreshold:0,bActivateOnload:false});},_onStart:function(oCustomEvt){if(this._doFlicking){return;}
if(!this.fireEvent('touchStart',oCustomEvt)){return;}
this._bTouchStart=true;this._clearAnchor();if(this._oFlickingAnimation){this._oFlickingAnimation.onStart();}},_onMove:function(oCustomEvt){var bH=this.option('bHorizontal');var weParent=oCustomEvt.oEvent;if(oCustomEvt.sMoveType===jindo.m.MOVETYPE[0]){if(bH){weParent.stop(jindo.$Event.CANCEL_ALL);}else{return;}}else if(oCustomEvt.sMoveType===jindo.m.MOVETYPE[1]){if(!bH){weParent.stop(jindo.$Event.CANCEL_ALL);}else{return;}}else if(oCustomEvt.sMoveType===jindo.m.MOVETYPE[2]){weParent.stop(jindo.$Event.CANCEL_ALL);}
if(this._doFlicking){return;}
this.fireEvent('touchMove',oCustomEvt);var nDis=bH?oCustomEvt.nDistanceX:oCustomEvt.nDistanceY;var nVector=bH?oCustomEvt.nVectorX:oCustomEvt.nVectorY;var nPos=bH?oCustomEvt.nX:oCustomEvt.nY;if(this._oFlickingAnimation){this._oFlickingAnimation.movePanel(nDis,nVector,nPos,0);}},_onEnd:function(oCustomEvt){if(this._doFlicking){return;}
this._doFlicking=true;var bH=this.option('bHorizontal');if(oCustomEvt.sMoveType===jindo.m.MOVETYPE[0]||oCustomEvt.sMoveType===jindo.m.MOVETYPE[1]||oCustomEvt.sMoveType===jindo.m.MOVETYPE[2]){oCustomEvt.oEvent.stop(jindo.$Event.CANCEL_DEFAULT);}
if(oCustomEvt.sMoveType===jindo.m.MOVETYPE[3]||oCustomEvt.sMoveType===jindo.m.MOVETYPE[4]){this._restoreAnchor();}
var nTime=this.option('nDuration');var htInfo=this._getSnap(oCustomEvt.nDistanceX,oCustomEvt.nDistanceY,nTime);var nDis=bH?oCustomEvt.nDistanceX:oCustomEvt.nDistanceY;var nVector=bH?oCustomEvt.nVectorX:oCustomEvt.nVectorY;var nPos=bH?oCustomEvt.nX:oCustomEvt.nY;if(htInfo.sDirection===null){nTime=this.option('nBounceDuration');if(nDis===0){this._endAnimation(false);return;}}
var htParam={nContentsIndex:this.getContentIndex(),nContentsNextIndex:htInfo.nContentIndex};if(this._bFlickLeft!==null){if(this.option('bHorizontal')){htParam.bLeft=this._bFlickLeft;}else{htParam.bTop=this._bFlickLeft;}}
if(htInfo.sDirection!==null){if(!this.fireEvent('beforeFlicking',htParam)){this._oFlickingAnimation.restorePosition();return;}}
this._htIndexInfo.nNextContentIndex=htInfo.nContentIndex;this._htIndexInfo.welNextElement=htInfo.welElement;this._htIndexInfo.sDirection=htInfo.sDirection;if(this._oFlickingAnimation){this._oFlickingAnimation.movePanel(nDis,nVector,nPos,nTime,true);}
this.fireEvent('touchEnd',oCustomEvt);},_getSnap:function(nDistanceX,nDistanceY,nDuration){var nFinalDis=this.option('bHorizontal')?nDistanceX:nDistanceY;var welElement=this._htIndexInfo.welElement;var nContentIndex=this.getContentIndex();var sDirection=null;if(Math.abs(nFinalDis)>=this.option('nFlickThreshold')){if(nFinalDis<0){welElement=this.getNextElement();nContentIndex=this.getNextIndex();this._bFlickLeft=true;sDirection='next';}else{welElement=this.getPrevElement();nContentIndex=this.getPrevIndex();this._bFlickLeft=false;sDirection='prev';}}
return{elElement:welElement.$value(),welElement:welElement,nContentIndex:nContentIndex,sDirection:sDirection};},_createAnimation:function(sType){if(jindo.m.Flicking._htAnimation[sType]){this._oFlickingAnimation=null;try{this._oFlickingAnimation=eval("new "+jindo.m.Flicking._htAnimation[sType]+"()");}catch(e){}}},setFlickingAnimation:function(sType){if(typeof sType==='undefined'){sType=this.option('sAnimation');if(this.option('bUseCircular')){sType='circular-'+sType;}}
if(!jindo.m.Flicking._htAnimation[sType]){return false;}
if(!this._oFlickingAnimation||(this.option('sAnimation')!==sType)){this.option('sAnimation',sType);if(sType==='slide'){this._oTouch.deactivate();}else{this._oTouch.activate();}
this._createAnimation(sType);if(this._oFlickingAnimation){this._oFlickingAnimation.setOption(this.option());this._oFlickingAnimation.setWrapperElement(this._htWElement);this._oFlickingAnimation.setInstance(this);this._oFlickingAnimation.initAnimation();}}},_endAnimation:function(bFireEvent){var self=this;if(typeof bFireEvent==='undefined'){bFireEvent=true;}
this._doFlicking=false;this._resetIndexInfo(this._htIndexInfo.nNextContentIndex,this._htIndexInfo.welNextElement);if(bFireEvent){this._fireCustomEvent('afterFlicking');}
this._restoreAnchor();this._setAnchorElement();setTimeout(function(){self._createDummyTag();self._focusFixedBug();},5);this._bFlickLeft=null;},_fireCustomEvent:function(sEventName,htParam){if(typeof htParam==='undefined'){htParam={nContentsIndex:this.getContentIndex()};if(this._bFlickLeft){if(this.option('bHorizontal')){htParam.bLeft=this._bFlickLeft;}else{htParam.bTop=this._bFlickLeft;}}}
return this.fireEvent(sEventName,htParam);},refresh:function(n,bResize,bFireEvent){var self=this;if(n<0){return;}
var nMax=this.getTotalContents()-1;if(n>nMax){return;}
if(typeof n==='undefined'){n=this.getContentIndex();}
if(typeof bResize==='undefined'){bResize=true;}
if(typeof bFireEvent==='undefined'){bFireEvent=true;}
if(bFireEvent){if(!this._fireCustomEvent('beforeMove',{nContentsIndex:this.getContentIndex(),nContentsNextIndex:n})){return;}}
if(this._oFlickingAnimation){this._oFlickingAnimation.refresh(n,bResize,bFireEvent);}
this._resetIndexInfo(n);if(bFireEvent){this._fireCustomEvent('move');}
this._createDummyTag();setTimeout(function(){self._focusFixedBug();},100);},_resetIndexInfo:function(n,el){this._htIndexInfo.nContentIndex=n;this._htIndexInfo.nNextContentIndex=n;if(typeof el==='undefined'){el=this.getElement();}
this._htIndexInfo.welElement=el;this._htIndexInfo.welNextElement=el;this._htIndexInfo.sDirection=null;},getIndexByElement:function(el){var bValue=-1;for(var i=0,nLen=this._htWElement.aPanel.length;i<nLen;i++){if(this._htWElement.aPanel[i].$value()===el){bValue=i;break;}}
return bValue;},getElement:function(){var el=null;if(!this.option('bUseCircular')){el=this._htWElement.aPanel[this.getContentIndex()];}else{el=jindo.$Element(this._htIndexInfo.welElement);}
return el;},getContentElement:function(){return this.getElement();},getContentIndex:function(){return this._htIndexInfo.nContentIndex;},getNextElement:function(){var n=this.getNextIndex();if(this.option('bUseCircular')){n=this.getIndexByElement(this.getElement().$value());n=((n+1)>2)?0:(n+1);}
return this._htWElement.aPanel[n];},getPrevElement:function(){var n=this.getPrevIndex();if(this.option('bUseCircular')){n=this.getIndexByElement(this.getElement().$value());n=((n-1)<0)?2:(n-1);}
return this._htWElement.aPanel[n];},getTotalContents:function(){var bValue=this._htWElement.aPanel.length;if(this.option('bUseCircular')){if(typeof this.option('nTotalContents')==='undefined'){bValue=3;}else{bValue=this.option('nTotalContents');}}
return bValue;},getTotalPanels:function(){if(this.option('bUseCircular')){return 3;}else{return this.getTotalContents();}},getPrevIndex:function(){var n=this.getContentIndex()-1;if(this.option('bUseCircular')&&(n<0)){n=this.getTotalContents()-1;}
n=Math.max(0,n);return n;},getNextIndex:function(){var n=this.getContentIndex()+1;var nMax=this.getTotalContents()-1;if(this.option('bUseCircular')&&(n>nMax)){n=0;}
n=Math.min(nMax,n);return n;},moveNext:function(nDuration){if(!this.isActivating()){return;}
if(this._doFlicking){return;}
if(typeof nDuration==='undefined'){nDuration=this.option('nDuration');}
if(this._oFlickingAnimation){this._oFlickingAnimation.moveNext(nDuration);}},movePrev:function(nDuration){if(!this.isActivating()){return;}
if(this._doFlicking){return;}
if(typeof nDuration==='undefined'){nDuration=this.option('nDuration');}
if(this._oFlickingAnimation){this._oFlickingAnimation.movePrev(nDuration);}},_moveTo:function(nIndex,nDuration,bFireEvent,bFireFlickEvent){if(typeof nDuration==='undefined'){nDuration=this.option('nDuration');}
if(typeof bFireEvent==='undefined'){bFireEvent=true;}
if(typeof bFireFlickEvent==='undefined'){bFireFlickEvent=false;}
if(bFireEvent){if(!this._fireCustomEvent('beforeMove',{nContentsIndex:this.getContentIndex(),nContentsNextIndex:nIndex})){return;}}
this._oFlickingAnimation.moveTo(nIndex,nDuration,bFireEvent,bFireFlickEvent);},moveTo:function(nIndex,nDuration,bFireEvent){if((typeof nIndex==='undefined')||(nIndex==this.getContentIndex())){return;}
if(nIndex<0||nIndex>=this.getTotalContents()){return;}
this._moveTo(nIndex,nDuration,bFireEvent,false);},isAnimating:function(){return this._bAnimation;},_setAnchorElement:function(el){if(this._isIos){this._aAnchor=jindo.$$("A",this._htWElement.container.$value());}},_clearAnchor:function(){if(this._aAnchor&&!this._bBlocked){var aClickAddEvent=null;for(var i=0,nILength=this._aAnchor.length;i<nILength;i++){if(this._fnDummyFnc!==this._aAnchor[i].onclick){this._aAnchor[i]._onclick=this._aAnchor[i].onclick;}
this._aAnchor[i].onclick=this._fnDummyFnc;aClickAddEvent=this._aAnchor[i].___listeners___||[];for(var j=0,nJLength=aClickAddEvent.length;j<nJLength;j++){___Old__removeEventListener___.call(this._aAnchor[i],"click",aClickAddEvent[j].listener,aClickAddEvent[j].useCapture);}}
this._bBlocked=true;}},_restoreAnchor:function(){if(this._aAnchor&&this._bBlocked){var aClickAddEvent=null;for(var i=0,nILength=this._aAnchor.length;i<nILength;i++){if(this._fnDummyFnc!==this._aAnchor[i]._onclick){this._aAnchor[i].onclick=this._aAnchor[i]._onclick;}else{this._aAnchor[i].onclick=null;}
aClickAddEvent=this._aAnchor[i].___listeners___||[];for(var j=0,nJLength=aClickAddEvent.length;j<nJLength;j++){___Old__addEventListener___.call(this._aAnchor[i],"click",aClickAddEvent[j].listener,aClickAddEvent[j].useCapture);}}
this._bBlocked=false;}},_onResize:function(evt){this._isFlicking=false;if(this.option('bAutoResize')){var n=this.getIndexByElement(this.getElement().$value());this.refresh(n,true,false);}},_onActivate:function(){this._attachEvent();this._setAnchorElement();if(this._oFlickingAnimation){if(typeof this._oFlickingAnimation._oCore!=='undefined'){this._oFlickingAnimation._oCore.activate();}else{this._oTouch.activate();}}else{this.setFlickingAnimation();}},_onDeactivate:function(){this._detachEvent();if(this._oFlickingAnimation){if(typeof this._oFlickingAnimation._oCore!=='undefined'){this._oFlickingAnimation._oCore.deactivate();}}
this._oTouch.deactivate();},_attachEvent:function(){this._htEvent={};this._htEvent["touchMove"]=jindo.$Fn(this._onMove,this).bind();this._htEvent["touchEnd"]=jindo.$Fn(this._onEnd,this).bind();this._htEvent["touchStart"]=jindo.$Fn(this._onStart,this).bind();this._oTouch.attach("touchStart",this._htEvent["touchStart"]);this._oTouch.attach("touchMove",this._htEvent["touchMove"]);this._oTouch.attach("touchEnd",this._htEvent["touchEnd"]);this._htEvent["rotate"]=jindo.$Fn(this._onResize,this).bind();jindo.m.bindRotate(this._htEvent["rotate"]);this._htEvent["pageshow"]=jindo.$Fn(this._onResize,this).bind();jindo.m.bindPageshow(this._htEvent["pageshow"]);},_detachEvent:function(){this._oTouch.detachAll();jindo.m.unbindRotate(this._htEvent["rotate"]);this._htEvent=null;},destroy:function(){this.deactivate();for(var p in this._htWElement){this._htWElement[p]=null;}
this._htWElement=null;this._oTouch=null;this._oFlickingAnimation=null;for(var p1 in this._htIndexInfo){this._htIndexInfo[p]=null;}
this._isIos=null;this._bAndroid=null;this._nVersion=null;this._fnDummyFnc=null;this._bAnimation=null;}}).extend(jindo.UIComponent);jindo.m.AjaxHistory=jindo.$Class({bHashEvent:false,bPushState:false,_nIntervalId:0,_htLastState:{},$init:function(htUserOption){this.option({nCheckInterval:100,bUseHash:false});this.option(htUserOption||{});},initialize:function(){this._initVar();this._attachEvent();var sHash=this._getHash();if(sHash){this._htLastState=this._getDecodedData(sHash);this.fireEvent("change",{bLoad:true,htHistoryData:this._htLastState});}else{this.fireEvent('load');}
return this;},_initVar:function(){var htInfo=jindo.m.getDeviceInfo();this.bHashEvent='onhashchange'in window;this.bPushState=(typeof window.history!=='undefined')&&(typeof window.history.pushState!=='undefined')&&(typeof window.history.replaceState!=='undefined')&&!((htInfo.iphone||htInfo.ipad)&&(parseFloat(htInfo.version,10)<4.3));this._nIntervalId=0;this._oAgent=jindo.$Agent().navigator();this._bAndroid=htInfo.android;if(this.option('bUseHash')){this.bPushState=false;}},_attachEvent:function(){this._htEvent={};if(this.bPushState){this._htEvent['popstate']={ref:jindo.$Fn(this._onPopState,this).attach(window,'popstate'),el:window};}else if(this.bHashEvent){this._htEvent["hashchange"]={ref:jindo.$Fn(this._onHashChange,this).attach(window,"hashchange"),el:window};}else{clearInterval(this._nIntervalId);this._nIntervalId=setInterval(jindo.$Fn(this._onHashChange,this).bind(),this.option("nCheckInterval"));}},_onPopState:function(event){var state=event.$value().state;if(state){var htData=this._cloneObject(state);if(!this._compareData(htData,this._htLastState)){this._htLastState=htData;this._onChange();}}},_onHashChange:function(){var htData=this._getDecodedData(this._getHash());if(!this._compareData(htData,this._htLastState)){this._htLastState=htData;this._onChange();}},_onChange:function(){this.fireEvent("change",{bLoad:false,htHistoryData:this._htLastState});},addHistory:function(htData,bLoad){if(typeof bLoad==='undefined'){bLoad=false;}
if(htData&&typeof(htData)=="object"&&jindo.$H(htData).length()>0){var sNewHash=this._cloneObject(htData);if(this._compareData(sNewHash,this._htLastState)){return;}
this._htLastState=sNewHash;var sHash=this._getEncodedData(this._htLastState);if(this.bPushState){if(bLoad){this._replaceState(this._htLastState);}else{this._pushState(this._htLastState);}}else{var self=this;if(this._bAndroid){setTimeout(function(){self._setHash(sHash);},0);}else{this._setHash(sHash);}}}},_replaceState:function(htData){history.replaceState(htData,document.title,location.href);},_pushState:function(htData){history.pushState(htData,document.title,location.href);},_setHash:function(sHash){location.hash=sHash;},_compareData:function(htBase,htComparison){if(htBase&&htComparison){if(jindo.$H(htBase).length()==jindo.$H(htComparison).length()){for(var x in htBase){if(typeof(htBase[x])=="object"){if(!arguments.callee(htBase[x],htComparison[x])){return false;}}else{if(htBase[x]!=htComparison[x]){return false;}}}
return true;}else{return false;}}else{return false;}},_getEncodedData:function(htHistoryData){if(htHistoryData){if(typeof(JSON)=="object"&&typeof(JSON.stringify)=="function"){return encodeURIComponent(JSON.stringify(htHistoryData));}else{return encodeURIComponent(jindo.$Json(htHistoryData).toString());}}else{return"";}},_getDecodedData:function(sEncodedHash){try{if(sEncodedHash){var sHashString=decodeURIComponent(sEncodedHash);if(typeof(JSON)=="object"&&typeof(JSON.parse)=="function"){return JSON.parse(sHashString);}else{return jindo.$Json(sHashString).toObject();}}}catch(e){}
return{};},_cloneObject:function(htObj){var hash,newHash;if(htObj){hash=jindo.$Json(htObj).toString();newHash=jindo.$Json(hash).toObject();}else{newHash={};}
return newHash;},_getHash:function(){return this._oAgent.firefox?encodeURIComponent(location.hash.substring(1)):location.hash.substring(1);},_detachEvent:function(){for(var p in this._htEvent){var htTargetEvent=this._htEvent[p];htTargetEvent.ref.detach(htTargetEvent.el,p);}
this._htEvent=null;},destroy:function(){this._detachEvent();clearInterval(this._nIntervalId);this._nIntervalId=null;}}).extend(jindo.Component);jindo.m.Loading=jindo.$Class({$init:function(el,htUserOption){this.option({bActivateOnload:true,nWidth:31,nHeight:31,sDefaultForeground:"black",sDefaultBackground:"transparent",sLoadingText:"로딩중입니다",bUseFoggy:el?false:true,sFoggyColor:"gray",nFoggyOpacity:0.3});this.option(htUserOption||{});this._setWrapperElement(el);if(this.option("bActivateOnload")){this.activate();}},$static:{DELAY:["0","-.9167s","-.833s","-.75s","-.667s","-.5833s","-.5s","-.41667s","-.333s","-.25s","-.1667s","-.0833s"],ANIMATION_STYLE:"_loading_animation_sytle_",CONTAINER_CLASS:"_loading_container_class_"},_setWrapperElement:function(el){this._htWElement={};this._htWElement["base"]=jindo.$Element(jindo.$(el)?jindo.$(el):document.body);this._createLoading();},_createLoading:function(){this._createLoadingStyle();this._htWElement["container"]=jindo.$Element("<div style='zIndex: 1000'>").addClass(jindo.m.Loading.CONTAINER_CLASS);if(this.option("bUseFoggy")){this._createFoggy().appendTo(this._htWElement["container"]);}
this._createLoadingElement();this._htWElement["loadingbox"]=jindo.$Element("<div>").css({"zIndex":1000,"position":"absolute"}).append(this._htWElement["loading"]);if(this.option("sLoadingText")){this._createLoadingText().appendTo(this._htWElement["loadingbox"]);}
this._htWElement["loadingbox"].appendTo(this._htWElement["container"]);},_createFoggy:function(){return this._htWElement["foggy"]=jindo.$Element("<div>").css({position:"absolute",padding:"0px",margin:"0px",border:"0px",backgroundColor:this.option("sFoggyColor"),opacity:this.option("nFoggyOpacity"),width:"100%",height:"100%",left:"0px",top:"0px",zIndex:1000});},_setPosition:function(){var nWidth=this._htWElement["loadingbox"].width(),nHeight=this._htWElement["loadingbox"].height(),htScrollPosition;if(this._isBody()){htScrollPosition=jindo.$Document().scrollPosition();this._htWElement["container"].css({"left":htScrollPosition.left+"px","top":htScrollPosition.top+"px"});this._htWElement["container"].css({width:window.innerWidth+"px",height:window.innerHeight+"px"});}else{if(this._htWElement["container"].width()<nWidth){this._htWElement["container"].width(nWidth);}
if(this._htWElement["container"].height()<nHeight){this._htWElement["container"].height(nHeight);}}
this._htWElement["loadingbox"].css({"top":"50%","left":"50%","margin-left":-parseInt(nWidth/2,10)+"px","margin-top":-parseInt(nHeight/2,10)+"px"});},_isBody:function(){return this._htWElement["base"].isEqual(document.body);},show:function(){if(this.fireEvent("beforeShow")){var aSpan=this._htWElement["loading"].queryAll("span"),sCssPrefix=jindo.m.getCssPrefix();for(var i=0;i<aSpan.length;i++){jindo.$Element(aSpan[i]).css(sCssPrefix+"Animation","loadingfade 1s linear "+jindo.m.Loading.DELAY[i]+" infinite");}
this._attachEvent();this._htWElement["container"].show();this._setPosition();this.fireEvent("show");}},hide:function(){if(this.fireEvent("beforeHide")){var aSpan=this._htWElement["loading"].queryAll("span"),sCssPrefix=jindo.m.getCssPrefix();for(var i=0;i<aSpan.length;i++){jindo.$Element(aSpan[i]).css(sCssPrefix+"Animation","");}
this._detachEvent();this._htWElement["container"].hide();this.fireEvent("hide");}},_onPrevent:function(we){console.log(we.type);we.stop(jindo.$Event.CANCEL_ALL);return false;},_onRotate:function(we){if(this._htWElement["container"].visible()){if(jindo.m.getDeviceInfo().andorid){this._setPosition();}else{this._htWElement["container"].hide();var self=this;setTimeout(function(){self._htWElement["container"].show();self._setPosition();},0);}}},_attachEvent:function(){this._htEvent["rotate"]=jindo.$Fn(this._onRotate,this).bind();this._htEvent["prevent"]=jindo.$Fn(this._onPrevent,this).attach(this._htWElement["container"],"touchstart").attach(this._htWElement["container"],"touchmove");jindo.m.bindRotate(this._htEvent["rotate"]);},_detachEvent:function(){if(this._htEvent["prevent"]){this._htEvent["prevent"].detach(this._htWElement["container"],"touchmove").detach(this._htWElement["container"],"touchstart");}
jindo.m.unbindRotate(this._htEvent["rotate"]);},_createLoadingStyle:function(){if(!jindo.$(jindo.m.Loading.ANIMATION_STYLE)){var elStyle=jindo.$("<style id='"+jindo.m.Loading.ANIMATION_STYLE+"' type='text/css'></style>");document.getElementsByTagName("head")[0].appendChild(elStyle);elStyle.sheet.insertRule("@-webkit-keyframes loadingfade{from{opacity:1}to{opacity:0}}",0);}},_createLoadingElement:function(){var sCssPrefix=jindo.m.getCssPrefix(),aHtml=[];for(var i=0;i<12;i++){aHtml.push("<span style='display:block;position:absolute;top:40%;left:48%;width:11%;height:24%;border-radius:6px;background:");aHtml.push(this.option("sDefaultForeground"));aHtml.push("; opacity:0; -");aHtml.push(sCssPrefix);aHtml.push("-transform:rotate(");aHtml.push(i*30);aHtml.push("deg) translate(0,-140%);'></span>");}
this._htWElement["loading"]=jindo.$Element("<div>").css({"position":"relative","margin":"0 auto"}).html(aHtml.join(""));},refresh:function(){this._htWElement["loading"].css({"width":this.option("nWidth")+"px","height":this.option("nHeight")+"px","background":this.option("sDefaultBackground")});if(this._htWElement["text"]){this._htWElement["text"].html(this.option("sLoadingText"));}},_createLoadingText:function(){return this._htWElement["text"]=jindo.$Element("<div>").css({"margin":"2px 0 0 0","bottom":0,"width":"100%","text-align":"center"});},_onActivate:function(){this._htEvent={};this._htWElement["container"].appendTo(this._htWElement["base"]);if(this._isBody()){this._htWElement["container"].css({"position":"absolute","top":0,"left":0,"width":"100%","height":"100%"}).hide();}else{this._htWElement["container"].css({"position":"relative"}).hide();}
this.refresh();},_onDeactivate:function(){this._detachEvent();this._htWElement["container"].leave();},destroy:function(){this.deactivate();for(var p in this._htWElement){this._htWElement[p]=null;}
this._htWElement=null;}}).extend(jindo.UIComponent);window.requestAnimationFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(callback){return setTimeout(callback,0);};})();window.cancelRequestAnimationFrame=(function(){return window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||clearTimeout;})();jindo.m.CoreScroll=jindo.$Class({$init:function(el,htUserOption){this.option({bActivateOnload:true,bUseHScroll:false,bUseVScroll:true,bUseMomentum:true,nDeceleration:0.0006,nOffsetTop:0,nOffsetBottom:0,nHeight:0,nWidth:0,bUseBounce:true,bUseHighlight:true,sClassPrefix:'scroll_',bUseCss3d:jindo.m._isUseCss3d(),bUseTimingFunction:jindo.m._isUseTimingFunction(),sListElement:'',nRatio:1.5,bUseTranslate:true});this.option(htUserOption||{});this._initVar();this._setWrapperElement(el);if(this.option("bActivateOnload")){this.activate();}},_initVar:function(){var htDeviceInfo=jindo.m.getDeviceInfo();this.isPositionBug=htDeviceInfo.android&&!htDeviceInfo.bChrome;this.isIos=htDeviceInfo.ipad||htDeviceInfo.iphone;this.nVersion=parseFloat(htDeviceInfo.version.substr(0,3));this.sCssPrefix=jindo.m.getCssPrefix();this.sTranOpen=null;this.sTranEnd=null;this.nWrapperW=null;this.nWrapperH=null;this.nScrollW=null;this.nScrollH=null;this.nMaxScrollLeft=null;this.nMaxScrollTop=null;this.nMinScrollTop=null;this.bUseHScroll=null;this.bUseVScroll=null;this._nLeft=0;this._nTop=0;this.bUseHighlight=this.option("bUseHighlight");this._aAni=[];this._nAniTimer=null;this._nFixePositionBugTimer=null;this._oTouch=null;this._oDynamicScrollPlugin=null;this._bUseDynamicScroll=false;this._isAnimating=false;this._isControling=false;this._isStop=false;if(this.option("sListElement")){this.option("bUseCss3d",false);}
this._setTrans();if(this.bUseHighlight){if(this.isPositionBug){this._elDummyTag=null;}
if(this.isIos){this._aAnchor=null;this._fnDummyFnc=function(){return false;};this._bBlocked=false;}}},_setTrans:function(){if(this.option("bUseCss3d")){this.sTranOpen="3d(";this.sTranEnd=",0)";}else{this.sTranOpen="(";this.sTranEnd=")";}},getCurrentPos:function(){return{nTop:this._nTop,nLeft:this._nLeft};},setLayer:function(el){this._htWElement["wrapper"]=jindo.$Element(el);this._htWElement["wrapper"].css("overflow","hidden");if(this._htWElement["wrapper"].css("position")=="static"){this._htWElement["wrapper"].css("position","relative");}
if(!this.bUseHighlight){this._htWElement["wrapper"].css(this.sCssPrefix+"TapHighlightColor","rgba(0,0,0,0)");}
this.setScroller();},setScroller:function(){this._htWElement["scroller"]=this._htWElement["wrapper"].first();this._htWElement["scroller"].css({"position":"absolute","zIndex":1,"left":0,"top":0});if(this.option("bUseTranslate")||this.option("bUseCss3d")){this._htWElement["scroller"].css(this.sCssPrefix+"TransitionProperty","-webkit-transform").css(this.sCssPrefix+"Transform","translate"+this.sTranOpen+"0,0"+this.sTranEnd);}
if(this.option("bUseTimingFunction")){this._htWElement["scroller"].css(this.sCssPrefix+"TransitionTimingFunction","cubic-bezier(0.33,0.66,0.66,1)");}
if(this.isPositionBug&&this.bUseHighlight&&this.nVersion<3){this._elDummyTag=this._htWElement["scroller"].query("._scroller_dummy_atag_");if(!this._elDummyTag){this._elDummyTag=jindo.$("<a href='javascript:void(0);' style='position:absolute;height:0px;width:0px;' class='_scroller_dummy_atag_'></a>");this._htWElement["scroller"].append(this._elDummyTag);}}},_setWrapperElement:function(el){this._htWElement={};this.setLayer(el);},refresh:function(bNoRepos){if(!this.isActivating()){return;}
if(this.option("nWidth")){this._htWElement["wrapper"].width(parseInt(this.option("nWidth"),10));}
if(this.option("nHeight")){this._htWElement["wrapper"].height(parseInt(this.option("nHeight"),10));}
this.nWrapperW=this._htWElement["wrapper"].width()-parseInt(this._htWElement["wrapper"].css("border-left-width"),10)-parseInt(this._htWElement["wrapper"].css("border-right-width"),10);this.nWrapperH=this._htWElement["wrapper"].height()-parseInt(this._htWElement["wrapper"].css("border-top-width"),10)-parseInt(this._htWElement["wrapper"].css("border-bottom-width"),10);this.nScrollW=this._htWElement["scroller"].width();this.nScrollH=this._htWElement["scroller"].height()-this.option("nOffsetBottom");this.nMaxScrollLeft=this.nWrapperW-this.nScrollW;this.nMaxScrollTop=this.nWrapperH-this.nScrollH;this.nMinScrollTop=-this.option("nOffsetTop");if(this.bUseHighlight&&this.isIos){this._aAnchor=jindo.$$("A",this._htWElement["scroller"].$value());}
this.bUseHScroll=this.option("bUseHScroll")&&(this.nWrapperW<=this.nScrollW);this.bUseVScroll=this.option("bUseVScroll")&&(this.nWrapperH<=this.nScrollH);if(this.bUseHScroll&&!this.bUseVScroll){this._htWElement["scroller"].$value().style["height"]="100%";}
if(!this.bUseHScroll&&this.bUseVScroll){this._htWElement["scroller"].$value().style["width"]="100%";}
this._bUseDynamicScroll=false;if(this.option("sListElement")&&!(this.bUseVScroll&&this.bUseHScroll)){var nRange=this.option("nRatio")*2;if(this.bUseVScroll&&(this.nScrollH>(this.nWrapperH*nRange))){this._createDynamicScrollPlugin("V");}else if(this.bUseHScroll&&(this.nScrollW>(this.nWrapperW*nRange))){this._createDynamicScrollPlugin("H");}}
if(!this.bUseHScroll&&!this.bUseVScroll){this._fixPositionBug();}
if(!bNoRepos){this.restorePos(0);}},_createDynamicScrollPlugin:function(sDirection){if(!this._oDynamicScrollPlugin){this._oDynamicScrollPlugin=new jindo.m.DynamicScrollPlugin(this._htWElement["wrapper"],{nRatio:this.option("nRatio"),sListElement:this.option("sListElement"),sDirection:sDirection});}
this._oDynamicScrollPlugin.refresh(sDirection=="V"?this._nTop:this._nLeft);this.option("bUseTimingFunction",false);this._bUseDynamicScroll=true;},_setPos:function(nLeft,nTop){var sDirection;nLeft=this.bUseHScroll?nLeft:0;nTop=this.bUseVScroll?nTop:0;if(this._bUseDynamicScroll){sDirection=this._checkDirection(nLeft,nTop);}
if(this._fireEvent("beforePosition")){this._isControling=true;this._nLeft=nLeft;this._nTop=nTop;if(this._bUseDynamicScroll){this._oDynamicScrollPlugin.updateListStatus(sDirection,this.bUseVScroll?this._nTop:this._nLeft);}
if(this.option("bUseTranslate")){if(this.bUseHighlight&&this.isPositionBug){var htStyleOffset=this.getStyleOffset(this._htWElement["scroller"]);nLeft-=htStyleOffset.left;nTop-=htStyleOffset.top;}
this._htWElement["scroller"].css(this.sCssPrefix+"Transform","translate"+this.sTranOpen+nLeft+"px, "+nTop+"px"+this.sTranEnd);}else{this._htWElement["scroller"].css({"left":nLeft+"px","top":nTop+"px"});}
this._fireEvent("position");}},_checkDirection:function(nLeft,nTop){var nBeforePos=this.bUseVScroll?this._nTop:this._nLeft,nAfterPos=this.bUseVScroll?nTop:nLeft,sDirection;if(nBeforePos>nAfterPos){sDirection="forward";}else{sDirection="backward";}
return sDirection;},restorePos:function(nDuration){if(!this.bUseHScroll&&!this.bUseVScroll){return;}
var nNewLeft=this.getPosLeft(this._nLeft),nNewTop=this.getPosTop(this._nTop);if(nNewLeft===this._nLeft&&nNewTop===this._nTop){this._isControling=false;this._fireEvent("afterScroll");this._fixPositionBug();return;}else{this.scrollTo(nNewLeft,nNewTop,nDuration);}},_getMomentum:function(nDistance,nSpeed,nMomentum,nSize,nMaxDistUpper,nMaxDistLower){var nDeceleration=this.option("nDeceleration"),nNewDist=nMomentum/nDeceleration,nNewTime=0,nOutsideDist=0;if(nDistance<0&&nNewDist>nMaxDistUpper){nOutsideDist=nSize/(6/(nNewDist/nSpeed*nDeceleration));nMaxDistUpper=nMaxDistUpper+nOutsideDist;nSpeed=nSpeed*nMaxDistUpper/nNewDist;nNewDist=nMaxDistUpper;}else if(nDistance>0&&nNewDist>nMaxDistLower){nOutsideDist=nSize/(6/(nNewDist/nSpeed*nDeceleration));nMaxDistLower=nMaxDistLower+nOutsideDist;nSpeed=nSpeed*nMaxDistLower/nNewDist;nNewDist=nMaxDistLower;}
nNewDist=nNewDist*(nDistance>0?-1:1);nNewTime=nSpeed/nDeceleration;return{nDist:nNewDist,nTime:Math.round(nNewTime)};},_stop:function(){if(this.option("bUseTimingFunction")){jindo.m.detachTransitionEnd(this._htWElement["scroller"].$value(),this._htEvent["TransitionEnd"]);}else{cancelRequestAnimationFrame(this._nAniTimer);}
this._aAni=[];this._isAnimating=false;},scrollTo:function(nLeft,nTop,nDuration){this._stop();nLeft=this.bUseHScroll?nLeft:0;nTop=this.bUseVScroll?nTop:0;this._aAni.push({nLeft:nLeft,nTop:nTop,nDuration:nDuration||0});this._animate();},isMoving:function(){return this._isControling;},_animate:function(){var self=this,oStep;if(this._isAnimating){return;}
if(!this._aAni.length){this.restorePos(300);return;}
do{oStep=this._aAni.shift();if(!oStep){return;}}while(oStep.nLeft==this._nLeft&&oStep.nTop==this._nTop);if(oStep.nDuration==0){if(this.option("bUseTimingFunction")){this._transitionTime(0);}
this._setPos(oStep.nLeft,oStep.nTop);this._animate();}else{this._isAnimating=true;if(this.option("bUseTimingFunction")){this._transitionTime(oStep.nDuration);this._setPos(oStep.nLeft,oStep.nTop);this._isAnimating=false;jindo.m.attachTransitionEnd(this._htWElement["scroller"].$value(),this._htEvent["TransitionEnd"]);}else{var startTime=(new Date()).getTime(),nStartLeft=this._nLeft,nStartTop=this._nTop;(function animate(){var now=(new Date()).getTime(),nEaseOut;if(now>=startTime+oStep.nDuration){self._setPos(oStep.nLeft,oStep.nTop);self._isAnimating=false;self._animate();return;}
now=(now-startTime)/oStep.nDuration-1;nEaseOut=Math.sqrt(1-Math.pow(now,2));self._setPos((oStep.nLeft-nStartLeft)*nEaseOut+nStartLeft,(oStep.nTop-nStartTop)*nEaseOut+nStartTop);if(self._isAnimating){self._nAniTimer=requestAnimationFrame(animate);}})();}}},_transitionTime:function(nDuration){nDuration+='ms';this._htWElement["scroller"].css(this.sCssPrefix+"TransitionDuration",nDuration);this._fireEventSetDuration(nDuration);},_clearAnchorForIos:function(){if(this.isIos&&this._aAnchor&&!this._bBlocked){var aClickAddEvent=null;for(var i=0,nILength=this._aAnchor.length;i<nILength;i++){if(!this._aAnchor[i].___isClear___){if(this._fnDummyFnc!==this._aAnchor[i].onclick){this._aAnchor[i]._onclick=this._aAnchor[i].onclick;}
this._aAnchor[i].onclick=this._fnDummyFnc;this._aAnchor[i].___isClear___=true;aClickAddEvent=this._aAnchor[i].___listeners___||[];for(var j=0,nJLength=aClickAddEvent.length;j<nJLength;j++){___Old__removeEventListener___.call(this._aAnchor[i],"click",aClickAddEvent[j].listener,aClickAddEvent[j].useCapture);}}}
this._bBlocked=true;}},_restoreAnchorForIos:function(){if(this.isIos&&this._aAnchor&&this._bBlocked){var aClickAddEvent=null;for(var i=0,nILength=this._aAnchor.length;i<nILength;i++){if(this._aAnchor[i].___isClear___){if(this._fnDummyFnc!==this._aAnchor[i]._onclick){this._aAnchor[i].onclick=this._aAnchor[i]._onclick;}else{this._aAnchor[i].onclick=null;}
this._aAnchor[i].___isClear___=null;aClickAddEvent=this._aAnchor[i].___listeners___||[];for(var j=0,nJLength=aClickAddEvent.length;j<nJLength;j++){___Old__addEventListener___.call(this._aAnchor[i],"click",aClickAddEvent[j].listener,aClickAddEvent[j].useCapture);}}}
this._bBlocked=false;}},_stopScroll:function(){var htCssOffset=jindo.m.getCssOffset(this._htWElement["scroller"].$value()),htStyleOffset={left:0,top:0},nTop,nLeft;if(this.isPositionBug&&this.bUseHighlight||!this.option("bUseTranslate")){htStyleOffset=this.getStyleOffset(this._htWElement["scroller"]);}
nLeft=htCssOffset.left+htStyleOffset.left;nTop=htCssOffset.top+htStyleOffset.top;if(nLeft!==this._nLeft||nTop!==this._nTop){this._stop();this._isStop=true;this._setPos(this.getPosLeft(nLeft),this.getPosTop(nTop));this._isControling=false;this._fireEvent("afterScroll");this._fixPositionBug();}},getStyleOffset:function(wel){var nLeft=parseInt(wel.css("left"),10),nTop=parseInt(wel.css("top"),10);nLeft=isNaN(nLeft)?0:nLeft;nTop=isNaN(nTop)?0:nTop;return{left:nLeft,top:nTop};},getPosLeft:function(nPos){return(nPos>=0?0:(nPos<=this.nMaxScrollLeft?this.nMaxScrollLeft:nPos));},getPosTop:function(nPos){return(nPos>=this.nMinScrollTop?this.nMinScrollTop:(nPos<=this.nMaxScrollTop?this.nMaxScrollTop:nPos));},_fireEventSetDuration:function(nDuration){this.fireEvent("setDuration",{nDuration:nDuration,bUseHScroll:this.bUseHScroll,bUseVScroll:this.bUseVScroll});},_fireEventbeforeScroll:function(htParam){return this.fireEvent("beforeScroll",htParam);},_fireEventScroll:function(htParam){this.fireEvent("scroll",htParam);},_fireEvent:function(sType){return this.fireEvent(sType,{nLeft:this._nLeft,nTop:this._nTop,nMaxScrollLeft:this.nMaxScrollLeft,nMaxScrollTop:this.nMaxScrollTop});},_fireTouchEvent:function(sType,we){return this.fireEvent(sType,{nLeft:this._nLeft,nTop:this._nTop,nMaxScrollLeft:this.nMaxScrollLeft,nMaxScrollTop:this.nMaxScrollTop,oEvent:we});},_onStart:function(we){this._clearFixPositionBug();if(this._fireTouchEvent("beforeTouchStart",we)){this._clearAnchorForIos();this._isAnimating=false;this._isControling=true;this._isStop=false;if(this.option("bUseTimingFunction")){this._transitionTime(0);}
this._stopScroll();this._fireTouchEvent("touchStart",we);}},_onMove:function(we){var weParent=we.oEvent;if(we.sMoveType===jindo.m.MOVETYPE[0]){if(this.bUseHScroll){if(!this.option("bUseBounce")&&((this._nLeft>=0&&we.nVectorX>0)||(this._nLeft<=this.nMaxScrollLeft&&we.nVectorX<0))){this._forceRestore(we);return;}else{weParent.stop(jindo.$Event.CANCEL_ALL);}}else{return true;}}else if(we.sMoveType===jindo.m.MOVETYPE[1]){if(this.bUseVScroll){if(!this.option("bUseBounce")&&((this._nTop>=this.nMinScrollTop&&we.nVectorY>0)||(this._nTop<=this.nMaxScrollTop&&we.nVectorY<0))){this._forceRestore(we);return;}else{weParent.stop(jindo.$Event.CANCEL_ALL);}}else{return true;}}else if(we.sMoveType===jindo.m.MOVETYPE[2]){weParent.stop(jindo.$Event.CANCEL_ALL);}else{weParent.stop(jindo.$Event.CANCEL_ALL);return true;}
if(this._fireTouchEvent("beforeTouchMove",we)){var nNewLeft,nNewTop;this._clearFixPositionBug();if(this.option("bUseBounce")){nNewLeft=this._nLeft+(this._nLeft>=0||this._nLeft<=this.nMaxScrollLeft?we.nVectorX/2:we.nVectorX);nNewTop=this._nTop+(this._nTop>=this.nMinScrollTop||this._nTop<=this.nMaxScrollTop?we.nVectorY/2:we.nVectorY);if(this.bUseVScroll&&we.nY<=30&&!this.bUseHScroll){this._forceRestore(we);return;}}else{nNewLeft=this.getPosLeft(this._nLeft+we.nVectorX);nNewTop=this.getPosTop(this._nTop+we.nVectorY);}
this._setPos(nNewLeft,nNewTop);this._fireTouchEvent("touchMove",we);}},_onEnd:function(we){if(!this._fireTouchEvent("beforeTouchEnd",we)){return;}
this._clearFixPositionBug();if(we.sMoveType===jindo.m.MOVETYPE[0]||we.sMoveType===jindo.m.MOVETYPE[1]||we.sMoveType===jindo.m.MOVETYPE[2]){this._endForScroll(we);if(this.isIos||this.nVersion<4.1){we.oEvent.stop(jindo.$Event.CANCEL_DEFAULT);}}else{this._isControling=false;if(!this._isStop){if(this.bUseHighlight){this._restoreAnchorForIos();}}}
this._fireTouchEvent("touchEnd",we);},_forceRestore:function(we){we.nMomentumX=we.nMomentumY=null;this._endForScroll(we);this._clearFixPositionBug();},_endForScroll:function(we){var htMomentumX={nDist:0,nTime:0},htMomentumY={nDist:0,nTime:0},htParam={nMomentumX:we.nMomentumX,nMomentumY:we.nMomentumY,nDistanceX:we.nDistanceX,nDistanceY:we.nDistanceY,nLeft:this._nLeft,nTop:this._nTop};if(this.option("bUseMomentum")&&(we.nMomentumX||we.nMomentumY)){if(this.bUseHScroll){htMomentumX=this._getMomentum(-we.nDistanceX,we.nSpeedX,we.nMomentumX,this.nWrapperW,-this._nLeft,-this.nMaxScrollLeft+this._nLeft);}
if(this.bUseVScroll){htMomentumY=this._getMomentum(-we.nDistanceY,we.nSpeedY,we.nMomentumY,this.nWrapperH,-this._nTop,-this.nMaxScrollTop+this._nTop);}
htParam.nNextLeft=this._nLeft+htMomentumX.nDist;htParam.nNextTop=this._nTop+htMomentumY.nDist;htParam.nTime=Math.max(Math.max(htMomentumX.nTime,htMomentumY.nTime),10);if(this._fireEventbeforeScroll(htParam)){if(this.option("bUseBounce")){this.scrollTo(htParam.nNextLeft,htParam.nNextTop,htParam.nTime);}else{this.scrollTo(this.getPosLeft(htParam.nNextLeft),this.getPosTop(htParam.nNextTop),htParam.nTime);}
this._fireEventScroll(htParam);}}else{htParam.nNextLeft=this._nLeft;htParam.nNextTop=this._nTop;htParam.nTime=0;if(this._fireEventbeforeScroll(htParam)){if(this._nLeft!==htParam.nNextLeft||this._nTop!==htParam.nNextTop){this.scrollTo(htParam.nNextLeft,htParam.nNextTop,htParam.nTime);}else{this.restorePos(300);}
this._fireEventScroll(htParam);}}},_onTransitionEnd:function(we){jindo.m.detachTransitionEnd(this._htWElement["scroller"].$value(),this._htEvent["TransitionEnd"]);this._animate();},_onDocumentStart:function(we){if(this._htWElement["wrapper"].visible()){if(this._htWElement["wrapper"].isChildOf(we.element)){return true;}else{this._stopScroll();}}},_onActivate:function(){if(!this._oTouch){this._oTouch=new jindo.m.Touch(this._htWElement["wrapper"].$value(),{nMoveThreshold:0,nMomentumDuration:(jindo.m.getDeviceInfo().android?500:200),nTapThreshold:1,nSlopeThreshold:5});}else{this._oTouch.activate();}
this._attachEvent();this.refresh();},_onDeactivate:function(){this._detachEvent();this._oTouch.deactivate();},_attachEvent:function(){this._htEvent={};this._htEvent["touchStart"]=jindo.$Fn(this._onStart,this).bind();this._htEvent["touchMove"]=jindo.$Fn(this._onMove,this).bind();this._htEvent["touchEnd"]=jindo.$Fn(this._onEnd,this).bind();this._htEvent["TransitionEnd"]=jindo.$Fn(this._onTransitionEnd,this).bind();this._htEvent["document"]=jindo.$Fn(this._onDocumentStart,this).attach(document,"touchstart");this._oTouch.attach({touchStart:this._htEvent["touchStart"],touchMove:this._htEvent["touchMove"],touchEnd:this._htEvent["touchEnd"]});},_fixPositionBug:function(){if(this.isPositionBug&&this.bUseHighlight&&this.option("bUseTranslate")){var self=this;this._clearFixPositionBug();this._nFixePositionBugTimer=setTimeout(function(){if(self._htWElement&&self._htWElement["scroller"]){self.makeStylePos(self._htWElement["scroller"]);if(self.nVersion<3){self._elDummyTag.focus();}}},200);}},makeStylePos:function(wel){var ele=wel.$value();var htCssOffset=jindo.m.getCssOffset(ele);var htScrollOffset=wel.offset();if(this.nVersion>=4){ele.style[this.sCssPrefix+"Transform"]="translate"+this.sTranOpen+"0px, 0px"+this.sTranEnd;}else{ele.style[this.sCssPrefix+"Transform"]=null;}
ele.style[this.sCssPrefix+"TransitionDuration"]=null;wel.offset(htCssOffset.top+htScrollOffset.top,htCssOffset.left+htScrollOffset.left);},_clearFixPositionBug:function(){if(this.isPositionBug&&this.bUseHighlight){clearTimeout(this._nFixePositionBugTimer);this._nFixePositionBugTimer=-1;}},_detachEvent:function(){jindo.m.detachTransitionEnd(this._htWElement["scroller"].$value(),this._htEvent["TransitionEnd"]);this._htEvent["document"].detach(document,"touchstart");this._oTouch.detachAll();if(this._elDummyTag){this._htWElement["scroller"].remove(this._elDummyTag);}},destroy:function(){this.deactivate();for(var p in this._htWElement){this._htWElement[p]=null;}
this._htWElement=null;this._oTouch.destroy();delete this._oTouch;}}).extend(jindo.UIComponent);jindo.m.PopEffect=jindo.$Class({sEffectName:"pop",getCommand:function(el,htOption){var sDirection=htOption.sDirection?htOption.sDirection:'in';var htStyle=htOption.htTo||{};if(typeof htStyle["opacity"]==='undefined'){htStyle["opacity"]=(sDirection=='in')?1:0.1;}
var nScale=(sDirection=='in')?1:((this.bIos3||this.bAndroid3Up)?0.1:0);var htCallback={};if(sDirection=='out'){htCallback.htStyle={};htCallback.htStyle["display"]="none";htCallback.htStyle["opacity"]=this._htLayerInfo['nOpacity'];htCallback.htTransform={};htCallback.htTransform["transform"]="scale(1)";}
var sTransform='scale('+nScale+')';if(this.bAndroid3Up){sTransform+=' scaleZ(1.0)';}
return{sTaskName:this.sEffectName+"-"+sDirection,htStyle:htStyle,htTransform:{'transform':sTransform,'transform-origin':'50% 50%'},fCallback:htCallback};},getBeforeCommand:function(el,htOption){var sDirection=htOption.sDirection?htOption.sDirection:'in';var htBeforeStyle=htOption.htFrom||{};if(typeof htBeforeStyle["opacity"]==='undefined'){htBeforeStyle["opacity"]=(sDirection=='in')?0.1:1;}
htBeforeStyle["display"]=this._htLayerInfo['sDisplay'];var nScale=(sDirection=='in')?((this.bIos3||this.bAndroid3Up)?0.1:0):1;var sTransform='scale('+nScale+')';if(this.bAndroid3Up){sTransform+=' scaleZ(1.0)';}
return{htStyle:htBeforeStyle,htTransform:{'transform':sTransform,'transform-origin':'50% 50%'}};}}).extend(jindo.m.Effect);jindo.m.FlipEffect=jindo.$Class({sEffectName:"flip",getCommand:function(el,htOption){var sDirection=htOption.sDirection?htOption.sDirection:"left";var sCoord='Y';if(sDirection=='up'||sDirection=='down'){sCoord='X';}
var htStyle=htOption.htTo||{};var welFrom=htOption.elFlipFrom?jindo.$Element(htOption.elFlipFrom):jindo.$Element(el);var welTo=htOption.elFlipTo?jindo.$Element(htOption.elFlipTo):null;var htTo=this._getCssRotate(this._getCssTransfrom(welFrom));htTo[sCoord]=htTo[sCoord]+((sDirection=='left'||sDirection=='down')?180*-1:180);var sTransfrom='rotateX('+htTo.X+'deg) rotateY('+htTo.Y+'deg)';if(welTo){welTo.$value().style[this._sCssPrefix+"Transform"]='rotate'+sCoord+'(0deg)';sTransfrom='rotate'+sCoord+'(0deg)';}
return{sTaskName:this.sEffectName+"-"+sDirection,htStyle:htStyle,htTransform:{"transform-style":"preserve-3d","transform":sTransfrom}};},getBeforeCommand:function(el,htOption){var sDirection=htOption.sDirection?htOption.sDirection:"left";var htBeforeStyle=htOption.htFrom||{};var sCoord="Y",nFrom=0;if(sDirection=='up'||sDirection=='down'){sCoord="X";}
var welFrom=htOption.elFlipFrom?jindo.$Element(htOption.elFlipFrom):jindo.$Element(el);var welTo=htOption.elFlipTo?jindo.$Element(htOption.elFlipTo):null;var elParent=welFrom.$value().parentNode;elParent.style.webkitPerspective='1200';var htFrom=this._getCssRotate(this._getCssTransfrom(welFrom));var sTransfrom='rotateX('+htFrom.X+'deg) rotateY('+htFrom.Y+'deg)';if(welTo){welTo.$value().style[this._sCssPrefix+"Transform"]='rotate'+sCoord+'(-180deg)';sTransfrom='rotate'+sCoord+'(-180deg)';}
return{htStyle:htBeforeStyle,htTransform:{"perspective":"1200","transform-style":"preserve-3d","transform":sTransfrom}};},_getCssRotate:function(str){var sRotate=str;var htReturn={X:0,Y:0};if(!sRotate){return htReturn;}
var aTemp=sRotate.match(/rotateX\((\-?\d*)deg/);if(aTemp&&aTemp.length>1){htReturn['X']=aTemp[1]*1;if(htReturn['X']%360==0){htReturn['X']=0;}}
aTemp=sRotate.match(/rotateY\((\-?\d*)deg/);if(aTemp&&aTemp.length>1){htReturn['Y']=aTemp[1]*1;if(htReturn['Y']%360==0){htReturn['Y']=0;}}
return htReturn;},_getCssTransfrom:function(wel){return wel.css(this._sCssPrefix+"Transform")||"";}}).extend(jindo.m.Effect);jindo.m.DragArea=jindo.$Class({$init:function(el,htUserOption){this.option({sClassPrefix:'drag-',bFlowOut:false,nThreshold:10,nMoveThreshold:3,bActivateOnload:true});this.option(htUserOption||{});this._initVar();this._setWrapperElement(el);this._initTouch();this._setAnchorElement();if(this.option("bActivateOnload")){this.activate();}},_initVar:function(){this._oTouch=null;this._sDragClass='.'+this.option('sClassPrefix')+"dragging";this._sHandleClass='.'+this.option('sClassPrefix')+"handle";this._htInfo={elDrag:null,elHandle:null,nStartX:null,nStartY:null,nX:null,nY:null,bDragStart:false,nCount:0,bPrepared:false};this._sCssUserSelect="-"+jindo.m.getCssPrefix()+"-user-select";this._sCssUserSelectValue=document.body.style[this._sCssUserSelect];var htInfo=jindo.m.getDeviceInfo();this._isIos=(htInfo.iphone||htInfo.ipad);this._aAnchor=null;this._fnDummyFnc=function(){return false;};this._bBlocked=false;var nVersion=parseFloat(htInfo.version,10);this._bTouchStop=false;this._bTouchStop=htInfo.android&&((nVersion==2.1)||(nVersion>=3));if(!this._bTouchStop){this._bTouchStop=htInfo.iphone&&(nVersion>=3&&nVersion<4);}},_setWrapperElement:function(el){this._htWElement={};el=jindo.$(el);this._htWElement.base=jindo.$Element(el);},_initTouch:function(){if(!this._oTouch){this._oTouch=new jindo.m.Touch(this._htWElement.base.$value(),{nSlopeThreshold:1,nMoveThreshold:this.option('nMoveThreshold'),bActivateOnload:false});this._oTouch.setSlope(-1,-1);}},_getDragElement:function(el,sClass){if(jindo.$$.test(el,"input[type=text], textarea, select")){return null;}
var self=this;var isChildOfDragArea=function(baseElement,el){if(!el){return false;}
if(baseElement===document||baseElement===el){return true;}
return jindo.$Element(baseElement).isParentOf(el);};var elReturn=jindo.$$.test(el,this._sDragClass)?el:jindo.m.getClosest(this._sDragClass,el);if(!isChildOfDragArea(this._htWElement.base,elReturn)){elReturn=null;}
var elHandle=null;if(elReturn){try{elHandle=jindo.$$.getSingle(this._sHandleClass,elReturn);}catch(e){}
if(elHandle){if(!isChildOfDragArea(elHandle,el)){elReturn=null;}}}
return{elDrag:elReturn,elHandle:elHandle};},_onStart:function(oCustomEvt){if(!this.isActivating()){return;}
this._initInfo();var htElement=this._getDragElement(oCustomEvt.element,this._sHandleClass);if(!htElement.elDrag){return;}
var htParam={elHandle:htElement.elHandle,elDrag:htElement.elDrag,oEvent:oCustomEvt.oEvent};if(!this.fireEvent('handleDown',htParam)){return;}
if(this._bTouchStop){oCustomEvt.oEvent.stop();}
this._htInfo.bPrepared=true;this._clearAnchor();this._htInfo.welDrag=jindo.$Element(htParam.elDrag);this._htInfo.elHandle=htParam.elHandle;var htOffset=this._htInfo.welDrag.offset();this._htInfo.nStartX=htOffset.left;this._htInfo.nStartY=htOffset.top;document.body.style[this._sCssUserSelect]="none";this._oTouch.attach({touchMove:this._htEvent["touchMove"],touchEnd:this._htEvent["touchEnd"]});},_onMove:function(oCustomEvt){if(!this._htInfo.bPrepared){return;}
var nDisX=oCustomEvt.nDistanceX,nDisY=oCustomEvt.nDistanceY;if((Math.abs(nDisX)+Math.abs(nDisY))<this.option('nThreshold')){return;}
oCustomEvt.oEvent.stop();var htOffset={nX:this._htInfo.nStartX+nDisX,nY:this._htInfo.nStartY+nDisY};if(!this.option('bFlowOut')){var htNewOffset=this._onReCalculateOffset(this._htInfo.welDrag.$value(),htOffset.nX,htOffset.nY);htOffset.nX=htNewOffset.nX;htOffset.nY=htNewOffset.nY;}
var htParam={nX:htOffset.nX,nY:htOffset.nY,elDrag:this._htInfo.welDrag.$value(),elHandle:this._htInfo.elHandle,nGapX:nDisX,nGapY:nDisY,nDragCount:this._htInfo.nCount,nTouchX:oCustomEvt.nX,nTouchY:oCustomEvt.nY};if(!this._htInfo.bDragStart){if(!this.fireEvent('dragStart',htParam)){this._htInfo.bPrepared=false;return;}}
this._htInfo.bDragStart=true;if(!this.fireEvent('beforeDrag',htParam)){return;}
this._htInfo.welDrag.css('position','absolute');this._htInfo.welDrag.offset(htParam.nY,htParam.nX);this._htInfo.nX=htParam.nX;this._htInfo.nY=htParam.nY;this._htInfo.nCount++;this.fireEvent('drag',htParam);},_onReCalculateOffset:function(elDrag,nX,nY){elParent=this._htWElement.base;var htOffset=elParent.offset();var htParent={nX:elParent.$value().offsetLeft,nY:elParent.$value().offsetTop,nWidth:elParent.$value().offsetWidth,nHeight:elParent.$value().offsetHeight};var htDrag={nWidth:elDrag.offsetWidth,nHeight:elDrag.offsetHeight};var newX=Math.max(nX,htParent.nX);newX=Math.min(newX,htParent.nX+htParent.nWidth-htDrag.nWidth);var newY=Math.max(nY,htParent.nY);newY=Math.min(newY,htParent.nY+htParent.nHeight-htDrag.nHeight);return{nX:newX,nY:newY};},_onEnd:function(oCustomEvt){if(!this._htInfo.bPrepared){return;}
this._stopDrag(false);if(oCustomEvt.sMoveType===jindo.m.MOVETYPE[3]||oCustomEvt.sMoveType===jindo.m.MOVETYPE[4]){this._restoreAnchor();}
if(this._htInfo.welDrag){var htParam={elDrag:this._htInfo.welDrag.$value(),elHandle:this._htInfo.elHandle};this.fireEvent('handleUp',htParam);}
this._initInfo();},isDragging:function(){return this._htInfo.bDragStart;},stopDragging:function(){this._stopDrag(true);},_stopDrag:function(bInterupted){if(typeof bInterupted==='undefined'){bInterupted=false;}
this._oTouch.detach({touchMove:this._htEvent["touchMove"],touchEnd:this._htEvent["touchEnd"]});document.body.style[this._sCssUserSelect]=this._sCssUserSelectValue?this._sCssUserSelectValue:"";if(this.isDragging()){var htParam={nX:parseInt(this._htInfo.welDrag.css("left"),10)||0,nY:parseInt(this._htInfo.welDrag.css("top"),10)||0,elDrag:this._htInfo.welDrag.$value(),elHandle:this._htInfo.elHandle,bInterupted:bInterupted};this.fireEvent('dragEnd',htParam);this._htInfo.bDragStart=false;}},_setAnchorElement:function(){if(this._isIos){this._aAnchor=jindo.$$("A",this._htWElement.base.$value());}},_clearAnchor:function(){if(this._aAnchor&&!this._bBlocked){var aClickAddEvent=null;for(var i=0,nILength=this._aAnchor.length;i<nILength;i++){if(this._fnDummyFnc!==this._aAnchor[i].onclick){this._aAnchor[i]._onclick=this._aAnchor[i].onclick;}
this._aAnchor[i].onclick=this._fnDummyFnc;aClickAddEvent=this._aAnchor[i].___listeners___||[];for(var j=0,nJLength=aClickAddEvent.length;j<nJLength;j++){___Old__removeEventListener___.call(this._aAnchor[i],"click",aClickAddEvent[j].listener,aClickAddEvent[j].useCapture);}}
this._bBlocked=true;}},_restoreAnchor:function(){if(this._aAnchor&&this._bBlocked){var aClickAddEvent=null;for(var i=0,nILength=this._aAnchor.length;i<nILength;i++){if(this._fnDummyFnc!==this._aAnchor[i]._onclick){this._aAnchor[i].onclick=this._aAnchor[i]._onclick;}else{this._aAnchor[i].onclick=null;}
aClickAddEvent=this._aAnchor[i].___listeners___||[];for(var j=0,nJLength=aClickAddEvent.length;j<nJLength;j++){___Old__addEventListener___.call(this._aAnchor[i],"click",aClickAddEvent[j].listener,aClickAddEvent[j].useCapture);}}
this._bBlocked=false;}},_initInfo:function(){this._htInfo.welDrag=null;this._htInfo.elHandle=null;this._htInfo.nStartX=null;this._htInfo.nStartY=null;this._htInfo.nX=null;this._htInfo.nY=null;this._htInfo.bDragStart=false;this._htInfo.nCount=0;},_onActivate:function(){this._attachEvent();this._oTouch.activate();},_onDeactivate:function(){this._detachEvent();this._oTouch.deactivate();},_attachEvent:function(){this._htEvent={};this._htEvent["touchMove"]=jindo.$Fn(this._onMove,this).bind();this._htEvent["touchEnd"]=jindo.$Fn(this._onEnd,this).bind();this._htEvent["touchStart"]=jindo.$Fn(this._onStart,this).bind();this._oTouch.attach("touchStart",this._htEvent["touchStart"]);},_detachEvent:function(){this._oTouch.detachAll();for(var p in this._htEvent){this._htEvent[p]=null;}
this._htEvent=null;},destroy:function(){this.deactivate();for(var p in this._htWElement){this._htWElement[p]=null;}
for(p in this._htInfo){this._htInfo[p]=null;}
this._htWElement=null;this._htInfo=null;this._isIos=null;this._aAnchor=null;this._fnDummyFnc=null;this._bBlocked=null;this._bTouchStop=null;}}).extend(jindo.UIComponent);jindo.m.LayerPosition=jindo.$Class({$init:function(el,htUserOption){this.option({bActivateOnload:true,bAutoReposition:true,sPosition:"center",nLeftMargin:0,nRightMargin:0,nTopMargin:0,nBottomMargin:0,bUseFixed:true});this.option(htUserOption||{});this._initVar();this._setWrapperElement(el);if(this.option("bActivateOnload")){this.activate();}},isUseFixed:function(){return this._bUseFixedProperty;},_onActivate:function(){this._isVertical=jindo.m.isVertical();if(this.option("bAutoReposition")){this._attachEvent();}
this.setPosition();},_onDeactivate:function(){if(this.option("bAutoReposition")){this._detachEvent();}},_initVar:function(){var nLeft=this.option("nLeftMargin"),nTop=this.option("nTopMargin");this._htMargin={nLeft:nLeft,nRight:this.option("nRightMargin"),nTop:nTop,nBottom:this.option("nBottomMargin")};this._sPosition=this.option("sPosition");this._htOldPosition={nTop:null,nLeft:null,nBottom:null};this._htPosition={nTop:null,nLeft:null,nBottom:null};this._bUseFixedProperty=this.option("bAutoReposition")&&(this.option("bUseFixed")&&jindo.m._isUseFixed());this._isVertical=null;this._hasOrientationChange=jindo.m.getDeviceInfo().ipad||jindo.m.getDeviceInfo().iphone||jindo.m.getDeviceInfo().bChrome;this._nPreWidth=-1;},getPosition:function(){return this._sPosition;},getMargin:function(){return this._htMargin;},getLayer:function(){return this._htWElement["element"].$value();},getCurrentPosition:function(){return this._htPosition;},_setWrapperElement:function(el){this._htWElement={};this.setLayer(el);},setLayer:function(el){this._htWElement["element"]=jindo.$Element(el);if(this._bUseFixedProperty){this._htWElement["element"].css("position","fixed");}else{this._htWElement["element"].css("position","absolute");}
if(!this._htWElement["element"].parent().isEqual(document.body)){this._htWElement["element"].appendTo(document.body);}
return this;},top:function(htMargin){this.setPosition("top",htMargin);},bottom:function(htMargin){this.setPosition("bottom",htMargin);},center:function(htMargin){this.setPosition("center",htMargin);},all:function(htMargin){this.setPosition("all",htMargin);},_fixedLayerSize:function(nWidth,nHeight){var nLeft=parseInt(this._htMargin.nLeft,10),nTop=parseInt(this._htMargin.nTop,10),htPadding={"padding-top":parseInt(this._htWElement["element"].css("padding-top"),10),"padding-bottom":parseInt(this._htWElement["element"].css("padding-bottom"),10),"padding-left":parseInt(this._htWElement["element"].css("padding-left"),10),"padding-right":parseInt(this._htWElement["element"].css("padding-right"),10)},htBorder={"border-top-width":parseInt(this._htWElement["element"].css("border-top-width"),10),"border-bottom-width":parseInt(this._htWElement["element"].css("border-bottom-width"),10),"border-left-width":parseInt(this._htWElement["element"].css("border-left-width"),10),"border-right-width":parseInt(this._htWElement["element"].css("border-right-width"),10)};nWidth-=htPadding["padding-left"]+htPadding["padding-right"]+htBorder["border-left-width"]+htBorder["border-right-width"]+nLeft+parseInt(this._htMargin.nRight,10);nHeight-=htPadding["padding-top"]+htPadding["padding-bottom"]+htBorder["border-top-width"]+htBorder["border-bottom-width"]+nTop+parseInt(this._htMargin.nBottom,10);this._htWElement["element"].css({width:nWidth+"px",height:nHeight+"px"});return{nTop:nTop,nLeft:nLeft};},_getPosition:function(){var nLayerWidth=this._htWElement["element"].width(),nLayerHeight=this._htWElement["element"].height(),htElementPosition={},oClientSize=jindo.$Document().clientSize(),nWidth=oClientSize.width,nHeight=oClientSize.height;nLayerWidth+=parseInt(this._htWElement["element"].css('marginLeft'),10)+parseInt(this._htWElement["element"].css('marginRight'),10)||0;nLayerHeight+=parseInt(this._htWElement["element"].css('marginTop'),10)+parseInt(this._htWElement["element"].css('marginBottom'),10)||0;if(this._sPosition==="all"){htElementPosition=this._fixedLayerSize(nWidth,nHeight);}else{htElementPosition.nLeft=parseInt((nWidth-nLayerWidth)/2,10)+parseInt(this._htMargin.nLeft,10);switch(this._sPosition){case"top":htElementPosition.nTop=parseInt(this._htMargin.nTop,10);break;case"center":htElementPosition.nTop=parseInt((nHeight-nLayerHeight)/2,10)+parseInt(this._htMargin.nTop,10);break;case"bottom":if(this._bUseFixedProperty){htElementPosition.nBottom=parseInt(this._htMargin.nBottom,10);}else{htElementPosition.nTop=parseInt(nHeight-nLayerHeight,10)-parseInt(this._htMargin.nBottom,10);}
break;}
if(!this._bUseFixedProperty){htElementPosition=this._adjustScrollPosition(htElementPosition);}}
return htElementPosition;},_adjustScrollPosition:function(htPosition){var htScrollPosition=jindo.$Document().scrollPosition();htPosition.nTop+=htScrollPosition.top;htPosition.nLeft+=htScrollPosition.left;return htPosition;},setPosition:function(sPosition,htMargin){if(!this.isActivating()){return;}
this._htMargin=htMargin||this._htMargin;this._sPosition=sPosition||this._sPosition;if(this._fireEvent("beforePosition")){var bVisible=this._htWElement["element"].visible();if(!bVisible){this._htWElement["element"].css({left:"-9999px"}).show();}
this._htOldPosition=this._htPosition;this._htPosition=this._getPosition();if(!bVisible){this._htWElement["element"].hide();}
if(!bVisible||this._htOldPosition.nLeft!==this._htPosition.nLeft||this._htOldPosition.nTop!==this._htPosition.nTop||this._htOldPosition.nBottom!==this._htPosition.nBottom){if(typeof this._htPosition.nTop==="undefined"){this._htWElement["element"].$value().style.top=null;}else if(typeof this._htPosition.nBottom==="undefined"){this._htWElement["element"].$value().style.bottom=null;}
this._htWElement["element"].css({left:this._htPosition.nLeft+"px",top:this._htPosition.nTop+"px",bottom:this._htPosition.nBottom+"px"});}
this._fireEvent("position");}},_attachEvent:function(){this._htEvent={};this._htEvent["actionEvent"]=jindo.$Fn(this._onEvent,this);this._htEvent["pageShow"]=jindo.$Fn(this._onPageShow,this).bind();if(this._bUseFixedProperty){this._htEvent["actionEvent"].attach(window,"resize");}else{this._htEvent["actionEvent"].attach(window,"scroll").attach(window,"resize");}
jindo.m.bindPageshow(this._htEvent["pageShow"]);if(this._hasOrientationChange){this._htEvent["rotate"]=jindo.$Fn(this._onOrientationChange,this).attach(window,"orientationchange");}},_detachEvent:function(){this._htEvent["actionEvent"].detach(window,"scroll").detach(window,"resize");jindo.m.unbindPageshow(this._htEvent["pageShow"]);if(this._hasOrientationChange){this._htEvent["rotate"].detach(window,"orientationchange");}
this._htEvent=null;},_onEvent:function(we){if(jindo.m._isUseFixed()&&jindo.m.getDeviceInfo().android){this._htWElement["element"].css("left",this._htWElement["element"].css("left"));}
if(this._htWElement["element"].visible()){this.setPosition();}},_onOrientationChange:function(){if(this._htWElement["element"].visible()){var self=this;if(window.innerWidth<this._htWElement["element"].width()){this._nPreWidth=this._htWElement["element"].width();this._htWElement["element"].width(window.innerWidth);}else{if(this._nPreWidth!==-1){this._htWElement["element"].width(this._nPreWidth);}}
this._htWElement["element"].hide();this.setPosition();if(jindo.m.getDeviceInfo().android&&!jindo.m.getDeviceInfo().bChrome){this._htWElement["element"].show();}else{setTimeout(function(){self._htWElement["element"].show();},10);}}},_onPageShow:function(){if(this.isActivating()){this.deactivate();this.activate();}},_fireEvent:function(sType){return this.fireEvent(sType,{elLayer:this.getLayer(),htMargin:this.getMargin(),htPosition:this.getCurrentPosition()});},destroy:function(){this.deactivate();for(var p in this._htWElement){this._htWElement[p]=null;}
delete this._htWElement;delete this._htMargin;delete this._sPosition;delete this._htPosition;delete this._htOldPosition;delete this._bUseFixedProperty;}}).extend(jindo.UIComponent);jindo.m.ScrollEnd=jindo.$Class({$init:function(el,htUserOption){this._initVar();this._setWrapperElement(el);this._attachEvent();},_initVar:function(){if(jindo.m.getDeviceInfo().android){if(parseInt(jindo.m.getDeviceInfo().version,10)>=3){this._nType=2;this._nScrollTimer=-1;}else{this._nType=1;}}else{this._nType=0;}
this._isTouched=false;this._isMoved=false;this._nObserver=null;this._nScrollEndTimer=null;this._nPreLeft=null;this._nPreTop=null;},_setWrapperElement:function(el){this._htElement={};this._htElement["body"]=document.body;},_attachEvent:function(){this._htEvent={};this._htEvent["event_scroll"]={ref:jindo.$Fn(this._onScroll,this).attach(window,"scroll"),el:window};if(this._nType==1){this._htEvent["event_touchstart"]={ref:jindo.$Fn(this._onStartForAndroid,this).attach(this._htElement["body"],"touchstart"),el:this._htElement["body"]};this._htEvent["event_touchmove"]={ref:jindo.$Fn(this._onMoveForAndroid,this).attach(this._htElement["body"],"touchmove"),el:this._htElement["body"]};this._htEvent["event_touchend"]={ref:jindo.$Fn(this._onEndForAndroid,this).attach(this._htElement["body"],"touchend"),el:this._htElement["body"]};}},_detachEvent:function(){for(var p in this._htEvent){var ht=this._htEvent[p];ht.ref.detach(ht.el,p.substring(p.lastIndexOf("_")));}},_startObserver:function(){var self=this;this._stopObserver();this._nObserver=setInterval(function(){self._observe();},100);},_observe:function(){if(this._isTouched||(this._nPreTop!==window.pageYOffset||this._nPreLeft!==window.pageXOffset)){this._nPreTop=window.pageYOffset;this._nPreLeft=window.pageXOffset;}else{this._stopObserver();this._fireEventScrollEnd();}},_stopObserver:function(){clearInterval(this._nObserver);this._nObserver=null;},_onScroll:function(we){switch(this._nType){case 0:this._fireEventScrollEnd();break;case 1:this._startObserver();break;case 2:var self=this;clearTimeout(this._nScrollTimer);this._nScrollTimer=setTimeout(function(){self._fireEventScrollEnd();},350);break;}},_onStartForAndroid:function(we){this._isTouched=true;this._isMoved=false;this._nPreTop=null;this._nPreLeft=null;},_onMoveForAndroid:function(we){this._isMoved=true;},_onEndForAndroid:function(we){this._isTouched=false;if(this._isMoved){this._startObserver();}},_fireEventScrollEnd:function(){this.fireEvent("scrollEnd",{nTop:window.pageYOffset,nLeft:window.pageXOffset});},_fireEventScrollEndForAndroid:function(){var self=this;clearTimeout(this._nScrollEndTimer);this._nScrollEndTimer=setTimeout(function(){self._fireEventScrollEnd();},500);},destroy:function(){this._detachEvent();this._nType=-1;this._isTouched=null;this._isMoved=null;this._nObserver=null;this._nPreLeft=null;this._nPreTop=null;}}).extend(jindo.Component);jindo.m.FadeEffect=jindo.$Class({sEffectName:"fade",getCommand:function(el,htOption){var sDirection=htOption.sDirection?htOption.sDirection:'in';var htStyle=htOption.htTo||{};var nOpacity=(sDirection=='in')?1:0;htStyle["opacity"]=(typeof htStyle.opacity!=='undefined')?htStyle.opacity:nOpacity;var htCallback={};if(sDirection=='out'){htCallback.htStyle={};htCallback.htStyle["display"]="none";htCallback.htStyle["opacity"]=this._htLayerInfo['nOpacity'];}
return{sTaskName:this.sEffectName+"-"+sDirection,htStyle:htStyle,htTransform:{},fCallback:htCallback};},getBeforeCommand:function(el,htOption){var sDirection=htOption.sDirection?htOption.sDirection:'in';var htBeforeStyle=htOption.htFrom||{};var nOpacity=(sDirection=='in')?0:1;htBeforeStyle["display"]=this._htLayerInfo['sDisplay'];htBeforeStyle["opacity"]=(typeof htBeforeStyle.opacity=='undefined')?nOpacity:htBeforeStyle.opacity;return{htStyle:htBeforeStyle,htTransform:{}};}}).extend(jindo.m.Effect);jindo.m.NumberValidator=jindo.$Class({rx:/^[+\-]?(\d{1,3},)?(\d{3},)*(\d)+(\.\d+)?$/,_isValid:function(sValue,sFormat){return this.rx.test(sValue);},_getCorrectedValue:function(sValue,sFormat){sValue=this._filterNumber(sValue);if(sFormat){sValue=this._applyComma(sValue);}
return sValue;},_applyComma:function(sValue){var sResult="",nIdx=0,ch=null,chCode=null,nDotIdx=sValue.indexOf("."),sIntValue=(nDotIdx!==-1?sValue.substring(0,nDotIdx):sValue),sPointValue=(nDotIdx!==-1?sValue.substr(nDotIdx):"");if(sIntValue.length>3){for(var i=sIntValue.length-1;i>=0;i--,nIdx++){ch=sIntValue.charAt(i);chCode=sIntValue.charCodeAt(i);sResult=(nIdx!==0&&nIdx%3===0&&(chCode>47&&chCode<58)?ch+","+sResult:ch+sResult);}
return(sPointValue!==""?sResult+sPointValue:sResult);}else{return sValue;}},_filterNumber:function(sValue){var cFirst,aValue,sIntValue,sPointValue;sValue=sValue.replace(/[^\d\.\-]/g,"");cFirst=sValue.charAt(0);sValue=sValue.replace(/-/g,"");sValue=(cFirst==="-"?cFirst+sValue:sValue);if(sValue.length<=0||sValue==="-"){return sValue;}
aValue=sValue.split('.');if(aValue.length>1){sIntValue=aValue.shift();cFirst=sIntValue.charAt(0);sIntValue=(sIntValue===""?0:parseInt(sIntValue,10));if(cFirst==="-"&&sIntValue===0){sIntValue="-"+sIntValue;}
sPointValue=aValue.join("");sValue=sIntValue+"."+sPointValue;}else{sValue=String(parseFloat(aValue.join(""),10));}
return sValue;}}).extend(jindo.m.Validator);jindo.m.Calendar=jindo.$Class({$init:function(el,htUserOption){var oDate=new Date();this.option({bActivateOnload:true,sClassPrefix:"calendar-",bUseEffect:false,nEffectDuration:200,sTitleFormat:"yyyy.mm",aMonthTitle:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],htToday:{nYear:oDate.getFullYear(),nMonth:oDate.getMonth()+1,nDate:oDate.getDate()}});this.option(htUserOption||{});this._initVar();this._setWrapperElement(el);if(this.option("bActivateOnload")){this.activate();}},_initVar:function(){this._bVisible=false;this._oToday=this.option("htToday");this._oViewDate=null;this._nSelectDate=-1;this._sClassPrefix=this.option("sClassPrefix");this._aDayInfo=[];if(this.option("bUseEffect")){this._oTransition=new jindo.m.Transition();}},_setWrapperElement:function(el){this._htWElement={};this._htWElement["calendarBase"]=jindo.$Element(el);this._htWElement["calendarBase"].css({"position":"absolute","display":"none"});aTh=this._htWElement["calendarBase"].queryAll("th");for(var i=0,nLength=aTh.length;i<nLength;i++){this._aDayInfo.push(jindo.$Element(aTh[i]).text());}
this._htWElement["calendarTitle"]=jindo.$Element(this._htWElement["calendarBase"].query("."+this._sClassPrefix+"title"));this._htWElement["calendarTable"]=jindo.$Element(this._htWElement["calendarBase"].query("table"));this._htWElement["calendarTbody"]=jindo.$Element(this._htWElement["calendarTable"].query("tbody"));this._htWElement["yearPreBtn"]=jindo.$Element(this._htWElement["calendarBase"].query("."+this._sClassPrefix+"btn-prev-year"));this._htWElement["preBtn"]=jindo.$Element(this._htWElement["calendarBase"].query("."+this._sClassPrefix+"btn-prev-mon"));this._htWElement["yearNextBtn"]=jindo.$Element(this._htWElement["calendarBase"].query("."+this._sClassPrefix+"btn-next-year"));this._htWElement["nextBtn"]=jindo.$Element(this._htWElement["calendarBase"].query("."+this._sClassPrefix+"btn-next-mon"));this._htWElement["closeBtn"]=jindo.$Element(this._htWElement["calendarBase"].query("."+this._sClassPrefix+"btn-close"));},getCalendarBase:function(){return this._htWElement["calendarBase"];},_onActivate:function(){this._attachEvent();},_onDeactivate:function(){this._detachEvent();},_attachEvent:function(){this._htEvent={};if(this._htWElement["yearPreBtn"]){this._htEvent["pre_year_click"]={el:this._htWElement["yearPreBtn"],ref:jindo.$Fn(this._onYearPre,this).attach(this._htWElement["yearPreBtn"],"click")};}
if(this._htWElement["preBtn"]){this._htEvent["pre_click"]={el:this._htWElement["preBtn"],ref:jindo.$Fn(this._onPre,this).attach(this._htWElement["preBtn"],"click")};}
if(this._htWElement["yearNextBtn"]){this._htEvent["next_year_click"]={el:this._htWElement["yearNextBtn"],ref:jindo.$Fn(this._onYearNext,this).attach(this._htWElement["yearNextBtn"],"click")};}
if(this._htWElement["nextBtn"]){this._htEvent["next_click"]={el:this._htWElement["nextBtn"],ref:jindo.$Fn(this._onNext,this).attach(this._htWElement["nextBtn"],"click")};}
if(this._htWElement["closeBtn"]){this._htEvent["close_click"]={el:this._htWElement["closeBtn"],ref:jindo.$Fn(this._onClose,this).attach(this._htWElement["closeBtn"],"click")};}
this._htEvent["table_click"]={el:this._htWElement["calendarTable"],ref:jindo.$Fn(this._onDate,this).attach(this._htWElement["calendarTable"],"click")};},_onPre:function(we){this._moveDate("pre");we.stop();},_onYearPre:function(we){this._moveDate("preYear");we.stop();},_onNext:function(we){this._moveDate("next");we.stop();},_onYearNext:function(we){this._moveDate("nextYear");we.stop();},_onClose:function(we){this.hide();we.stop();},_onDate:function(we){if(!this._bVisible){return;}
var wel=jindo.$Element(we.element),sCellDate="";if(wel.$value().tagName!="td"){wel=wel.parent(function(v){return(v.$value().tagName.toLowerCase()=="td");})[0];}
if(wel){sCellDate=wel.attr("data-cal-date");if(sCellDate&&sCellDate.length==8){this._nSelectDate=sCellDate*1;if(this.fireEvent("selectDate",{oSelectDate:this.getSelectDate()})){wel.addClass(this._sClassPrefix+'selected');this.hide();}}}
we.stopDefault();return false;},_moveDate:function(sMode){if(!this._bVisible){return;}
var oOldDate={nYear:this._oViewDate.nYear,nMonth:this._oViewDate.nMonth,nDate:this._oViewDate.nDate},oMoveDate={nDate:this._oViewDate.nDate};switch(sMode){case"pre":oMoveDate.nYear=(oOldDate.nMonth==1)?oOldDate.nYear-1:oOldDate.nYear;oMoveDate.nMonth=(oOldDate.nMonth==1)?12:oOldDate.nMonth-1;break;case"preYear":oMoveDate.nYear=oOldDate.nYear-1;oMoveDate.nMonth=oOldDate.nMonth;break;case"next":oMoveDate.nYear=(oOldDate.nMonth==12)?oOldDate.nYear+1:oOldDate.nYear;oMoveDate.nMonth=(oOldDate.nMonth==12)?1:oOldDate.nMonth+1;break;case"nextYear":oMoveDate.nYear=oOldDate.nYear+1;oMoveDate.nMonth=oOldDate.nMonth;break;}
if(this.fireEvent("beforeMoveDate",{oOldDate:oOldDate,oMoveDate:oMoveDate})){this._drawCalendar(oMoveDate);this.fireEvent("moveDate",{oOldDate:oOldDate,oMoveDate:oMoveDate});}},_detachEvent:function(){for(var p in this._htEvent){var ht=this._htEvent[p];ht.ref.detach(ht.el,p.substring(p.lastIndexOf("_")+1));}
this._htEvent=null;},show:function(oDrawDate,oSelectedDate){if(!oDrawDate){oDrawDate=this._oToday;}
if(this.fireEvent("beforeShowCalendar",{oDrawDate:oDrawDate})){this._nSelectDate=this._getDateNumber(oSelectedDate);if(this._getDateNumber(oDrawDate,"YearMonth")!=(this._oViewDate)?this._getDateNumber(this._oViewDate,"YearMonth"):0){this._drawCalendar(oDrawDate);}else{this._drawDayColor();}
var self=this;this._htWElement["calendarBase"].show();if(this.option("bUseEffect")){this._htWElement["calendarBase"].opacity(0);this._oTransition.queue(this._htWElement["calendarBase"].$value(),this.option("nEffectDuration"),{htStyle:{opacity:1},fCallback:function(){self._afterShow(oDrawDate);}});setTimeout(function(){self._oTransition.start();},10);}else{this._afterShow(oDrawDate);}}},_afterShow:function(oSelectDate){this._htWElement["calendarBase"].css("zIndex","1000");this._bVisible=true;this.fireEvent("showCalendar",{oDrawDate:oSelectDate});},hide:function(){var oSelectDate=this.getSelectDate();if(this.fireEvent("beforeHideCalendar",{"oSelectDate":oSelectDate})){this._bVisible=false;if(this.option("bUseEffect")){var self=this;this._oTransition.queue(this._htWElement["calendarBase"].$value(),this.option("nEffectDuration"),{htStyle:{opacity:0},fCallback:function(){self._afterHide(oSelectDate);}});self._oTransition.start();}else{this._afterHide(oSelectDate);}}},_afterHide:function(oSelectDate){this._htWElement["calendarBase"].css("zIndex","0").hide();this.fireEvent("hideCalendar",{"oSelectDate":oSelectDate});},isVisible:function(){return this._bVisible;},getSelectDate:function(){var sSelectDate,oSelectDate;if(this._nSelectDate&&this._nSelectDate>0){sSelectDate=this._nSelectDate+"";oSelectDate={nYear:Number(sSelectDate.substr(0,4)),nMonth:Number(sSelectDate.substr(4,2)),nDate:Number(sSelectDate.substr(6,4))};}
return oSelectDate;},_drawCalendar:function(oDrawDate){this._oViewDate={nYear:oDrawDate.nYear,nMonth:oDrawDate.nMonth,nDate:oDrawDate.nDate};this._drawCalendarHeaderHtml();this._drawCalendarBodyHtml();this._drawDayColor();},_drawDayColor:function(){var nTodayDate=this._getDateNumber(this._oToday),nSelectDate=this._nSelectDate,aCells=this._htWElement["calendarTbody"].queryAll('td');for(var i=0,nLength=aCells.length,welCell;i<nLength;i++){welCell=jindo.$Element(aCells[i]);if(!welCell.hasClass(this._sClassPrefix+'prev-mon')&&!welCell.hasClass(this._sClassPrefix+'next-mon')){var nDate=welCell.attr('data-cal-date')*1;welCell[nTodayDate===nDate?'addClass':'removeClass'](this._sClassPrefix+'today');welCell[(nSelectDate>-1&&nSelectDate===nDate)?'addClass':'removeClass'](this._sClassPrefix+'selected');if(nTodayDate==nSelectDate){welCell.removeClass(this._sClassPrefix+'today');}}}},_drawCalendarHeaderHtml:function(){var nYear=this._oViewDate.nYear,nMonth=this._oViewDate.nMonth;if(nMonth<10){nMonth=("0"+(nMonth*1)).toString();}
if(this._htWElement["calendarTitle"]){this._htWElement["calendarTitle"].text(this.option("sTitleFormat").replace(/yyyy/g,nYear).replace(/y/g,(nYear).toString().substr(2,2)).replace(/mm/g,nMonth).replace(/m/g,(nMonth*1)).replace(/M/g,this.option("aMonthTitle")[nMonth-1]));}},_drawCalendarBodyHtml:function(){var aHTML=[],oDate,nFirstTime,nLastTime,bPaintLastDay=false,nNowTime,aClassName,nNowDate,nDay;oDate=new Date(this._oViewDate.nYear,this._oViewDate.nMonth,0);nLastTime=oDate.getTime();oDate=new Date(this._oViewDate.nYear,this._oViewDate.nMonth-1,1);nFirstTime=oDate.getTime();while(oDate.getDay()!==0){oDate.setDate(oDate.getDate()-1);}
while(!bPaintLastDay){aHTML.push('<tr>');for(var i=0;i<7;i++){nNowTime=oDate.getTime();aClassName=[];nNowDate='';nDay=oDate.getDay();bPrevMonth=false;bNextMonth=false;if(nNowTime<nFirstTime){aClassName.push(this._sClassPrefix+'prev-mon');bPrevMonth=true;}
if(nLastTime<nNowTime){aClassName.push(this._sClassPrefix+'next-mon');bNextMonth=true;}
if(nDay===0){aClassName.push(this._sClassPrefix+'sun');}
if(nDay===6){aClassName.push(this._sClassPrefix+'sat');}
nNowDate=oDate.getFullYear()*10000+(oDate.getMonth()+1)*100+oDate.getDate();aHTML.push('<td class="'+aClassName.join(' ')+'" data-cal-date="'+nNowDate+'"><a href="javascript:void(0)" class="'+this._sClassPrefix+'date">'+oDate.getDate()+'</a></td>');oDate.setDate(oDate.getDate()+1);if(nLastTime===nNowTime){bPaintLastDay=true;}}
aHTML.push('</tr>');}
this._htWElement["calendarTbody"].html(aHTML.join(''));},isBetween:function(htDate,htFrom,htTo){if(this.getDateObject(htDate).getTime()>this.getDateObject(htTo).getTime()||this.getDateObject(htDate).getTime()<this.getDateObject(htFrom).getTime()){return false;}else{return true;}},getDayName:function(nIdx){return this._aDayInfo[nIdx];},getDateObject:function(htDate){if(arguments.length==3){return new Date(arguments[0],arguments[1]-1,arguments[2]);}
return new Date(htDate.nYear,htDate.nMonth-1,htDate.nDate);},_getDateNumber:function(htDate,sType){var nDate;if(sType==="YearMonth"){nDate=(htDate)?(htDate.nYear*10000+htDate.nMonth*100):-1;}else{nDate=(htDate)?(htDate.nYear*10000+htDate.nMonth*100+htDate.nDate):-1;}
return nDate;},destroy:function(){this.deactivate();this._bVisible=false;this._oToday=null;this._oViewDate=null;this._nSelectDate=-1;this._sClassPrefix=null;if(this.option("bUseEffect")){this._oTransition.destroy();this._oTransition=null;}
this._aDayInfo=null;}}).extend(jindo.UIComponent);jindo.m.PageLayoutUI=jindo.$Class({$init:function(htUserOption){this._initVar(htUserOption);this._showDefaultPage();this.showLoading();this._checkLayout();this._rebuildLayout();if(htUserOption&&htUserOption.fnDomReady&&typeof htUserOption.fnDomReady=="function"){htUserOption.fnDomReady({welRoot:this.getRoot()});}
this._initScrollManager();if(this._bMultiPage){this._initMultiPage(this._aPages,this._nDefaultIndex);}else{this._initPage(this._aPages[0],0);}
if(!this._bUseFlicking){if(this._bMultiPage){this._setMultiPagePosition();}
else if(this._bMultiContent){this._setMultiContentPosition();}}
if(this._bUseFlicking){this._initFlicking(this._welFlickView.$value());}
this._attachEvent();if(this._bUseAjaxHistory){this._initAjaxHistory();}},_initVar:function(htUserOption){htUserOption=htUserOption||{};this._htEvent={};this._nCurrentIndex=htUserOption.nDefaultIndex||0;this._htScrollOption=htUserOption.htScrollOption||{};this._htFlickingOption=htUserOption.htFlickingOption||{};this._htFlickingOption["sClassPrefix"]=this._htFlickingOption["sClassPrefix"]||"flick-";this._htFlickingOption["sContentClass"]=this._htFlickingOption["sContentClass"]||"ct";this._htHistoryOption=htUserOption.htHistoryOption||{};this._bUseLoading=htUserOption.bUseLoading||false;this._htLoadingOption=htUserOption.htLoadingOption||{};this._bUseFullScreen=htUserOption.bUseFullScreen||false;this._oTimeout=null;this._oClientSize=jindo.m._clientSize();if(this._bUseFullScreen){this._oClientSize.height+=jindo.m._getAdressSize();}
this._welRoot=(htUserOption.vBaseElement)?jindo.$Element(htUserOption.vBaseElement):jindo.$Element(document.body);this._bUseRebuild=(this._welRoot.attr("markup")&&this._welRoot.attr("markup").toUpperCase()=="DETAILED")?false:true;this._aPages=jindo.$ElementList(this._welRoot.queryAll(".jmc-page")).$value();this._nPageCount=this._aPages.length;this._aContents=jindo.$ElementList(this._welRoot.queryAll(".jmc-content")).$value();this._nContentCount=this._aContents.length;this._bMultiPage=this._nPageCount>1?true:false;this._bMultiContent=this._nContentCount>1?true:false;},_showDefaultPage:function(){if(this._bMultiPage){this._aPages[this._nCurrentIndex].show();}
if(this._bMultiContent){this._aPages[0].show();}},_checkLayout:function(){var bFlicking=(this._welRoot.attr("flicking")&&this._welRoot.attr("flicking").toUpperCase()=="YES")?true:false;if(this._bMultiPage&&bFlicking){this._bUseFlicking=true;}else if(!this._bMultiPage&&this._nContentCount>1&&bFlicking){this._bUseFlicking=true;}else{this._bUseFlicking=false;}
if(this._bMultiPage||this._bMultiContent){this._bUseAjaxHistory=true;}else{this._bUseAjaxHistory=false;}},_rebuildLayout:function(){if(this._bUseRebuild){var elDocumentFragment=document.createDocumentFragment();if(this._bMultiPage&&this._bUseFlicking){this._welFlickView=jindo.$Element('<div class="'+this._htFlickingOption["sClassPrefix"]+'view"></div>');var welFlickContainer=jindo.$Element('<div class="'+this._htFlickingOption["sClassPrefix"]+'container"></div>');var welFlickCT;this._welFlickView.appendTo(elDocumentFragment);welFlickContainer.appendTo(this._welFlickView.$value());}
for(var i=0;i<this._nPageCount;i++){var elPageLayout=this._rebuildPage(this._aPages[i]);this._aPages[i].append(elPageLayout);if(this._bMultiPage&&this._bUseFlicking){welFlickCT=jindo.$Element('<div class="'+this._htFlickingOption["sClassPrefix"]+this._htFlickingOption["sContentClass"]+'"></div>');welFlickCT.appendTo(welFlickContainer.$value());this._aPages[i].appendTo(welFlickCT.$value());}
this._aPages[i].show();}
this._welRoot.append(elDocumentFragment);delete elDocumentFragment;}else{if(this._bUseFlicking){this._welFlickView=jindo.$Element(this._welRoot.query("."+this._htFlickingOption["sClassPrefix"]+"view"));}
if(!this._bMultiPage&&this._bMultiContent){this._welContentView=jindo.$Element(this._welRoot.query(".jmc-content-view"));}}},_rebuildPage:function(welPage){var elPageFragment=document.createDocumentFragment();var welScrollWrapper=jindo.$Element('<div class="scroll-wrapper"></div>');var welScroller=jindo.$Element('<div class="scroller"></div>');var welHeader=jindo.$Element(welPage.query(".jmc-header"));var bFixedHeader=(welHeader&&welHeader.attr("position")=="fixed")?true:false;if(bFixedHeader){if(welHeader){welHeader.appendTo(elPageFragment);}}else{if(welHeader){welHeader.appendTo(welScroller.$value());}}
if(!this._bMultiPage&&this._bMultiContent){var aWelContents=jindo.$ElementList(welPage.queryAll(".jmc-content")).$value();var elFlickingContent=this._rebuildFlickingContent(aWelContents);elPageFragment.appendChild(elFlickingContent);}else{var welContent=jindo.$Element(welPage.query(".jmc-content"));welScrollWrapper.appendTo(elPageFragment);welScroller.appendTo(welScrollWrapper.$value());welContent.appendTo(welScroller.$value());}
var welFooter=jindo.$Element(welPage.query(".jmc-footer"));var bFixedFooter=(welFooter&&welFooter.attr("position")=="fixed")?true:false;if(bFixedFooter){if(welFooter){welFooter.appendTo(elPageFragment);}}else{if(welFooter){welFooter.appendTo(welScroller.$value());}}
return elPageFragment;},_rebuildFlickingContent:function(aWelContents){var elContentFragment=document.createDocumentFragment();if(this._bUseFlicking){this._welFlickView=jindo.$Element('<div class="'+this._htFlickingOption["sClassPrefix"]+'view"></div>');var welFlickContainer=jindo.$Element('<div class="'+this._htFlickingOption["sClassPrefix"]+'container"></div>');this._welFlickView.appendTo(elContentFragment);welFlickContainer.appendTo(this._welFlickView.$value());}else{this._welContentView=jindo.$Element('<div class="jmc-content-view"></div>');this._welContentView.appendTo(elContentFragment);}
var welFlickCT,welContentCT,welScrollWrapper,welScroller;for(var i=0,len=aWelContents.length;i<len;i++){welScrollWrapper=jindo.$Element('<div class="scroll-wrapper"></div>');welScroller=jindo.$Element('<div class="scroller"></div>');if(this._bUseFlicking){welFlickCT=jindo.$Element('<div class="'+this._htFlickingOption["sClassPrefix"]+this._htFlickingOption["sContentClass"]+'"></div>');welFlickCT.appendTo(welFlickContainer.$value());welScrollWrapper.appendTo(welFlickCT.$value());}else{welContentCT=jindo.$Element('<div class="jmc-content-ct" style="background-color:#fff;"></div>');welContentCT.appendTo(this._welContentView.$value());welScrollWrapper.appendTo(welContentCT.$value());}
welScroller.appendTo(welScrollWrapper.$value());aWelContents[i].appendTo(welScroller.$value());}
return elContentFragment;},_attachEvent:function(){this._htEvent["rotate"]=jindo.$Fn(this._onResize,this).bind();jindo.m.bindRotate(this._htEvent["rotate"]);this._htEvent["load"]=jindo.$Fn(this._onLoad,this).attach(window,"load");},_onLoad:function(){var oClientSize=jindo.m._clientSize(this._bUseFullScreen);if(this._bUseFullScreen){oClientSize.height+=jindo.m._getAdressSize();}
if(this._oClientSize.height!=oClientSize.height||this._oClientSize.width!=oClientSize.width){this._onResize();}else{this.hideLoading();}
this._hideAddress();},_onResize:function(){if(this._oTimeout){clearTimeout(this._oTimeout);this._oTimeout=null;}
this._oClientSize=jindo.m._clientSize(this._bUseFullScreen);if(this._bUseFullScreen){if(window.pageYOffset===0){this._oClientSize.height+=jindo.m._getAdressSize();}}
if(this._bMultiPage){if(this._bUseFlicking){this._resizeFlicking();this._resizePage();this._resizeScroll();}else{this._resizePage();this._resizeScroll();}}else{if(this._bMultiContent){if(this._bUseFlicking){this._resizePage();this._resizeFlicking();this._resizeScroll();}else{this._resizePage();this._resizeContentView();this._resizeScroll();}}else{this._resizePage();this._resizeScroll();}}
this.hideLoading();this._hideAddress();},_hideAddress:function(){if(this._bUseFullScreen){setTimeout(function(){window.scrollTo(0,1);},500);}},_resizePage:function(){for(var i=0;i<this.getPageCount();i++){this._aPages[i]["oPage"].resize(this._oClientSize);}},_resizeContentView:function(){var htFlickSize=this._getFlickSize();this._welContentView.css({"position":"relative","width":htFlickSize.width+"px","height":htFlickSize.height+"px"});},_resizeFlicking:function(){if(!this._bUseFlicking){return false;}
var htFlickSize=this._getFlickSize();this._oFlicking.resize({"nFlickWidth":htFlickSize.width,"nFlickHeight":htFlickSize.height});},_resizeScroll:function(){var aScrollSize=[];for(var i=0;i<this.getPageCount();i++){aScrollSize.push({"nScrollWidth":this._aPages[i]["oPage"].getNoneFixedWidth(),"nScrollHeight":this._aPages[i]["oPage"].getNoneFixedHeight()});}
this._oScroll.resize(aScrollSize);},_initLoading:function(){if(!this._bUseLoading){return false;}
this._oLoading=new jindo.m.Loading(null,this._htLoadingOption);this._oLoading.show();},_initScrollManager:function(){this._oScroll=new jindo.m.PageLayoutUI.ScrollManager({"oPageLayout":this,"htUserOption":this._htScrollOption});},addScroll:function(htScrollOption){this._oScroll.addScroll(htScrollOption);},_initMultiPage:function(aPages,nDefaultIndex){for(var i=0;i<this.getPageCount();i++){this._initPage(aPages[i],i);}},_setMultiContentPosition:function(){if(!this._bMultiContent){return false;}
this._resizeContentView();this._aContentCT=jindo.$ElementList(this._welRoot.queryAll(".jmc-content-ct")).$value();for(var i=0;i<this.getContentCount();i++){nZIndex=(i===this._nCurrentIndex)?10:1;this._aContentCT[i].css({"top":"0px","left":"0px","position":"absolute","overflow":"hidden","zIndex":nZIndex});}},_setMultiPagePosition:function(){if(!this._bMultiPage){return false;}
var nZIndex;for(var i=0;i<this.getPageCount();i++){nZIndex=(i===this._nCurrentIndex)?10:1;this._aPages[i]["welPage"].css({"top":"0px","left":"0px","position":"absolute","overflow":"hidden","zIndex":nZIndex});}},_initPage:function(welPage,nPageIndex){this._aPages[nPageIndex]={"welPage":welPage,"oPage":new jindo.m.PageLayoutUI.Page(welPage.$value(),{"oPageLayout":this,"nIndex":nPageIndex,"nCurrentIndex":this._nCurrentIndex,"htPageSize":this._oClientSize})};},_initFlicking:function(elFlickView){var htFlickSize=this._getFlickSize();this._oFlicking=jindo.m.PageLayoutUI.Flicking;this._oFlicking.init(elFlickView,{"oPageLayout":this,"nDefaultIndex":this._nCurrentIndex,"nFlickWidth":htFlickSize.width,"nFlickHeight":htFlickSize.height,"htUserOption":this._htFlickingOption});},_initAjaxHistory:function(){this._oAjaxHistory=jindo.m.PageLayoutUI.AjaxHistory;this._oAjaxHistory.init({"oPageLayout":this,"htUserOption":this._htHistoryOption});},_getFlickSize:function(){var htFlickSize={};if(this._bMultiPage){htFlickSize=this._oClientSize;}else{htFlickSize["width"]=this._aPages[0]["oPage"].getNoneFixedWidth();htFlickSize["height"]=this._aPages[0]["oPage"].getNoneFixedHeight();}
return htFlickSize;},getCurrentIndex:function(){if(this._bUseFlicking){this._nCurrentIndex=this._oFlicking.getCurrentIndex();}
return this._nCurrentIndex;},getPageCount:function(){return this._nPageCount;},getContentCount:function(){var nContentCount;if(this._bMultiPage){nContentCount=this.getPageCount();}else{nContentCount=this._oScroll.getScrollCount();}
return nContentCount;},getContentCT:function(nContentIndex){return this._aContentCT[nContentIndex];},getRoot:function(){var welRoot;if(this._bMultiPage&&this._bUseFlicking){welRoot=this._welFlickView;}else{welRoot=this._welRoot;}
return welRoot;},getPage:function(nIndex){var vPage;if(typeof nIndex=="undefined"){vPage=[];for(var i=0;i<this.getContentCount();i++){vPage.push(this._getPage(i));}}else{vPage=this._getPage(nIndex);}
return vPage;},_getPage:function(nIndex){var nPageIndex;if(this._bMultiPage){nPageIndex=nIndex;}else{nPageIndex=0;}
var oPage=this._aPages[nPageIndex]["oPage"];var htPage={"welHeader":jindo.$Element(oPage.getHeader()),"welContent":this._oScroll.getScrollContent(nIndex),"welFooter":jindo.$Element(oPage.getFooter())};return htPage;},refresh:function(){this._onResize();},addHistory:function(){this._oAjaxHistory.addHistory();},changeHistory:function(nIndex){if(this._bUseFlicking){this._oFlicking.moveTo(nIndex);}else{this.moveTo(nIndex);}},moveTo:function(nIndex){if(typeof nIndex=="undefined"){return false;}
if(this._bUseFlicking){this._oFlicking.moveTo(nIndex);}else{if(!this.onBeforeMovePage({"nContentsIndex":this.getCurrentIndex(),"nContentsNextIndex":nIndex})){return;}
this.show(nIndex);this.onAfterMovePage({"nContentsIndex":nIndex});}},show:function(nIndex){if(typeof nIndex=="undefined"){return false;}
this.hide(this.getCurrentIndex());if(this._bMultiPage){this._aPages[nIndex]["oPage"].show();}else if(this._bMultiContent){this._aPages[0]["oPage"].showContentView(nIndex);}
this._nCurrentIndex=nIndex;},hide:function(nIndex){if(typeof nIndex=="undefined"){nIndex=this._nCurrentIndex;}
if(this._bMultiPage){this._aPages[nIndex]["oPage"].hide();}else if(this._bMultiContent){this._aPages[0]["oPage"].hideContentView(nIndex);}},showLoading:function(){if(!this._bUseLoading){return false;}
if(!this._oLoading){this._initLoading();}
this._oLoading.show();},hideLoading:function(){if(!this._bUseLoading){return false;}
this._oLoading.hide();},onTouchStartFlicking:function(oCustomEvent){return this.fireEvent("touchStart",{sType:"touchStart",element:oCustomEvent.element,nX:oCustomEvent.nX,nY:oCustomEvent.nY});},onBeforeMovePage:function(oCustomEvent){return this.fireEvent("beforeMovePage",{sType:"beforeMovePage",nCurrentPage:oCustomEvent.nContentsIndex,nPage:oCustomEvent.nContentsNextIndex,bLeft:oCustomEvent.bLeft});},onAfterMovePage:function(oCustomEvent){if(this._bUseAjaxHistory){this.addHistory();}
this.fireEvent("afterMovePage",{sType:"afterMovePage",nCurrentPage:oCustomEvent.nContentsIndex});}}).extend(jindo.Component);jindo.m.PageLayoutUI.Page=jindo.$Class({$init:function(el,htUserOption){this._initVar(el,htUserOption);this._setWrapperElement();this._setFixedArea();this._initScroll();},_initVar:function(el,htUserOption){this._welPage=jindo.$Element(el);this._oPageLayout=htUserOption.oPageLayout;this._nIndex=htUserOption.nIndex;this._htPageSize=htUserOption.htPageSize;this._htWElement={};},_setWrapperElement:function(){this._htWElement["header"]=jindo.$Element(this._welPage.query(".jmc-header"));this._htWElement["footer"]=jindo.$Element(this._welPage.query(".jmc-footer"));},_onActivate:function(){},_onDeactivate:function(){},_setFixedArea:function(){this._bHeaderFixed=this._htWElement["header"]&&this._htWElement["header"].attr("position")=="fixed"?true:false;this._bFooterFixed=this._htWElement["footer"]&&this._htWElement["footer"].attr("position")=="fixed"?true:false;},_initScroll:function(){this._oPageLayout.addScroll({"welBaseElement":this._welPage,"nScrollWidth":this.getNoneFixedWidth(),"nScrollHeight":this.getNoneFixedHeight()});},_getHeight:function(welTarget){var nHeight=welTarget.$value().offsetHeight;nHeight+=parseInt(welTarget.css('marginTop'),10)+parseInt(welTarget.css('marginBottom'),10)||0;return nHeight;},_getHeaderHeight:function(){var nHeaderHeight=this._getHeight(this._htWElement["header"]);return nHeaderHeight;},_getFooterHeight:function(){var nFooterHeight=this._getHeight(this._htWElement["footer"]);return nFooterHeight;},resize:function(htPageSize){this._htPageSize=htPageSize||jindo.m._clientSize();},getNoneFixedWidth:function(){var nScrollWidth=this._htPageSize.width;return nScrollWidth;},getNoneFixedHeight:function(){var nHeight=this._htPageSize.height;var nNoneFixedHeight;if(this._bHeaderFixed){if(this._bFooterFixed){nNoneFixedHeight=parseInt(nHeight-this._getHeaderHeight()-this._getFooterHeight(),10);}else{nNoneFixedHeight=parseInt(nHeight-this._getHeaderHeight(),10);}}else{if(this._bFooterFixed){nNoneFixedHeight=parseInt(nHeight-this._getFooterHeight(),10);}else{nNoneFixedHeight=nHeight;}}
return nNoneFixedHeight;},getHeader:function(){return this._htWElement["header"]?this._htWElement["header"].$value():null;},getFooter:function(){return this._htWElement["footer"]?this._htWElement["footer"].$value():null;},showContentView:function(nContentIndex){var welContentView=this._oPageLayout.getContentCT(nContentIndex);welContentView.css({"zIndex":10});},hideContentView:function(nContentIndex){var welContentView=this._oPageLayout.getContentCT(nContentIndex);welContentView.css({"zIndex":1});},show:function(){this._welPage.css({"zIndex":10});},hide:function(){this._welPage.css({"zIndex":1});}});jindo.m.PageLayoutUI.ScrollManager=jindo.$Class({$init:function(htUserOption){this._initVar(htUserOption);},_initVar:function(htUserOption){this._aScrolls=[];this._aScrollOptions=[];this._oPageLayout=htUserOption.oPageLayout;this._htUserOption=htUserOption.htUserOption;this._nTotalScrollCnt=0;},addScroll:function(htScrollOption){this._aScrollWrappers=jindo.$ElementList(htScrollOption.welBaseElement.queryAll(".scroll-wrapper")).$value();this._nTotalScrollCnt+=this._aScrollWrappers.length;var nWidth=htScrollOption.nScrollWidth;var nHeight=htScrollOption.nScrollHeight;var welScrollWrapper,welScroller,welContent;var oScroll,htOption;var htUserOption=this._htUserOption||{};htUserOption["nWidth"]=nWidth;htUserOption["nHeight"]=nHeight;for(var i=0,nLen=this._aScrollWrappers.length;i<nLen;i++){welScrollWrapper=this._aScrollWrappers[i];oScroll=new jindo.m.Scroll(welScrollWrapper.$value(),htUserOption);welContent=jindo.$Element(welScrollWrapper.query(".jmc-content"));welContent.show();oScroll.refresh();if(!oScroll.hasVScroll()){welScroller=jindo.$Element(welScrollWrapper.query(".scroller"));welScroller.css({"width":nWidth+"px","height":(nHeight-1)+"px"});}
this._aScrolls.push(oScroll);htOption={"welWrapper":welScrollWrapper,"welScroller":welScroller,"welContent":welContent,"nWidth":nWidth,"nHeight":nHeight};this._aScrollOptions.push(htOption);}},getScrollCount:function(){return this._aScrolls.length;},getScrollWrapper:function(nIndex){var vWrapper;if(typeof nIndex=="undefined"){vWrapper=this._aScrollWrappers;}else{vWrapper=this._aScrollWrappers[nIndex];}
return vWrapper;},getScrollContent:function(nIndex){var vContent;if(typeof nIndex=="undefined"){vContent=[];for(var i=0,nLen=this._aScrollOptions.length;i<nLen;i++){vContent.push(this._aScrollOptions[nIndex]["welContent"]);}}else{vContent=this._aScrollOptions[nIndex]["welContent"];}
return vContent;},resize:function(aScrollSize){var oSize,nWidth,nHeight;for(var i=0,nLen=this._aScrolls.length;i<nLen;i++){oSize=aScrollSize[i]||aScrollSize[0];nWidth=oSize.nScrollWidth;nHeight=oSize.nScrollHeight;if(!this._aScrolls[i].hasVScroll()){this._aScrollOptions[i].welScroller.css({"width":nWidth+"px","height":nHeight+"px"});}
this._aScrolls[i].option({"nWidth":nWidth,"nHeight":nHeight});this._aScrolls[i].refresh();this._aScrollOptions[i]["nWidth"]=nWidth;this._aScrollOptions[i]["nHeight"]=nHeight;}}});jindo.m.PageLayoutUI.Flicking={init:function(elFlickView,htUserOption){this._initVar(elFlickView,htUserOption);this._setFlickingArea();htUserOption=this._htUserOption;htUserOption["bAutoResize"]=false;htUserOption["nDefaultIndex"]=this._nCurrentIndex;this._oFlicking=new jindo.m.Flicking(this._welFlickView.$value(),htUserOption);this._oFlicking.attach({"touchStart":jindo.$Fn(this._onTouchStartFlicking,this).bind(),"beforeFlicking":jindo.$Fn(this._onStartFlicking,this).bind(),"afterFlicking":jindo.$Fn(this._onEndFlicking,this).bind(),"move":jindo.$Fn(this._onEndFlicking,this).bind()});},_initVar:function(elFlickView,htUserOption){this._welFlickView=jindo.$Element(elFlickView);this._oPageLayout=htUserOption.oPageLayout;this._nWidth=htUserOption.nFlickWidth;this._nHeight=htUserOption.nFlickHeight;this._nCurrentIndex=htUserOption.nDefaultIndex;this._htUserOption=htUserOption.htUserOption||{};this._aFlickingContents=jindo.$ElementList(this._welFlickView.queryAll("."+this._htUserOption.sClassPrefix+this._htUserOption.sContentClass)).$value();this._aInnerContents=jindo.$ElementList(this._welFlickView.queryAll(".jmc-content")).$value();},_setFlickingArea:function(){this._welFlickView.css({"width":this._nWidth+"px","height":this._nHeight+"px"});var elFlickingContent;for(var i=0,nLen=this._aFlickingContents.length;i<nLen;i++){elFlickingContent=this._aFlickingContents[i];elFlickingContent.css({"float":"left","width":"100%","height":"100%"});}},_onTouchStartFlicking:function(oCustomEvt){if(this._oPageLayout.onTouchStartFlicking(oCustomEvt)){return true;}else{if(oCustomEvt.stop){oCustomEvt.stop();}else{return false;}}},_onStartFlicking:function(oCustomEvent){if(this._oPageLayout.onBeforeMovePage(oCustomEvent)){return true;}else{if(oCustomEvent.stop){oCustomEvent.stop();}else{return false;}}},_onEndFlicking:function(oCustomEvent){var nCurrentIndex=oCustomEvent.nContentsIndex;this._oPageLayout.onAfterMovePage(oCustomEvent);},resize:function(htFlickSize){this._nWidth=htFlickSize.nFlickWidth;this._nHeight=htFlickSize.nFlickHeight;this._welFlickView.css({"width":this._nWidth+"px","height":this._nHeight+"px"});this._oFlicking.refresh();},getCurrentIndex:function(){return this._oFlicking.getContentIndex();},moveTo:function(nIndex,nDuration){if(typeof nIndex=="undefined"){return false;}
if(!this._onStartFlicking({"nContentsIndex":this._oFlicking.getContentIndex(),"nContentsNextIndex":nIndex})){return;}
this._oFlicking.moveTo(nIndex,nDuration);}};jindo.m.PageLayoutUI.AjaxHistory={init:function(htUserOption){this._initVar(htUserOption);this._oAjaxHistory=new jindo.m.AjaxHistory(this._htUserOption);this._oAjaxHistory.attach({"load":jindo.$Fn(this._onLoadHistory,this).bind(),"change":jindo.$Fn(this._onChangeHistory,this).bind()});this._oAjaxHistory.initialize();},_initVar:function(htUserOption){this._oPageLayout=htUserOption.oPageLayout;this._htUserOption=htUserOption.htUserOption;},_onLoadHistory:function(oCustomEvent){this.addHistory(true);},_onChangeHistory:function(oCustomEvent){var htData=jindo.$Json(oCustomEvent.htHistoryData).toObject();this._oPageLayout.changeHistory(htData.page);},addHistory:function(bLoad){this._oAjaxHistory.addHistory({"page":this._oPageLayout.getCurrentIndex()},bLoad);}};jindo.m.RevealSidebarUI=jindo.$Class({$init:function(el,htUserOption){this.option({bActivateOnload:true,nSildeThreshold:50,sDefaultArea:"main",htScrollOption:{},nSlideDuration:200,bUseCss3d:jindo.m._isUseCss3d(),bUseTimingFunction:jindo.m._isUseTimingFunction()});this.option(htUserOption||{});this._initVar();this._setWrapperElement(el);this._initComponent();if(this.option("bActivateOnload")){this.activate();}},_initVar:function(){this._oTransition=new jindo.m.Transition({bUseTimingFunction:this.option("bUseTimingFunction")});this._sStatus=this.option("sDefaultArea");this._oLeftLayoutInfo=null;this._oRightLayoutInfo=null;this._oLeftScroll=null;this._oRightScroll=null;this._oSize=jindo.m._clientSize();this._bUseRebuild=false;this.sTranOpen=null;this.sTranEnd=null;this._setTrans();},_setTrans:function(){if(this.option("bUseCss3d")){this.sTranOpen="3d(";this.sTranEnd=",0)";}else{this.sTranOpen="(";this.sTranEnd=")";}},_setWrapperElement:function(el){this._htWElement={};el=jindo.$Element(el);this._htWElement["body"]=jindo.$Element(jindo.$$.getSingle(".rs-body")).css({"overflow":"hidden"});if(this._htWElement["body"].css("position")=="static"){this._htWElement["body"].css("position","relative");}
this._bUseRebuild=(this._htWElement["body"].attr("markup")&&this._htWElement["body"].attr("markup").toUpperCase()=="DETAILED")?false:true;this._htWElement["main"]=jindo.$Element(this._htWElement["body"].query(".rs-main"));if(this._bUseRebuild&&el&&!el.isEqual(this._htWElement["body"])){this._htWElement["main"].hide();this._htWElement["main"]=el;this._htWElement["main"].addClass("rs-main");}
this._htWElement["main"].css({"position":"absolute","zIndex":10,"left":0});this._htWElement["left"]=jindo.$Element(this._htWElement["body"].query(".rs-left")).css({"position":"absolute","zIndex":5,"left":0}).show();this._htWElement["right"]=jindo.$Element(this._htWElement["body"].query(".rs-right")).css({"position":"absolute","zIndex":5,"left":this.option("nSildeThreshold")+"px"}).show();this._htWElement["blocker"]=jindo.$Element("<div style='position:absolute;opacity:0;display:none;z-index:1000;opacity:0;-webkit-tap-highlight-color:rgba(0,0,0,0)'>");this._htWElement["blocker"].appendTo(this._htWElement["body"]);this._oLeftLayoutInfo=this._setLayout(this._htWElement["left"]);this._oRightLayoutInfo=this._setLayout(this._htWElement["right"]);},resize:function(){this._oSize=jindo.m._clientSize();this._htWElement["right"].show();this._htWElement["left"].show();var oLeftSize=this._getScrollSize(this._oLeftLayoutInfo),oRightSize=this._getScrollSize(this._oRightLayoutInfo),nPos=this._getPos(this._sStatus);this._htWElement["right"].css("width",oRightSize.nWidth+"px");this._htWElement["left"].css("width",oLeftSize.nWidth+"px");this._htWElement["body"].css({width:this._oSize.width+"px",height:this._oSize.height+"px"});this._htWElement["blocker"].css({width:this.option("nSildeThreshold")+"px",height:this._oSize.height+"px",left:this._sStatus=="left"?nPos+"px":"0px"});this._htWElement["main"].css({"width":this._oSize.width+"px","height":this._oSize.height+"px"}).css(jindo.m.getCssPrefix()+"Transform","translate"+this.sTranOpen+nPos+"px,0px"+this.sTranEnd);this._oLeftScroll.option({"nWidth":oLeftSize.nWidth,"nHeight":oLeftSize.nHeight});this._oRightScroll.option({"nWidth":oRightSize.nWidth,"nHeight":oRightSize.nHeight});this._oLeftScroll.refresh();this._oRightScroll.refresh();switch(this._sStatus){case"left":this._htWElement["right"].hide();break;case"right":this._htWElement["left"].hide();break;case"main":this._htWElement["left"].hide();this._htWElement["right"].hide();break;}},_onRotate:function(we){this.resize();},_initComponent:function(){this._oLeftScroll=this._initScroll(this._oLeftLayoutInfo);this._oRightScroll=this._initScroll(this._oRightLayoutInfo);},_initScroll:function(oLayoutInfo){return new jindo.m.Scroll(oLayoutInfo.welWrapper,this.option("htScrollOption"));},_setLayout:function(wel){var welHeader=jindo.$Element(wel.query(".rs-header")),welFooter=jindo.$Element(wel.query(".rs-footer")),welContent=jindo.$Element(wel.query(".rs-content")),bHeaderFixed=welHeader&&welHeader.attr("position")=="fixed",bFooterFixed=welFooter&&welFooter.attr("position")=="fixed",welWrapper=null;if(this._bUseRebuild){welWrapper=this._arrangeDom({welContent:welContent,bHeaderFixed:bHeaderFixed,bFooterFixed:bFooterFixed,welHeader:welHeader,welFooter:welFooter});}else{welWrapper=jindo.$Element(wel.query(".scroller"));}
return{welWrapper:welWrapper,welHeader:welHeader,welFooter:welFooter,bHeaderFixed:bHeaderFixed,bFooterFixed:bFooterFixed};},_getScrollSize:function(oLayoutInfo){var nLeft=0,nNoFixedHeight=this._oSize.height,bVisible=oLayoutInfo.welWrapper.visible();if(!bVisible){nLeft=wel.css("left");oLayoutInfo.welWrapper.css("left","-999px").show();}
if(oLayoutInfo.bHeaderFixed){nNoFixedHeight-=oLayoutInfo.welHeader.height();}
if(oLayoutInfo.bFooterFixed){nNoFixedHeight-=oLayoutInfo.welFooter.height();}
if(!bVisible){oLayoutInfo.welWrapper.css("left",nLeft).hide();}
return{nWidth:this._oSize.width-this.option("nSildeThreshold"),nHeight:nNoFixedHeight};},_arrangeDom:function(ht){ht.welContent.wrap("<div>").wrap("<div>");welScroller=ht.welContent.parent();if(!ht.bHeaderFixed&&ht.welHeader){welScroller.prepend(ht.welHeader);}
if(!ht.bFooterFixed&&ht.welFooter){welScroller.append(ht.welFooter);}
return welScroller.parent();},_slide:function(isRight,nDuration){var nPos=this._getPos(isRight?"right":"left");self=this;nDuration=(typeof nDuration=="undefined")?this.option("nSlideDuration"):nDuration;if(this.fireEvent("beforeSlide",{sStatus:this._sStatus})){self._htWElement["blocker"].show();if(isRight){this._htWElement["left"].css("zIndex",5).hide();this._htWElement["right"].css("zIndex",6).show();self._htWElement["blocker"].css("left","0px");this._sStatus="right";}else{this._htWElement["right"].css("zIndex",5).hide();this._htWElement["left"].css("zIndex",6).show();self._htWElement["blocker"].css("left",nPos+"px");this._sStatus="left";}
this._oTransition.queue(this._htWElement["main"].$value(),nDuration,{htTransform:{"transform":"translate"+self.sTranOpen+nPos+"px,0px"+self.sTranEnd},fCallback:function(){self.fireEvent("slide",{sStatus:self._sStatus});}}).start();}},_getPos:function(sStatus){var nPos=parseInt(this._oSize.width-this.option("nSildeThreshold"),10);switch(sStatus){case"left":break;case"main":nPos=0;break;case"right":nPos=-nPos;break;}
return nPos;},move:function(sType,nDuration){nDuration=(typeof nDuration=="undefined")?this.option("nSlideDuration"):nDuration;switch(sType){case"left":this._slide(false,nDuration);break;case"main":this.restore(nDuration);break;case"right":this._slide(true,nDuration);break;}},toggleSlide:function(isRight){if(this._sStatus!="main"){this.restore();return;}else{this._slide(isRight);return;}},restore:function(nDuration){nDuration=(typeof nDuration=="undefined")?this.option("nSlideDuration"):nDuration;if(this.fireEvent("beforeRestore",{sStatus:this._sStatus})){var self=this;this._oTransition.queue(this._htWElement["main"].$value(),nDuration,{htTransform:{"transform":"translate"+self.sTranOpen+"0px,0px"+self.sTranEnd},fCallback:function(){self._sStatus="main";self._htWElement["blocker"].hide();self._htWElement["left"].hide();self._htWElement["right"].hide();self.fireEvent("restore",{sStatus:self._sStatus});}}).start();}},_onActivate:function(){this._attachEvent();this.resize();this.move(this._sStatus,0);},_onDeactivate:function(){this._detachEvent();},_attachEvent:function(){this._htEvent={};this._htEvent["restore"]=jindo.$Fn(this._onRestore,this).attach(this._htWElement["blocker"],"click");this._htEvent["rotate"]=jindo.$Fn(this._onRotate,this).bind();jindo.m.bindRotate(this._htEvent["rotate"]);},_detachEvent:function(){this._htEvent["restore"].detach(this._htWElement["blocker"],"click");jindo.m.unbindRotate(this._htEvent["rotate"]);this._htEvent=null;},_onRestore:function(we){this.restore();},destroy:function(){this.deactivate();this._oLeftScroll.destroy();this._oLeftScroll=null;this._oRightScroll.destroy();this._oRightScroll=null;this._oTransition.destroy();this._oTransition=null;}}).extend(jindo.UIComponent);jindo.m.Accordion=jindo.$Class({$init:function(el,htUserOption){var htDefaultOption={bActivateOnload:true,sClassPrefix:'accordion-',sDirection:'vertical',nDefalutIndex:-1,bUseToggle:false,sTransitionTimingFunction:"ease",nDuration:500};this.option(htDefaultOption);this.option(htUserOption||{});this._initVar(el);this._setWrapperElement();if(this.option("bActivateOnload")){this.activate();}
this._setSize();this._setDefaultExpand();},_initVar:function(el){this._elContainer=(typeof el=="string")?jindo.$(el):el;this._aAccordionBlock=jindo.$$("."+this.option("sClassPrefix")+"block",this._elContainer);var htInfo=jindo.m.getDeviceInfo();var nVersion=parseFloat(htInfo.version,10);if(htInfo.android&&(nVersion<3)){var elDummyTag=jindo.$$.getSingle("._accordion_dummy_atag_",this._elContainer);if(!elDummyTag){elDummyTag=jindo.$("<a href='javascript:void(0);' class='_accordion_dummy_atag_'></a>");elDummyTag.style.position="absolute";elDummyTag.style.left="-1000px";elDummyTag.style.top="-1000px";elDummyTag.style.width=0;elDummyTag.style.height=0;jindo.$Element(this._elContainer).append(elDummyTag);}}
this._nExpand=-1;this._wfTransitionEnd=jindo.$Fn(this._onTransitionEnd,this).bind();},_setWrapperElement:function(){},_onActivate:function(){this._attachEvent();},_onDeactivate:function(){this._detachEvent();},_attachEvent:function(){this._htEvent={};jindo.$A(this._aAccordionBlock).forEach(function(el,index,array){this._htEvent["click_"+index]={ref:jindo.$Fn(this._onClick,this).attach(this.getHandler(index),"click"),el:this.getHandler(index)};},this);},_detachEvent:function(sEventKey){if(sEventKey){var htTargetEvent=this._htEvent[sEventKey];htTargetEvent.ref.detach(htTargetEvent.el,sEventKey.substring(0,sEventKey.indexOf("_")));}},_detachEventAll:function(){for(var p in this._htEvent){this._detachEvent(p);}
this._htEvent=null;},_onClick:function(we){we.stop();var elBlock=this._getBlock(we.element);var nIndex=(elBlock)?jindo.$A(this._aAccordionBlock).indexOf(elBlock):null;var nCurrentIndex=this.getExpandIndex();var bUseToggle=this.option("bUseToggle");if(typeof nIndex=='number'){if(nIndex==nCurrentIndex){if(bUseToggle){this.collapse(nCurrentIndex);this._nExpand=-1;}}else{this.expand(nIndex);if(nCurrentIndex>-1){this.collapse(nCurrentIndex);}}}},_setSize:function(){this._htBlockSize={};var nHeaderSize,nBodySize;jindo.$A(this._aAccordionBlock).forEach(function(el,index,array){nHeaderSize=this._getHeaderSize(index);nBodySize=this._getBodySize(index);this._htBlockSize[index]={nHeaderSize:nHeaderSize,nBodySize:nBodySize};if(this.option("sDirection")=="vertical"){jindo.$Element(el).height(nHeaderSize);}else{jindo.$Element(el).width(nHeaderSize);}},this);},_getHeaderSize:function(nIndex){var welHead=jindo.$Element(this.getHead(nIndex));var nHeaderSize=(this.option("sDirection")=="vertical")?welHead.height():welHead.width();return nHeaderSize;},_getBodySize:function(nIndex){var welBody=jindo.$Element(this.getBody(nIndex));var nBodySize=(this.option("sDirection")=="vertical")?welBody.height():welBody.width();return nBodySize;},_getSize:function(nIndex){if(!this._htBlockSize||!this._htBlockSize[nIndex]){this._setSize();}
var nSize=this._htBlockSize[nIndex]["nHeaderSize"]+this._htBlockSize[nIndex]["nBodySize"];return nSize;},_setDefaultExpand:function(){var nDefaultIndex=this.option("nDefalutIndex");if(nDefaultIndex>-1){setTimeout(jindo.$Fn(function(){this.expand(nDefaultIndex);},this).bind(),100);}},getHead:function(nIndex){return jindo.$$.getSingle('dt',this._aAccordionBlock[nIndex]);},getBody:function(nIndex){return jindo.$$.getSingle('dd',this._aAccordionBlock[nIndex]);},_getBlock:function(el){var sClassPrefix=this.option("sClassPrefix")+"block";var elBlock=jindo.m.getClosest(sClassPrefix,el);return elBlock;},getHandler:function(nIndex){var elHead=this.getHead(nIndex);return jindo.$$.getSingle('.'+this.option('sClassPrefix')+'handler',elHead)||elHead;},getExpandIndex:function(){return this._nExpand;},expand:function(nIndex){this._elBlock=this._aAccordionBlock[nIndex];if(typeof this._elBlock=='undefined'){return;}
if(!this.fireEvent("beforeExpand",{sType:"beforeExpand",elBlock:this._elBlock,nBeforeIndex:this._nExpand,nIndex:nIndex})){return;}
this._setTransition(this._elBlock,this._getSize(nIndex));this._nExpand=nIndex;this.fireEvent("expand",{sType:"expand",elBlock:this._elBlock,nIndex:nIndex});},collapse:function(nIndex){this._elBlock=this._aAccordionBlock[nIndex];if(typeof this._elBlock=='undefined'){return;}
if(!this.fireEvent("beforeCollapse",{sType:"beforeCollapse",elBlock:this._elBlock,nIndex:nIndex})){return;}
this._setTransition(this._elBlock,this._getHeaderSize(nIndex));if(this._nExpand==nIndex){this._nExpand=-1;}
this.fireEvent("collapse",{sType:"collapse",elBlock:this._elBlock,nIndex:nIndex});},collapseAll:function(){var nIndex=this.getExpandIndex();if(nIndex>-1){this.collapse(nIndex);}
this._nExpand=-1;},setEffect:function(htEffect){if(htEffect.sTransitionTimingFunction&&(htEffect.sTransitionTimingFunction=="ease"||htEffect.sTransitionTimingFunction=="linear"||htEffect.sTransitionTimingFunction=="ease-in"||htEffect.sTransitionTimingFunction=="ease-out"||htEffect.sTransitionTimingFunction=="ease-in-out")){this.option("sTransitionTimingFunction",htEffect.sTransitionTimingFunction);}
if(htEffect.nDuration&&htEffect.nDuration>0){this.option("nDuration",htEffect.nDuration);}},_setTransition:function(elBlock,nBlockSize,sTransitionTimingFunction,nDuration){sTransitionTimingFunction=sTransitionTimingFunction||this.option("sTransitionTimingFunction");nDuration=nDuration||this.option("nDuration");if(nDuration>0){this._attachTransitionEnd(elBlock);}
var sTransition="";var sDirection=this.option("sDirection");elBlock.style.webkitTransition="";elBlock.style.mozTransition="";if(sDirection==="vertical"){sTransition="height "+nDuration+"ms "+sTransitionTimingFunction;elBlock.style.webkitTransition=sTransition;elBlock.style.mozTransition=sTransition;elBlock.style.height=nBlockSize+"px";}else if(sDirection==="horizontal"){sTransition="width "+nDuration+"ms "+sTransitionTimingFunction;elBlock.style.webkitTransition=sTransition;elBlock.style.mozTransition=sTransition;elBlock.style.width=nBlockSize+"px";}
if(nDuration===0){this._onTransitionEnd({srcElement:elBlock});}},_attachTransitionEnd:function(elBlock){this._elTransition=elBlock;this._elTransition.addEventListener('webkitTransitionEnd',this._wfTransitionEnd,false);},_detachTransitionEnd:function(el){el.removeEventListener('webkitTransitionEnd',this._wfTransitionEnd,false);this._elTransition=null;},_onTransitionEnd:function(evt){var elDummyTag=jindo.$$.getSingle("._accordion_dummy_atag_",this._elContainer);if(elDummyTag){elDummyTag.focus();}
this._detachTransitionEnd(evt.srcElement);},destroy:function(){this._detachEventAll();this._elContainer=null;this._aAccordionBlock=null;this._elBlock=null;this._htBlockSize=null;this._nExpand=null;}}).extend(jindo.UIComponent);jindo.m.Dialog=jindo.$Class({$init:function(htUserOption){var htDefaultOption={bActivateOnload:true,sClassPrefix:"dialog-",sPosition:"center",bUseEffect:true,bAutoClose:false,bAutoReposition:true,sFoggyColor:"gray",nFoggyOpacity:0.5,sEffectType:"pop",nEffectDuration:500,sDialogColor:"white"};this.option(htDefaultOption);this.option(htUserOption||{});this._setWrapperElement();this._initVar();this._setDeviceSize();this._initElement();if(this.option("bActivateOnload")){this.activate();}},_setWrapperElement:function(){this._htWElement={};this._htWElement["dialog_container"]=jindo.$Element('<div class="'+this.option("sClassPrefix")+'container"></div>');this._htWElement["dialog_foggy"]=jindo.$Element('<div class="'+this.option("sClassPrefix")+'fog"></div>');this._htWElement["dialog_layer"]=jindo.$Element('<div class="'+this.option("sClassPrefix")+'layer"></div>');this._htWElement["dialog_clone"]=jindo.$Element('<div class="'+this.option("sClassPrefix")+'clone"></div>');},_initVar:function(){this._htDialogSize={width:0,height:0};this._sTemplate=null;this._bIsShown=false;this._bProcessingShow=false;this._bProcessingHide=false;this._htDeviceInfo=jindo.m.getDeviceInfo();this._bIOS=(this._htDeviceInfo.iphone||this._htDeviceInfo.ipad)?true:false;this._bAndroid=this._htDeviceInfo.android?true:false;},_setDeviceSize:function(){if(this._bIOS||(this._bAndroid)||!jindo.$Agent().navigator().mobile){this._htDeviceSize=jindo.$Document().clientSize();}else{this._htDeviceSize={width:window.screen.width,height:window.screen.height};}},_initContainerTop:function(){var nTop=0;var bUseEffect=this.option("bUseEffect");var sEffectType=this.option("sEffectType");if(bUseEffect&&(sEffectType=="slide-up"||sEffectType=="slide-down")){nTop=this._htDeviceSize.height*((sEffectType=="slide-up")?1:-1);}
nTop+=window.pageYOffset;this._htWElement["dialog_container"].css("top",nTop+"px");},_initElement:function(){this._htWElement["dialog_foggy"].css({position:"absolute",padding:"0px",margin:"0px",border:"0px",backgroundColor:this.option("sFoggyColor"),opacity:this.option("nFoggyOpacity"),width:this._htDeviceSize.width+"px",height:this._htDeviceSize.height+"px",left:"0px",top:"0px"});this._htWElement["dialog_foggy"].appendTo(this._getContainer());this._htWElement["dialog_layer"].css({position:"relative",backgroundColor:this.option('sDialogColor')});this._htWElement["dialog_layer"].appendTo(this._getContainer());this._htWElement["dialog_container"].css({position:"absolute",overflow:"hidden",width:this._htDeviceSize.width+"px",height:this._htDeviceSize.height+"px",left:"0px",zIndex:100});this._initContainerTop();this._htWElement["dialog_container"].hide();this._htWElement["dialog_container"].appendTo(document.body);if(this.option("bUseEffect")){this._oLayerEffect=new jindo.m.LayerEffect(this._getContainer());}
this._htWElement["dialog_clone"].css({position:"absolute",left:"-1000px",top:"-1000px"});this._htWElement["dialog_clone"].appendTo(document.body);this._htWElement["dialog_clone"].hide();},_onActivate:function(){this._attachEvent();},_onDeactivate:function(){this._detachEventAll();},_attachEvent:function(){this._htEvent={};this._htEvent["click"]={ref:jindo.$Fn(this._onClick,this).attach(this.getDialog(),"click"),el:this.getDialog()};this._htEvent["touchend"]={ref:jindo.$Fn(this._onClick,this).attach(this._getFoggy(),"touchend"),el:this._getFoggy()};this._htEvent["touchmove"]={ref:jindo.$Fn(this._onTouchMove,this).attach(this._getContainer(),"touchmove"),el:this._getContainer()};if(this.option("bAutoReposition")){this._htEvent["rotate"]=jindo.$Fn(this._onResize,this).bind();jindo.m.bindRotate(this._htEvent["rotate"]);}},_detachEvent:function(sEventKey){if(sEventKey){var htTargetEvent=this._htEvent[sEventKey];if(htTargetEvent.ref){htTargetEvent.ref.detach(htTargetEvent.el,sEventKey);}}},_detachEventAll:function(){for(var p in this._htEvent){this._detachEvent(p);}
jindo.m.unbindRotate(this._htEvent["rotate"]);this._htEvent=null;},_onClick:function(we){var sClassPrefix=this.option("sClassPrefix");var elClosestClose,elClosestConfirm,elClosestCancel,elClosestLayer,elClosestAnchor;if((elClosestClose=jindo.m.getClosest(("."+sClassPrefix+"close"),we.element))){if(this.fireEvent("close",{sType:"close",elLayer:this.getDialog()})){this.hide();}}else if((elClosestConfirm=jindo.m.getClosest(("."+sClassPrefix+"confirm"),we.element))){if(this.fireEvent("confirm",{sType:"confirm",elLayer:this.getDialog()})){this.hide();}}else if((elClosestCancel=jindo.m.getClosest(("."+sClassPrefix+"cancel"),we.element))){if(this.fireEvent("cancel",{sType:"cancel",elLayer:this.getDialog()})){this.hide();}}else if((elClosestLayer=jindo.m.getClosest(("."+sClassPrefix+"layer"),we.element))){if((elClosestAnchor=jindo.m.getClosest(("a"),we.element))){return false;}}else{if(this.option("bAutoClose")){this.hide();}}
we.stop();return false;},_onTouchStart:function(we){var sClassPrefix=this.option("sClassPrefix");var elClosestLayer;if(!(elClosestLayer=jindo.m.getClosest(("."+sClassPrefix+"layer"),we.element))){we.stop(jindo.$Event.CANCEL_ALL);return false;}},_onTouchMove:function(we){we.stop(jindo.$Event.CANCEL_ALL);return false;},_onResize:function(we){if(this._bProcessingShow||this._bProcessingHide){if(this.option("bUseEffect")){this._getLayerEffect().stop();}else{if(this._bProcessingShow){this._endShowEffect();}else{this._endHideEffect();}}}
if(this._oTimeout){clearTimeout(this._oTimeout);this._oTimeout=null;}
if(this.isShown()&&this._bIOS){this._htWElement["dialog_container"].hide();}
this._oTimeout=setTimeout(jindo.$Fn(function(){this._resizeDocument();if(this.isShown()&&this._bIOS){this._htWElement["dialog_container"].show();}},this).bind(),300);},_resizeDocument:function(){this._setDeviceSize();this._htWElement["dialog_container"].css({width:this._htDeviceSize.width+"px",height:this._htDeviceSize.height+"px"});this._htWElement["dialog_foggy"].css({width:this._htDeviceSize.width+"px",height:this._htDeviceSize.height+"px"});this._resizeDialog(true);if(this.option("bUseEffect")){this._getLayerEffect().setSize();}},_resizeDialog:function(bForced){if(this._setDialogSize()||bForced){this._repositionDialog();}},_getLayerEffect:function(){return this._oLayerEffect;},_getContainer:function(){return this._htWElement["dialog_container"].$value();},_getFoggy:function(){return this._htWElement["dialog_foggy"].$value();},getDialog:function(){return this._htWElement["dialog_layer"].$value();},setTemplate:function(sTemplate){this._sTemplate=sTemplate;this._oTemplate=jindo.$Template(this._sTemplate);this._htWElement["dialog_clone"].html(sTemplate);this._resizeDialog();},getTemplate:function(){return this._sTemplate;},_setDialogSize:function(){var nLayerWidth;var nLayerHeight;if(this.option("sPosition")=="all"){nLayerWidth=this._htDeviceSize.width;nLayerHeight=this._htDeviceSize.height;}else{this._htWElement["dialog_clone"].show();nLayerWidth=Math.min(this._htWElement["dialog_clone"].width(),this._htDeviceSize.width);nLayerHeight=Math.min(this._htWElement["dialog_clone"].height(),this._htDeviceSize.height);this._htWElement["dialog_clone"].hide();}
if(this._htDialogSize.width==nLayerWidth&&this._htDialogSize.height==nLayerHeight){return false;}
this._htDialogSize={width:nLayerWidth,height:nLayerHeight};this._htWElement["dialog_layer"].css({width:nLayerWidth+"px",height:nLayerHeight+"px"});return this._htDialogSize;},_getDialogSize:function(){return this._htDialogSize;},_repositionDialog:function(){var htLayerPosition=this._getDialogPosition();this._htWElement["dialog_layer"].css({top:htLayerPosition.top+"px",left:htLayerPosition.left+"px"});this._htWElement["dialog_container"].css({top:window.pageYOffset+"px",left:window.pageXOffset+"px"});if(!this.isShown()){var sEffectType=this.option("sEffectType");if(sEffectType=="slide-up"||sEffectType=="slide-down"){this._initContainerTop();}}},_getDialogPosition:function(){var nWidth=this._htDeviceSize.width;var nHeight=this._htDeviceSize.height;var nLayerWidth=this._getDialogSize().width;var nLayerHeight=this._getDialogSize().height;var htLayerPosition={};switch(this.option("sPosition")){case"top":htLayerPosition.top=0;htLayerPosition.left=parseInt((nWidth-nLayerWidth)/2,10);break;case"center":htLayerPosition.top=parseInt((nHeight-nLayerHeight)/2,10);htLayerPosition.left=parseInt((nWidth-nLayerWidth)/2,10);break;case"bottom":htLayerPosition.top=parseInt(nHeight-nLayerHeight,10);htLayerPosition.left=parseInt((nWidth-nLayerWidth)/2,10);break;case"all":htLayerPosition.top=0;htLayerPosition.left=0;break;}
return htLayerPosition;},setPosition:function(sPosition){if(sPosition=="top"||sPosition=="center"||sPosition=="bottom"||sPosition=="all"){this.option("sPosition",sPosition);}
this._resizeDialog();},useEffect:function(){if(this.option("bUseEffect")){return false;}
this.option("bUseEffect",true);this._initContainerTop();},unuseEffect:function(){if(!this.option("bUseEffect")){return false;}
this.option("bUseEffect",false);this._initContainerTop();},setEffectType:function(sEffectType){this.useEffect();if(sEffectType=="pop"||sEffectType=="slide-up"||sEffectType=="slide-down"||sEffectType=="flip"){this.option("sEffectType",sEffectType);this._initContainerTop();}},setEffectDuration:function(nEffectDuration){this.useEffect();if(nEffectDuration&&nEffectDuration>99){this.option("nEffectDuration",nEffectDuration);}},setEffect:function(htEffectOption){this.useEffect();if(htEffectOption.type){this.setEffectType(htEffectOption.type);}
if(htEffectOption.duration){this.setEffectDuration(htEffectOption.duration);}},isShown:function(){return this._bIsShown;},show:function(htTemplate,htEventHandler){if(this.isShown()){return false;}
this._bProcessingShow=true;this._htEvent["touchstart"]={ref:jindo.$Fn(this._onTouchStart,this).attach(document,"touchstart"),el:document};if(htEventHandler){this._showAttachedEvent=htEventHandler;this.attach(htEventHandler);}
this._resizeDocument();if(typeof htTemplate=="undefined"){htTemplate={};}else{this._htWElement["dialog_clone"].html(this._oTemplate.process(htTemplate));this._resizeDialog();}
this._htWElement["dialog_layer"].html(this._oTemplate.process(htTemplate));if(!this.fireEvent("beforeShow",{sType:"beforeShow",elLayer:this.getDialog()})){return;}
this._showDialogLayer();},_showDialogLayer:function(){if(this.option("bUseEffect")){this._getLayerEffect().attach("afterEffect",jindo.$Fn(this._endShowEffect,this).bind());this._startShowEffect();}else{this._htWElement["dialog_container"].show();this._endShowEffect();}},_startShowEffect:function(){var sEffectType=this.option("sEffectType");var nEffectDuration=this.option("nEffectDuration");switch(sEffectType){case"slide-up":this._htWElement["dialog_container"].show();this._getLayerEffect().setSize();this._getLayerEffect().slide({sDirection:"up",nDuration:nEffectDuration});break;case"slide-down":this._htWElement["dialog_container"].show();this._getLayerEffect().setSize();this._getLayerEffect().slide({sDirection:"down",nDuration:nEffectDuration});break;case"pop":this._getLayerEffect().pop({sDirection:"in",nDuration:nEffectDuration,htFrom:{opacity:1}});break;case"flip":this._htWElement["dialog_container"].show();this._getLayerEffect().flip({nDuration:nEffectDuration,elFlipFrom:this._getContainer(),elFlipTo:this._getContainer(),htFrom:{opacity:0},htTo:{opacity:1}});break;}},_endShowEffect:function(){if(this.option("bUseEffect")){this._getLayerEffect().detachAll("afterEffect");}
this.fireEvent("show",{sType:"show",elLayer:this.getDialog()});this._bIsShown=true;this._bProcessingShow=false;},hide:function(){if(!this.isShown()){return false;}
this._bProcessingHide=true;if(!this.fireEvent("beforeHide",{sType:"beforeHide",elLayer:this.getDialog()})){return;}
this._hideDialogLayer();},_hideDialogLayer:function(){if(this.option("bUseEffect")){this._getLayerEffect().attach("afterEffect",jindo.$Fn(this._endHideEffect,this).bind());this._startHideEffect();}else{this._htWElement["dialog_container"].hide();this._endHideEffect();}},_startHideEffect:function(){var sEffectType=this.option("sEffectType");var nEffectDuration=this.option("nEffectDuration");switch(sEffectType){case"slide-up":this._getLayerEffect().slide({sDirection:"down",nDuration:nEffectDuration});break;case"slide-down":this._getLayerEffect().slide({sDirection:"up",nDuration:nEffectDuration});break;case"pop":this._getLayerEffect().pop({sDirection:"out",nDuration:nEffectDuration,htTo:{opacity:0}});break;case"flip":this._getLayerEffect().flip({nDuration:nEffectDuration,elFlipFrom:this._getContainer(),elFlipTo:this._getContainer(),htTo:{opacity:0}});break;}},_endHideEffect:function(){if(this.option("bUseEffect")){this._getLayerEffect().detachAll("afterEffect");}
this.fireEvent("hide",{sType:"hide",elLayer:this.getDialog()});if(this._showAttachedEvent){for(var evt in this._showAttachedEvent){this.detachAll(evt);}
this._showAttachedEvent=null;}
this._detachEvent("touchstart");this._htWElement["dialog_container"].hide();this._htWElement["dialog_container"].css("opacity",1);if(window.pageYOffset||window.pageXOffset){this._htWElement["dialog_container"].css({top:"0px",left:"0px"});}
this._bIsShown=false;this._bProcessingHide=false;},destroy:function(){this._detachEventAll();if(this.option("bUseEffect")){this._getLayerEffect().destroy();this._oLayerEffect=null;}
this._htWElement["dialog_container"].leave();this._htWElement["dialog_clone"].leave();this._htWElement=null;this._htDeviceSize=null;this._htDialogSize=null;this._sTemplate=null;this._oTemplate=null;this._bIsShown=null;this._bProcessingShow=null;this._bProcessingHide=null;this._oTimeout=null;this._htDeviceInfo=null;this._bIOS=null;this._bAndroid=null;}}).extend(jindo.UIComponent);jindo.m.DropArea=jindo.$Class({$init:function(el,htUserOption){this.option({sClassPrefix:'drop-',oDragInstance:null,bActivateOnload:true,bUseTouchPoint:false});this.option(htUserOption||{});this._initVar();this._setWrapperElement(el);if(this.option("bActivateOnload")){this.activate();}},_initVar:function(){this._waOveredDroppableElement=jindo.$A([]);this._sEvent='ontouchstart'in window?'touchmove':'mousemove';this._sDropClassName='.'+this.option('sClassPrefix')+"area";this._aItem=null;this._aItemRect=null;this._elHandle=null;this._elDragging=null;var htInfo=jindo.m.getDeviceInfo();this._bReCalculateOffset=((htInfo.iphone||htInfo.ipad)&&htInfo.bInapp)?false:true;},_setWrapperElement:function(el){this._htWElement={};el=jindo.$(el);this._htWElement["base"]=jindo.$Element(el);},_getRectInfo:function(el){var htOffset=jindo.$Element(el).offset();var nVectorX=0;var nVectorY=0;if(this._bReCalculateOffset){jindo.$Element(el).parent(function(v){var htCssOffset=jindo.m.getCssOffset(v.$value());nVectorX+=htCssOffset.left;nVectorY+=htCssOffset.top;});}
return{nLeft:htOffset.left+(nVectorX),nTop:htOffset.top+(nVectorY),nRight:htOffset.left+nVectorX+el.offsetWidth,nBottom:htOffset.top+nVectorY+el.offsetHeight};},_reCalculate:function(){var elBase=this._htWElement["base"].$value();var aItem=jindo.$$(this._sDropClassName,elBase);if(elBase.tagName&&jindo.$$.test(elBase,this._sDropClassName)){aItem.push(elBase);}
this._aItem=aItem;this._aItemRect=[];for(var i=0,el;(el=aItem[i]);i++){this._aItemRect.push(this._getRectInfo(el));}},_findDroppableElement:function(el){var elDroppable=jindo.$$.test(el,this._sDropClassName)?el:jindo.m.getClosest(this._sDropClassName,el);if(!this._isChildOfDropArea(el)){elDroppable=null;}
return elDroppable;},_isChildOfDropArea:function(el){if(this._el===document||this._el===el){return true;}
return this._htWElement["base"].isParentOf(el);},_isDropMove:function(nLeft,nTop,nRight,nBottom){var aItem=this._aItem;var aItemRect=this._aItemRect,i,htRect,el;if(!this.option('bUseTouchPoint')){for(i=0;((htRect=aItemRect[i])&&(el=aItem[i]));i++){var bHOver=this._checkOverArea({nMin:htRect.nLeft,nMax:htRect.nRight},{nMin:nLeft,nMax:nRight});var bVOver=this._checkOverArea({nMin:htRect.nTop,nMax:htRect.nBottom},{nMin:nTop,nMax:nBottom});if(bHOver&&bVOver){this._addOveredDroppableElement(el);this._fireMoveEvent(el,htRect,{nX:nLeft,nY:nTop});}else{this._removeOveredDroppableElement(el);}}}else{for(i=0;((htRect=aItemRect[i])&&(el=aItem[i]));i++){if(htRect.nLeft<=nLeft&&nLeft<=htRect.nRight&&htRect.nTop<=nTop&&nTop<=htRect.nBottom){this._addOveredDroppableElement(el);this._fireMoveEvent(el,htRect,{nX:nLeft,nY:nTop});}else{this._removeOveredDroppableElement(el);}}}},_checkOverArea:function(htBase,htCheck){if(htCheck.nMin<htBase.nMin){if(htCheck.nMax>htBase.nMin){return true;}}else{if(htCheck.nMin<htBase.nMax){return true;}}
return false;},_fireMoveEvent:function(elDrop,htRect,htTouchInfo){var nRatioX=(htTouchInfo.nX-htRect.nLeft)/(htRect.nRight-htRect.nLeft);var nRatioY=(htTouchInfo.nY-htRect.nTop)/(htRect.nBottom-htRect.nTop);this.fireEvent('move',{elHandle:this._elHandle,elDrag:this._elDragging,elDrop:elDrop,nRatioX:nRatioX,nRatioY:nRatioY});},_addOveredDroppableElement:function(elDroppable){if(this._waOveredDroppableElement.indexOf(elDroppable)==-1){this._waOveredDroppableElement.push(elDroppable);this.fireEvent('over',{elHandle:this._elHandle,elDrag:this._elDragging,elDrop:elDroppable});}},_removeOveredDroppableElement:function(elDroppable){var nIndex=this._waOveredDroppableElement.indexOf(elDroppable);if(nIndex!=-1){this._waOveredDroppableElement.splice(nIndex,1);this.fireEvent('out',{elHandle:this._elHandle,elDrag:this._elDragging,elDrop:elDroppable});}},_clearOveredDroppableElement:function(){for(var elDroppable;(elDroppable=this._waOveredDroppableElement.$value()[0]);){this._waOveredDroppableElement.splice(0,1);this.fireEvent('drop',{elHandle:this._elHandle,elDrag:this._elDragging,elDrop:elDroppable});}},getOveredLists:function(){return this._waOveredDroppableElement?this._waOveredDroppableElement.$value():[];},_onActivate:function(){this._attachEvent();if(this.option('oDragInstance')){var oDrag=this.option('oDragInstance');var self=this;oDrag.attach({'handleDown':function(oCustomEvent){self._elHandle=oCustomEvent.elHandle;self._elDragging=oCustomEvent.elDrag;self._waOveredDroppableElement.empty();self.fireEvent(oCustomEvent.sType,oCustomEvent);},'dragStart':function(oCustomEvent){if(!self.fireEvent(oCustomEvent.sType,oCustomEvent)){oCustomEvent.stop();}else{self._reCalculate();}},'beforeDrag':function(oCustomEvent){self.fireEvent(oCustomEvent.sType,oCustomEvent);},'drag':function(oCustomEvent){self._elDragging=oCustomEvent.elDrag;var wel=jindo.$Element(oCustomEvent.elDrag);var nTop=self.option('bUseTouchPoint')?oCustomEvent.nTouchY:oCustomEvent.nY;var nLeft=self.option('bUseTouchPoint')?oCustomEvent.nTouchX:oCustomEvent.nX;var nRight=nLeft+wel.width();var nBottom=nTop+wel.height();self._isDropMove(nLeft,nTop,nRight,nBottom);self.fireEvent(oCustomEvent.sType,oCustomEvent);},'dragEnd':function(oCustomEvent){var oParam={};oParam.aElDrop=self.getOveredLists().concat();for(var p in oCustomEvent){oParam[p]=oCustomEvent[p];}
self._clearOveredDroppableElement();self.fireEvent(oCustomEvent.sType,oParam);},'handleUp':function(oCustomEvent){self.fireEvent('handleUp',{elHandle:self._elHandle,elDrag:self._elDragging});self._elHandle=null;self._elDragging=null;}});}},_onDeactivate:function(){this._detachEvent();if(this.option('oDragInstance')){var oDrag=this.option('oDragInstance');oDrag.detachAll();}},_attachEvent:function(){this._htEvent={};},_detachEvent:function(){this._htEvent=null;},destroy:function(){this.deactivate();for(var p in this._htWElement){this._htWElement[p]=null;}
this._htWElement=null;}}).extend(jindo.UIComponent);jindo.m.FloatingLayer=jindo.$Class({$init:function(el,htUserOption){this.option({bActivateOnload:true,sPosition:"bottom",sDirection:"up",nSlideDuration:500,sSlideTimingFunction:"ease-in-out",nFadeInDuration:0,sFadeInTimingFunction:"ease-in-out",nFadeOutDuration:200,sFadeOutTimingFunction:"ease-in-out",bUseHideUI:true,bUseFixed:false,nTimeout:-1});this.option(htUserOption||{});this._initVar();this._setWrapperElement(el);if(this.option("bActivateOnload")){this.activate();}},_initVar:function(){this._oFloatingEffect=null;this._oFadeinEffect=null;this._oLayerPosition=null;this._oScrollEnd=null;this._nTimeoutTimer=-1;this._isFixed=false;this._isLayerOn=false;this._isMoving=false;},_setWrapperElement:function(el){this._htWElement={};this._htWElement["element"]=jindo.$Element(el);this._htWElement["viewElement"]=jindo.$Element(this._createView());},_initComponent:function(){var self=this,el=this._htWElement["element"].$value();this._oLayerPosition=new jindo.m.LayerPosition(this._htWElement["viewElement"],{sPosition:this.option("sPosition"),bActivateOnload:false,bUseFixed:this.option("bUseFixed"),bAutoReposition:true});this._oFloatingEffect=new jindo.m.LayerEffect(el);if(this.option("bUseHideUI")&&this.option("nFadeInDuration")!==0){this._oFadeinEffect=new jindo.m.LayerEffect(this._htWElement["viewElement"].$value(),{nDuration:this.option("nFadeInDuration")}).attach("afterEffect",function(){self._startHideTimer();});}
this._isFixed=this._oLayerPosition.isUseFixed();this._oScrollEnd=new jindo.m.ScrollEnd();},getLayer:function(){return this._htWElement["element"].$value();},_createView:function(){var bVisible=this._htWElement["element"].visible(),welView=jindo.$Element("<div class='_floatingLayer_view_divtag_' style='display:none;'>"),sWidth="",sHeight="";if(!bVisible){this._htWElement["element"].css({left:"-9999px"}).show();}
sWidth=this._htWElement["element"].css("width").indexOf("%")!=-1?this._htWElement["element"].css("width"):this._htWElement["element"].width()+"px";sHeight=this._htWElement["element"].css("height").indexOf("%")!=-1?this._htWElement["element"].css("height"):this._htWElement["element"].height()+"px";welView.css({width:sWidth,height:sHeight,zIndex:1000});if(!bVisible){this._htWElement["element"].hide();}
return welView;},resize:function(nWidth,nHeight){this._htWElement["viewElement"].css({width:nWidth+"px",height:nHeight+"px"});this._oLayerPosition.setPosition();},show:function(){if(this._fireEvent("beforeShow")){if(!this._oLayerPosition.isActivating()){this._oLayerPosition.activate();}
this._setFloatingEffect(true);this._htWElement["element"].show();this._htWElement["viewElement"].show();this._oFloatingEffect.slide({sDirection:this.option("sDirection"),nDuration:this.option("nSlideDuration"),sTransitionTimingFunction:this.option("sSlideTimingFunction"),elBaseLayer:this._htWElement["viewElement"].$value()});}},hide:function(){if(this._fireEvent("beforeHide")){this._stopHideTimer();if(this._oLayerPosition.isActivating()){this._oLayerPosition.deactivate();}
this._detachFloatingEvent();this._setFloatingEffect(false);if(this.option("nFadeOutDuration")!==0){this._oFloatingEffect.fade({sDirection:"out",nDuration:this.option("nFadeOutDuration"),sTransitionTimingFunction:this.option("sFadeOutTimingFunction")});}else{this._htWElement["viewElement"].hide();this._fireEvent("hide");}}},_fireEvent:function(sType){return this.fireEvent(sType,{welLayer:this._htWElement["element"]});},_startHideTimer:function(){if(this.option("nTimeout")>-1){var self=this;this._stopHideTimer();this._nTimeoutTimer=setTimeout(function(){self.hide();},this.option("nTimeout"));}},_stopHideTimer:function(){clearTimeout(this._nTimeoutTimer);this._nTimeoutTimer=-1;},_onTouchStart:function(we){this._initFloatingData();if(this._isLayer(we.element)){this._isLayerOn=true;this._htWElement["viewElement"].show();}else{this._htWElement["viewElement"].hide();this._htWElement["viewElement"].css("left",this._htWElement["viewElement"].css("left")+"px");}},_onScrollEnd:function(we){if(jindo.m.getDeviceInfo().iphone||jindo.m.getDeviceInfo().ipad){if(jindo.m._getVertical()!=jindo.m.isVertical()){return;}}
if(this.option("bUseHideUI")){if(this._isFixed){this._startHideTimer();}else{this._runFadeIn();}}else{this._oLayerPosition.setPosition();this._startHideTimer();}},_onTouchMove:function(we){this._isMoving=true;},_onTouchEnd:function(we){if(this._isLayerOn){this._oLayerPosition.setPosition();return;}else if(!this._isMoving){this._runFadeIn();}},_runFadeIn:function(){if(!this._htWElement["viewElement"].visible()){if(this._isLayerOn){this._startHideTimer();}else{this._fadeIn();}}},_fadeIn:function(){this._oLayerPosition.setPosition();if(this._oFadeinEffect){this._oFadeinEffect.clearEffect(true);this._oFadeinEffect.fade({sDirection:"in",sTransitionTimingFunction:this.option("sFadeInTimingFunction")});}else{this._htWElement["viewElement"].show();this._startHideTimer();}},_isLayer:function(el){if(el&&(this._htWElement["element"].isEqual(el)||this._htWElement["viewElement"].isEqual(el)||this._htWElement["viewElement"].isParentOf(el))){return true;}else{return false;}},_initFloatingData:function(){this._stopHideTimer();if(this._oFloatingEffect&&this.option("nFadeOutDuration")!==0){this._oFloatingEffect.clearEffect(true);}
if(this._oFadeinEffect){this._oFadeinEffect.clearEffect(true);}
this._isMoving=false;this._isLayerOn=false;},_onActivate:function(){this._initComponent();},_onDeactivate:function(){this._detachEvent();if(this._oFadeinEffect){this._oFadeinEffect.detachAll("afterEffect");this._oFadeinEffect.destroy();}
this._oFloatingEffect.destroy();this._oScrollEnd.destroy();this._oLayerPosition.destroy();this._htWElement["element"].appendTo(document.body);this._htWElement["viewElement"].leave();},_attachFloatingEvent:function(){this._htEvent={};if(this.option("bUseHideUI")&&!this._isFixed){this._htEvent["event_touchstart"]={el:document.body,ref:jindo.$Fn(this._onTouchStart,this).attach(document.body,"touchstart")};this._htEvent["event_touchmove"]={el:document.body,ref:jindo.$Fn(this._onTouchMove,this).attach(document.body,"touchmove")};this._htEvent["event_touchend"]={el:document.body,ref:jindo.$Fn(this._onTouchEnd,this).attach(document.body,"touchend")};this._htEvent["event_touchcancel"]={el:document.body,ref:jindo.$Fn(this._onTouchEnd,this).attach(document.body,"touchcancel")};}
this._oScrollEnd.attach("scrollEnd",jindo.$Fn(this._onScrollEnd,this).bind());},_detachEvent:function(){this._detachFloatingEvent();},_setFloatingEffect:function(isShow){var self=this;this._oFloatingEffect.detachAll("afterEffect");this._oFloatingEffect.clearEffect(true);if(this._oFadeinEffect){this._oFadeinEffect.clearEffect(true);}
if(isShow){this._oFloatingEffect.attach("afterEffect",function(){self._attachFloatingEvent();self._startHideTimer();self._fireEvent("show");});}else{if(this.option("nFadeOutDuration")!==0){this._oFloatingEffect.attach("afterEffect",function(){self._htWElement["viewElement"].hide();self._fireEvent("hide");});}}},_detachFloatingEvent:function(){for(var p in this._htEvent){var ht=this._htEvent[p];if(ht.ref){ht.ref.detach(ht.el,p.substring(p.lastIndexOf("_")+1));}}
this._oScrollEnd.detachAll("scrollEnd");this._htEvent=null;},destroy:function(){this.deactivate();for(var p in this._htWElement){this._htWElement[p]=null;}
delete this._htWElement;this._initFloatingData();}}).extend(jindo.UIComponent);jindo.m.IndexScroll=jindo.$Class({$init:function(el,htUserOption){},_initVar:function(){this.$super._initVar();this._aIndexInfo=null;this._bUseIndex=true;if((jindo.m.getDeviceInfo().iphone||jindo.m.getDeviceInfo().ipad)&&(parseInt(jindo.m.getDeviceInfo().version,10)<5)){this._sEvent="click";}else{this._sEvent="touchstart";}},_setWrapperElement:function(el){this.$super._setWrapperElement(el);this._createFixedIndex();this._createIndexView();},_refreshIndexInfo:function(){var aIndexElement=this._oCore._htWElement["scroller"].queryAll("."+this.option("sClassPrefix")+"index"),aIndexInfo=[],nWrapperMarginTop=this._htWElement["wrapper"].offset().top;for(var i=0,nLength=aIndexElement.length;i<nLength;i++){aIndexInfo.push(this._getIndexInfo(jindo.$Element(aIndexElement[i]),nWrapperMarginTop));}
for(i=0,nLength=aIndexInfo.length-1;i<nLength;i++){aIndexInfo[i].nNextTop=aIndexInfo[i+1].nTop;aIndexInfo[i].nLast=aIndexInfo[i+1].nTop-aIndexInfo[i].nHeight;}
this._aIndexInfo=aIndexInfo;if(this.option("bUseIndexView")){this._refreshIndexView();}},_createIndexView:function(){var nId=this.option("sClassPrefix")+"_indexview__";this._htWElement["indexview"]=jindo.$Element(nId);if(!this._htWElement["indexview"]){this._htWElement["indexview"]=jindo.$Element("<ul id='"+nId+"' class='"+this.option("sClassPrefix")+"indexview' style='position:absolute;z-index:2;-"+jindo.m.getCssPrefix()+"-tap-highlight-color:rgba(0,0,0,0);'>");this._htWElement["indexview"].appendTo(document.body);}},showIndexView:function(){if(this.option("bUseIndexView")&&this._htWElement["indexview"]){this._htWElement["indexview"].show();}},hideIndexView:function(){if(this.option("bUseIndexView")&&this._htWElement["indexview"]){this._htWElement["indexview"].hide();}},_refreshIndexView:function(){var htOffset=this._htWElement["wrapper"].offset(),sName,wel,nTop,nLeft,sHTML="";for(var i=0,nLength=this._aIndexInfo.length;i<nLength;i++){wel=this._aIndexInfo[i].wel;sName=wel.attr("data-text")?wel.attr("data-text"):wel.text();sHTML+="<li class='"+this.option("sClassPrefix")+"indexview_item' data-index='"+i+"'>"+sName+"</li>";}
this._htWElement["indexview"].html(sHTML);nTop=htOffset.top+this._htWElement["wrapper"].height()/2;nLeft=htOffset.left+this._htWElement["wrapper"].width();this._htWElement["indexview"].css({top:(nTop-this._htWElement["indexview"].height()/2)+"px",left:(nLeft-this._htWElement["indexview"].width()-10)+"px"});},_attachEvent:function(){this.$super._attachEvent();if(this.option("bUseIndexView")){this._htEvent["indexview"]=jindo.$Fn(this._onIndexView,this).attach(this._htWElement["indexview"],this._sEvent);}},_detachEvent:function(){if(this.option("bUseIndexView")){this._htEvent["indexview"].detach(this._htWElement["indexview"],this._sEvent);}},_onIndexView:function(we){if(we.element.tagName=="LI"){var wel=jindo.$Element(we.element),nIdx=wel.attr("data-index");this.scrollTo(0,this._aIndexInfo[nIdx].nTop);}},_onPosition:function(we){if(this._bUseIndex){this._setPosFixedIndex(-we.nTop);}
this.$super._onPosition(we);},_getIndexInfo:function(welIndex,nWrapperMarginTop){var htInfo={};htInfo.wel=welIndex;htInfo.nTop=welIndex.offset().top-nWrapperMarginTop;htInfo.nHeight=welIndex.height();htInfo.nBottom=htInfo.nTop+htInfo.nHeight;return htInfo;},_setPosFixedIndex:function(nTop){var nIdx=this._getCurrentIdx(nTop),htIndexInfo=this._aIndexInfo[nIdx],nMoveTop;if(nIdx==-1){this._htWElement["index_top"].hide();this._htWElement["index_bottom"].hide();}else{if(htIndexInfo.nLast&&(htIndexInfo.nLast<=nTop&&nTop<htIndexInfo.nNextTop)){nMoveTop=htIndexInfo.nLast-nTop;this._htWElement["index_top"].html(htIndexInfo.wel.outerHTML()).css("top",nMoveTop+"px");this._htWElement["index_bottom"].html(this._aIndexInfo[nIdx+1].wel.outerHTML()).css("top",(nMoveTop+htIndexInfo.nHeight)+"px").show();}else{this._htWElement["index_top"].html(htIndexInfo.wel.outerHTML()).css("top","0px").show();this._htWElement["index_bottom"].hide();}}},hideIndex:function(){this._bUseIndex=false;this._htWElement["index_top"].hide();this._htWElement["index_bottom"].hide();},showIndex:function(){this._bUseIndex=true;this._setPosFixedIndex(this._oCore._nTop);this._htWElement["index_top"].show();},_getCurrentIdx:function(nPos){for(var i=0,nLength=this._aIndexInfo.length;i<nLength;i++){if(this._aIndexInfo[i].nTop>nPos){break;}}
return i-1;},_createFixedIndex:function(){var sStyle='position:absolute;width:100%;top:0;z-index:1; display:none';this._htWElement["index_top"]=jindo.$Element(this._htWElement["wrapper"].query("._scroller_index_scroll_top_"));if(!this._htWElement["index_top"]){this._htWElement["index_top"]=jindo.$Element("<div style='"+sStyle+"' class='_scroller_index_scroll_top_'></div>");this._htWElement["wrapper"].append(this._htWElement["index_top"]);}
this._htWElement["index_bottom"]=jindo.$Element(this._htWElement["wrapper"].query("._scroller_index_scroll_bottom_"));if(!this._htWElement["index_bottom"]){this._htWElement["index_bottom"]=jindo.$Element("<div style='"+sStyle+"' class='_scroller_index_scroll_bottom_'></div>");this._htWElement["wrapper"].append(this._htWElement["index_bottom"]);}},refresh:function(){if(this.option("bUsePullDown")){this.option("bUsePullDown",false);}
if(this.option("bUsePullUp")){this.option("bUsePullUp",false);}
if(this.option("bUseHScroll")){this.option("bUseHScroll",false);}
this.option("bUseCss3d",false);this.$super.refresh();this._refreshIndexInfo();}}).extend(jindo.m.Scroll);jindo.m.LayerManager=jindo.$Class({$init:function(el,htUserOption){var oDeviceInfo=jindo.m.getDeviceInfo();this.option({bActivateOnload:true});this.option(htUserOption||{});this._initVar();this._setWrapperElement(el);if(this.option("bActivateOnload")){this.activate();}},_initVar:function(){this._aLink=[];this._oTouch=null;},_setWrapperElement:function(el){this._htWElement={};this.setLayer(el);},_onActivate:function(){this._attachEvent();},_onDeactivate:function(){this._detachEvent();},setLayer:function(el){el=(typeof el=="string"?jindo.$(el):el);this._htWElement["element"]=jindo.$Element(el);this._htWElement["element"].css("position","absolute");return this;},getVisible:function(){return this._htWElement["element"].visible();},getLayer:function(){return this._htWElement["element"].$value();},getLinks:function(){return this._aLink;},link:function(vElement){if(arguments.length>1){for(var i=0,len=arguments.length;i<len;i++){this.link(arguments[i]);}
return this;}
if(this._find(vElement)!=-1){return this;}
this._aLink.push(vElement);return this;},unlink:function(vElement){if(arguments.length>1){for(var i=0,len=arguments.length;i<len;i++){this.unlink(arguments[i]);}
return this;}
var nIndex=this._find(vElement);if(nIndex>-1){this._aLink.splice(nIndex,1);}
return this;},_check:function(el){var wel=jindo.$Element(el);for(var i=0,elLink,welLink;(elLink=this._aLink[i]);i++){welLink=jindo.$Element(elLink);if(welLink){elLink=welLink.$value();if(elLink&&(el==elLink||wel.isChildOf(elLink))){return true;}}}
return false;},_find:function(el){for(var i=0,elLink;(elLink=this._aLink[i]);i++){if(elLink==el){return i;}}
return-1;},_fireEventBeforeShow:function(){return this.fireEvent("beforeShow",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()});},_fireEventShow:function(){this.fireEvent("show",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()});},_fireEventBeforeHide:function(el){return this.fireEvent("beforeHide",{elTarget:el,elLayer:this.getLayer(),aLinkedElement:this.getLinks()});},_fireEventHide:function(el){this.fireEvent("hide",{elTarget:el,elLayer:this.getLayer(),aLinkedElement:this.getLinks()});},show:function(){if(!this.getVisible()){if(this._fireEventBeforeShow()){this._htWElement["element"].show();this._fireEventShow();}}
return this;},hide:function(el){if(this.getVisible()){if(this._fireEventBeforeHide(el)){this._htWElement["element"].hide();this._fireEventHide(el);}}
return this;},toggle:function(){if(this.getVisible()){this.hide();}else{this.show();}
return this;},_onEvent:function(we){var el=we.element;if(this.getVisible()){if(this._check(el)){this.fireEvent("ignore",{elTarget:el});}else{this.hide(el);return true;}
we.stop();}},_attachEvent:function(){var self=this;this._oTouch=new jindo.m.Touch(document).attach("touchEnd",function(we){if(we.sMoveType===jindo.m.MOVETYPE[3]){self._onEvent(we);}});},_detachEvent:function(){if(this._oTouch){this._oTouch.detachAll("touchEnd");}},destroy:function(){this.deactivate();for(var p in this._htWElement){this._htWElement[p]=null;}
this._htWElement=null;delete this._aLink;delete this._oTouch;}}).extend(jindo.UIComponent);jindo.m.PreventClickEvent=jindo.$Class({$init:function(el,htUserOption){this.option({bActivateOnload:true,sClassPrefix:"evt-"});this.option(htUserOption||{});this._setWrapperElement(el);if(this.option("bActivateOnload")){this.activate();}},_setWrapperElement:function(el){this._htWElement={};this._htWElement["target"]=jindo.$Element(el);},_onDeactivate:function(){this._detachEvents();},_onActivate:function(){this._attachEvents();},_attachEvents:function(){this._htEvent={};this._htEvent["prevent"]=jindo.$Fn(this._onPrevent,this).attach(this._htWElement["target"],"touchstart");},_detachEvents:function(){this._htEvent["prevent"].detach(this._htWElement["target"],"touchstart");this._htEvent["prevent"]=null;},_onPrevent:function(we){var wel=jindo.$Element(jindo.m.getNodeElement(we.element));if(!wel.hasClass(this.option("sClassPrefix")+"except")){we.stop(jindo.$Event.CANCEL_ALL);this.fireEvent("prevent",{wel:wel});return false;}else{this.fireEvent("pass",{wel:wel});}},destroy:function(){this.deactivate();for(var p in this._htWElement){console.log(p);this._htWElement[p]=null;}
this._htWElement=null;this._htEvent=null;}}).extend(jindo.UIComponent);jindo.m.ExpandEffect=jindo.$Class({sEffectName:"expand",getCommand:function(el,htOption){var sDirection=htOption.sDirection?htOption.sDirection:'down';var sProperty='width';var nSize=this._htLayerInfo["nWidth"];if(sDirection=='up'||sDirection=='down'){sProperty='height';nSize=this._htLayerInfo["nHeight"];}
var htStyle=htOption.htTo||{};htStyle[sProperty]=nSize+"px";if(sDirection=='left'){htStyle["margin-left"]=this._htLayerInfo["nMarginLeft"]+"px";}
if(sDirection=='up'){htStyle["margin-top"]=this._htLayerInfo["nMarginTop"]+"px";}
return{sTaskName:this.sEffectName+"-"+sDirection,htStyle:htStyle,htTransform:{}};},getBeforeCommand:function(el,htOption){var sDirection=htOption.sDirection?htOption.sDirection:'down';var sProperty='width';if(sDirection=='up'||sDirection=='down'){sProperty='height';}
var htBeforeStyle=htOption.htFrom||{};htBeforeStyle[sProperty]="0";htBeforeStyle["overflow"]="hidden";if(sDirection=='left'){htBeforeStyle["margin-left"]=(this._htLayerInfo["nWidth"]+this._htLayerInfo["nMarginLeft"])+"px";}
if(sDirection=='up'){htBeforeStyle["margin-top"]=(this._htLayerInfo["nHeight"]+this._htLayerInfo["nMarginTop"])+"px";}
return{htStyle:htBeforeStyle,htTransform:{}};}}).extend(jindo.m.Effect);jindo.m.Validation=jindo.$Class({$init:function(){},$static:{_htValidator:{},_htValidatorType:{"email":"jindo.m.EmailValidator","url":"jindo.m.UrlValidator","tel":"jindo.m.TelValidator","date":"jindo.m.DateValidator","number":"jindo.m.NumberValidator","currency":"jindo.m.CurrencyValidator","require":"jindo.m.RequireValidator"},_createValidator:function(sType){if(jindo.m.Validation._htValidatorType[sType]&&!jindo.m.Validation._htValidator[sType]){jindo.m.Validation._htValidator[sType]=eval("new "+jindo.m.Validation._htValidatorType[sType]+"()");}},add:function(sType,sClassName){jindo.m.Validation._htValidatorType[sType]=sClassName;},remove:function(sType){delete jindo.m.Validation._htValidatorType[sType];},_parse:function(sValidate){var aValidate=sValidate.split(";");var sType,sValue,htValidateData={};for(var i=0,nLength=aValidate.length;i<nLength;i++){var aTemp=aValidate[i].split(":");if(aTemp){sType=aTemp[0];sValue=aTemp.length>1?aTemp[1]:null;htValidateData[sType]=htValidateData[sType]||sValue;jindo.m.Validation._createValidator(sType);}}
return htValidateData;},validate:function(sValidate,sValue){var htResult,htValidateData=jindo.m.Validation._parse(sValidate);if("require"in htValidateData){htResult=jindo.m.Validation._htValidator["require"].validate(sValue);if(!htResult.bValid){return{bValid:false,sType:"require",sPreValue:sValue};}else{delete htValidateData["require"];}}
if(jindo.$S(sValue).trim()==""){return null;}
for(var sType in htValidateData){htResult=jindo.m.Validation._htValidator[sType].validate(sValue,htValidateData[sType]);if(!htResult.bValid){htResult.sType=sType;htResult.sPreValue=sValue;return htResult;}}
htResult.bValid=true;htResult.sPreValue=sValue;return htResult;}}});jindo.m.CurrencyValidator=jindo.$Class({rx:/^[+\-]?[^\s\t\v\d]+(\d{1,3},)?(\d{3},)*(\d)+(\.\d+)?$/,_getCorrectedValue:function(sValue,sFormat){sValue=this._applyComma(this._filterNumber(sValue));sFormat=sFormat||"\\";sValue=(sValue.charAt(0)==="-"?"-"+sFormat+sValue.substring(1):sFormat+sValue);return sValue;}}).extend(jindo.m.NumberValidator);jindo.m.DateValidator=jindo.$Class({_isValid:function(sValue,sFormat){sFormat=sFormat||"yyyy-mm-dd";sValue=sValue.replace(/[\.\-]/g,"");var sFormatData=sFormat.replace(/[\d\.\-]/g,""),nYear=sValue.substr(sFormatData.indexOf("yyyy"),4)*1,nMonth=sValue.substr(sFormatData.indexOf("mm"),2)*1,nDay=sValue.substr(sFormatData.indexOf("dd"),2)*1;if((nMonth>=1&&nMonth<=12)&&(nDay>=1&&nDay<=31)&&(nYear>=1000)){return true;}
return false;},_getCorrectedValue:function(sValue,sFormat){sFormat=sFormat||"yyyy-mm-dd";var sFormatData=sFormat.replace(/[\d\.\-]/g,"");sValue=sValue.replace(/[^\d]/g,"").substr(0,sFormatData.length);if(sValue.length>=(sFormatData.length-1)){sValue=this._getFormatted(sValue,sFormat);}
return sValue;},_getFormatted:function(sDateStr,sFormat){var sFormatData=sFormat.replace(/[\.\-]/g,""),sYear=sDateStr.substr(sFormatData.indexOf("yyyy"),4),sMonth=sDateStr.substr(sFormatData.indexOf("mm"),2),sDay=sDateStr.substr(sFormatData.indexOf("dd"),2);return sFormat.replace(/(yyyy|mm|dd)/gi,function($1){switch($1){case'yyyy':return sYear;case'mm':return sMonth;case'dd':return sDay;}});}}).extend(jindo.m.Validator);jindo.m.EmailValidator=jindo.$Class({rx:/^(([\w\-]+\.)+[\w\-]+|([a-zA-Z]{1}|[\w\-]{2,}))@((([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])\.([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])\.([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])\.([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])){1}|([a-zA-Z]+[\w\-]+\.)+[a-zA-Z]{2,4})$/,_isValid:function(sValue){if(this.rx.test(sValue)){return true;}else{return false;}},_getCorrectedValue:function(sValue){sValue=sValue.replace(/[^\w\.\@]/g,"").replace(/\.{2,}/g,".");var aEmail=sValue.split("@");if(aEmail.length>2){sValue=aEmail.shift()+"@"+aEmail.join("");}
return sValue;}}).extend(jindo.m.Validator);jindo.m.RequireValidator=jindo.$Class({validate:function(sValue){sValue=jindo.$S(sValue).trim();var htResult={bValid:false,sCorrectedValue:null};htResult.bValid=sValue!=""?true:false;return htResult;}}).extend(jindo.m.Validator);jindo.m.TelValidator=jindo.$Class({rx:/^(\d{2,3})(\d{3,4})(\d{4})$/,_isValid:function(sValue){sValue=sValue.replace(/[^\d]/g,"");if(this.rx.test(sValue)){var nLength=sValue.length,bResult=false;if(sValue.charAt(0)==="0"){if((nLength===9&&sValue.substring(0,2)==="02")||nLength===10||nLength===11){bResult=true;}}
return bResult;}else{return false;}},_getCorrectedValue:function(sValue,sFormat){sValue=sValue.replace(/[^\d]/g,"");sValue=(sValue.length>11?sValue.substr(0,11):sValue);return this._applyFormat(sValue,sFormat);},_applyFormat:function(sValue,sFormat){sFormat=sFormat||"-";var nLength=sValue.length;if(sValue.charAt(0)==="0"){if(nLength===9&&sValue.substring(0,2)==="02"){sValue=sValue.substr(0,2)+sFormat+sValue.substr(2,3)+sFormat+sValue.substr(5,4);}else if(nLength===10){if(sValue.substr(0,2)==="02"){sValue=sValue.substr(0,2)+sFormat+sValue.substr(2,4)+sFormat+sValue.substr(6,4);}else{sValue=sValue.substr(0,3)+sFormat+sValue.substr(3,3)+sFormat+sValue.substr(6,4);}}else if(nLength===11){if(sValue.substr(0,4)==="0505"){sValue=sValue.substr(0,4)+sFormat+sValue.substr(4,3)+sFormat+sValue.substr(7,4);}else{sValue=sValue.substr(0,3)+sFormat+sValue.substr(3,4)+sFormat+sValue.substr(7,4);}}}
return sValue;}}).extend(jindo.m.Validator);jindo.m.UrlValidator=jindo.$Class({rx:/(^(http:\/\/)|^(https:\/\/)|(^[A-Za-z0-9\.\-]+))+([A-Za-z0-9\.\-])*(\.[A-Za-z]{2,}(\/([A-Za-z0-9\.\-])*)*)$/,_isValid:function(sValue,sFormat){if(this.rx.test(sValue)){return true;}else{return false;}},_getCorrectedValue:function(sValue){return sValue.replace(/[^A-Za-z0-9-\?&\.\:\/]/g,"").replace(/\.{2,}/g,"").replace(/\?{2,}/g,"").replace(/&{2,}/g,"").replace(/\:{3,}/g,"");}}).extend(jindo.m.Validator);jindo.m.SlideTab=jindo.$Class({$init:function(el,htUserOption){this.option({nSlideDuration:200,sTimingFunction:"ease-in-out",nCountPerVeiw:3});this.option(htUserOption||{});this._initData();if(this.option("bActivateOnload")){this.resize();this.activate();}
this.select(this.option("nDefaultIndex"));},_initVar:function(){this.$super._initVar();this._nCurrentPage=1;this._nTotalPage=1;this._nPageWidth=0;this._aDummyTab=[];this._oEffect=null;this._isNext=null;},_setWrapperElement:function(el){var sPrefix=this._sPrefix;this.$super._setWrapperElement(el);this._htWElement["tab_view"]=jindo.$Element(this._htWElement["baseElement"].query('.'+sPrefix+'tabview'));this._htWElement["tab_container"]=jindo.$Element(this._htWElement["baseElement"].query('.'+sPrefix+'tab-cont'));this._htWElement["prev"]=jindo.$Element(this._htWElement["baseElement"].query('.'+sPrefix+'prev'));this._htWElement["next"]=jindo.$Element(this._htWElement["baseElement"].query('.'+sPrefix+'next'));this._htWElement["baseElement"].css("position","relative");this._htWElement["tab_view"].css("overflow","hidden");},_initData:function(){this.$super._initData();var nCountPreView=this.option("nCountPerVeiw"),el=null,nRemainPage;this._nTotalPage=parseInt(this._aTab.length/nCountPreView,10);nRemainPage=this._aTab.length%nCountPreView;if(nRemainPage>0){this._nTotalPage++;}
for(var j=0,nLength=nCountPreView-nRemainPage;j<nLength;j++){el=jindo.$("<li></li>");this._aDummyTab.push(jindo.$Element(el));this._htWElement["tab_container"].append(el);}
this._oEffect=new jindo.m.LayerEffect(this._htWElement["tab_container"].$value());},getCurrentPage:function(){return this._nCurrentPage;},getTotalPage:function(){return this._nTotalPage;},resize:function(){var nTabWidth,nPrePageWidth=this._nPageWidth;this._nPageWidth=this._htWElement["tab_view"].width()-this._htWElement["prev"].width()-this._htWElement["next"].width();nTabWidth=this._nPageWidth/this.option("nCountPerVeiw");if(nPrePageWidth>this._nPageWidth){this._setTabWidth(nTabWidth);this._htWElement["tab_container"].width(this._nPageWidth*this._nTotalPage);}else{this._htWElement["tab_container"].width(this._nPageWidth*this._nTotalPage);this._setTabWidth(nTabWidth);}
this._htWElement["tab_container"].css("left",(this._nCurrentPage-1)*-this._nPageWidth);},_setTabWidth:function(nTabWidth){for(var i in this._aTab){this._aTab[i].width(nTabWidth);}
for(i in this._aDummyTab){this._aDummyTab[i].width(nTabWidth);}},_fireEventBeforePrev:function(){return this.fireEvent("beforePrev",{nPage:this._nCurrentPage,nIndex:this._nCurrentIndex,nTotalPage:this._nTotalPage});},_fireEventPrev:function(){this.fireEvent("prev",{nPage:this._nCurrentPage,nIndex:this._nCurrentIndex,nTotalPage:this._nTotalPage});},_fireEventBeforeNext:function(){return this.fireEvent("beforeNext",{nPage:this._nCurrentPage,nIndex:this._nCurrentIndex,nTotalPage:this._nTotalPage});},_fireEventNext:function(){this.fireEvent("next",{nPage:this._nCurrentPage,nIndex:this._nCurrentIndex,nTotalPage:this._nTotalPage});},_onAfterSelect:function(welElement){this.select(this._getIdx(welElement));},_beforeSelect:function(nIdx){},_attachEvent:function(){this.$super._attachEvent();this._htEvent["prev_click"]={ref:jindo.$Fn(this._onPrev,this).attach(this._htWElement["prev"],"click"),el:this._htWElement["prev"]};this._htEvent["next_click"]={ref:jindo.$Fn(this._onNext,this).attach(this._htWElement["next"],"click"),el:this._htWElement["next"]};this._oEffect.attach("afterEffect",jindo.$Fn(this._onAfterEffect,this).bind());},_detachEvent:function(){this._oEffect.detachAll();this.$super._detachEvent();},_onAfterEffect:function(){if(this._isNext){this._nCurrentPage++;this._fireEventNext();}else{this._nCurrentPage--;this._fireEventPrev();}
this._isNext=null;this.select((this._nCurrentPage-1)*this.option("nCountPerVeiw"));},_onPrev:function(we){if(this._oPanelEffect&&this._oPanelEffect.isPlaying()){we.stop(jindo.$Event.CANCEL_ALL);return false;}
if((this._nCurrentPage>1)&&!this._oEffect.isPlaying()){if(this._fireEventBeforePrev()){this._oEffect.slide({sDirection:"right",nDuration:this.option("nSlideDuration"),sTransitionTimingFunction:this.option("sTimingFunction"),nSize:this._nPageWidth});this._isNext=false;}}},_onNext:function(we){if(this._oPanelEffect&&this._oPanelEffect.isPlaying()){we.stop(jindo.$Event.CANCEL_ALL);return false;}
if((this._nCurrentPage<this._nTotalPage)&&!this._oEffect.isPlaying()){if(this._fireEventBeforeNext()){this._oEffect.slide({sDirection:"left",nDuration:this.option("nSlideDuration"),sTransitionTimingFunction:this.option("sTimingFunction"),nSize:this._nPageWidth});this._isNext=true;}}},destroy:function(){this.deactivate();for(var p in this._aDummyTab){this._aDummyTab[p]=null;}
this._aDummyTab=null;this._initVar();if(this._oEffect){this._oEffect.destroy();this._oEffect=null;}
this.$super.destroy();}}).extend(jindo.m.CoreTab);jindo.m.Tab=jindo.$Class({$init:function(el,htUserOption){this.option({sMoreText:"더보기",nCountOnList:0});this.option(htUserOption||{});this._initData();if(this.option("bActivateOnload")){this.activate();}
this.select(this.option("nDefaultIndex"));},_initVar:function(){this.$super._initVar();this._isMore=false;this._nCurrentMoreTab=-1;},_initData:function(){this.$super._initData();var nCountOnList=this.option("nCountOnList");if(nCountOnList>0&&this._aTab.length>nCountOnList){this._makeMoreContainer(nCountOnList);}},_makeMoreContainer:function(nCountOnList){this._htWElement["more_tab"]=jindo.$Element('<li class="'+this._sPrefix+'more-tab"><a style="display: block; height: 100%">'+this.option("sMoreText")+' <span class="'+this._sPrefix+'arrow-down"></span></a></li>');this._htWElement["more_container_wrap"]=jindo.$Element('<div style="position:relative; width:100%;z-index:10">');this._htWElement["more_container"]=jindo.$Element('<ul class="'+this._sPrefix+'more-cont" style="display:none; position: absolute">');for(var i=nCountOnList,nLength=this._aTab.length;i<nLength;i++){this._tab2more(i);}
this._htWElement["more_container_wrap"].append(this._htWElement["more_container"]);this._htWElement["more_tab"].append(this._htWElement["more_container_wrap"]);this._htWElement["tab_container"].append(this._htWElement["more_tab"]);this._htWElement["more_arrow"]=jindo.$Element(this._htWElement["more_tab"].query("span"));this._nCurrentMoreTab=nCountOnList-1;this._isMore=true;},_attachMoreContainerEvent:function(){this._htEvent["more_click"]={el:this._htWElement["more_container"],ref:jindo.$Fn(this._onClickMore,this).attach(this._htWElement["more_container"],"click")};},_onClickMore:function(we){if(this._isMore){var welElement=jindo.$Element(we.element);var sClassName=this._sPrefix+"more-li";if(!welElement.hasClass(sClassName)){welElement=welElement.parent(function(v){return v.hasClass(sClassName);},1)[0];}
this.select(this._getIdx(welElement));we.stop(jindo.$Event.CANCEL_BUBBLE);}},_tab2more:function(nIdx){var wel=this._htWElement["more_container"].first(),isMoved=false,nTargetIdx;this._aTab[nIdx].className(this._sPrefix+"more-li");this._aTab[nIdx].first().className(this._sPrefix+"more-lia");while(wel){nTargetIdx=this._getIdx(wel);if(nTargetIdx>nIdx){wel.before(this._aTab[nIdx]);isMoved=true;break;}
wel=wel.next();}
if(!isMoved){this._htWElement["more_container"].append(this._aTab[nIdx]);}},_more2tab:function(nIdx){this._aTab[nIdx].className(this._sPrefix+"tab");this._aTab[nIdx].first().className(this._sPrefix+"taba");this._htWElement["more_tab"].before(this._aTab[nIdx]);this._nCurrentMoreTab=nIdx;},_onAfterSelect:function(welElement){if(welElement.hasClass(this._sPrefix+"more-tab")){var isHide=this._htWElement["more_container"].visible();if(this._fireEventBefore(isHide?"beforeHide":"beforeShow")){this._htWElement["more_container"].toggle();this._htWElement["more_tab"].toggleClass(this._sPrefix+"more-on");this._htWElement["more_arrow"].toggleClass(this._sPrefix+"arrow-down",this._sPrefix+"arrow-up");this._fireEventBefore(isHide?"hide":"show");}}else{this._hideMoreList();this.select(this._getIdx(welElement));}},_hideMoreList:function(){if(this._isMore){if(this._fireEventBefore("beforeHide")){this._htWElement["more_container"].hide();this._htWElement["more_tab"].removeClass(this._sPrefix+"more-on");this._htWElement["more_arrow"].className(this._sPrefix+"arrow-up");this._fireEventBefore("hide");}}},_beforeSelect:function(nIdx){if(this._isMore){if((nIdx>=this.option("nCountOnList")-1)&&(this._nCurrentMoreTab!=nIdx)){this._hideMoreList();this._tab2more(this._nCurrentMoreTab);this._more2tab(nIdx);}}},_attachEvent:function(){this.$super._attachEvent();if(this._isMore){this._attachMoreContainerEvent();}},_detachEvent:function(){this.$super._detachEvent();},destroy:function(){this.deactivate();this.$super.destroy();}}).extend(jindo.m.CoreTab);jindo.m.MoreContentButton=jindo.$Class({$init:function(el,htUserOption){this.option({sClassPrefix:'more_',nTotalItem:10,nShowMaxItem:10,nItemPerPage:10,nPage:1,bActivateOnload:true,htAjax:{}});this.option(htUserOption||{});this.option('nItem',this.option('nShowMaxItem'));this._initVar();this._setWrapperElement(el);if(this.option("bActivateOnload")){this.activate();this._nCurrentPage=this.option('nPage');this.updateInfo();}},_initVar:function(){var _htDefalutAjax={sApi:null,htAjaxOption:{type:'xhr'},htQuery:{},sStart:'start',sDisplay:'display'};var htAjax=this.option('htAjax');if(!htAjax){this.option('htAjax',_htDefalutAjax);return;}
for(var p in _htDefalutAjax){if(typeof htAjax[p]=='undefined'){htAjax[p]=_htDefalutAjax[p];}}
for(p in _htDefalutAjax.htAjaxOption){if(typeof htAjax.htAjaxOption[p]=='undefined'){htAjax.htAjaxOption[p]=_htDefalutAjax.htAjaxOption[p];}}
for(p in _htDefalutAjax.htQuery){if(typeof htAjax.htQuery[p]=='undefined'){htAjax.htQuery[p]=_htDefalutAjax.htQuery[p];}}
if(!!htAjax.sApi){this.oAjax=new jindo.$Ajax(htAjax.sApi,htAjax.htAjaxOption);}},_setWrapperElement:function(el){this._htWElement={};var sClass='.'+this.option('sClassPrefix');this._htWElement.elBase=jindo.$Element(el);this._htWElement.elMoreButton=jindo.$Element(this._htWElement.elBase.query(sClass+'button'));this._htWElement.elTop=jindo.$Element(this._htWElement.elBase.query(sClass+'top'));this._htWElement.elLoading=jindo.$Element(this._htWElement.elBase.query(sClass+'loading'));this._htWElement.elMoreCnt=jindo.$Element(this._htWElement.elBase.query(sClass+'moreCnt'));this._htWElement.elTotal=jindo.$Element(this._htWElement.elBase.query(sClass+'total'));this._htWElement.elCurrent=jindo.$Element(this._htWElement.elBase.query(sClass+'current'));this._htWElement["elRemainder"]=jindo.$Element(this._htWElement.elBase.query(sClass+'remainder'));this._htWElement.elLast=jindo.$Element(this._htWElement.elBase.query(sClass+'last'));if(!!this._htWElement.elLast){this._htWElement.elLastTotal=jindo.$Element(this._htWElement.elLast.query(sClass+'total'));this._htWElement.elLastCurrent=jindo.$Element(this._htWElement.elLast.query(sClass+'current'));this._htWElement["elLastRemainder"]=jindo.$Element(this._htWElement.elLast.query(sClass+'remainder'));}},_onClickMore:function(oEvent){oEvent.stop(jindo.$Event.CANCEL_DEFAULT);if(this.hasNextPage()){this.more();}},_onClickTop:function(oEvent){oEvent.stop(jindo.$Event.CANCEL_DEFAULT);this.fireEvent('goTop',{element:oEvent.element});},more:function(bFireEvent){if(typeof bFireEvent=="undefined"){bFireEvent=true;}
var nPage=this._nCurrentPage+1;var nBeforePage=this.getCurrentPage();if(bFireEvent){if(!this.fireEvent('beforeMore',{nPage:nPage,nCurrentPage:nBeforePage})){return;}}
var htIndex=this.getPageItemIndex(nPage);if(!htIndex){this.updateInfo();return;}
this.showLoadingImg();if(!!this.option('htAjax').sApi){this._callAjax(nPage,true,bFireEvent);}else{this._move(nPage);if(bFireEvent){this.fireEvent('more',{nPage:nPage,nStartIndex:htIndex.nStart,nEndIndex:htIndex.nEnd});}
this.updateInfo();}},movePageTo:function(nPage,bFireEvent){if(typeof bFireEvent=="undefined"){bFireEvent=true;}
var nBeforePage=this.getCurrentPage();if(bFireEvent){if(!this.fireEvent('beforeMovePage',{nPage:nPage,nCurrentPage:nBeforePage})){return;}}
var htIndex=this.getPageItemIndex(nPage);if(!htIndex){this.updateInfo();return;}
this.showLoadingImg();if(!!this.option('htAjax').sApi){this._callAjax(nPage,false,bFireEvent);}else{this._move(nPage);if(bFireEvent){this.fireEvent('movePage',{nPage:nPage,nBeforePage:nBeforePage,nStartIndex:0,nEndIndex:htIndex.nEnd});}
this.updateInfo();}},_move:function(nPage){var n=this._convertToAvailPage(nPage);if(n!=this._nCurrentPage){this._nCurrentPage=n;}},updateInfo:function(){var nPage=this.getCurrentPage(),htIndex=this.getPageItemIndex(nPage);this.hideLoadingImg();if(nPage>=this.getTotalPages()){if(this._htWElement.elBase){this._htWElement.elBase.addClass('u_pg_end');}
if(this._htWElement.elMoreButton){this._htWElement.elMoreButton.hide();}
if(this._htWElement.elLast){this._htWElement.elLast.show('block');}}else{if(this._htWElement.elBase){this._htWElement.elBase.removeClass('u_pg_end');}
if(this._htWElement.elMoreButton){this._htWElement.elMoreButton.show('block');}
if(this._htWElement.elLast){this._htWElement.elLast.hide();}}
if(!!this._htWElement.elCurrent&&!!htIndex){var sText=htIndex.nEnd+1;this._htWElement.elCurrent.text(this._setNumberFormat(sText));}
if(typeof this._htWElement.elLastCurrent!='undefined'&&this._htWElement.elLastCurrent&&!!htIndex){this._htWElement.elLastCurrent.text(this._setNumberFormat(htIndex.nEnd+1));}
if(!!this._htWElement["elRemainder"]&&!!htIndex){this._htWElement["elRemainder"].text(this._setNumberFormat(parseInt(this.option('nTotalItem'),10)-(htIndex.nEnd+1)));}
if(!!this._htWElement["elLastRemainder"]&&!!htIndex){this._htWElement["elLastRemainder"].text(this._setNumberFormat(parseInt(this.option('nTotalItem'),10)-(htIndex.nEnd+1)));}
if(!!this._htWElement.elTotal){this._htWElement.elTotal.text(this._setNumberFormat(this.option('nTotalItem')));}
if(typeof this._htWElement.elLastTotal!='undefined'&&this._htWElement.elLastTotal){this._htWElement.elLastTotal.text(this._setNumberFormat(this.option('nTotalItem')));}
if(!!this._htWElement.elMoreCnt&&!!htIndex){var nCnt=Math.min(this.getItemPerPage(),this.getItemCount()-htIndex.nEnd-1);this._htWElement.elMoreCnt.text(this._setNumberFormat(nCnt));}},_callAjax:function(nPage,bMore,bFireEvent){var self=this;this.oAjax.option('onload',null);this.oAjax.option('onload',function(res){self._onAjaxResponse(res,nPage,bMore,bFireEvent);});this.oAjax.request(this._getQueryString(nPage,bMore));},_onAjaxResponse:function(oResponse,nPage,bMore,bFireEvent){if(bFireEvent){this._move(nPage);var sEvent=bMore?'more':'movePage';var htIndex=this.getPageItemIndex(nPage);this.fireEvent(sEvent,{oResponse:oResponse,nPage:nPage,nStartIndex:bMore?htIndex.nStart:0,nEndIndex:htIndex.nEnd});}
this.updateInfo();},_getQueryString:function(nPage,bMore){if(typeof bMore==='undefined'){bMore=true;}
var htQuery=this.option('htAjax').htQuery||{};var htIndex=this.getPageItemIndex(nPage);htQuery[this.option('htAjax').sStart]=bMore?htIndex.nStart:0;htQuery[this.option('htAjax').sDisplay]=Math.min(this.getItemPerPage(),(this.getShowMaxItem()-htIndex.nStart));return htQuery;},_setNumberFormat:function(sText){sText=sText.toString();var sReturn="";var nDot=0;var nLastPosition=sText.length;for(var i=nLastPosition;i>=0;i--){var sChar=sText.charAt(i);if(i>nLastPosition){sReturn=sChar+sReturn;continue;}
if(/[0-9]/.test(sChar)){if(nDot>=3){sReturn=','+sReturn;nDot=0;}
nDot++;sReturn=sChar+sReturn;}}
return sReturn;},showLoadingImg:function(){if(!!this._htWElement.elLoading){this._htWElement.elLoading.show();}},hideLoadingImg:function(){if(!!this._htWElement.elLoading){this._htWElement.elLoading.hide();}},reset:function(nShowMaxItem){if(typeof nShowMaxItem=="undefined"){nShowMaxItem=this.option('nShowMaxItem');}
this.setShowMaxItem(nShowMaxItem);this.movePageTo(1,false);},getTotalItem:function(){return this.option('nTotalItem');},setTotalItem:function(n){this.option('nTotalItem',n);},getShowMaxItem:function(){return this.option('nShowMaxItem');},setShowMaxItem:function(n){this.option('nShowMaxItem',n);this.option('nItem',n);},_onActivate:function(){this._attachEvent();},_onDeactivate:function(){this._detachEvent();},_attachEvent:function(){this._htEvent={};if(!!this._htWElement.elMoreButton){this._htEvent["click_More"]={ref:jindo.$Fn(this._onClickMore,this).attach(this._htWElement.elMoreButton,'click'),el:this._htWElement.elMoreButton.$value()};}
if(!!this._htWElement.elTop){this._htEvent["click_Top"]={ref:jindo.$Fn(this._onClickTop,this).attach(this._htWElement.elTop,'click'),el:this._htWElement.elTop.$value()};}},_detachEvent:function(){for(var p in this._htEvent){var htTargetEvent=this._htEvent[p];htTargetEvent.ref.detach(htTargetEvent.el,p.substring(0,p.indexOf("_")));}
this._htEvent=null;},header:function(vName,vValue){if(this.oAjax){return this.oAjax.header(vName,vValue);}},destroy:function(){this._detachEvent();for(var p in this._htWElement){this._htWElement[p]=null;}
this._htWElement=null;}}).extend(jindo.m.CorePagination);jindo.m.PageNavigation=jindo.$Class({$init:function(el,htUserOption){this.option({sClassPrefix:'page_',nItem:10,nItemPerPage:10,nPage:1,bActivateOnload:true,sInfoTemplate:'{=PAGE} / {=TOTALPAGE}',htAjax:{}});this.option(htUserOption||{});this._initVar();this._setWrapperElement(el);if(this.option("bActivateOnload")){this.activate();this._nCurrentPage=this.option('nPage');}},_initVar:function(){var _htDefalutAjax={sApi:null,htAjaxOption:{type:'xhr'},htQuery:{},sPage:'page',sDisplay:'display'};var htAjax=this.option('htAjax');if(!htAjax){this.option('htAjax',_htDefalutAjax);return;}
for(var p in _htDefalutAjax){if(typeof htAjax[p]=='undefined'){htAjax[p]=_htDefalutAjax[p];}}
for(p in _htDefalutAjax.htAjaxOption){if(typeof htAjax.htAjaxOption[p]=='undefined'){htAjax.htAjaxOption[p]=_htDefalutAjax.htAjaxOption[p];}}
for(p in _htDefalutAjax.htQuery){if(typeof htAjax.htQuery[p]=='undefined'){htAjax.htQuery[p]=_htDefalutAjax.htQuery[p];}}
if(!!htAjax.sApi){this.oAjax=new jindo.$Ajax(htAjax.sApi,htAjax.htAjaxOption);}},_setWrapperElement:function(el){this._htWElement={};el=jindo.$(el);var sClass='.'+this.option('sClassPrefix');this._htWElement.elBase=jindo.$Element(el);this._htWElement.elPrev=jindo.$Element(jindo.$$.getSingle(sClass+'prev',el));this._htWElement.elNext=jindo.$Element(jindo.$$.getSingle(sClass+'next',el));this._htWElement.elPrevOff=jindo.$Element(jindo.$$.getSingle(sClass+'prev-off',el));this._htWElement.elNextOff=jindo.$Element(jindo.$$.getSingle(sClass+'next-off',el));this._htWElement.elInfo=jindo.$Element(jindo.$$.getSingle(sClass+'info',el));},_onClickPrev:function(oEvent){oEvent.stop();if(!this.hasPreviousPage()){return;}
var nPage=this.getCurrentPage();this.movePageTo(nPage-1);},_onClickNext:function(oEvent){oEvent.stop();if(!this.hasNextPage()){return;}
var nPage=this.getCurrentPage();this.movePageTo(nPage+1);},movePageTo:function(n,bFireEvent){if(typeof bFireEvent=='undefined'){bFireEvent=true;}
if(bFireEvent){if(!this._fireEventBefore(n)){return;}}
if(!!this.option('htAjax').sApi){this._callAjax(n,bFireEvent);}else{this._move(n);if(bFireEvent){this._fireEventEnd();}
this.updateInfo();this.updateNavigation();}},_move:function(n){var nPage=this._convertToAvailPage(n);if(nPage!=this._nCurrentPage){this._nCurrentPage=nPage;}},_callAjax:function(nPage,bFireEvent){var self=this;this.oAjax.option('onload',null);this.oAjax.option('onload',function(res){self._onAjaxResponse(res,nPage,bFireEvent);});this.oAjax.request(this._getQueryString(nPage));},_fireEventBefore:function(nPage){return this.fireEvent('beforeMove',{nPage:nPage,nCurrentPage:this.getCurrentPage()});},_fireEventEnd:function(oResponse){if(typeof oResponse=='undefined'){oResponse=null;}
var nPage=this.getCurrentPage();var htIndex=this.getPageItemIndex(nPage);return this.fireEvent('move',{nPage:this.getCurrentPage(),nStartIndex:htIndex.nStart,nEndIndex:htIndex.nEnd,oResponse:oResponse});},_onAjaxResponse:function(oResponse,nPage,bFireEvent){this._move(nPage);if(bFireEvent){this._fireEventEnd(oResponse);}
this.updateInfo();this.updateNavigation();},_getQueryString:function(n){var htQuery=this.option('htAjax').htQuery||{};var htIndex=this.getPageItemIndex(n);htQuery[this.option('htAjax').sPage]=n;htQuery[this.option('htAjax').sDisplay]=Math.min(this.getItemPerPage(),(this.getItemCount()-htIndex.nStart));return htQuery;},updateInfo:function(){if(!this._htWElement.elInfo){return;}
var nPage=this.getCurrentPage();var htIndex=this.getPageItemIndex(nPage);var sText=this.option('sInfoTemplate').replace(/\{=PAGE\}/,nPage).replace(/\{=TOTALPAGE\}/,this.getTotalPages()).replace(/\{=ITEMCOUT\}/,this.option('nItem')).replace(/\{=STARTINDEX\}/,htIndex.nStart+1).replace(/\{=ENDINDEX\}/,htIndex.nEnd+1);this._htWElement.elInfo.html(sText);},updateNavigation:function(){var nPage=this.getCurrentPage();if(!!this._htWElement.elPrev){this._htWElement.elPrev.hide();}
if(!!this._htWElement.elNext){this._htWElement.elNext.hide();}
if(this._htWElement.elPrevOff){this._htWElement.elPrevOff.hide();}
if(this._htWElement.elNextOff){this._htWElement.elNextOff.hide();}
if(this.getTotalPages()==1){return;}
if(nPage==1){if(!!this._htWElement.elPrevOff){this._htWElement.elPrevOff.show('inline-block');}
if(!!this._htWElement.elNext){this._htWElement.elNext.show('inline-block');}}else if(nPage==this.getTotalPages()){if(!!this._htWElement.elNextOff){this._htWElement.elNextOff.show('inline-block');}
if(!!this._htWElement.elPrev){this._htWElement.elPrev.show('inline-block');}}else{if(!!this._htWElement.elPrev){this._htWElement.elPrev.show('inline-block');}
if(!!this._htWElement.elNext){this._htWElement.elNext.show('inline-block');}}},reset:function(nItem){if(typeof nItem=="undefined"){nItem=this.option('nItem');}
this.setItemCount(nItem);this.movePageTo(1,false);},_onActivate:function(){this._attachEvent();},_onDeactivate:function(){this._detachEvent();},_attachEvent:function(){this._htEvent={};if(!!this._htWElement.elNext){this._htEvent["click_Next"]={ref:jindo.$Fn(this._onClickNext,this).attach(this._htWElement.elNext,'click'),el:this._htWElement.elNext.$value()};}
if(!!this._htWElement.elPrev){this._htEvent["click_Prev"]={ref:jindo.$Fn(this._onClickPrev,this).attach(this._htWElement.elPrev,'click'),el:this._htWElement.elPrev.$value()};}},_detachEvent:function(){for(var p in this._htEvent){var htTargetEvent=this._htEvent[p];htTargetEvent.ref.detach(htTargetEvent.el,p.substring(0,p.indexOf("_")));}
this._htEvent=null;},destroy:function(){this.deactivate();for(var p in this._htWElement){this._htWElement[p]=null;}
this._htWElement=null;}}).extend(jindo.m.CorePagination);jindo.m.CircularFlicking=jindo.$Class({$init:function(sId,htUserOption){this.option({bHorizontal:true,sClassPrefix:'flick-',nFlickThreshold:40,nDuration:100,nTotalContents:3,nBounceDuration:100,bActivateOnload:true,bUseCss3d:jindo.m._isUseCss3d(true),bUseTimingFunction:jindo.m._isUseTimingFunction(),bUseTranslate:true});this.option(htUserOption||{});this._initVar();this._setWrapperElement(sId);this._setElementSize();this._updatePanelPosition();this._initTouch();if(this.option("bActivateOnload")){this.activate();}},_initVar:function(){this._oTouch=null;this._bFlickLeft=null;this._elTransition=null;this._htIndexInfo={nPanelIndex:0,nContentIndex:0,nNextPanelIndex:0,nNextContentIndex:0};var htInfo=jindo.m.getDeviceInfo();this.sTransformStart="translate(";this.sTransformEnd=")";this._bAndroid=htInfo.android&&(!htInfo.bChrome);this._nVersion=htInfo.version;this._isIos=(htInfo.iphone||htInfo.ipad);this._bUseCss3=this.option('bUseCss3d');this._b3dExecption=this._bAndroid&&(navigator.userAgent.indexOf('LG')>-1)&&(this._nVersion>="4");this._bDummyTagException=(this._bAndroid&&(this._nVersion<"3"))
if(this._bUseCss3){this.sTransformStart="translate3d(";this.sTransformEnd=",0px)";}
this._sCssPrefix=jindo.m.getCssPrefix();this._wfTransitionEnd=jindo.$Fn(this._onTransitionEnd,this).bind();this._aAnchor=null;this._fnDummyFnc=function(){return false;};this._bBlocked=false;this._isFlicking=false;this._bTouchStart=false;},_initTouch:function(){this._oTouch=new jindo.m.Touch(this._htWElement.base.$value(),{nSlopeThreshold:4,nMoveThreshold:0,bActivateOnload:false});},_setWrapperElement:function(el){this._htWElement={};el=jindo.$(el);var sClass='.'+this.option('sClassPrefix');this._htWElement.base=jindo.$Element(el);this._htWElement.container=jindo.$Element(jindo.$$.getSingle(sClass+'container',el));this._htWElement.container.css('position','relative').css('width','100%').css('height','100%');var aPanel=jindo.$$(sClass+"panel",el);this._htWElement.aPanel=jindo.$A(aPanel).forEach(function(value,index,array){var wel=jindo.$Element(value);array[index]=wel;wel.css('position','absolute').css('width','100%').css('height','100%');}).$value();this._createDummyTag();},_createDummyTag:function(){if(this._bDummyTagException){this._htWElement.aDummyTag=[];var elDummyTag=jindo.$$.getSingle("._cflick_dummy_atag_",this._htWElement.container.$value());if(!elDummyTag){elDummyTag=jindo.$("<a href='javascript:void(0);' class='_cflick_dummy_atag_'></a>");elDummyTag.style.position="absolute";elDummyTag.style.left="-1000px";elDummyTag.style.top="-1000px";elDummyTag.style.width=0;elDummyTag.style.height=0;this._htWElement.container.append(elDummyTag);}
this._htWElement.aDummyTag.push(elDummyTag);}},_prepareTransition:function(){var sTransfrom=this.option('bUseTranslate')?"-webkit-transform":(this.option('bHorizontal')?'left':'top');for(var i=0,nLen=this._htWElement.aPanel.length;i<nLen;i++){if(this._isIos&&this.option('bUseTranslate')){this._htWElement.aPanel[i].css(this._sCssPrefix+'Transform',this.sTransformStart+"0px,0px"+this.sTransformEnd);}
this._htWElement.aPanel[i].css(this._sCssPrefix+'TransitionProperty',sTransfrom);}},_setElementSize:function(){if(this.option('bHorizontal')){this._htWElement.container.height(this._htWElement.base.height());}else{this._htWElement.container.width(this._htWElement.base.width());}},_setAnchorElement:function(el){if(this._isIos){this._aAnchor=jindo.$$("A",this._htWElement.container.$value());}},_updatePanelPosition:function(){this._aCtPosition=[];var el=this._htWElement.base.$value();var nW=this.option('bHorizontal')?el.clientWidth:el.clientHeight;this._htPositionInfo={left:0,center:100,right:200};this._htContainerInfo={left:nW*-1,center:0,right:nW};this._nDefaultSize=nW;},_onResize:function(){this._isFlicking=false;this.refresh(this.getPanelIndex(),true);},getPanelIndex:function(){return this._htIndexInfo.nPanelIndex;},getPanelElement:function(){return this._htWElement.aPanel[this.getPanelIndex()];},getRightPanelIndex:function(){var n=this.getPanelIndex()+1;n=(n>2)?0:n;return n;},getRightPanelElement:function(){return this._htWElement.aPanel[this.getRightPanelIndex()];},getLeftPanelIndex:function(){var n=this.getPanelIndex()-1;n=(n<0)?2:n;return n;},getLeftPanelElement:function(){return this._htWElement.aPanel[this.getLeftPanelIndex()];},setContentIndex:function(n,bRefresh){if(!this.isActivating()){return;}
if(typeof bRefresh==='undefined'){bRefresh=true;}
n=parseInt(n,10);if(n<0||n>(this.option('nTotalContents')-1)){return;}
if(bRefresh){if(!this._fireCustomEvent('beforeMove',{nPanelIndex:this.getPanelIndex(),nContentIndex:this.getContentIndex(),nNextPanelIndex:n%3,nNextContentIndex:n})){return;}}
this._htIndexInfo.nContentIndex=n;this._htIndexInfo.nPanelIndex=n%3;this._htIndexInfo.nNextContentIndex=n;this._htIndexInfo.nNextPanelIndex=n%3;if(bRefresh){this.refresh(this._htIndexInfo.nPanelIndex,false,true);}},getContentIndex:function(){return this._htIndexInfo.nContentIndex;},getRightContentIndex:function(){var n=this.getContentIndex()+1;n=((n+1)>this.option('nTotalContents'))?0:n;return n;},getLeftContentIndex:function(){var n=this.getContentIndex()-1;n=(n<0)?(this.option('nTotalContents')-1):n;return n;},_attachTouchEvt:function(){this._oTouch.attach({touchMove:this._htEvent["touchMove"],touchEnd:this._htEvent["touchEnd"],longTap:this._htEvent["longTap"]});},_detachTouchEvt:function(){this._oTouch.detach({touchMove:this._htEvent["touchMove"],touchEnd:this._htEvent["touchEnd"],longTap:this._htEvent["longTap"]});},_onStart:function(oCustomEvt){this._detachTouchEvt();if(this._isFlicking){return;}
if(!this.fireEvent('touchStart',oCustomEvt)){return;}
this._bTouchStart=true;this._clearAnchor();this._attachTouchEvt();},_onMove:function(oCustomEvt){var bH=this.option('bHorizontal');var weParent=oCustomEvt.oEvent;if(oCustomEvt.sMoveType===jindo.m.MOVETYPE[0]){if(bH){weParent.stop(jindo.$Event.CANCEL_ALL);}else{return;}}else if(oCustomEvt.sMoveType===jindo.m.MOVETYPE[1]){if(!bH){weParent.stop(jindo.$Event.CANCEL_ALL);}else{return;}}else if(oCustomEvt.sMoveType===jindo.m.MOVETYPE[2]){weParent.stop(jindo.$Event.CANCEL_ALL);}
if(this._isFlicking){return;}
if(!this._bTouchStart){return;}
this.fireEvent('touchMove',oCustomEvt);var nDis=bH?oCustomEvt.nDistanceX:oCustomEvt.nDistanceY;this._movePanels(nDis,nDis);},_onEnd:function(oCustomEvt,nTime){this._detachTouchEvt();if(this._isFlicking){return;}
if(!this._bTouchStart){return;}
this._isFlicking=true;var htInfo=this._getSnap(oCustomEvt.nDistanceX,oCustomEvt.nDistanceY,nTime);if(!(this._bAndroid&&(this._nVersion>="4.1"))){if(oCustomEvt.sMoveType===jindo.m.MOVETYPE[0]||oCustomEvt.sMoveType===jindo.m.MOVETYPE[1]||oCustomEvt.sMoveType===jindo.m.MOVETYPE[2]){oCustomEvt.oEvent.stop(jindo.$Event.CANCEL_ALL);}}
if(oCustomEvt.sMoveType===jindo.m.MOVETYPE[3]||oCustomEvt.sMoveType===jindo.m.MOVETYPE[4]){this._restoreAnchor();}
var nPanelIndex=this.getPanelIndex();var nPos=this.option('bHorizontal')?htInfo.nX:htInfo.nY;var nDis=this.option('bHorizontal')?oCustomEvt.nDistanceX:oCustomEvt.nDistanceY;this.fireEvent('touchEnd',oCustomEvt);if(nPanelIndex==htInfo.nPanelIndex){if(nDis===0){this._onTransitionEnd();}else{this._restorePosition();}
return;}
var htParam={nPanelIndex:nPanelIndex,nContentIndex:this.getContentIndex(),nNextPanelIndex:htInfo.nPanelIndex,nNextContentIndex:htInfo.nContentIndex};if(this._bFlickLeft!==null){if(this.option('bHorizontal')){htParam.bLeft=this._bFlickLeft;}else{htParam.bTop=this._bFlickLeft;}}
if(!this._fireCustomEvent('beforeFlicking',htParam)){this._restorePosition();return;}
this._htIndexInfo.nNextPanelIndex=htInfo.nPanelIndex;this._htIndexInfo.nNextContentIndex=htInfo.nContentIndex;if(htInfo.nTime>0){this._movePanels(nPos,nDis,htInfo.nTime,false);}else{this._onTransitionEnd();}},_restorePosition:function(){var self=this;this._movePanels(0,0,this.option('nBounceDuration'),true);setTimeout(function(){self._onTransitionEnd();},this.option('nBounceDuration')+10);},_movePanels:function(nPos,nDis,nTime,bMove){var self=this;if(typeof nTime==='undefined'){nTime=0;}
if(typeof bMove==='undefined'){bMove=true;}
var welWrapper=this._htWElement.container;if(bMove||(this._htOption['bUseTimingFunction'])||(nTime===0)){this._setPosition(welWrapper,nPos,nTime,!bMove);}else{var nDuration=nTime;var startTime=(new Date()).getTime(),nStartDis=nDis,nTotalDis=this._nDefaultSize;if(nPos<0){nTotalDis=nTotalDis*-1;}
(function animate(){var now=(new Date()).getTime(),nEaseOut;if(now>=startTime+nDuration){self._setPosition(welWrapper,nTotalDis,0,false);clearTimeout(self._nTimerAnimate);delete self._nTimerAnimate;setTimeout(function(){self._onTransitionEnd();},10);return;}
now=(now-startTime)/nDuration-1;nEaseOut=Math.sqrt(1-Math.pow(now,2));var nDis=(nTotalDis-nStartDis)*nEaseOut+nStartDis;self._setPosition(welWrapper,nDis,0,false);self._nTimerAnimate=setTimeout(animate,10);})();}},_focusFixedBug:function(){if(typeof this._htWElement.aDummyTag==='undefined'){return;}
for(var i=0,nLen=this._htWElement.aDummyTag.length;i<nLen;i++){this._htWElement.aDummyTag[i].focus();}},_getSnap:function(nDistanceX,nDistanceY,nDuration){var nFinalDis=this.option('bHorizontal')?nDistanceX:nDistanceY;var nNewPos=this.option('bUseTranslate')?this._htContainerInfo.center:-100;var nTime=(typeof nDuration!='undefined')?nDuration:this.option('nDuration');var nPanelIndex=this.getPanelIndex();var nContentIndex=this.getContentIndex();if(Math.abs(nFinalDis)>this.option('nFlickThreshold')){if(nFinalDis<0){nNewPos=this.option('bUseTranslate')?this._htContainerInfo.left:-200;nPanelIndex=this.getRightPanelIndex();nContentIndex=this.getRightContentIndex();this._bFlickLeft=true;}else{nNewPos=this.option('bUseTranslate')?this._htContainerInfo.right:0;nPanelIndex=this.getLeftPanelIndex();nContentIndex=this.getLeftContentIndex();this._bFlickLeft=false;}}
return{nX:nNewPos,nY:nNewPos,nTime:nTime,nPanelIndex:nPanelIndex,nContentIndex:nContentIndex};},_setPosition:function(wel,nDis,nDuration,bEnd){if(typeof nDuration==='undefined'){nDuration=0;}
if(!this._htOption['bUseTranslate']){this._setPositionForStyle(wel,nDis,nDuration,bEnd);}else{this._setPositionTransform(wel,nDis,nDuration,bEnd);}},_setPositionTransform:function(wel,nDis,nDuration,bEnd){var bH=this.option('bHorizontal');var nX=bH?nDis:0;var nY=bH?0:nDis;var htCss={};htCss[this._sCssPrefix+'TransitionDuration']=(nDuration===0)?'0':nDuration+"ms";htCss[this._sCssPrefix+'Transform']=this.sTransformStart+nX+"px,"+nY+"px"+this.sTransformEnd;if(bEnd){var htCssOffset=jindo.m.getCssOffset(wel.$value());if((htCssOffset.left===nX)&&(htCssOffset.top===nY)){nDuration=0;}
this._attachTransitionEnd(wel.$value(),nDuration);}
wel.css(htCss);},_setPositionForStyle:function(wel,nDis,nDuration,bEnd){var sName=this.option('bHorizontal')?'left':'top';var n=((nDis/this._nDefaultSize)*100)-100;var nPos=bEnd?nDis:n;var htCss={};htCss[this._sCssPrefix+'TransitionDuration']=(nDuration===0)?'0':nDuration+"ms";htCss[sName]=nPos+'%';if(bEnd){if(nPos===parseFloat(wel.css(sName).replace('px',''),10)){nDuration=0;}
this._attachTransitionEnd(wel.$value(),nDuration);}
wel.css(htCss);},_clearAnchor:function(){if(this._aAnchor&&!this._bBlocked){var aClickAddEvent=null;for(var i=0,nILength=this._aAnchor.length;i<nILength;i++){if(this._fnDummyFnc!==this._aAnchor[i].onclick){this._aAnchor[i]._onclick=this._aAnchor[i].onclick;}
this._aAnchor[i].onclick=this._fnDummyFnc;aClickAddEvent=this._aAnchor[i].___listeners___||[];for(var j=0,nJLength=aClickAddEvent.length;j<nJLength;j++){___Old__removeEventListener___.call(this._aAnchor[i],"click",aClickAddEvent[j].listener,aClickAddEvent[j].useCapture);}}
this._bBlocked=true;}},_restoreAnchor:function(){if(this._aAnchor&&this._bBlocked){var aClickAddEvent=null;for(var i=0,nILength=this._aAnchor.length;i<nILength;i++){if(this._fnDummyFnc!==this._aAnchor[i]._onclick){this._aAnchor[i].onclick=this._aAnchor[i]._onclick;}else{this._aAnchor[i].onclick=null;}
aClickAddEvent=this._aAnchor[i].___listeners___||[];for(var j=0,nJLength=aClickAddEvent.length;j<nJLength;j++){___Old__addEventListener___.call(this._aAnchor[i],"click",aClickAddEvent[j].listener,aClickAddEvent[j].useCapture);}}
this._bBlocked=false;}},moveNext:function(nDuration){if(!this.isActivating()){return;}
this._bTouchStart=true;var n=this.option('nFlickThreshold')*-1;this._onEnd({nDistanceX:n-10,nDistanceY:n-10},nDuration);},movePrev:function(nDuration){if(!this.isActivating()){return;}
var n=this.option('nFlickThreshold');this._bTouchStart=true;this._onEnd({nDistanceX:n+10,nDistanceY:n+10},nDuration);},refresh:function(n,bResize,bFireEvent){var self=this;if(!this.isActivating()){return;}
if(typeof bResize==='undefined'){bResize=false;}
if(typeof bFireEvent==='undefined'){bFireEvent=false;}
if(bResize){this._setElementSize();this._updatePanelPosition();}
if(typeof n==='undefined'){n=this.getPanelIndex();}
if(this._htIndexInfo.nPanelIndex!=n){this._htIndexInfo.nPanelIndex=n;}
var nCenter=this.getPanelIndex();var nLeft=this.getLeftPanelIndex();var nRight=this.getRightPanelIndex();var sPosition=this.option('bHorizontal')?'left':'top';this._htWElement.container.css(this._sCssPrefix+'TransitionDuration','0ms');if(this.option('bUseTranslate')||this.option('bUseCss3d')){sValue="";this._htWElement.container.css(this._sCssPrefix+'Transform',sValue);}
this._htWElement.container.css(sPosition,'-100%');if((this.option('bUseTranslate')||this.option('bUseCss3d'))){setTimeout(function(){self._htWElement.container.css(self._sCssPrefix+'Transform',self.sTransformStart+"0,0px"+self.sTransformEnd);},10);}
this._htWElement.aPanel[nCenter].css(sPosition,this._htPositionInfo.center+"%").css('zIndex',10);this._htWElement.aPanel[nLeft].css(sPosition,this._htPositionInfo.left+"%").css('zIndex',1);this._htWElement.aPanel[nRight].css(sPosition,this._htPositionInfo.right+"%").css('zIndex',1);this._restoreAnchor();this._setAnchorElement();if(bFireEvent){this._fireCustomEvent('move');}
this._createDummyTag();setTimeout(function(){self._focusFixedBug();},100);},_onTransitionEnd:function(evt){this._detachTransitionEnd();var bFireEvent=false;if(this._htIndexInfo.nPanelIndex!=this._htIndexInfo.nNextPanelIndex){bFireEvent=true;}
if(bFireEvent){this._htIndexInfo.nContentIndex=this._htIndexInfo.nNextContentIndex;this.refresh(this._htIndexInfo.nNextPanelIndex);if(this._isIos){var nLeft=this.getLeftPanelIndex();var nRight=this.getRightPanelIndex();var sPosition=this.option('bHorizontal')?'left':'top';var welCloneLeft=jindo.$Element(this._htWElement.aPanel[nLeft].$value().cloneNode(true));var welCloneRight=jindo.$Element(this._htWElement.aPanel[nRight].$value().cloneNode(true));this._htWElement.aPanel[nLeft].replace(welCloneLeft);this._htWElement.aPanel[nRight].replace(welCloneRight);this._htWElement.aPanel[nLeft]=welCloneLeft;this._htWElement.aPanel[nRight]=welCloneRight;}
this._focusFixedBug();this._fireCustomEvent('afterFlicking');}
this._restoreAnchor();this._setAnchorElement();this._bFlickLeft=null;this._isFlicking=false;this._bTouchStart=false;},_fireCustomEvent:function(sEventName,htParam){if(typeof htParam==='undefined'){htParam={nPanelIndex:this.getPanelIndex(),nContentIndex:this.getContentIndex(),nContentLeftIndex:this.getLeftContentIndex(),nContentRightIndex:this.getRightContentIndex(),nPanelLeftIndex:this.getLeftPanelIndex(),nPanelRightIndex:this.getRightPanelIndex()};if(this.option('bHorizontal')){htParam.bLeft=this._bFlickLeft;}else{htParam.bTop=this._bFlickLeft;}}
return this.fireEvent(sEventName,htParam);},_attachTransitionEnd:function(el,nDuration){if(el===this._htWElement.container.$value()){this._elTransition=el;if(nDuration===0){var self=this;setTimeout(function(){self._onTransitionEnd();},10);}else{jindo.m.attachTransitionEnd(this._elTransition,this._wfTransitionEnd);}}},_detachTransitionEnd:function(){if(this._elTransition){jindo.m.detachTransitionEnd(this._elTransition,this._wfTransitionEnd);}},_onActivate:function(){this._attachEvent();this._oTouch.activate();this._prepareTransition();this.refresh();},_onDeactivate:function(){this._detachEvent();this._oTouch.deactivate();},_attachEvent:function(){this._htEvent={};this._htEvent["rotate"]=jindo.$Fn(this._onResize,this).bind();jindo.m.bindRotate(this._htEvent["rotate"]);this._htEvent["touchMove"]=jindo.$Fn(this._onMove,this).bind();this._htEvent["touchEnd"]=jindo.$Fn(this._onEnd,this).bind();this._htEvent["touchStart"]=jindo.$Fn(this._onStart,this).bind();this._oTouch.attach("touchStart",this._htEvent["touchStart"]);this._htEvent["pageshow"]=jindo.$Fn(this._onPageShow,this).bind();jindo.m.bindPageshow(this._htEvent["pageshow"]);},_onPageShow:function(){this._onResize();},_detachEvent:function(){jindo.m.unbindRotate(this._htEvent["rotate"]);jindo.m.unbindPageshow(this._htEvent["pageshow"]);this._oTouch.detachAll();this._htEvent=null;},destroy:function(){this.deactivate();for(var p in this._htWElement){this._htWElement[p]=null;}
for(p in this._htIndexInfo){this._htIndexInfo[p]=null;}
this._oTouch.destroy();this._elTransition=null;this._oTouch=null;this._bFlickLeft=null;this._isAndroid=null;this._aCurrentPosition=null;this.sTransformStart=null;this.sTransformEnd=null;this._isIos=null;this._bUseCss3=null;this._aAnchor=null;this._fnDummyFnc=null;this._sCssPrefix=null;this._bBlocked=null;this._isFlicking=null;this._bTouchStart=null;for(p in this._htAnimationStep){this._htAnimationStep[p]=null;}
this._htAnimationStep=null;}}).extend(jindo.UIComponent);jindo.m.CircularSlideFlicking=jindo.$Class({sAnimationName:'slide',$init:function(){this._isIos=jindo.m.getDeviceInfo().iphone||jindo.m.getDeviceInfo().ipad;this._isAndroid=jindo.m.getDeviceInfo().android;this._isChrome=this._isAndroid&&jindo.m.getDeviceInfo().bChrome;this._nVersion=jindo.m.getDeviceInfo().version;this._sTranslateStart="translate(";this._sTranslateEnd=")";this._b3dExecption=this._isAndroid&&(navigator.userAgent.indexOf('LG')>-1)&&(this._nVersion>="4");},_initAnimation:function(){this._bUseCss3d=this._htOption['bUseCss3d'];this._htWElement.container.css('position','relative').css('width','100%');jindo.$A(this._htWElement.aPanel).forEach(function(value,index,array){var wel=value;wel.css('position','absolute').css('width','100%').css('height','100%');});this._setElementSize();this._setPanelPos();this._prepareTransition();},_setPanelPos:function(){var el=this._htWElement.base.$value();var nW=this.bH?el.clientWidth:el.clientHeight;this._htPositionInfo={left:0,center:100,right:200};this._htContainerInfo={left:nW*-1,center:0,right:nW};this._nDefaultSize=nW;},_setElementSize:function(){if(this.bH){this._htWElement.container.height(this._htWElement.base.height());}else{this._htWElement.container.height(this._htWElement.base.height());}},_prepareTransition:function(){if(this._htOption['bUseCss3d']){this._sTranslateStart="translate3d(";this._sTranslateEnd=",0px)";}
var sTransfrom=this._htOption['bUseTranslate']?"-webkit-transform":(this.bH?'left':'top');var sTransfrom="all";for(var i=0,nLen=this._htWElement.aPanel.length;i<nLen;i++){if(this._htOption['bUseTranslate']&&this._isIos){this._htWElement.aPanel[i].css(this._sCssPrefix+'Transform',this._sTranslateStart+"0px,0px"+this._sTranslateEnd);}
this._htWElement.aPanel[i].css(this._sCssPrefix+'TransitionProperty',sTransfrom);}},_refresh:function(n,bResize,bFireEvent){var self=this;var nCenter=(n%3);var nPrev=(((nCenter-1)<0)?2:(nCenter-1))%3;var nNext=(((nCenter+1)>2)?0:(nCenter+1))%3;if(bResize){this._setElementSize();this._setPanelPos();}
var sPosition=this.bH?'left':'top';this._htWElement.container.css(this._sCssPrefix+'TransitionDuration','0ms');if(this._htOption['bUseTranslate']||this._htOption['bUseCss3d']){var sValue="";this._htWElement.container.css(this._sCssPrefix+'Transform',sValue);}
this._htWElement.container.css(sPosition,'-100%');if((this._htOption['bUseTranslate']||this._htOption['bUseCss3d'])){setTimeout(function(){self._htWElement.container.css(self._sCssPrefix+'Transform',self._sTranslateStart+"0,0px"+self._sTranslateEnd);},50);}
this._htWElement.aPanel[nCenter].css(sPosition,this._htPositionInfo.center+"%").css('zIndex',10);this._htWElement.aPanel[nPrev].css(sPosition,this._htPositionInfo.left+"%").css('zIndex',1);this._htWElement.aPanel[nNext].css(sPosition,this._htPositionInfo.right+"%").css('zIndex',1);this._WrapperInstacne._htIndexInfo.welElement=this._htWElement.aPanel[nCenter];},_movePanel:function(nDistance,nVector,nPos,nDuration,bEnd){var self=this;var welCenter=this._WrapperInstacne.getElement();var welPrev=this._WrapperInstacne.getPrevElement();var welNext=this._WrapperInstacne.getNextElement();var welWrapper=this._htWElement.container;if(!bEnd||(this._htOption['bUseTimingFunction'])||(nDuration===0)||(this._WrapperInstacne._htIndexInfo.sDirection===null)){this._setPosition(welWrapper,nDistance,nVector,nPos,nDuration,bEnd);}else{var nDuration=nDuration;var startTime=(new Date()).getTime(),nStartDis=nDistance,nBeforeDis=nDistance,nStartVector=nVector,nTotalDis=this.bH?this._htWElement.base.width():this._htWElement.base.height();if(nDistance<0){nTotalDis=nTotalDis*-1;}
(function animate(){var now=(new Date()).getTime(),nEaseOut;if(now>=startTime+nDuration){clearTimeout(self._nTimerAnimate);delete self._nTimerAnimate;self._onTransitionEnd();return;}
now=(now-startTime)/nDuration-1;nEaseOut=Math.sqrt(1-Math.pow(now,2));var nDis=(nTotalDis-nStartDis)*nEaseOut+nStartDis;self._setPosition(welWrapper,nDis,(nDis-nBeforeDis),nPos,0,false);nBeforeDis=nDis;self._nTimerAnimate=setTimeout(animate,1);})();}},restorePosition:function(){var nTime=this._htOption['nBounceDuration'];this._movePanel(0,0,0,nTime,true);},movePrev:function(nDuration){var n=this._htOption['nFlickThreshold'];this._WrapperInstacne._onEnd({nDistanceX:n+10,nDistanceY:n+10},nDuration);},moveNext:function(nDuration){var n=this._htOption['nFlickThreshold']*-1;this._WrapperInstacne._onEnd({nDistanceX:n-10,nDistanceY:n-10},nDuration);},_moveTo:function(n,nDruation,bFireEvent,bFireFlickEvent){this._WrapperInstacne.refresh(n,false,bFireEvent);},_onTransitionEnd:function(){this._detachTransitionEnd();var bFireEvent=true;if(this._WrapperInstacne._htIndexInfo.sDirection===null){bFireEvent=false;}
this._restorePanel(this._WrapperInstacne._htIndexInfo.welNextElement.$value());this.endAnimation(bFireEvent);},_restorePanel:function(el){var self=this;var sPosition=this.bH?'left':'top';var nCenter=this._WrapperInstacne.getIndexByElement(el);var nPrev=((nCenter-1)<0)?2:(nCenter-1);var nNext=((nCenter+1)>2)?0:(nCenter+1);this._htWElement.container.css(this._sCssPrefix+'TransitionDuration','0ms');if((this._htOption['bUseTranslate']||this._htOption['bUseCss3d'])){var sValue=this._b3dExecption?'':this._sTranslateStart+"0,0px"+this._sTranslateEnd;this._htWElement.container.css(this._sCssPrefix+'Transform',sValue);}
this._htWElement.container.css(sPosition,'-100%');if(this._b3dExecption&&(this._htOption['bUseTranslate']||this._htOption['bUseCss3d'])){setTimeout(function(){self._htWElement.container.css(self._sCssPrefix+'Transform',self._sTranslateStart+"0,0px"+self._sTranslateEnd);},50);}
this._htWElement.aPanel[nCenter].css(sPosition,this._htPositionInfo.center+"%").css('zIndex',10);this._htWElement.aPanel[nPrev].css(sPosition,this._htPositionInfo.left+"%").css('zIndex',1);this._htWElement.aPanel[nNext].css(sPosition,this._htPositionInfo.right+"%").css('zIndex',1);},_setPosition:function(wel,nDis,nVector,nPos,nDuration,bEnd){if(typeof nDuration==='undefined'){nDuration=0;}
if(!this._htOption['bUseTranslate']){this._setPositionForStyle(wel,nDis,nVector,nDuration,bEnd);}else{this._setPositionTransform(wel,nDis,nDuration,bEnd);}},_setPositionForStyle:function(wel,nDis,nVector,nDuration,bEnd){var sName=this.bH?'left':'top';if(bEnd){if(this._WrapperInstacne._htIndexInfo.sDirection===null){nDis=-100;}else{if(nDis<0){nDis=-200;}else{nDis=0;}}}
var n=((nDis/this._nDefaultSize)*100)-100;var nPos=bEnd?nDis:n;var htCss={};htCss[this._sCssPrefix+'TransitionProperty']="all";htCss[this._sCssPrefix+'TransitionDuration']=(nDuration===0)?'0':nDuration+"ms";htCss[sName]=nPos+'%';if(bEnd){if(nPos===parseFloat(wel.css(sName).replace('px',''),10)){nDuration=0;}
this._attachTransitionEnd(wel.$value(),nDuration);}
wel.css(htCss);},_setPositionTransform:function(wel,nDis,nDuration,bEnd){if(bEnd){if(this._WrapperInstacne._htIndexInfo.sDirection===null){nDis=0;}else{if(nDis<0){nDis=this._htContainerInfo.left;}else{nDis=this._htContainerInfo.right;}}}
var nX=this.bH?nDis:0;var nY=this.bH?0:nDis;var htCss={};htCss[this._sCssPrefix+'TransitionProperty']="all";htCss[this._sCssPrefix+'TransitionDuration']=(nDuration===0)?'0':nDuration+"ms";htCss[this._sCssPrefix+'Transform']=this._sTranslateStart+nX+"px,"+nY+"px"+this._sTranslateEnd;if(bEnd){var htCssOffset=jindo.m.getCssOffset(wel.$value());if((htCssOffset.left===nX)&&(htCssOffset.top===nY)){nDuration=0;}
this._attachTransitionEnd(wel.$value(),nDuration);}
wel.css(htCss);}}).extend(jindo.m.FlickingAnimation);jindo.m.CoverFlicking=jindo.$Class({sAnimationName:'cover',$init:function(){this._bMoveDirection=null;this._bUnableTouchMove=false;this._htDefaultOption={bUseMoveEffect:true,nDefaultScale:0.94};this._sTranslateStart="translate(";this._sTranslateEnd=")";this._sScaleStart="scale(";this._sScaleEnd=")";},_initAnimation:function(){this._initOption();this._setElementSize();this._prepareTransition();},_initOption:function(){for(var p in this._htDefaultOption){if(typeof this._htOption[p]==='undefined'){this._htOption[p]=this._htDefaultOption[p];}}
this._bUnableTouchMove=!this._htOption['bUseMoveEffect'];if(this._htOption['bUseCss3d']){this._sTranslateStart="translate3d(";this._sTranslateEnd=",0px)";this._sScaleStart="scale3d(";this._sScaleEnd=",1)";}},_setElementSize:function(){this._htWElement.container.height(this._htWElement.base.height());},_prepareTransition:function(){var sTransfrom=this._htOption['bUseTranslate']?"-webkit-transform":(this.bH?'left':'top');for(var i=0,nLen=this._htWElement.aPanel.length;i<nLen;i++){if(this._htOption['bUseTranslate']){this._htWElement.aPanel[i].css(this._sCssPrefix+'Transform',this._sTranslateStart+"0px,0px"+this._sTranslateEnd);}else{this._htWElement.aPanel[i].css(sTransfrom,'0px');}
this._htWElement.aPanel[i].css(this._sCssPrefix+'TransitionProperty',"all");}},_refresh:function(n,bResize,bFireEvent){if(typeof n==='undeinfed'){n=this._WrapperInstacne.getContentIndex();}
var nCenter=n;if(this._htOption['bUseCircular']){nCenter=n%3;}
if(bResize){this._setElementSize();}
for(var i=0,nLen=this._htWElement.aPanel.length;i<nLen;i++){if(i===nCenter){this._htWElement.aPanel[i].show().css('zIndex',10).opacity(1);}else{this._htWElement.aPanel[i].hide().css('zIndex',1).opacity(0.2);}}
this._WrapperInstacne._htIndexInfo.nContentIndex=n;this._WrapperInstacne._htIndexInfo.welElement=this._htWElement.aPanel[nCenter];},_movePanel:function(nDistance,nVector,nPos,nDuration,bEnd){var self=this;var welCenter=this._WrapperInstacne.getElement();var welPrev=this._WrapperInstacne.getPrevElement();var welNext=this._WrapperInstacne.getNextElement();if(this._bMoveDirection===null&&(Math.abs(nDistance)>5)){if(nDistance>0){this._bMoveDirection='prev';}else{this._bMoveDirection='next';}
var welZoom=(this._bMoveDirection==='prev')?this._WrapperInstacne.getPrevElement():this._WrapperInstacne.getNextElement();if(welZoom.$value()===this._WrapperInstacne.getElement().$value()){this._bMoveDirection=null;welZoom=null;}else{this._prepareZoomAnim(welZoom);}}
if(!this._htOption['bUseTimingFunction']&&(nDuration!==0)&&(bEnd)){var nDuration=nDuration;var startTime=(new Date()).getTime(),nStartDis=nDistance,nBeforeDis=nDistance,nBeforePos=nPos,nTotalDis=this.bH?this._htWElement.base.width():this._htWElement.base.height();if(this._bMoveDirection===null||((this._bMoveDirection==='prev')&&(nDistance<0))||((this._bMoveDirection==='next')&&(nDistance>0))){nTotalDis=0;this._WrapperInstacne._htIndexInfo.nNextContentIndex=this._WrapperInstacne._htIndexInfo.nContentIndex;this._WrapperInstacne._htIndexInfo.welNextElement=this._WrapperInstacne._htIndexInfo.welElement;this._WrapperInstacne._htIndexInfo.sDirection=null;}
if(nDistance<0){nTotalDis=nTotalDis*-1;}
(function animate(){var now=(new Date()).getTime(),nEaseOut;if(now>=startTime+nDuration){clearTimeout(self._nTimerAnimate);delete self._nTimerAnimate;self._onTransitionEnd();return;}
now=(now-startTime)/nDuration-1;nEaseOut=Math.sqrt(1-Math.pow(now,2));var nDis=(nTotalDis-nStartDis)*nEaseOut+nStartDis;self._setPosition(welCenter,nDis,(nDis-nBeforeDis),(nBeforePos+nBeforeDis),0,false);nBeforeDis=nDis;self._nTimerAnimate=setTimeout(animate,1);})();}else{if(!this._bUnableTouchMove||bEnd){this._setPosition(welCenter,nDistance,nVector,nPos,nDuration,bEnd);}}},_prepareZoomAnim:function(welZoom){welZoom.show();welZoom.$value().style[this._sCssPrefix+'Transform']=this._sScaleStart+this._htOption['nDefaultScale']+", "+this._htOption['nDefaultScale']+this._sScaleEnd;},_setPosition:function(wel,nDis,nVector,nPos,nDuration,bEnd){if(typeof nDuration==='undefined'){nDuration=0;}
if(this._htOption['bUseTranslate']){this._setPositionTransform(wel,nDis,nPos,nDuration,bEnd);}else{this._setPositionForStyle(wel,nDis,nVector,nPos,nDuration,bEnd);}},_setPositionForStyle:function(wel,nDis,nVector,nPos,nDuration,bEnd){var bReturn=false;if(bEnd){if(this._WrapperInstacne._htIndexInfo.sDirection!==null){if(nDis<0&&(this._bMoveDirection==='next')){nDis=this._htWElement.base.width()*-1;}else if(nDis>0&&(this._bMoveDirection==='prev')){nDis=this._htWElement.base.width();}else{nDis=0;this._WrapperInstacne._htIndexInfo.nNextContentIndex=this._WrapperInstacne._htIndexInfo.nContentIndex;this._WrapperInstacne._htIndexInfo.welNextElement=this._WrapperInstacne._htIndexInfo.welElement;this._WrapperInstacne._htIndexInfo.sDirection=null;bReturn=true;}}else{nDis=0;bReturn=true;}}else{nDis=nVector;}
var sName=this.bH?'left':'top';var nPosition=!bEnd?(parseFloat(wel.css(sName).replace('px',''),10)||0)+nDis:nDis;var htCss={};htCss[this._sCssPrefix+'TransitionDuration']=(nDuration===0)?'0':nDuration+"ms";htCss[sName]=nPosition+'px';var welZoom=this._getZoomElement();var htZoomCss=this._getCalculateZoom(nPos,nDuration,bEnd,bReturn);if(bEnd){this._attachTransitionEnd(wel.$value());}
if(welZoom){for(var p in htZoomCss){welZoom.$value().style[p]=htZoomCss[p];}}
wel.css(htCss);},_setPositionTransform:function(wel,nDis,nPos,nDuration,bEnd){var bReturn=false;if(bEnd){if(this._WrapperInstacne._htIndexInfo.sDirection!==null){if(nDis<0&&(this._bMoveDirection==='next')){nDis=this._htWElement.base.width()*-1;}else if(nDis>0&&(this._bMoveDirection==='prev')){nDis=this._htWElement.base.width();}else{nDis=0;this._WrapperInstacne._htIndexInfo.nNextContentIndex=this._WrapperInstacne._htIndexInfo.nContentIndex;this._WrapperInstacne._htIndexInfo.welNextElement=this._WrapperInstacne._htIndexInfo.welElement;this._WrapperInstacne._htIndexInfo.sDirection=null;bReturn=true;}}else{nDis=0;bReturn=true;}}
var nX=this.bH?nDis:0;var nY=this.bH?0:nDis;var htCss={};htCss[this._sCssPrefix+'TransitionProperty']="all";htCss[this._sCssPrefix+'TransitionDuration']=(nDuration===0)?'0':nDuration+"ms";htCss[this._sCssPrefix+'Transform']=this._sTranslateStart+nX+"px,"+nY+"px"+this._sTranslateEnd;var welZoom=this._getZoomElement();var htZoomCss=this._getCalculateZoom(nPos,nDuration,bEnd,bReturn);if(bEnd){this._attachTransitionEnd(wel.$value(),nDuration);}
if(welZoom){welZoom.css(htZoomCss);}
wel.css(htCss);},_getZoomElement:function(){var welZoom=null;if(this._bMoveDirection==='prev'){welZoom=this._WrapperInstacne.getPrevElement();}else if(this._bMoveDirection==='next'){welZoom=this._WrapperInstacne.getNextElement();}
if(welZoom&&(welZoom.$value()===this._WrapperInstacne.getElement().$value())){welZoom=null;}
return welZoom;},_getCalculateZoom:function(nPos,nDuration,bEnd,bReturn){var nCalculate=1;nCalculate=!bEnd?this._getCalculate(nPos):nCalculate;nCalculate=bReturn?0:nCalculate;var nScaleX=this._htOption['nDefaultScale'];var htZoomCss={};htZoomCss[this._sCssPrefix+'TransitionDuration']=(nDuration===0)?'0':nDuration+"ms";htZoomCss['opacity']=nCalculate;htZoomCss[this._sCssPrefix+'Transform']=this._sScaleStart+(nScaleX+nCalculate*(1-nScaleX))+','+(nScaleX+nCalculate*(1-nScaleX))+this._sScaleEnd;return htZoomCss;},_getCalculate:function(nPos){var nRange=this.bH?this._htWElement.base.width():this._htWElement.base.height();var nCalculate=(this._bMoveDirection==='prev')?1+(nPos-nRange)/nRange:(nRange-nPos)/nRange;return Math.min(1,nCalculate);},_resetInfo:function(){this._bMoveDirection=null;},_onTransitionEnd:function(){this._detachTransitionEnd();var bFireEvent=true;if(this._WrapperInstacne._htIndexInfo.sDirection===null){bFireEvent=false;}
this._WrapperInstacne._htIndexInfo.nContentIndex=this._WrapperInstacne._htIndexInfo.nNextContentIndex;var sCss=this.bH?'left':'top';jindo.$A(this._htWElement.aPanel).forEach(function(value,i,array){value.$value().style[this._sCssPrefix+'TransitionDuration']=null;if(this._htOption['bUseTranslate']){value.$value().style[this._sCssPrefix+'Transform']=this._sTranslateStart+"0px, 0px"+this._sTranslateEnd;}else{value.$value().style[sCss]='0px';}},this);this._restorePanel(this._WrapperInstacne._htIndexInfo.welNextElement.$value());this.endAnimation(bFireEvent);this._resetInfo();},_restorePanel:function(el){for(var i=0,nLen=this._htWElement.aPanel.length;i<nLen;i++){var welCurrent=this._htWElement.aPanel[i];if(welCurrent.$value()===el){this._htWElement.aPanel[i].show().css('zIndex',10).opacity(1);}else{this._htWElement.aPanel[i].hide().css('zIndex',1).opacity(0.2);}}
this._WrapperInstacne._htIndexInfo.welElement=this._WrapperInstacne._htIndexInfo.welNextElement;},_moveTo:function(n,nDuration,bFireEvent,bFireFlickEvent){this._WrapperInstacne._htIndexInfo.nNextPanelIndex=n;this._WrapperInstacne._htIndexInfo.nNextContentIndex=n;var nDis=this._htOption['nFlickThreshold']+10;if(n===this._WrapperInstacne.getNextIndex()){this._movePanel(nDis*-1,0,0,nDuration,true);}else if(n===this._WrapperInstacne.getPrevIndex()){this._movePanel(nDis,0,0,nDuration,true);}else{this._refresh(n,false,bFireEvent);}},movePrev:function(nDuration){var welZoom=this._WrapperInstacne.getPrevElement();if(welZoom.$value()===this._WrapperInstacne.getElement().$value()){return;}
this._prepareZoomAnim(welZoom);var n=this._htOption['nFlickThreshold'];this._WrapperInstacne._onEnd({nDistanceX:n+10,nDistanceY:n+10,nX:10,nY:10},nDuration);},moveNext:function(nDuration){var welZoom=this._WrapperInstacne.getNextElement();if(welZoom.$value()===this._WrapperInstacne.getElement().$value()){return;}
this._prepareZoomAnim(welZoom);var n=this._htOption['nFlickThreshold']*-1;var nPos=this.bH?this._htWElement.base.width():this._htWElement.base.height();this._WrapperInstacne._onEnd({nDistanceX:n-10,nDistanceY:n-10,nX:nPos-10,nY:nPos-10},nDuration);}}).extend(jindo.m.FlickingAnimation);jindo.m.SlideFlicking=jindo.$Class({sAnimationName:'slide',$init:function(){this._bFlickEvent=false;this._bMoveEvent=false;this._htDefaultOption={bUseHighlight:true};},_initCoreScroll:function(){this._oCore=new jindo.m.CoreScroll(this._htWElement.base.$value(),{bUseHScroll:this.bH,bUseVScroll:!this.bH,bUseMomentum:false,bUseCss3d:this._htOption['bUseCss3d'],bUseTimingFunction:this._htOption['bUseTimingFunction'],bUseTranslate:this._htOption['bUseTranslate'],bUseHighlight:this._htOption['bUseHighlight']});this._oCore.attach({'beforeScroll':jindo.$Fn(this._onBeforeScrollEnd,this).bind(),'afterScroll':jindo.$Fn(this._onScrollEnd,this).bind(),'beforeTouchStart':jindo.$Fn(this._onBeforeTouchStart,this).bind(),'beforeTouchMove':jindo.$Fn(this._onBeforeTouchMove,this).bind(),'beforeTouchEnd':jindo.$Fn(this._onBeforeTouchMove,this).bind()});},_initAnimation:function(){this._initOption();this._setElementSize();this._updateSizeInfo();this._initCoreScroll();},_initOption:function(){for(var p in this._htDefaultOption){if(typeof this._htOption[p]==='undefined'){this._htOption[p]=this._htDefaultOption[p];}}},_updateSizeInfo:function(){var sLen=this.bH?'width':'height';var sOff=this.bH?'left':'top';this._htPosition=[];var nPos=0;var nBeforePos=0;for(var i=0,nLen=this._htWElement.aPanel.length;i<nLen;i++){if(i!=0){if(this._htOption['nFlickDistanceOffset']===null){nPos+=this._htWElement.aPanel[i-1][sLen]()*-1;}else{var nW=this._htWElement.aPanel[i-1][sLen]()*-1;nPos=nBeforePos+nW+(this._htOption['nFlickDistanceOffset']*-1);nBeforePos+=nW;}}
this._htPosition.push(nPos);}},_setElementSize:function(){var nLen=this._htWElement.aPanel.length;var nW=this._htWElement.base.width();var nMaxSize=0;if(this._htOption['bAutoSize']){if(this.bH){nMaxSize=nW*nLen;this._htWElement.container.width(nMaxSize).height(this._htWElement.base.height());jindo.$A(this._htWElement.aPanel).forEach(function(value){value.width(nW);});}else{var nH=this._htWElement.aPanel[0].height();nMaxSize=nH*nLen;this._htWElement.container.css('height',nMaxSize+"px").width(nW);}}},_onBeforeTouchStart:function(oCustomEvt){var htParam={element:oCustomEvt.oEvent.element,nX:oCustomEvt.oEvent.nX,nY:oCustomEvt.oEvent.nY,oEvent:oCustomEvt.oEvent.oEvent};if(!this._WrapperInstacne._fireCustomEvent('touchStart',htParam)){oCustomEvt.stop();return;}},_onBeforeTouchMove:function(oCustomEvt){var sType=(oCustomEvt.sType.indexOf('End')>-1)?"touchEnd":"touchMove";var htParam={};for(var p in oCustomEvt.oEvent){if(typeof oCustomEvt.oEvent[p]!=='object'&&typeof oCustomEvt.oEvent[p]!=='function'){htParam[p]=oCustomEvt.oEvent[p];}}
htParam['sType']=sType;this._WrapperInstacne._fireCustomEvent(sType,htParam);},_onBeforeScrollEnd:function(oCustomEvt){var nOrignalTime=oCustomEvt.nTime;var htPos=this._getSnap(oCustomEvt.nLeft,oCustomEvt.nTop,oCustomEvt.nDistanceX,oCustomEvt.nDistanceY,oCustomEvt.nMomentumX,oCustomEvt.nMomentumY);oCustomEvt.nNextLeft=htPos.nX;oCustomEvt.nNextTop=htPos.nY;oCustomEvt.nTime=htPos.nTime;var htParam={nContentsIndex:this._WrapperInstacne.getContentIndex(),nContentsNextIndex:htPos.nIndex};if(this.bH){htParam.bLeft=htPos.nFlickLeft;}else{htParam.bTop=htPos.nFlickLeft;}
if(!this._WrapperInstacne._fireCustomEvent('beforeFlicking',htParam)){oCustomEvt.stop();return;}
this._bFlickEvent=true;this._WrapperInstacne._bAnimation=true;this._WrapperInstacne._bFlickLeft=htPos.nFlickLeft;this._WrapperInstacne._htIndexInfo.nNextContentIndex=htPos.nIndex;},_onScrollEnd:function(){var nBeforeContent=this._WrapperInstacne._htIndexInfo.nContentIndex;if((this._WrapperInstacne._htIndexInfo.nContentIndex!==this._WrapperInstacne._htIndexInfo.nNextContentIndex)&&(this._bFlickEvent||this._bMoveEvent)){this._WrapperInstacne._htIndexInfo.nContentIndex=this._WrapperInstacne._htIndexInfo.nNextContentIndex;var htParam={nContentsIndex:this._WrapperInstacne.getContentIndex()};if(this.bH){htParam.bLeft=this._WrapperInstacne._bFlickLeft;}else{htParam.bTop=this._WrapperInstacne._bFlickLeft;}
var sEvent=this._bFlickEvent?'afterFlicking':'move';this._WrapperInstacne.fireEvent(sEvent,htParam);}
this._bFlickEvent=false;this._bMoveEvent=false;this._WrapperInstacne._bFlickLeft=null;this._WrapperInstacne._bAnimation=false;},_getSnap:function(nX,nY,nDisX,nDisY,nMomX,nMomY){var nPosX=nPosY=nNewPos=0;var nIndex=this._htWElement.aPanel.length-1;var nCurrent=this.bH?nX:nY;var nDis=this.bH?nDisX:nDisY;var nMom=this.bH?nMomX:nMomY;var bFlickLeft=false;for(var i=0,nLen=this._htPosition.length;i<nLen;i++){if(nCurrent>=(this._htPosition[i])){nIndex=i;break;}}
if(nIndex==this._WrapperInstacne.getContentIndex()&&nIndex>0&&nDis>0)nIndex--;if((Math.abs(nDis)<=this._htOption['nFlickThreshold'])){nIndex=this._WrapperInstacne.getContentIndex();}
nNewPos=this._htPosition[nIndex];var nTime=this._htOption['nDuration'];if(nDis<0){bFlickLeft=true;}
return{nX:this.bH?nNewPos:nPosX,nY:this.bH?nPosY:nNewPos,nTime:Math.round(nTime),nIndex:nIndex,nFlickLeft:bFlickLeft}},_getPosition:function(nIndex){var nPosX=nPosY=0;if(typeof nIndex=='undefined'){nIndex=this.getContentIndex();}
nIndex=Math.max(0,nIndex);nIndex=Math.min(this._htPosition.length-1,nIndex);return{nX:this.bH?this._htPosition[nIndex]:nPosX,nY:this.bH?nPosY:this._htPosition[nIndex]}},_refresh:function(n,bResize,bFireEvent){if(bResize){this._setElementSize();this._updateSizeInfo();if(this._oCore){this._oCore.refresh(true);}}
this._moveTo(n,0,bFireEvent,false);},_moveTo:function(n,nDruation,bFireEvent,bFireFlickEvent){var htPos=this._getPosition(n);this._WrapperInstacne._htIndexInfo.nNextContentIndex=n;var nCurrent=this._WrapperInstacne.getContentIndex();if(nCurrent<n){this._WrapperInstacne._bFlickLeft=true;}else{this._WrapperInstacne._bFlickLeft=false;}
this._bMoveEvent=bFireEvent;this._bFlickEvent=bFireFlickEvent;this._oCore.scrollTo(htPos.nX,htPos.nY,nDruation);},moveNext:function(nDuration){var n=this._WrapperInstacne.getNextIndex();if(!this._WrapperInstacne._fireCustomEvent('beforeFlicking',{nContentsIndex:this._WrapperInstacne.getContentIndex(),nContentsNextIndex:n})){return;}
this._moveTo(n,nDuration,false,true);},movePrev:function(nDuration){var n=this._WrapperInstacne.getPrevIndex();if(!this._WrapperInstacne._fireCustomEvent('beforeFlicking',{nContentsIndex:this._WrapperInstacne.getContentIndex(),nContentsNextIndex:n})){return;}
this._moveTo(n,nDuration,false,true);}}).extend(jindo.m.FlickingAnimation);jindo.m.FlipFlicking=jindo.$Class({sAnimationName:'flip',$init:function(){this._bMoveDirection=null;this._bMove=false;},_initAnimation:function(){this._setElementSize();this._prepareFlip();},_prepareFlip:function(){if(typeof this._htWElement.left==='undefined'){this._htWElement.base.css(this._sCssPrefix+'Perspective',1200);var sPrevClass=this._htOption['sClassPrefix']+"left";var sNextClass=this._htOption['sClassPrefix']+"right";this._htWElement.container.append(jindo.$('<div class="'+sPrevClass+'" style="position:absolute;overflow:hidden;left:0px;top:0px;outline:1px solid rgba(255, 0, 0, .0);"></div>'));this._htWElement.container.append(jindo.$('<div class="'+sNextClass+'"  style="position:absolute;overflow:hidden;left:0px;top:0px;outline:1px solid rgba(255, 0, 0, .0);"></div>'));this._htWElement.container.height(this._htWElement.base.height());this._htWElement.left=jindo.$Element(jindo.$$.getSingle("."+sPrevClass,this._htWElement.container.$value()));this._htWElement.right=jindo.$Element(jindo.$$.getSingle("."+sNextClass,this._htWElement.container.$value()));if(this.bH){this._htWElement.left.css("height","100%");this._htWElement.right.css("height","100%");}else{this._htWElement.left.css("width","100%");this._htWElement.right.css("width","100%");}}
if(this.bH){this._htWElement.left.width(this.nCenter);this._htWElement.right.width(this.nCenter);}else{this._htWElement.left.height(this.nCenter);this._htWElement.right.height(this.nCenter)}},_setElementSize:function(){this.nWidth=this._htWElement.base.width();this.nHeight=this._htWElement.base.height();this.nCenter=Math.round((this.bH?this.nWidth:this.nHeight)/2);},_refresh:function(n,bResize,bFireEvent){if(typeof n==='undeinfed'){n=this._WrapperInstacne.getContentIndex();}
var nCenter=n;if(this._htOption['bUseCircular']){nCenter=n%3;}
if(bResize){this._setElementSize();this._prepareFlip();}
this._htWElement.left.hide().show();this._htWElement.right.hide().show();this._htWElement.right.css(this.bH?"left":"top",(this.nCenter)+"px");this._htWElement.base.css({"WebkitPerspectiveOriginX":"50%","WebkitPerspectiveOriginY":"50%"});for(var i=0,nLen=this._htWElement.aPanel.length;i<nLen;i++){if(i===nCenter){this._htWElement.aPanel[i].show().css('zIndex',10);}else{this._htWElement.aPanel[i].hide().css('zIndex',1);}}
this._WrapperInstacne._htIndexInfo.nContentIndex=n;this._WrapperInstacne._htIndexInfo.welElement=this._htWElement.aPanel[nCenter];},_setCloneElement:function(){var welCurrent=this._WrapperInstacne.getContentElement();if(this._bMoveDirection==='prev'){var welShow=this._WrapperInstacne.getPrevElement();if(welShow.$value()===welCurrent.$value()){this._htWElement.left.empty().append(jindo.$Element(jindo.$('<div></div>')).show().width(this.nWidth));}else{this._htWElement.left.empty().append(jindo.$Element(welShow.$value().cloneNode(true)).show().width(this.nWidth));}
this._htWElement.right.empty().append(jindo.$Element(welCurrent.$value().cloneNode(true)).css(this.bH?"margin-left":"margin-top","-"+(this.nCenter)+"px").width(this.nWidth).height(this.nHeight));welShow.before(this._htWElement.left).after(this._htWElement.right);}else if(this._bMoveDirection==='next'){var welShow=this._WrapperInstacne.getNextElement();this._htWElement.left.empty().append(jindo.$Element(welCurrent.$value().cloneNode(true)).show().width(this.nWidth));if(welShow.$value()===welCurrent.$value()){this._htWElement.right.empty().append(jindo.$Element(jindo.$('<div></div>')).show().css(this.bH?"margin-left":"margin-top","-"+(this.nCenter)+"px").width(this.nWidth).height(this.nHeight));}else{this._htWElement.right.empty().append(jindo.$Element(welShow.$value().cloneNode(true)).show().css(this.bH?"margin-left":"margin-top","-"+(this.nCenter)+"px").width(this.nWidth).height(this.nHeight));}
welCurrent.before(this._htWElement.left).after(this._htWElement.right);}},_movePanel:function(nDistance,nVector,nPos,nDuration,bEnd){if(bEnd){if(this._bMove){this._onEnd();}}else{if(this._bMoveDirection===null){if(nDistance>0){this._bMoveDirection='prev';}else{this._bMoveDirection='next';}
this._setCloneElement();this._WrapperInstacne._restoreAnchor();this._WrapperInstacne._setAnchorElement();this._WrapperInstacne._clearAnchor();}else{var nSize=this.bH?this.nWidth:this.nHeight;var welCurrent=this._WrapperInstacne.getContentElement();if(this._bMoveDirection==='prev'){var welTarget=this._WrapperInstacne.getPrevElement();var nAngle=(welTarget.$value()===welCurrent.$value())?60:180;this._nDeg=Math.max(0,Math.min(nAngle,Math.round((nDistance*1/(nSize))*nAngle)));this._setPrevRotate(welCurrent,welTarget,this._htWElement.left,this._htWElement.right,this._nDeg);}else if(this._bMoveDirection==='next'){var welTarget=this._WrapperInstacne.getNextElement();var nAngle=(welTarget.$value()===welCurrent.$value())?60:180;this._nDeg=Math.max(0,Math.min(nAngle,Math.round((nDistance*-1/(nSize))*nAngle)));this._setNextRotate(welCurrent,welTarget,this._htWElement.left,this._htWElement.right,this._nDeg);}}
this._bMove=true;}},_rotate:function(wel,nDeg){if(wel){var sRotate=this.bH?"rotateY("+nDeg+"deg)":"rotateX("+nDeg+"deg)";wel.css({"WebkitTransition":"webkit-transform 0s linear","WebkitTransform":sRotate+" rotateZ(0deg)"});}
return wel;},_setBackgroundShadow:function(wel,nDeg){var n=(nDeg>90)?(180-nDeg):nDeg,h,hex="#000000";h=Number(Math.round((n/90)*255)).toString(16);if(h.length<2){h=h+h;}
hex="#"+h+h+h;wel.css("background-image","-webkit-gradient(linear, 100% 0%, 0% 0%, from("+hex+"), to("+hex+"))");return wel;},_clearBackgrond:function(wel){return wel.css({"background-image":"","background-color":"#fff"});},_setNextRotate:function(welCurrent,welShow,welLeft,welRight,nDeg){var nCurrentDeg=this.bH?-nDeg:nDeg;var nShowDeg=this.bH?(180-nDeg):-(180-nDeg);if(welCurrent.$value()===welShow.$value()){welShow=null;}
this._rotate(welCurrent,nCurrentDeg).addClass('gradient');if(welShow){this._rotate(welShow,nShowDeg).addClass('gradient');}
if(nDeg===0){welLeft.hide();welRight.hide();if(welShow){this._rotate(welShow,0).hide();}}else if(nDeg<90){setTimeout(function(){},0);welLeft.show('inline-block');welRight.show();welLeft.css('zIndex',110);welCurrent.css('zIndex',100);welRight.css('zIndex',90);this._clearBackgrond(welLeft.first());this._setBackgroundShadow(welRight.first(),nDeg);welCurrent.show();if(welShow){welShow.hide();}}else if(nDeg<180){welShow.show().css('zIndex',100);welCurrent.hide();welLeft.show().css('zIndex',90)
welRight.show().css('zIndex',110);this._setBackgroundShadow(welLeft.first(),nDeg);this._clearBackgrond(welRight.first());welShow.show();welCurrent.hide();}else{welLeft.hide();welRight.hide();}},_setPrevRotate:function(welCurrent,welShow,welLeft,welRight,nDeg){var nCurrentDeg=this.bH?nDeg:-nDeg;var nShowDeg=this.bH?-(180-nDeg):(180-nDeg);if(welCurrent.$value()===welShow.$value()){welShow=null;}
this._rotate(welCurrent,nCurrentDeg).addClass('gradient');if(welShow){this._rotate(welShow,nShowDeg).addClass('gradient');}
if(nDeg===0){welLeft.hide();welRight.hide();welCurrent.removeClass("gradient");if(welShow){this._rotate(welShow,0).hide().removeClass("gradient");}}else if(nDeg<90){welLeft.show().css('zIndex',90);welRight.show().css('zIndex',110);this._setBackgroundShadow(welLeft.first(),nDeg);this._clearBackgrond(welRight.first());welCurrent.show().css('zIndex',100);if(welShow){welShow.hide();}}else if(nDeg<180){welLeft.show().css('zIndex',110);welRight.show().css('zIndex',90)
this._clearBackgrond(welLeft.first());this._setBackgroundShadow(welRight.first());welCurrent.hide();if(welShow){welShow.show().css('zIndex',100);}}else{welLeft.hide();welRight.hide();if(welShow){welShow.removeClass("gradient");}}},_onEnd:function(){this._bFinished=false;var bRepos=(this._WrapperInstacne._htIndexInfo.sDirection===null)?true:false;var welCurrent=this._WrapperInstacne.getContentElement();var self=this;var welShow=null;if(this._bMoveDirection==='next'){welShow=this._WrapperInstacne.getNextElement();}else if(this._bMoveDirection==='prev'){welShow=this._WrapperInstacne.getPrevElement();}
if(welCurrent.$value()===welShow.$value()){bRepos=true;this._WrapperInstacne._htIndexInfo.sDirection=null;}
var nDuration=bRepos?this._htOption['nBounceDuration']:this._htOption['nDuration'];var nTotalDig=bRepos?0:180;if(this._nDeg===0){this._bFinished=true;setTimeout(function(){self._onTransitionEnd();},10);}else{var startTime=(new Date()).getTime(),nStartDeg=this._nDeg;(function timer(){var now=(new Date()).getTime(),nEaseOut;if(now>=startTime+nDuration){clearTimeout(self._nTimerAnimate);self._onTransitionEnd();return;}
now=(now-startTime)/nDuration-1;nEaseOut=Math.sqrt(1-Math.pow(now,2));var nDeg=(nTotalDig-nStartDeg)*nEaseOut+nStartDeg;self._nDeg=Math.min(nDeg,180);if(self._bMoveDirection==='next'){self._setNextRotate(welCurrent,welShow,self._htWElement.left,self._htWElement.right,self._nDeg);}else{self._setPrevRotate(welCurrent,welShow,self._htWElement.left,self._htWElement.right,self._nDeg);}
self._nTimerAnimate=setTimeout(timer,10);}());}},_onStart:function(){this._resetInfo();},_resetInfo:function(){this._bMoveDirection=null;this._bMove=false;this._nDeg=-1;this._bFinished=true;this._htWElement.left.css('zIndex',1);this._htWElement.right.css('zIndex',1);},_onTransitionEnd:function(){this._detachTransitionEnd();var bFireEvent=true;if(this._WrapperInstacne._htIndexInfo.sDirection===null){bFireEvent=false;}
jindo.$A(this._htWElement.aPanel).forEach(function(value,i,array){value.$value().style[this._sCssPrefix+'TransitionDuration']=null;value.$value().style[this._sCssPrefix+'Transform']='';},this);this._resetInfo();this.endAnimation(bFireEvent);},movePrev:function(nDuration){var welPrev=this._WrapperInstacne.getPrevElement();if(welPrev.$value()===this._WrapperInstacne.getElement().$value()){return;}
this._bMoveDirection='prev';this._bMove=true;this._nDeg=1;this._setCloneElement();var n=this._htOption['nFlickThreshold'];this._bMoveDirection='prev';this._WrapperInstacne._onEnd({nDistanceX:n+10,nDistanceY:n+10,nX:10,nY:10},nDuration);},moveNext:function(nDuration){var welNext=this._WrapperInstacne.getNextElement();if(welNext.$value()===this._WrapperInstacne.getElement().$value()){return;}
this._bMoveDirection='next';this._bMove=true;this._nDeg=1;this._setCloneElement();var n=this._htOption['nFlickThreshold']*-1;var nPos=this.bH?this._htWElement.base.width():this._htWElement.base.height();this._WrapperInstacne._onEnd({nDistanceX:n-10,nDistanceY:n-10,nX:nPos-10,nY:nPos-10},nDuration);}}).extend(jindo.m.FlickingAnimation);jindo.m.AlignFlipFlicking=jindo.$Class({sAnimationName:'alignFlip',$init:function(){this._bMoveDirection=null;this._bMove=false;},_initAnimation:function(){this._setElementSize();this._sAlign=this._htOption['sFlipAlign'];this._prepareFlip();},_prepareFlip:function(){this._htWElement.base.css(this._sCssPrefix+'Perspective',1200);},_setElementSize:function(){this.nWidth=this._htWElement.base.width();this.nHeight=this._htWElement.base.height();},_refresh:function(n,bResize,bFireEvent){if(typeof n==='undeinfed'){n=this._WrapperInstacne.getContentIndex();}
var nCenter=n;if(this._htOption['bUseCircular']){nCenter=n%3;}
if(bResize){this._setElementSize();this._prepareFlip();}
this._htWElement.base.css({"WebkitPerspectiveOriginX":"50%","WebkitPerspectiveOriginY":"50%"});for(var i=0,nLen=this._htWElement.aPanel.length;i<nLen;i++){if(i===nCenter){this._htWElement.aPanel[i].show().css('zIndex',10);}else{this._htWElement.aPanel[i].hide().css('zIndex',1);}}
this._WrapperInstacne._htIndexInfo.nContentIndex=n;this._WrapperInstacne._htIndexInfo.welElement=this._htWElement.aPanel[nCenter];},_setFlipElement:function(){var nBase=90;var welCurrent=this._getFlipElement();this._setFlipAlign(welCurrent);if(this._bMoveDirection==="prev"){if(this._htOption['sFlipAlign']==="left"){this._rotate(welCurrent,nBase*-1);}else if(this._htOption['sFlipAlign']==="top"){this._rotate(welCurrent,nBase);}}else if(this._bMoveDirection==="next"){if(this._htOption['sFlipAlign']==="bottom"){this._rotate(welCurrent,nBase*-1);}else if(this._htOption['sFlipAlign']==="right"){this._rotate(welCurrent,nBase);}}
welCurrent.show().css('zIndex',110);var welNext=(this._bMoveDirection==="prev")?this._WrapperInstacne.getPrevElement():this._WrapperInstacne.getNextElement();if(welNext.$value()!==welCurrent.$value()){welNext.show().css('zIndex',90);}},_getFlipElement:function(){var welCurrent=this._WrapperInstacne.getContentElement();if(this._bMoveDirection==="prev"){if(this._htOption['sFlipAlign']==="left"||this._htOption['sFlipAlign']=="top"){welCurrent=this._WrapperInstacne.getPrevElement();}}else if(this._bMoveDirection==="next"){if(this._htOption['sFlipAlign']==="right"||this._htOption['sFlipAlign']=="bottom"){welCurrent=this._WrapperInstacne.getNextElement();}}
return welCurrent;},_getFlipNextElement:function(){var welNextElement=this._WrapperInstacne.getNextElement();if(this._bMoveDirection==='next'){if(this._htOption['sFlipAlign']=="right"||this._htOption['sFlipAlign']==="bottom"){welNextElement=this._WrapperInstacne.getContentElement();}}else if(this._bMoveDirection==='prev'){if(this._htOption['sFlipAlign']=="left"||this._htOption['sFlipAlign']==="top"){welNextElement=this._WrapperInstacne.getContentElement();}}
return welNextElement;},_movePanel:function(nDistance,nVector,nPos,nDuration,bEnd){if(bEnd){if(this._bMove){this._onEnd();}}else{if(this._bMoveDirection===null){if(nDistance>0){this._bMoveDirection='prev';}else{this._bMoveDirection='next';}
this._setFlipElement();this._WrapperInstacne._restoreAnchor();this._WrapperInstacne._setAnchorElement();this._WrapperInstacne._clearAnchor();}else{var nSize=this.bH?this.nWidth:this.nHeight;var welTarget=this._WrapperInstacne.getContentElement();if(this._bMoveDirection==='prev'){if(this._htOption['sFlipAlign']==="left"||this._htOption['sFlipAlign']==="top"){welTarget=this._WrapperInstacne.getPrevElement();}
this._nDeg=Math.max(0,Math.min(70,Math.round((nDistance*1/(nSize))*70)));this._setPrevRotate(welTarget,this._nDeg);}else if(this._bMoveDirection==='next'){if(this._htOption['sFlipAlign']==="right"||this._htOption['sFlipAlign']==="bottom"){welTarget=this._WrapperInstacne.getNextElement();}
this._nDeg=Math.max(0,Math.min(70,Math.round((nDistance*-1/(nSize))*70)));this._setNextRotate(welTarget,this._nDeg);}}
this._bMove=true;}},_setPrevRotate:function(welTarget,nDeg){var nCDeg=this.bH?nDeg:-nDeg;var nBaseDeg=0;if(this._htOption['sFlipAlign']==="left"){nBaseDeg=-70;}else if(this._htOption['sFlipAlign']==="top"){nBaseDeg=80;}
var nCurrentDeg=nBaseDeg+nCDeg;if(this._htOption['sFlipAlign']==="right"){nCurrentDeg=Math.min(90,nCurrentDeg);}else if(this._htOption['sFlipAlign']==="bottom"){nCurrentDeg=Math.max(-90,nCurrentDeg);}else if(this._htOption['sFlipAlign']==="left"){nCurrentDeg=Math.min(0,nCurrentDeg);}else{nCurrentDeg=Math.max(0,nCurrentDeg);}
this._rotate(welTarget,nCurrentDeg).css('zIndex',110);},_setNextRotate:function(welTarget,nDeg){var nCDeg=this.bH?-nDeg:nDeg;var nMinDeg=0;var nBaseDeg=0;if(this._htOption['sFlipAlign']==="right"){nBaseDeg=70;}else if(this._htOption['sFlipAlign']==="bottom"){nBaseDeg=-80;}
var nCurrentDeg=nBaseDeg+nCDeg;if(this._htOption['sFlipAlign']==="top"){nCurrentDeg=Math.min(90,nCurrentDeg);}else if(this._htOption['sFlipAlign']==="left"){nCurrentDeg=Math.max(-90,nCurrentDeg);}else if(this._htOption['sFlipAlign']==="bottom"){CurrentDeg=Math.min(0,nCurrentDeg);}else{nCurrentDeg=Math.max(0,nCurrentDeg);}
this._rotate(welTarget,nCurrentDeg).css('zIndex',110);},_setFlipAlign:function(wel){var sAlign="";if(this.bH){sAlign=this._htOption['sFlipAlign']+" center";}else{sAlign="center "+this._htOption['sFlipAlign'];}
wel.css("WebkitTransformOrigin",sAlign);},_rotate:function(wel,nDeg){if(wel){var sRotate=this.bH?"rotateY("+nDeg+"deg)":"rotateX("+nDeg+"deg)";wel.css({"WebkitTransition":"webkit-transform 0s linear","WebkitTransform":sRotate+" rotateZ(0deg)"});}
return wel;},_onEnd:function(){this._bFinished=false;var bRepos=(this._WrapperInstacne._htIndexInfo.sDirection===null)?true:false;if(this._bMoveDirection!==this._WrapperInstacne._htIndexInfo.sDirection){bRepos=true;this._WrapperInstacne._htIndexInfo.sDirection=null;this._WrapperInstacne._htIndexInfo.nNextContentIndex=this._WrapperInstacne._htIndexInfo.nContentIndex;this._WrapperInstacne._htIndexInfo.welNextElement=this._WrapperInstacne._htIndexInfo.welElement;}
if(this._bMoveDirection==="prev"&&(this._WrapperInstacne.getElement().$value()===this._WrapperInstacne.getPrevElement())){bRepos=true;this._WrapperInstacne._htIndexInfo.sDirection=null;this._WrapperInstacne._htIndexInfo.nNextContentIndex=this._WrapperInstacne._htIndexInfo.nContentIndex;this._WrapperInstacne._htIndexInfo.welNextElement=this._WrapperInstacne._htIndexInfo.welElement;}
if(this._bMoveDirection==="next"&&(this._WrapperInstacne.getElement().$value()===this._WrapperInstacne.getNextElement().$value())){bRepos=true;this._WrapperInstacne._htIndexInfo.sDirection=null;this._WrapperInstacne._htIndexInfo.nNextContentIndex=this._WrapperInstacne._htIndexInfo.nContentIndex;this._WrapperInstacne._htIndexInfo.welNextElement=this._WrapperInstacne._htIndexInfo.welElement;}
var welCurrent=this._getFlipElement();var self=this;var nDuration=bRepos?this._htOption['nBounceDuration']:this._htOption['nDuration'];var nTotalDig=bRepos?0:90;if(this._nDeg===0){this._bFinished=true;setTimeout(function(){self._onTransitionEnd();},10);}else{var startTime=(new Date()).getTime(),nStartDeg=this._nDeg,nMinDeg=90;(function timer(){var now=(new Date()).getTime(),nEaseOut;if(now>=startTime+nDuration){clearTimeout(self._nTimerAnimate);if(self._bMoveDirection==='next'){self._setNextRotate(welCurrent,nTotalDig);}else{self._setPrevRotate(welCurrent,nTotalDig);}
self._onTransitionEnd();return;}
now=(now-startTime)/nDuration-1;nEaseOut=Math.sqrt(1-Math.pow(now,2));var nDeg=(nTotalDig-nStartDeg)*nEaseOut+nStartDeg;self._nDeg=Math.min(nDeg,nMinDeg);if(self._bMoveDirection==='next'){self._setNextRotate(welCurrent,self._nDeg);}else{self._setPrevRotate(welCurrent,self._nDeg);}
self._nTimerAnimate=setTimeout(timer,10);}());}},_onStart:function(){this._resetInfo();},_resetInfo:function(){this._bMoveDirection=null;this._bMove=false;this._nDeg=-1;this._bFinished=true;},_onTransitionEnd:function(){this._detachTransitionEnd();var bFireEvent=true;if(this._WrapperInstacne._htIndexInfo.sDirection===null){bFireEvent=false;}
this._restorePanel(this._WrapperInstacne._htIndexInfo.welNextElement.$value());this._resetInfo();this.endAnimation(bFireEvent);},_restorePanel:function(el){jindo.$A(this._htWElement.aPanel).forEach(function(value,i,array){value.$value().style[this._sCssPrefix+'TransitionDuration']=null;value.$value().style[this._sCssPrefix+'Transform']='';if(value.$value()===el){value.show().css('zIndex',10);}else{value.hide().css('zIndex',1);}},this);},movePrev:function(nDuration){var welPrev=this._WrapperInstacne.getPrevElement();if(welPrev.$value()===this._WrapperInstacne.getElement().$value()){return;}
this._bMoveDirection='prev';this._setFlipElement();this._bMove=true;this._nDeg=1;var n=this._htOption['nFlickThreshold'];this._bMoveDirection='prev';this._WrapperInstacne._onEnd({nDistanceX:n+10,nDistanceY:n+10,nX:10,nY:10},nDuration);},moveNext:function(nDuration){var welNext=this._WrapperInstacne.getNextElement();if(welNext.$value()===this._WrapperInstacne.getElement().$value()){return;}
this._bMoveDirection='next';this._setFlipElement();this._bMove=true;this._nDeg=1;var n=this._htOption['nFlickThreshold']*-1;var nPos=this.bH?this._htWElement.base.width():this._htWElement.base.height();this._WrapperInstacne._onEnd({nDistanceX:n-10,nDistanceY:n-10,nX:nPos-10,nY:nPos-10},nDuration);}}).extend(jindo.m.FlickingAnimation);jindo.m.CheckBox=jindo.$Class({$init:function(el,htUserOption){this.option({sClassPrefix:"fcb-",sType:"v",bActivateOnload:true,sUncheckBgColor:"transparent"});this.option(htUserOption||{});this._initVar();this._setWrapperElement(el,this.option("sClassPrefix"));this._initCheckLoad();if(this.option("bActivateOnload")){this.activate();}},_initVar:function(){this.$super._initVar("checkbox","checkbox");},_initCheckLoad:function(){var aCheckUnit=this._htWElement["container"].queryAll('.'+this._sUnitClass);var welUnit,elCheckbox;for(var i=0;i<aCheckUnit.length;i++){welUnit=jindo.$Element(aCheckUnit[i]);elCheckbox=jindo.$$.getSingle("input[type=checkbox]",welUnit.$value());this._setChecked(elCheckbox.checked,elCheckbox,welUnit);}
welUnit=elCheckbox=null;},_afterCheck:function(welElement,bClickOverForm){var elCheckbox=jindo.$$.getSingle("."+this._sFormClass,welElement.$value());var sChecked=welElement.attr("data-cb-checked");var bChecked=(sChecked&&sChecked=="on")?false:true;elCheckbox.checked=bChecked;this._setChecked(bChecked,elCheckbox,welElement);},_setChecked:function(bChecked,elCheckbox,welUnit){var sEvent="unchecked";var sBgColor=this.option("sCheckBgColor");if(!bChecked){sBgColor=(sBgColor)?this.option("sUncheckBgColor"):null;welUnit.removeClass(this._sOnClass);welUnit.attr("data-cb-checked","off");}else{welUnit.addClass(this._sOnClass);welUnit.attr("data-cb-checked","on");sEvent="checked";}
this.fireEvent(sEvent,{elCheckBoxUnit:welUnit.$value(),elCheckBox:elCheckbox});},getCheckedValue:function(){var aValue=[];var aCheckBoxList=this._aWElFormList;var elTempCheck=null;for(var i=0;i<aCheckBoxList.length;i++){elTempCheck=aCheckBoxList[i].$value();if(!elTempCheck.disabled&&elTempCheck.checked){aValue.push(elTempCheck.value);}}
return aValue;},setCheckedBox:function(bChecked,vElement){var aIdx=this._getFormIdx(vElement);var elInput=null;for(var i=0;i<aIdx.length;i++){elInput=this._aWElFormList[aIdx[i]].$value();if(!elInput.disabled){elInput.checked=bChecked;this._setChecked(bChecked,elInput,this._aWElUnitList[aIdx[i]]);}}},enable:function(vElement){var htElForm=this._useSettingForm(vElement,true);this.fireEvent("enable",{aCheckBoxList:htElForm.aFormList,aCheckBoxUnitList:htElForm.aUnitList});},disable:function(vElement){var htElForm=this._useSettingForm(vElement,false);this.fireEvent("disable",{aCheckBoxList:htElForm.aFormList,aCheckBoxUnitList:htElForm.aUnitList});},geElementtByIndex:function(nIdx){return{elCheckBox:this._aWElFormList[nIdx].$value(),elCheckBoxUnit:this._aWElUnitList[nIdx].$value()};},destroy:function(){this.$super.destroy();}}).extend(jindo.m.CheckRadioCore);jindo.m.Datepicker=jindo.$Class({$init:function(el,htUserOption){this.option({sClassPrefix:"calendar-",sFormat:"yyyy-mm-dd",bActivateOnload:true,bAutoHide:false});this.option(htUserOption||{});this._initVar();this._initCalendar(el);if(this.option("bActivateOnload")){this.activate();}},$static:{INDEX_ATTR:"data-datepickerid"},_initVar:function(){this._oCalendar=null;this._htDatePickerSet={};this._htSelectedDatePickerSet=null;},_initCalendar:function(el){var sClassPrefix=this.option("sClassPrefix"),htCalendarOption=this.option();htCalendarOption.bActivateOnload=true;this._oCalendar=new jindo.m.Calendar((jindo.$Element(el)?jindo.$Element(el):this._insertCalendarTemplate()),htCalendarOption);},_isSelectable:function(htDatePickerOption,htDate){return this._oCalendar.isBetween(htDate,htDatePickerOption["htSelectableDateFrom"],htDatePickerOption["htSelectableDateTo"]);},addDatePickerSet:function(elInput,htOption){if(typeof elInput=="undefined"){return this;}
var sDatePikerSetId="DATEPICKER_"+(new Date()).getTime()+"_"+Math.floor((Math.random()*100)),welInput=jindo.$Element(elInput),htCalendarOption=this._oCalendar.option(),htDefaultOption={nYear:htCalendarOption.htToday.nYear,nMonth:htCalendarOption.htToday.nMonth,nDate:htCalendarOption.htToday.nDate,htSelectableDateFrom:{nYear:1900,nMonth:1,nDate:1},htSelectableDateTo:{nYear:2100,nMonth:12,nDate:31},sPosition:"bottomLeft",zIndex:50,sDatePikerSetId:sDatePikerSetId};if(typeof htOption!="undefined"){for(var value in htOption){if(typeof htDefaultOption[value]!="undefined"){htDefaultOption[value]=htOption[value];}}}
htOption=htDefaultOption;welInput.replace("<span style='position:relative;display:inline-block;'>"+welInput.toString()+"</span>");welInput=jindo.$Element(elInput);welInput.attr("readOnly",true).attr(jindo.m.Datepicker.INDEX_ATTR,sDatePikerSetId);htOption.elInput=welInput.$value();htOption.wfFocusFunc=this._attachFocusEvent(welInput);this._htSelectedDatePickerSet=this._htDatePickerSet[sDatePikerSetId]=htOption;return this;},removeDatePickerSet:function(elInput){var welInput=jindo.$Element(elInput),sDatePikerSetId=welInput.attr(jindo.m.Datepicker.INDEX_ATTR),htDatePickerSet=this._htDatePickerSet[sDatePikerSetId];this._detachFocusEvent(htDatePickerSet.wfFocusFunc,welInput);if(htDatePickerSet===this._htSelectedDatePickerSet){this._htSelectedDatePickerSet=null;}
delete this._htDatePickerSet[sDatePikerSetId];return this;},_onActivate:function(){this._attachEvent();},_onDeactivate:function(){this.hide();this._detachEvent();},_attachEvent:function(){this._htEvent={};if(this.option("bAutoHide")){this._htEvent["document"]=jindo.$Fn(this._onDocument,this).attach(document,"touchend");}
this._htEvent["selectDate"]=jindo.$Fn(this._onSelectDate,this).bind();this._htEvent["deliveryEvent"]=jindo.$Fn(this._onDeliveryEvent,this).bind();this._oCalendar.attach({"selectDate":this._htEvent["selectDate"],"beforeMoveDate":this._htEvent["deliveryEvent"],"moveDate":this._htEvent["deliveryEvent"],"beforeHideCalendar":this._htEvent["deliveryEvent"],"hideCalendar":this._htEvent["deliveryEvent"],"beforeShowCalendar":this._htEvent["deliveryEvent"],"showCalendar":this._htEvent["deliveryEvent"]});},_insertCalendarTemplate:function(){var aHtml=[],welCalendar=jindo.$Element("jmc_calt"),sPrefix=this.option("sClassPrefix");if(!welCalendar){aHtml.push('<div>');aHtml.push('<a href="javascript:void(0)" class="'+sPrefix+'btn '+sPrefix+'btn-prev-year">&lt;&lt;</a>');aHtml.push('<a href="javascript:void(0)" class="'+sPrefix+'btn '+sPrefix+'btn-prev-mon">&lt;</a>');aHtml.push('<strong class="'+sPrefix+'title"></strong>');aHtml.push('<a href="javascript:void(0)" class="'+sPrefix+'btn '+sPrefix+'btn-next-mon">&gt;</a>');aHtml.push('<a href="javascript:void(0)" class="'+sPrefix+'btn '+sPrefix+'btn-next-year">&gt;&gt;</a>');aHtml.push('</div><table cellspacing="0" cellpadding="0" style="');aHtml.push('-'+jindo.m.getCssPrefix()+'-tap-highlight-color:rgba(0,0,0,0);"><thead><tr>');aHtml.push('<th class="'+sPrefix+'sun">일</th><th>월</th><th>화</th><th>수</th><th>목</th><th>금</th><th class="'+sPrefix+'sat">토</th>');aHtml.push('</tr></thead><tbody>');aHtml.push('<tr class="'+sPrefix+'week">');aHtml.push('<td><a href="javascript:void(0)" class="'+sPrefix+'date"></a></td>');aHtml.push('<td><a href="javascript:void(0)" class="'+sPrefix+'date"></a></td>');aHtml.push('<td><a href="javascript:void(0)" class="'+sPrefix+'date"></a></td>');aHtml.push('<td><a href="javascript:void(0)" class="'+sPrefix+'date"></a></td>');aHtml.push('<td><a href="javascript:void(0)" class="'+sPrefix+'date"></a></td>');aHtml.push('<td><a href="javascript:void(0)" class="'+sPrefix+'date"></a></td>');aHtml.push('<td><a href="javascript:void(0)" class="'+sPrefix+'date"></a></td>');aHtml.push('</tr></tbody></table>');aHtml.push('<div class="'+sPrefix+'bottom"><a href="javascript:void(0)" class="'+sPrefix+'btn '+sPrefix+'btn-close">닫기</a></div>');welCalendar=jindo.$Element('<div id="jmc_calt" class="'+sPrefix+'base" style="position:absolute;display:none"></div>');welCalendar.html(aHtml.join(""));welCalendar.appendTo(document.body);}
return welCalendar;},_detachEvent:function(){var htDatepickerset=null;if(this.option("bAutoHide")){this._htEvent["document"].detach(document,"touchend");}
for(var p in this._htDatePickerSet){htDatepickerset=this._htDatePickerSet[p];this._detachFocusEvent(htDatepickerset.wfFocusFunc,htDatepickerset.elInput);}
this._oCalendar.detachAll();this._htSelectedDatePickerSet=null;this._htEvent=null;},_onFocus:function(we){if(!this.isActivating()){return false;}
this.show(we.element);},_onDocument:function(we){var el=we.element,wel=jindo.$Element(el),welCalendarBase=this._oCalendar.getCalendarBase(),elInput=this._htSelectedDatePickerSet.elInput;if(welCalendarBase.$value()!=el&&!welCalendarBase.isParentOf(wel)&&elInput!=el){this.hide();if(elInput){elInput.blur();}}
return true;},_onSelectDate:function(we){if(!this._oCalendar.isVisible()){return;}
if(this._isSelectable(this._htSelectedDatePickerSet,we.oSelectDate)){var el=this._htSelectedDatePickerSet.elInput;this.setDate(el,we.oSelectDate);el.blur();this.fireEvent("selectDate",{oSelectDate:we.oSelectDate,oCalendar:this._oCalendar});return true;}else{we.stop(jindo.$Event.CANCEL_ALL);return false;}},_onDeliveryEvent:function(we){we.oCalendar=this._oCalendar;return this.fireEvent(we.sType,we);},setDate:function(elInput,htDate){if(!this.isActivating()){return false;}
var sDatepickerId=(elInput)?elInput.getAttribute(jindo.m.Datepicker.INDEX_ATTR):null,htDatePickerSet=this._htDatePickerSet[sDatepickerId];if(!sDatepickerId||!this._isSelectable(htDatePickerSet,htDate)){return false;}
elInput.value=this._formatDate(htDate);htDatePickerSet.nYear=htDate.nYear;htDatePickerSet.nMonth=htDate.nMonth;htDatePickerSet.nDate=htDate.nDate;this._htDatePickerSet[sDatepickerId]=htDatePickerSet;},_formatDate:function(htDate){var oDate=new Date(htDate.nYear,htDate.nMonth-1,htDate.nDate),sDay=this._oCalendar.getDayName(oDate.getDay());return this.option("sFormat").replace(/(yyyy|yy|mm|dd|day)/gi,function($1){switch($1){case'yyyy':return oDate.getFullYear();case'yy':return oDate.getFullYear().toString().substr(2);case'mm':var sMonth=(oDate.getMonth()+1)+"";sMonth=sMonth.length===1?'0'+sMonth:sMonth;return sMonth;case'dd':var sDate=oDate.getDate()+"";sDate=sDate.length===1?'0'+sDate:sDate;return sDate;case'day':return sDay;}});},deleteDate:function(elInput){if(!elInput){return;}
var welInput=jindo.$Element(elInput),htDatePickerSet=this._htDatePickerSet[welInput.attr(jindo.m.Datepicker.INDEX_ATTR)],oDate=new Date();elInput.value="";htDatePickerSet.nYear=oDate.getFullYear();htDatePickerSet.nMonth=oDate.getMonth()+1;htDatePickerSet.nDate=oDate.getDate();if(this._isCurrentDatePicker(welInput.$value())){this.hide();}
this.fireEvent("clear",{oCalendar:this._oCalendar});},_isCurrentDatePicker:function(elInput){var sDatepickerId=(elInput)?elInput.getAttribute(jindo.m.Datepicker.INDEX_ATTR):null,sSelectDatepickerId=this._htSelectedDatePickerSet.sDatePikerSetId;return(sDatepickerId==sSelectDatepickerId);},enable:function(elInput){if(elInput){var welInput=jindo.$Element(elInput);welInput.$value().disabled=false;}else{var htDatePickerSet=this._htDatePickerSet;for(var sKey in htDatePickerSet){htDatePickerSet[sKey].elInput.disabled=false;}}
this.fireEvent("enable",{oCalendar:this._oCalendar});},_attachFocusEvent:function(welInput){return jindo.$Fn(this._onFocus,this).attach(welInput,"focus");},_detachFocusEvent:function(wfFocusFunc,welInput){wfFocusFunc.detach(welInput,"focus");},disable:function(elInput){var htDatePickerSet=this._htDatePickerSet;if(elInput){var welInput=jindo.$Element(elInput);welInput.$value().disabled=true;}else{for(var sKey in htDatePickerSet){htDatePickerSet[sKey].elInput.disabled=true;}}
this.hide();this.fireEvent("disable",{oCalendar:this._oCalendar});},setPosition:function(elInput,sPosition){var welInput=jindo.$Element(elInput),htDatePickerSet=this._htDatePickerSet[welInput.attr(jindo.m.Datepicker.INDEX_ATTR)],welCalendarBase=this._oCalendar.getCalendarBase(),htCss={},elCalendarBase=welCalendarBase.$value(),bVisible=welCalendarBase.visible();if(!bVisible){welCalendarBase.css("left","-999px");welCalendarBase.show();}
var nCalendarHeight=welCalendarBase.height(),nCalendarWidth=welCalendarBase.width(),nInputHeight=welInput.height(),nInputWidth=welInput.width();sPosition=sPosition||htDatePickerSet.sPosition;elCalendarBase.style.left=null;elCalendarBase.style.right=null;elCalendarBase.style.top=null;if(!bVisible){welCalendarBase.hide();}
switch(sPosition){case"leftTop":htCss.top="0px";htCss.left="-"+nCalendarWidth+"px";break;case"leftBottom":htCss.top="-"+(nCalendarHeight-nInputHeight)+"px";htCss.left="-"+nCalendarWidth+"px";break;case"rightTop":htCss.top="0px";htCss.left=nInputWidth+"px";break;case"rightBottom":htCss.top="-"+(nCalendarHeight-nInputHeight)+"px";htCss.left=nInputWidth+"px";break;case"bottomLeft":htCss.top=nInputHeight+"px";htCss.left="0px";break;case"bottomRight":htCss.top=nInputHeight+"px";htCss.right="0px";break;case"topLeft":htCss.top="-"+nCalendarHeight+"px";htCss.left="0px";break;case"topRight":htCss.top="-"+nCalendarHeight+"px";htCss.right="0px";break;}
htDatePickerSet.sPosition=sPosition;welCalendarBase.css(htCss);},show:function(elInput){var welInput=jindo.$Element(elInput),welCalendarBase=this._oCalendar.getCalendarBase(),htDatePickerSet=this._htDatePickerSet[welInput.attr(jindo.m.Datepicker.INDEX_ATTR)],oDrawDate={"nYear":htDatePickerSet.nYear,"nMonth":htDatePickerSet.nMonth,"nDate":htDatePickerSet.nDate};this._htSelectedDatePickerSet=htDatePickerSet;welInput.parent().append(welCalendarBase);if(htDatePickerSet.zIndex!="none"){welCalendarBase.css("zIndex",htDatePickerSet.zIndex);}
this.setPosition(elInput,htDatePickerSet.sPosition);this._oCalendar.show(oDrawDate,elInput.value?oDrawDate:0);},hide:function(){if(this._oCalendar.isVisible()){this._oCalendar.hide();}},destroy:function(){this.deactivate();this._oCalendar=null;this._htDatePickerSet=null;}}).extend(jindo.UIComponent);jindo.m.RadioButton=jindo.$Class({$init:function(el,htUserOption){this.option({sClassPrefix:"frb-",sType:"v",bActivateOnload:true,sUncheckBgColor:"transparent"});this.option(htUserOption||{});this._initVar();this._setWrapperElement(el,this.option("sClassPrefix"));this._initRadioLoad();if(this.option("bActivateOnload")){this.activate();}},_initVar:function(){this.$super._initVar("radio","radiobtn");this._nPreSelectIdx=-1;},_initRadioLoad:function(){var aRadioBtnList=this._aWElFormList;for(var i=0;i<aRadioBtnList.length;i++){if(aRadioBtnList[i].$value().checked){this._setChecked(i);break;}}},_afterCheck:function(welElement,bClickOverForm){var nIdx=-1;nIdx=this._htWElement["container"].indexOf(welElement);this._setChecked(nIdx);},_onFormClick:function(we){var sClassName=this._sUnitClass;var welElement=jindo.$Element(we.element);welElement=welElement.parent(function(v){return v.hasClass(sClassName);})[0];var sChecked=welElement.attr("data-cb-checked");we.element.checked=(sChecked&&sChecked=="on")?true:false;nIdx=this._htWElement["container"].indexOf(welElement);if(we.element.checked){if(this._nPreSelectIdx!=nIdx){this._onCheck(we);}}},_setChecked:function(nIdx){var elCurrentRadioBtn=this._aWElFormList[nIdx].$value();var welCurrentRadioUnit=this._aWElUnitList[nIdx];if(elCurrentRadioBtn.disabled){return false;}
var sBgColor=this.option("sCheckBgColor");var elPreRadioUnit=null;var elPreRadioBtn=null;if(this._nPreSelectIdx>-1){sBgColor=(sBgColor)?this.option("sUncheckBgColor"):null;elPreRadioUnit=this._aWElUnitList[this._nPreSelectIdx].$value();elPreRadioBtn=this._aWElFormList[this._nPreSelectIdx].$value();this._aWElUnitList[this._nPreSelectIdx].removeClass(this._sOnClass);elPreRadioBtn.checked=false;if(sBgColor){this._aWElUnitList[this._nPreSelectIdx].css("backgroundColor",sBgColor+" !important");}}
welCurrentRadioUnit.addClass(this._sOnClass);welCurrentRadioUnit.attr("data-cb-checked","on");elCurrentRadioBtn.checked=true;sBgColor=this.option("sCheckBgColor");if(sBgColor){welCurrentRadioUnit.css("backgroundColor",sBgColor+" !important");}
this._nPreSelectIdx=nIdx;this.fireEvent("checked",{elPreRadioButtonUnit:elPreRadioUnit,elPreRadioButton:elPreRadioBtn,elRadioButtonUnit:welCurrentRadioUnit.$value(),elRadioButton:elCurrentRadioBtn});},getCheckedValue:function(){var sValue="";if(this._nPreSelectIdx>-1){if(!this._aWElFormList[this._nPreSelectIdx].$value().disabled){sValue=this._aWElFormList[this._nPreSelectIdx].$value().value;}}
return sValue;},setCheckedButton:function(vElement){var aIdx=this._getFormIdx(vElement);if(aIdx.length>0){this._setChecked(aIdx[0]);}},enable:function(vElement){var htElForm=this._useSettingForm(vElement,true);this.fireEvent("enable",{aRadioButtonList:htElForm.aFormList,aRadioButtonUnitList:htElForm.aUnitList});},disable:function(vElement){var htElForm=this._useSettingForm(vElement,false);this.fireEvent("disable",{aRadioButtonList:htElForm.aFormList,aRadioButtonUnitList:htElForm.aUnitList});},getElementByIndex:function(nIdx){return{elRadioButton:this._aWElFormList[nIdx].$value(),elRadioButtonUnit:this._aWElUnitList[nIdx].$value()};},destroy:function(){this.$super.destroy();}}).extend(jindo.m.CheckRadioCore);jindo.m.Selectbox=jindo.$Class({$init:function(el,htUserOption){this.option({bActivateOnload:true,sClassPrefix:"select-",sPlaceholder:"선택해주세요",nHeight:80,sItemTag:"li",nDefaultIndex:-1});this.option(htUserOption||{});this._initVar();this._setWrapperElement(el);this._init();if(this.option("bActivateOnload")){this.activate();this.select(this.option("nDefaultIndex"));}},_initVar:function(){this._isNative=false;this._oScroll=null;this._sClassPrefix=this.option("sClassPrefix");this._aItems=null;this._nCurrentIdx=-1;},_setWrapperElement:function(el){this._htWElement={};this._htWElement["base"]=jindo.$Element(el);this._htWElement["content"]=jindo.$Element(this._htWElement["base"].query("."+this._sClassPrefix+"content"));this._htWElement["arrow"]=jindo.$Element(this._htWElement["base"].query("."+this._sClassPrefix+"arrow"));this._htWElement["selectmenu"]=jindo.$Element(this._htWElement["base"].query("."+this._sClassPrefix+"selectmenu"));},_init:function(){this._isNative=this._htWElement["selectmenu"].$value().tagName=="SELECT"?true:false;this._htWElement["base"].css({"position":"relative","display":"-webkit-box","-webkit-box-align":"center","-webkit-box-pack":"center","-webkit-tap-highlight-color":"rgba(0,0,0,0)"});this._htWElement["content"].css({"display":"block","overflow":"hidden","text-overflow":"ellipsis","cursor":"pointer","text-align":"center","width":"90%"});if(this._htWElement["arrow"]){this._htWElement["arrow"].css({"position":"relative","text-align":"right","display":"block","text-algn":"right"});}
this._htWElement["selectmenu"].css({"position":"absolute","left":"0px","margin":"0px","zIndex":100});if(this._isNative){this._htWElement["selectmenu"].css({"opacity":"0","height":"100%","min-height":"100%","width":"100%"});}else{this._htWElement["selectmenu"].css({"width":"100%"}).hide();this._htWElement["selectmenu"].first().css("width","100%");this._oScroll=new jindo.m.CoreScroll(this._htWElement["selectmenu"].$value(),{nHeight:this.option("nHeight"),bUseMomentum:true,bUseHighlight:false,bUseBounce:true});}
this._refreshItems();},_onActivate:function(){this._attachEvent();},_onDeactivate:function(){this._detachEvent();},_attachEvent:function(){this._htEvent={};if(this._isNative){this._htWElement["selectmenu"].show();}else{this._htEvent["selectmenu"]=jindo.$Fn(this._onShow,this).attach(this._htWElement["base"],"click");this._htEvent["document"]=jindo.$Fn(this._onDocumentStart,this).attach(document,"touchstart");}
this._htEvent["select"]=jindo.$Fn(this._onSelect,this).attach(this._htWElement["selectmenu"],this._isNative?"change":"click");},_detachEvent:function(){if(this._isNative){this._htWElement["selectmenu"].hide();}else{this._htEvent["selectmenu"].detach(this._htWElement["base"],"click");this._htEvent["document"].detach(document,"touchstart");}
this._htEvent["select"].detach(this._htWElement["selectmenu"],this._isNative?"change":"click");this._htEvent=null;},_onShow:function(we){this._showMenuForCustom();},_onSelect:function(we){if(this._isNative){this.select(we.element.selectedIndex);}else{var welParent=jindo.$Element(we.element).parent();this.select(welParent.indexOf(we.element));}
we.stop();},_onDocumentStart:function(we){if(this._htWElement["selectmenu"].visible()){if(this._htWElement["selectmenu"].isParentOf(we.element)||this._htWElement["selectmenu"].isEqual(we.element)){return true;}else{this._hideMenuForCustom();}}},select:function(nIdx){if(0<=nIdx&&nIdx<this._aItems.length){if(nIdx!=this._nCurrentIdx){if(this.fireEvent("beforeSelect",{nCurrentIdx:this._nCurrentIdx,sValue:this.getValue()})){if(this._isNative){this._aItems[nIdx].selected=true;this._setValue(this._aItems[nIdx].value);}else{var wel=jindo.$Element(this._aItems[nIdx]);if(this._aItems[this._nCurrentIdx]){jindo.$Element(this._aItems[this._nCurrentIdx]).removeClass(this._sClassPrefix+"selected");}
wel.addClass(this._sClassPrefix+"selected");this._setValue(wel.text());this._hideMenuForCustom();}
var nPrevIdx=this._nCurrentIdx;this._nCurrentIdx=nIdx;this.fireEvent("select",{nPrevIdx:nPrevIdx,sPrevValue:this.getValue(nPrevIdx),nCurrentIdx:this._nCurrentIdx,sValue:this.getValue()});}}}else{this._setValue(this.option("sPlaceholder"));}},_showMenuForCustom:function(){if(!this._isNative&&!this._htWElement["selectmenu"].visible()){this._htWElement["selectmenu"].show();var nItemHeight=jindo.$Element(this._htWElement["selectmenu"].query(this.option("sItemTag"))).height();this._oScroll.refresh();this._oScroll.scrollTo(0,this._nCurrentIdx<0?0:-this._nCurrentIdx*nItemHeight);this._htEvent["selectmenu"].detach(this._htWElement["base"],"click");}},_hideMenuForCustom:function(){if(!this._isNative&&this._htWElement["selectmenu"].visible()){this._htWElement["selectmenu"].hide();this._htEvent["selectmenu"].attach(this._htWElement["base"],"click");}},_refreshItems:function(){if(this._isNative){this._aItems=this._htWElement["selectmenu"].$value().options;}else{this._aItems=this._htWElement["selectmenu"].queryAll(this.option("sItemTag"));}},refresh:function(aData){var sHTML="";var sItemTag=this._isNative?"option":this.option("sItemTag");for(var i=0,nLength=aData.length;i<nLength;i++){sHTML+="<";sHTML+=sItemTag;sHTML+=">";sHTML+=aData[i];sHTML+="</";sHTML+=sItemTag;sHTML+=">";}
if(this._isNative){this._htWElement["selectmenu"].html(sHTML);}else{this._htWElement["selectmenu"].first().html(sHTML);}
this._refreshItems();this._nCurrentIdx=-1;this.select(this._nCurrentIdx);},_setValue:function(sValue){this._htWElement["content"].text(sValue);},getCurrentIdx:function(){return this._nCurrentIdx;},getValue:function(nIdx){var sValue="";nIdx=(typeof nIdx==="undefined")?this._nCurrentIdx:nIdx;if(0<=nIdx&&nIdx<this._aItems.length){if(this._isNative){sValue=this._aItems[nIdx].value;}else{sValue=jindo.$Element(this._aItems[nIdx]).text();}}
return sValue;},disable:function(){var sClassName=this._sClassPrefix+"disable";if(this._htWElement["base"].hasClass(sClassName)){return;}
this._htWElement["base"].addClass(sClassName);if(this._isNative){this._htWElement["selectmenu"].hide();}else{this._htWElement["selectmenu"].hide();this._htEvent["selectmenu"].detach(this._htWElement["base"],"click");}},enable:function(){var sClassName=this._sClassPrefix+"disable";if(!this._htWElement["base"].hasClass(sClassName)){return;}
this._htWElement["base"].removeClass(this._sClassPrefix+"disable");if(this._isNative){this._htWElement["selectmenu"].show();}else{this._htEvent["selectmenu"].attach(this._htWElement["base"],"click");}},destroy:function(){this.deactivate();if(this._oScroll){this._oScroll.destroy();}}}).extend(jindo.UIComponent);jindo.m.Slider=jindo.$Class({$init:function(sId,htUserOption){this.option({sClassPrefix:'slider-',bVertical:false,nMinValue:0,nMaxValue:100,nDefaultValue:0,bActivateOnload:true});this.option(htUserOption||{});this._setWrapperElement(sId);this._initVar();if(this.option("bActivateOnload")){this.activate();this.setValue(this.option('nDefaultValue'));}},_initVar:function(){var nMove=this.option('bVertical')?0:6;this._oTouch=new jindo.m.Touch(this._htWElement.track.$value(),{nMoveGap:nMove,bActivateOnload:false});this._oTouch.attach({'touchMove':jindo.$Fn(this._onMove,this).bind(),'touchEnd':jindo.$Fn(this._onMove,this).bind(),'touchStart':jindo.$Fn(this._onStart,this).bind()});this._htSwap={left:this.option('bVertical')?'top':'left',width:this.option('bVertical')?'height':'width',nX:this.option('bVertical')?'nY':'nX'};var nSize=this._htWElement.thumb[this._htSwap.width]()/2;this._htWElement.thumb.css('margin-'+this._htSwap.left,nSize*-1);},_setWrapperElement:function(el){this._htWElement={};el=jindo.$(el);var sClass='.'+this.option('sClassPrefix');this._htWElement.track=jindo.$Element(el);var elThumb=jindo.$$.getSingle(sClass+'thumb',el);this._htWElement.thumb=elThumb?jindo.$Element(elThumb):null;var elRang=jindo.$$.getSingle(sClass+'range',el);this._htWElement.range=elRang?jindo.$Element(elRang):null;},_onStart:function(oCustomEvt){var htParam={nValue:this.getValue(),nPosition:this.getPosition()};if(!this.fireEvent('touchStart',htParam)){return;}
oCustomEvt.oEvent.stop(jindo.$Event.CANCEL_DEFAULT);},_onMove:function(oCustomEvt){if(oCustomEvt.sType=='touchMove'){oCustomEvt.oEvent.stop(jindo.$Event.CANCEL_DEFAULT);}
var nCurrent=oCustomEvt[this._htSwap.nX]-this._htWElement.track.offset()[this._htSwap.left]-(this._htWElement.thumb[this._htSwap.width]()/2);var nPos=this._getAdjustedPos(nCurrent);this._move(nPos);this.fireEvent(oCustomEvt.sType,{nValue:this.getValue(),nPosition:this.getPosition()});},_move:function(nPos,bFireEvent){if(typeof bFireEvent=='undefined'){bFireEvent=true;}
var nValue=this.getValue(nPos);var nAdjustPos=Math.round(nPos);var nAdjustValue=this.getValue(nAdjustPos);var htOption={nValue:nValue,nPosition:nPos,nAdjustValue:nAdjustValue,nAdjustPosition:nAdjustPos};if(bFireEvent&&!this._fireBeforeEvent(htOption)){return;}
if(htOption.nAdjustValue!=nAdjustValue){htOption.nAdjustPosition=this._getPositionFromValue(htOption.nAdjustValue);}
this._moveThumb(htOption.nAdjustPosition);if(bFireEvent){this._fireChangeEvent(htOption);}
if(this._htWElement.range){this._htWElement.range.css(this._htSwap.width,htOption.nAdjustPosition+'%');}},_fireBeforeEvent:function(htOption){return this.fireEvent('beforeChange',htOption);},_fireChangeEvent:function(htOption){this.fireEvent('change',htOption);},_moveThumb:function(n){if(n>100||n<0){return;}
this._htWElement.thumb.css('webkitTransitionDuration','0ms');this._htWElement.thumb.css('webkitTransitionProperty',this._htSwap.left);this._htWElement.thumb.css(this._htSwap.left,n+"%");},_getTrackInfo:function(){var nTrackSize=this.option('bVertical')?this._htWElement.track.height():this._htWElement.track.width();var nThumbSize=this.option('bVertical')?this._htWElement.thumb.height():this._htWElement.thumb.width();var nMaxPos=nTrackSize-(nThumbSize/2);return{maxPos:nMaxPos,max:this.option('nMaxValue')*1,min:this.option('nMinValue')*1};},getValue:function(nPos){if(typeof nPos=='undefined'){nPos=this.getPosition();}
var oInfo=this._getTrackInfo();var nValue=oInfo.min+((oInfo.max-oInfo.min)*(nPos/100));return nValue;},setValue:function(nValue,bFireEvent){nValue=nValue*1;var nPos=this._getPositionFromValue(nValue);if(typeof bFireEvent=='undefined'){bFireEvent=true;}
this._move(nPos,bFireEvent);},_getAdjustedPos:function(nDistance){var htInfo=this._getTrackInfo();var nPecent=(nDistance*100)/htInfo.maxPos;nPecent=Math.max(0,nPecent);nPecent=Math.min(nPecent,100);return nPecent;},getPosition:function(){var sPos=this._htWElement.thumb.css(this._htSwap.left);return(sPos=="auto")?0:parseFloat(sPos,10);},setPosition:function(nPos,bFireEvent){if(typeof bFireEvent=='undefined'){bFireEvent=true;}
this._move(nPos,bFireEvent);},_getPositionFromValue:function(nValue){var htInfo=this._getTrackInfo();var nPecent=((nValue-htInfo.min)*100)/(htInfo.max-htInfo.min);nPecent=isNaN(nPecent)?100:nPecent;nPecent=Math.max(0,nPecent);nPecent=Math.min(100,nPecent);return nPecent;},_onClick:function(evt){evt.stop();},_attachEvent:function(){this._htEvent={};},_detachEvent:function(sEventKey){if(sEventKey){var htTargetEvent=this._htEvent[sEventKey];htTargetEvent.ref.detach(htTargetEvent.el,sEventKey);}},_onActivate:function(){this._attachEvent();this._oTouch.activate();},_onDeactivate:function(){this._detachEvent();this._oTouch.deactivate();},destroy:function(){this.deactivate();for(var p in this._htWElement){this._htWElement[p]=null;}
this._htWElement=null;for(p in this._htSwap){this._htSwap[p]=null;}
this._htSwap=null;this._oTouch.detachAll();}}).extend(jindo.UIComponent);jindo.m.TextArea=jindo.$Class({$init:function(el,htUserOption){this.option({bActivateOnload:true,sClassPrefix:"fta-",bUseRadius:false,sRadiusSize:"0.5em",bUseAutoHeight:false,nExpandHeight:30,nMaxHeight:-1});this.option(htUserOption||{});this._initVar();this._setWrapperElement(el);if(this.option("bUseRadius")){this._applyRadiusStyle(this.option("sRadiusSize"));}
if(this.option("bActivateOnload")){this.activate();}},_initVar:function(){this._nTimer=-1;this._bTouchTextArea=false;this._touchMoved=false;this._sBeforeValue="";this._nInitHeight=-1;},_setWrapperElement:function(el){this._htWElement={};var sPrefix=this.option('sClassPrefix');el=(typeof el=="string"?jindo.$(el):el);this._htWElement["textarea"]=jindo.$Element(el);this._nInitHeight=this._htWElement["textarea"].height();},_applyRadiusStyle:function(sRadius){var sCssName=jindo.m.getCssPrefix()+"BorderRadius";var oCssProperty={sCssName:sRadius,"borderRadius":sRadius};this._htWElement["textarea"].css(oCssProperty);oCssFirstProperty=null;},_onActivate:function(){this._attachEvent();},_onDeactivate:function(){this._detachEvent();clearInterval(this._nTimer);this._nTimer=-1;},_attachEvent:function(){this._htEvent={};var elTextArea=this._htWElement["textarea"].$value();this._htEvent["textarea_focus"]={el:elTextArea,ref:jindo.$Fn(this._onFocus,this).attach(elTextArea,"focus")};this._htEvent["textarea_blur"]={el:elTextArea,ref:jindo.$Fn(this._onBlur,this).attach(elTextArea,"blur")};},_detachEvent:function(){for(var p in this._htEvent){var ht=this._htEvent[p];ht.ref.detach(ht.el,p.substring(p.lastIndexOf("_")+1));}
this._htEvent=null;},_onFocus:function(we){if(this._nTimer>-1){return;}
this._htWElement["textarea"].addClass(this.option('sClassPrefix')+"textarea-focus");this._nTimer=setInterval(jindo.$Fn(this._checkHeightAndExpand,this).bind(),10);this.fireEvent("focus",{elTextArea:this._htWElement["textarea"].$value()});},_onBlur:function(we){if(this._nTimer==-1){return;}
clearInterval(this._nTimer);this._nTimer=-1;this._htWElement["textarea"].removeClass(this.option('sClassPrefix')+"textarea-focus");this.fireEvent("blur",{elTextArea:this._htWElement["textarea"].$value()});},_checkHeightAndExpand:function(){var sValue=this._htWElement["textarea"].$value().value;this._adjustHeight();if(sValue!=this._sBeforeValue){this._sBeforeValue=sValue;this.fireEvent("change",{elTextArea:this._htWElement["textarea"].$value()});}},_adjustHeight:function(){var elTextArea=this._htWElement["textarea"].$value(),nLength=this.option("nExpandHeight"),nClientHeight=elTextArea.clientHeight,nHeight=elTextArea.scrollHeight,nMaxHeight=this.option("nMaxHeight"),nBeforeLength=this._sBeforeValue.split("\n").length,nCurrentLength=elTextArea.value.split("\n").length,nTextHeight=parseInt(this._htWElement["textarea"].css("line-height"),10),nNextHeight=0;if(nBeforeLength>nCurrentLength){if(this.option("bUseAutoHeight")){nNextHeight=(nTextHeight*nCurrentLength);if(nMaxHeight!=-1&&nNextHeight>nMaxHeight){return;}
if(this._nInitHeight<=nNextHeight){elTextArea.style.height=nNextHeight+"px";}else{elTextArea.style.height=this._nInitHeight+"px";}}}else if(nBeforeLength<nCurrentLength){if(nHeight>nClientHeight){nNextHeight=(nHeight+nLength);if(nMaxHeight==-1||nNextHeight<=nMaxHeight){elTextArea.style.height=nNextHeight+"px";this.fireEvent("expand",{elTextArea:this._htWElement["textarea"].$value()});}else if(nMaxHeight==-1||nNextHeight>nMaxHeight){if(nHeight!=nMaxHeight){elTextArea.style.height=nMaxHeight+"px";this.fireEvent("expand",{elTextArea:this._htWElement["textarea"].$value()});}}}}},_expandHeight:function(){var elTextArea=this._htWElement["textarea"].$value(),nMaxHeight=this.option("nMaxHeight"),nExpandHeight=this.option("nExpandHeight"),nScrollHeight=parseInt(elTextArea.scrollHeight,10),nHeight=parseInt(elTextArea.style.height,10);nNewHeight=nScrollHeight+nExpandHeight;if(nMaxHeight>0&&nHeight==nMaxHeight){return;}
if(nMaxHeight>0&&nNewHeight>nMaxHeight){elTextArea.style.height=nMaxHeight+"px";if(typeof this._htEventHandler["change"]==='undefined'){clearInterval(this._nTimer);}}else{elTextArea.style.height=nNewHeight+"px";}},getValue:function(){return this._htWElement["textarea"].$value().value;},setValue:function(sValue){this._htWElement["textarea"].$value().value=sValue;this._checkHeightAndExpand();},deleteValue:function(){this._htWElement["textarea"].$value().value="";},enable:function(){var elTextArea=this._htWElement["textarea"].$value();elTextArea.disabled=false;this._htWElement["textarea"].removeClass(this.option("sClassPrefix")+"textarea-disable");this.fireEvent("enable",{elTextArea:elTextArea});},disable:function(){var elTextArea=this._htWElement["textarea"].$value();elTextArea.disabled=true;this._htWElement["textarea"].addClass(this.option("sClassPrefix")+"textarea-disable");this.fireEvent("disable",{elTextArea:elTextArea});},setExpandHeight:function(nExpandHeight){this.option("nExpandHeight",nExpandHeight);},getExpandHeight:function(){return this.option("nExpandHeight");},setMaxHeight:function(nMaxHeight){this.option("nMaxHeight",nMaxHeight);var elTextArea=this._htWElement["textarea"].$value();var nScrollHeight=elTextArea.scrollHeight;if(nMaxHeight>0&&nScrollHeight>nMaxHeight){elTextArea.style.height=nMaxHeight+"px";}},getMaxHeight:function(){return this.option("nMaxHeight");},destroy:function(){this.deactivate();if(this._oTimer){clearInterval(this._oTimer);this._oTimer=null;}
for(var p in this._htWElement){this._htWElement[p]=null;}
this._htWElement=null;this._bTouchTextArea=null;this._touchMoved=null;}}).extend(jindo.UIComponent);jindo.m.TextInput=jindo.$Class({$init:function(el,htUserOption){this.option({sClassPrefix:"fit-",bUseValidate:false,bActivateOnload:true});this.option(htUserOption||{});this._initVar();this._setWrapperElement(el);this._init();if(this.option("bActivateOnload")){this.activate();}},$static:{INDEX_ATTR:"data-index",VALIDATE_ATTR:"data-validate"},_initVar:function(){this._aTextInput=[];this._sPreValue=null;this._nWatcher=null;this._sClickEvent=(jindo.m.getDeviceInfo().iphone||jindo.m.getDeviceInfo().ipad||jindo.m.getDeviceInfo().android)?"touchstart":"mousedown";this._nFocusTimer=null;this._nBlurTimer=null;},_setWrapperElement:function(el){this._htWElement={};this._htWElement["baseElement"]=jindo.$Element(el);},_init:function(){var welUnit,welInput,welDel,sValidate,aBaseList,aValidate=[];aBaseList=this._htWElement["baseElement"].queryAll("."+this.option("sClassPrefix")+"textinput-unit");for(var i=0,nLength=aBaseList.length;i<nLength;i++){welUnit=jindo.$Element(aBaseList[i]);welUnit.attr(jindo.m.TextInput.INDEX_ATTR,i).css("position","relative");welInput=jindo.$Element(welUnit.query("input"));welInput.attr(jindo.m.TextInput.INDEX_ATTR,i);welDel=welUnit.query("."+this.option("sClassPrefix")+"clear-btn");if(welDel){welDel=jindo.$Element(welDel);welDel.attr(jindo.m.TextInput.INDEX_ATTR,i).css({"position":"absolute","zIndex":100,"cursor":"pointer","right":"0px","top":"0px"}).hide();}
this._aTextInput.push({welUnit:welUnit,welInput:welInput,welDel:welDel});}},_attachEvent:function(){this._htEvent={};this._htEvent["focus"]=jindo.$Fn(this._onFocus,this);this._htEvent["blur"]=jindo.$Fn(this._onBlur,this);this._htEvent["clear"]=jindo.$Fn(this._onClear,this);for(var i=0,nLength=this._aTextInput.length;i<nLength;i++){this._attachUnitEvent(this._aTextInput[i]);}},_attachUnitEvent:function(htUnit){this._htEvent["focus"].attach(htUnit.welInput,"focus");this._htEvent["blur"].attach(htUnit.welInput,"blur");if(htUnit.welDel){this._htEvent["clear"].attach(htUnit.welDel,this._sClickEvent);}},_detachEvent:function(){for(var i=0,nLength=this._aTextInput.length;i<nLength;i++){this._detachUnitEvent(this._aTextInput[i]);}
for(var p in this._htEvent){this._htEvent[p]=null;}
this._htEvent=null;},_detachUnitEvent:function(htUnit){this._htEvent["focus"].detach(htUnit.welInput,"focus");this._htEvent["blur"].detach(htUnit.welInput,"blur");if(htUnit.welDel){this._htEvent["clear"].detach(htUnit.welDel,this._sClickEvent);}},_displayClearBtn:function(welInput){var nIdx=this.getIndex(welInput),welClearBtn=this._aTextInput[nIdx].welDel;if(!welClearBtn){return;}
if(jindo.$S(welInput.$value().value).trim()!=""){if(!welClearBtn.visible()&&this.fireEvent("beforeShowClearBtn",{nIndex:nIdx,welClearBtn:welClearBtn})){welClearBtn.show();this.fireEvent("showClearBtn",{nIndex:nIdx,welClearBtn:welClearBtn});}}else{if(welClearBtn.visible()&&this.fireEvent("beforeHideClearBtn",{nIndex:nIdx,welClearBtn:welClearBtn})){welClearBtn.hide();this.fireEvent("hideClearBtn",{nIndex:nIdx,welClearBtn:welClearBtn});}}},_validate:function(welInput){var sValidate=welInput.attr(jindo.m.TextInput.VALIDATE_ATTR);if(!sValidate){return;}
var sValue=welInput.$value().value,htResult=jindo.m.Validation.validate(sValidate,sValue),nIdx=this.getIndex(welInput);if(htResult){if(typeof htResult.sCorrectedValue!=="undefined"&&htResult.sCorrectedValue!==null){welInput.$value().value=this._sPreValue=htResult.sCorrectedValue;}
this.fireEvent((htResult.bValid?"valid":"invalid"),{htValidate:htResult,htTextInput:this._aTextInput[nIdx],nIndex:nIdx});}},_onFocus:function(we){var nIdx=this.getIndex(we.element);var self=this;if(jindo.m.getDeviceInfo().android){clearTimeout(this._nFocusTimer);this._nFocusTimer=setTimeout(function(){self._processFocus(nIdx);},100);}else{self._processFocus(nIdx);}},_processFocus:function(nIdx){var htTextInput=this._aTextInput[nIdx];var welTextInputUnit=htTextInput.welUnit;var sCssName=this.option("sClassPrefix")+"focus";if(!welTextInputUnit.hasClass(sCssName)){welTextInputUnit.addClass(sCssName);}
this._runWatcher(htTextInput.welInput);this.fireEvent("focus",{nIndex:nIdx,htTextInput:htTextInput});},_onBlur:function(we){var nIdx=this.getIndex(we.element);var self=this;if(jindo.m.getDeviceInfo().android){clearTimeout(this._nBlurTimer);this._nBlurTimer=setTimeout(function(){self._processBlur(nIdx);},100);}else{self._processBlur(nIdx);}},_processBlur:function(nIdx){this._aTextInput[nIdx].welUnit.removeClass(this.option("sClassPrefix")+"focus");this._stopWatcher();if(this.option("bUseValidate")){var welInput=this._aTextInput[nIdx].welInput;this._validate(welInput);this._displayClearBtn(welInput);}
this.fireEvent("blur",{nIndex:nIdx,htTextInput:this._aTextInput[nIdx]});},_onClear:function(we){var welBtn=jindo.$Element(we.element)
nIndex=this.getIndex(welBtn),welInput=this._aTextInput[nIndex].welInput,htInfo=jindo.m.getDeviceInfo(),nVersion=parseInt(htInfo.version,10);welInput.$value().value="";if(htInfo.android&&nVersion===3){this._detachUnitEvent(this._aTextInput[nIndex]);welInput.$value().blur();welInput.$value().focus();this._attachUnitEvent(this._aTextInput[nIndex]);}else{if(!htInfo.android&&nVersion>4){welInput.$value().blur();welInput.$value().focus();}}
this._displayClearBtn(welInput);this.fireEvent("clear",{nIndex:nIndex,htTextInput:this._aTextInput[nIndex]});we.stop(jindo.$Event.CANCEL_ALL);return false;},_runWatcher:function(welInput){var self=this,sValue=null;this._stopWatcher();this._nWatcher=setInterval(function(){self._onChange(welInput);},100);},_stopWatcher:function(){clearInterval(this._nWatcher);this._nWatcher=null;this._sPreValue=null;},_onChange:function(welInput){var sValue=welInput.$value().value;if(this._sPreValue!=sValue){this._sPreValue=sValue;this.fireEvent("change",{sPreValue:sValue,welInput:welInput,nIndex:this.getIndex(welInput)});this._displayClearBtn(welInput);}else{this._displayClearBtn(welInput);}},_getTextInputList:function(vElement){var aTextInputUnit=[];if(vElement){if(vElement instanceof Array){for(var i=0,nLength=vElement.length;i<nLength;i++){aTextInputUnit.push(jindo.$Element(vElement[i]));}}else{aTextInputUnit.push(jindo.$Element(vElement));}}else{for(var i=0,nLength=this._aTextInput.length;i<nLength;i++){aTextInputUnit.push(this._aTextInput[i].welUnit);}}
return aTextInputUnit;},_useSettingUnit:function(vElement,bUse){var self=this;this._stopWatcher();var aTextInputUnit=this._getTextInputList(vElement);if(jindo.m.getDeviceInfo().android){setTimeout(function(){self._useSettingUnitCore(aTextInputUnit,bUse);},100);}else{self._useSettingUnitCore(aTextInputUnit,bUse);}},_useSettingUnitCore:function(aTextInputUnit,bUse){for(var i=0,nLength=aTextInputUnit.length;i<nLength;i++){if(bUse){this._enableElement(aTextInputUnit[i]);}else{this._disableElement(aTextInputUnit[i]);}}
this.fireEvent((bUse?"enable":"disable"),{aTextInputUnit:aTextInputUnit});},_enableElement:function(welUnit){var nIdx=this.getIndex(welUnit),welInput=this._aTextInput[nIdx].welInput;this._detachUnitEvent(this._aTextInput[nIdx]);this._attachUnitEvent(this._aTextInput[nIdx]);welUnit.removeClass(this.option("sClassPrefix")+"disable");welInput.$value().disabled=false;this._displayClearBtn(welInput);},_disableElement:function(welUnit){var nIdx=this.getIndex(welUnit),welInput=this._aTextInput[nIdx].welInput,welDel=this._aTextInput[nIdx].welDel;this._detachUnitEvent(this._aTextInput[nIdx]);welUnit.addClass(this.option("sClassPrefix")+"disable");welInput.$value().disabled=true;if(welDel){welDel.hide();}},enable:function(vElement){if(this.isActivating()){this._useSettingUnit(vElement,true);}},disable:function(vElement){if(this.isActivating()){this._useSettingUnit(vElement,false);}},getElement:function(nIdx){if(nIdx<this._aTextInput.length&&nIdx>=0){return this._aTextInput[nIdx].welUnit;}},getInputElement:function(nIdx){if(nIdx<this._aTextInput.length&&nIdx>=0){return this._aTextInput[nIdx].welInput;}},getDelElement:function(nIdx){if(nIdx<this._aTextInput.length&&nIdx>=0){return this._aTextInput[nIdx].welDel;}},getIndex:function(ele){return parseInt(jindo.$Element(ele).attr(jindo.m.TextInput.INDEX_ATTR),10);},getLength:function(){return this._aTextInput.length;},_onActivate:function(){this._attachEvent();},_onDeactivate:function(){this._detachEvent();this._stopWatcher();},destroy:function(){this.deactivate();for(var p in this._htWElement){this._htWElement[p]=null;}
this._htWElement=null;}}).extend(jindo.UIComponent);jindo.m.ToggleSlider=jindo.$Class({$init:function(sId,htUserOption){this.option({sClassPrefix:'tslider-',bUseDrag:true,bActivateOnload:true,nOnPosition:50,nOffPosition:0,bStatus:true,nDuration:100});this.option(htUserOption||{});this._setWrapperElement(sId);this._initVar();if(this.option("bActivateOnload")){this.activate();if(this.option('bStatus')){this.bStatusOn=false;this._move(true,false);}else{this.bStatusOn=true;this._move(false,false);}}},_initVar:function(){if(this._htWElement.track){this._oTouch=new jindo.m.Touch(this._htWElement.track.$value(),{nSlopeThreshold:1,nMoveGap:2,bActivateOnload:false});this._oTouch.attach({'touchMove':jindo.$Fn(this._onMove,this).bind(),'touchEnd':jindo.$Fn(this._onEnd,this).bind(),'touchStart':jindo.$Fn(this._onStart,this).bind()});}else{this._oTouch=null;}
this.bMove=false;this.bStatusOn=this.option('bStatus');this.htInfo={nMax:Math.max(this.option('nOnPosition'),this.option('nOffPosition')),nMin:Math.min(this.option('nOnPosition'),this.option('nOffPosition')),nGap:Math.round(Math.abs((this.option('nOnPosition')-this.option('nOffPosition'))/2))};this._wfTransitionEnd=jindo.$Fn(this._onTransitionEnd,this).bind();this._bFireChange=false;},_setWrapperElement:function(el){this._htWElement={};el=jindo.$(el);var sClass='.'+this.option('sClassPrefix');this._htWElement.base=jindo.$Element(el);var aRadio=el?jindo.$$('[name='+this.option('sClassPrefix')+'radio]',el):null;this._htWElement.aRadio=jindo.$A(aRadio).forEach(function(value,index,array){array[index]=jindo.$Element(value);}).$value();this._htWElement.track=el?jindo.$Element(jindo.$$.getSingle(sClass+'track',el)):null;this._htWElement.thumb=el?jindo.$Element(jindo.$$.getSingle(sClass+'thumb',el)):null;},_onStart:function(oCustomEvt){oCustomEvt.oEvent.stop(jindo.$Event.CANCEL_DEFAULT);},_onMove:function(oCustomEvt){if(!this.option('bUseDrag')){return;}
oCustomEvt.oEvent.stop(jindo.$Event.CANCEL_DEFAULT);this.bMove=true;var nDis=oCustomEvt.nDistanceX;var n=this._getAdjustedPos(nDis);this._moveThumb(n);},_onEnd:function(oCustomEvt){if(oCustomEvt.sMoveType=='tap'){this.toggle();}else{if(this.bMove){var nCurrent=this.isOn()?this.option('nOnPosition'):this.option('nOffPosition');var nPos=this._getPosition();if(Math.abs(nCurrent-nPos)>this.htInfo.nGap){this.toggle();}else{this._move(this.isOn(),false);}}else{this.toggle();}}
this.bMove=false;},_move:function(bOn,bFireEvent){if(typeof bFireEvent=='undefined'){bFireEvent=true;}
var nDis=this.option('nOffPosition');if(bFireEvent){if(!this.fireEvent('beforeChange',{bOn:this.isOn()})){return false;}}
if(bOn){nDis=this.option('nOnPosition');}
this._bFireChange=bFireEvent;this.bStatusOn=bOn;this._moveThumb(nDis,this.option('nDuration'));this._updateForm();},toggle:function(){if(this.isOn()){this.off();}else{this.on();}},on:function(){if(!this.isOn()){this._move(true);}},off:function(){if(this.isOn()){this._move(false);}},isOn:function(){return this.bStatusOn;},_updateForm:function(){if(!this._htWElement.aRadio){return;}
var value=this.isOn()?'on':'off';for(var i=0,nLen=this._htWElement.aRadio.length;i<nLen;i++){var wel=this._htWElement.aRadio[i];if(wel.$value().value==value){wel.$value().checked=true;}else{wel.$value().checked=false;}}},_moveThumb:function(n,nTime){if(n>this.htInfo.nMax||n<this.htInfo.nMin){return;}
if(typeof nTime=='undefined'){nTime=0;}
var nCurrent=parseInt(this._htWElement.thumb.css('left'),10);if((nTime>0)&&(nCurrent!==n)){this._attachTransitionEnd();}
if(this._htWElement.thumb){this._htWElement.thumb.css('webkitTransitionDuration',nTime+'ms');this._htWElement.thumb.css('webkitTransitionProperty','left');this._htWElement.thumb.css('left',n+"%");}
if(nTime===0||(nCurrent===n)){this._onTransitionEnd();}},_onTransitionEnd:function(){this._detachTransitionEnd();if(this._bFireChange){this.fireEvent('change',{bOn:this.isOn()});}
this._bFireChange=false;},_attachTransitionEnd:function(){jindo.m.attachTransitionEnd(this._htWElement.thumb.$value(),this._wfTransitionEnd);},_detachTransitionEnd:function(){jindo.m.detachTransitionEnd(this._htWElement.thumb.$value(),this._wfTransitionEnd);},_getAdjustedPos:function(nDis){var nPecent=Math.round((nDis*100)/this._htWElement.track.width());nPecent=nPecent+(this.isOn()?this.option('nOnPosition'):this.option('nOffPosition'));nPecent=Math.max(this.htInfo.nMin,nPecent);nPecent=Math.min(this.htInfo.nMax,nPecent);return nPecent;},_getPosition:function(){var sPos=this._htWElement.thumb.css('left');return(sPos=="auto")?0:parseInt(sPos,10);},_onClick:function(evt){evt.stop(jindo.$Event.CANCEL_DEFAULT);},_attachEvent:function(){this._htEvent={};this._htEvent["click"]={ref:jindo.$Fn(this._onClick,this).attach(this._htWElement.thumb,"click"),el:this._htWElement.thumb};},_detachEvent:function(sEventKey){if(sEventKey){var htTargetEvent=this._htEvent[sEventKey];htTargetEvent.ref.detach(htTargetEvent.el,sEventKey);}},_onActivate:function(){this._attachEvent();if(this._oTouch){this._oTouch.activate();}},_onDeactivate:function(){this._detachEvent();if(this._oTouch){this._oTouch.deactivate();}},destroy:function(){this.deactivate();for(var p in this._htWElement){this._htWElement[p]=null;}
this._htWElement=null;this._oTouch.detachAll();this._oTouch=null;this.bMove=null;this.bStatusOn=null;this._wfTransitionEnd=null;this._bFireChange=null;}}).extend(jindo.UIComponent);