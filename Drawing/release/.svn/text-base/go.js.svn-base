/*
 * GoJS� v1.0.7 JavaScript Library for HTML Canvas Diagrams
 * Northwoods Software�, http://www.nwoods.com/
 *
 * Copyright � 1998-2012 by Northwoods Software Corporation.  All Rights Reserved.
 * THIS SOFTWARE IS LICENSED.  THE LICENSE AGREEMENT IS AT: http://www.gojs.net/1.0.7/doc/license.html.
 */
(function(window) { var f=void 0,h=!0,m=null,p=!1;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function s(a){return function(){return this[a]}}function da(a){return function(){return a}}var fa,ha={};
if(document.createElement("canvas").getContext===f)throw window.console&&window.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."),Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");if(!Object.prototype.__defineGetter__&&!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");
Object.prototype.__defineGetter__&&!Object.defineProperty&&(Object.defineProperty=function(a,b,c){c.get&&a.__defineGetter__(b,c.get);c.set&&a.__defineSetter__(b,c.set)});Object.prototype.__lookupGetter__&&!Object.getOwnPropertyDescriptor&&(Object.getOwnPropertyDescriptor=function(a,b){return{get:a.__lookupGetter__(b),set:a.__lookupSetter__(b)}});Object.getPrototypeOf||(Object.getPrototypeOf=function(a){return a.__proto__});Object.isFrozen||(Object.isFrozen=function(a){return a.dE===h});
Object.freeze||(Object.freeze=function(a){a.dE=h});Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return g.apply(a,e.concat(d.call(arguments)))}function c(){}var d=Array.prototype.slice,e=d.call(arguments,1),g=this;c.prototype=this.prototype;b.prototype=new c;return b});
for(var ia=0,ja=["ms","moz","webkit","o"],ma=0;ma<ja.length&&!window.requestAnimationFrame;++ma)window.requestAnimationFrame=window[ja[ma]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[ja[ma]+"CancelAnimationFrame"]||window[ja[ma]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-ia)),d=window.setTimeout(function(){a(b+c)},c);ia=b+c;return d});
window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});var t={WE:p,xI:p,Jy:p,aC:p,UG:p,trace:aa(),VE:p,assert:p,fI:m,pI:aa(),rI:aa(),qI:aa(),oI:aa(),wI:aa(),sI:aa(),uI:aa(),tI:aa(),jI:p,TJ:p,OJ:p,PJ:p,tF:p,vI:aa()},t=m;ha.Debug=m;
var v={sw:{},Pz:0,cE:{},Qt:document.createElement("canvas").getContext("2d"),Rt:"",sx:[],Et:m,Iz:[],hx:"ontouchstart"in window,GA:"ongesturestart"in window,Gz:p,g:function(a){t&&t.VE&&alert(a);throw Error(a);},v:function(a,b){if(a.La){var c="The object is frozen, so its properties cannot be set: "+a.toString();b!==f&&(c+="  to value: "+b);v.g(c)}},c:function(a,b,c,d){a instanceof b||(c=v.eh(c),d!==f&&(c+="."+d),v.Ac(a,b,c))},e:function(a,b,c,d){typeof a!==b&&(c=v.eh(c),d!==f&&(c+="."+d),v.Ac(a,b,
c))},j:function(a,b,c){isFinite(a)||(b=v.eh(b),c!==f&&(b+="."+c),v.g(b+" must be a real number and not NaN or Infinity: "+a))},Ua:function(a,b,c,d){if(!(a instanceof na)||a.Qd!==b)c=v.eh(c),d!==f&&(c+="."+d),v.Ac(a,"a constant of class "+v.Ri(b),c)},Ac:function(a,b,c,d){b=v.eh(b);c=v.eh(c);d!==f&&(c+="."+d);v.g(c+" value is not an instance of "+b+": "+a)},ha:function(a,b,c,d){c=v.eh(c);d!==f&&(c+="."+d);v.g(c+" is not in the range "+b+": "+a)},trace:function(a){window&&window.console&&window.console.log(a);
t&&t.UG&&v.g(a)},Na:function(a){return"object"===typeof a&&a!==m},isArray:function(a){return Array.isArray(a)||a instanceof NodeList||a instanceof HTMLCollection},pu:function(a,b,c){v.isArray(a)||v.Ac(a,"Array or NodeList or HTMLCollection",b,c)},Cb:function(a){return a.length},qb:function(a,b){return a[b]},UE:function(a,b,c){Array.isArray(a)?a[b]=c:v.g("Cannot replace an object in an HTMLCollection or NodeList at "+b)},Fx:function(a,b){if(Array.isArray(a))return a.indexOf(b);for(var c=a.length,d=
0;d<c;d++)if(a[d]===b)return d;return-1},Rh:function(a,b,c){Array.isArray(a)?b>=a.length?a.push(c):a.splice(b,0,c):v.g("Cannot insert an object into an HTMLCollection or NodeList: "+c+" at "+b)},Sh:function(a,b){Array.isArray(a)?b>=a.length?a.pop():a.splice(b,1):v.g("Cannot remove an object from an HTMLCollection or NodeList at "+b)},rz:1,Mb:function(a){a.__gohashid=v.rz++},Cn:function(a){var b=a.__gohashid;b===f&&(b=v.rz++,a.__gohashid=b);return b},kc:function(a){return a.__gohashid},a:function(a,
b,c){"name"!==b&&"length"!==b&&(a[b]=c)},H:function(a,b){b.xz=a;ha[a]=b},pa:function(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a},defineProperty:function(a,b,c,d,e){v.e(a,"function","Util.defineProperty:classfunc");v.e(b,"object","Util.defineProperty:propname");v.e(c,"function","Util.defineProperty:getter");v.e(d,"function","Util.defineProperty:setter");c={get:c,set:d};if(e!==f)for(var g in e)c[g]=e[g];for(var i in b)Object.defineProperty(a.prototype,i,c),
e=Object.getOwnPropertyDescriptor(a.prototype,i),b[i]&&e&&Object.defineProperty(a.prototype,b[i],e)},m:function(a,b,c,d){v.e(a,"function","Util.defineReadOnlyProperty:classfunc");v.e(b,"object","Util.defineReadOnlyProperty:propname");v.e(c,"function","Util.defineReadOnlyProperty:getter");c={get:c,set:function(a){v.g("The property "+b+" is read-only and cannot be set to "+a)}};if(d!==f)for(var e in d)c[e]=d[e];for(var g in b)Object.defineProperty(a.prototype,g,c),d=Object.getOwnPropertyDescriptor(a.prototype,
g),b[g]&&d&&Object.defineProperty(a.prototype,b[g],d)},od:function(a,b){for(var c in b)b[c]=h;a.prototype.hE=b},eh:function(a){return a===f?"":"string"===typeof a?a:"function"===typeof a?v.Ri(a):a===m?"*":""},Ri:function(a){return"function"===typeof a?a.xz:"object"===typeof a&&a.constructor?a.constructor.xz:typeof a},l:function(a,b,c){v.e(a,"function","Util.defineEnumValue:classfunc");v.e(b,"string","Util.defineEnumValue:name");v.e(c,"number","Util.defineEnumValue:num");c=new na(a,b,c);Object.freeze(c);
a[b]=c;var d=a.qz;d||(d=new oa("string",na),a.qz=d);d.add(b,c);return c},wl:function(a,b){if(!b)return m;v.e(a,"function","Util.findEnumValueForName:classfunc");v.e(b,"string","Util.findEnumValueForName:name");var c=a.qz;return!c?m:c.ca(b)},dF:function(a,b,c,d){var e={},g;for(g in a){for(var i=p,j=1;j<arguments.length;j++)if(arguments[j]===g){i=h;break}i||(e[g]=a[g])}return e},Ya:function(a,b){if(!a||!b)return m;var c=f;try{"function"===typeof b?c=b(a):"function"===typeof a.getAttribute?(c=a.getAttribute(b),
c===m&&(c=f)):c=a[b]}catch(d){t&&v.trace("property get error: "+d.toString())}return c},fb:function(a,b,c){if(a&&b)try{"function"===typeof b?b(a,c):"function"===typeof a.setAttribute?a.setAttribute(b,c):a[b]=c}catch(d){t&&v.trace("property set error: "+d.toString())}},Vy:function(a,b){v.e(a,"object","Setting properties requires Objects as arguments");v.e(b,"object","Setting properties requires Objects as arguments");b.constructor!==Object&&v.g("Properties must be on a plain Object, not: "+b.toString());
var c=t;c||(t=v);var d=a instanceof w,e;for(e in b){var g=a,i=e;if(d){var j=e.indexOf(".");if(0<j){var k=e.substring(0,j),g=a.Pe(k);g!==m?i=e.substr(j+1):v.g("Unable to find object named: "+k+" in panel "+a.toString()+" when trying to set property: "+e)}}"_"!==i[0]&&!v.ly(g,i)&&v.g('Trying to set undefined property "'+i+'" on object: '+g.toString());g[i]=b[e];"_"===i[0]&&(j=g.Hk,j||(j=[],g.Hk=j),j.push(i))}t=c;return a},ly:function(a,b){for(var c=Object.getPrototypeOf(a);c&&c!==Function;){if(c.hasOwnProperty(b))return h;
var d=c.hE;if(d&&d[b])return h;c=Object.getPrototypeOf(c)}return p},gB:function(a,b){if(!v.Na(b)||b instanceof Element||b instanceof CanvasRenderingContext2D)return"";var c="",d;for(d in b)if("string"!==typeof d)""===c&&(c=b+"\n"),c+="  "+d+" is not a string property\n";else if("_"!==d.charAt(0)&&!(2>=d.length)){var e=v.Ya(b,d);e!==m&&("function"!==typeof e&&!v.ly(b,d))&&(""===c&&(c=b+"\n"),c+='  unknown property "'+d+'" has value: '+e+" at "+a+"\n")}return c},xs:function(a,b){if(b&&!("number"===
typeof b||"string"===typeof b||"boolean"===typeof b||"function"===typeof b))if(v.kc(b)!==f){if(!v.Nt.contains(b))if(v.Nt.add(b),v.mt.add(v.gB(a,b)),b instanceof y||b instanceof qa||b instanceof oa)for(var c=b.f;c.next();)v.xs(a+"["+c.key+"]",c.value);else for(c in b){var d=v.Ya(b,c);if(!(d===f||d===m||!v.Na(d))&&"_ownProperties"!==c){if(b instanceof ra){if("_lines"===c)continue}else if(b instanceof w){if("data"===c||"_data"===c)continue;if("itemArray"===c||"_itemArray"===c)continue}else if(!(b instanceof
A))if(b instanceof sa){if("archetypeGroupData"===c||"_archetypeGroupData"===c)continue}else if(b instanceof ua){if("archetypeLinkData"===c||"_archetypeLinkData"===c)continue;if("archetypeLabelNodeData"===c||"_archetypeLabelNodeData"===c)continue}else if(b instanceof wa){if("archetypeNodeData"===c||"_archetypeNodeData"===c)continue}else if(b instanceof B){if("nodeDataArray"===c||"_nodeDataArray"===c)continue;if("linkDataArray"===c||"_linkDataArray"===c||"_linkDataSet"===c)continue;if("_mapKeyNodeData"===
c||"_delayedNodeReferences"===c)continue}v.xs(a+"."+c,d)}}}else if(Array.isArray(b))for(c=0;c<b.length;c++)v.xs(a+"["+c+"]",b[c]);else v.mt.add(v.gB(a,b))},ZE:function(a){v.Nt===f?v.Nt=new qa:v.Nt.clear();v.mt=new xa;v.xs("",a);a=v.mt.toString();v.mt=m;return a},rG:function(a){for(var b=[],c=0;256>c;c++)b[c]=c;for(var d=0,e,c=0;256>c;c++)d=(d+b[c]+119)%256,e=b[c],b[c]=b[d],b[d]=e;for(var d=c=0,g="",i=0;i<a.length;i++)c=(c+1)%256,d=(d+b[c])%256,e=b[c],b[c]=b[d],b[d]=e,g+=String.fromCharCode(a.charCodeAt(i)^
b[(b[c]+b[d])%256]);return g},IF:function(a){for(var b=[],c=0;256>c;c++)b["0123456789abcdef".charAt(c>>4)+"0123456789abcdef".charAt(c&15)]=String.fromCharCode(c);a.length%2&&(a="0"+a);for(var d=[],e=0,c=0;c<a.length;c+=2)d[e++]=b[a.substr(c,2)];a=d.join("");return""===a?"0":a},Ka:function(a){return v.rG(v.IF(a))},pv:m,XA:"7da71ca0ad381e90",$E:"@COLOR1",aF:"@COLOR2"},ya=v,Ea=document.createElement("canvas"),Fa=Ea.getContext("2d");Fa[v.Ka("7ca11abfd022028846")]=v.Ka("398c3597c01238");
for(var Ha=["5da73c80a3330d854f9e5e671d6633","32ab5ff3b26f42dc0ed90f22462913b54ae6247590da4bb21c324ba3a84e385776","54a702f3e53909c447824c6706603faf4cfb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387","74bf19bce72555874c86"],Ja=1;5>Ja;Ja++)Fa[v.Ka("7ca11abfd7330390")](v.Ka(Ha[Ja-1]),10,15*Ja+0);Fa[v.Ka("7ca11abfd022028846")]=v.Ka("39f046ebb36e4b");for(Ja=1;5>Ja;Ja++)Fa[v.Ka("7ca11abfd7330390")](v.Ka(Ha[Ja-1]),10,15*Ja+0);ya.pv=Ea;function na(a,b,c){v.Mb(this);this.wz=a;this.ub=b;this.oE=c}
na.prototype.toString=function(){return v.Ri(this.wz)+"."+this.ub};v.m(na,{Qd:"classType"},s("wz"));v.m(na,{name:"name"},s("ub"));v.m(na,{value:"value"},s("oE"));function xa(){this.Zv=[];this.Cj=0;this.IA="  "}xa.prototype.toString=function(){return this.Zv.join("")};xa.prototype.add=function(a){a&&this.Zv.push(a)};function Ka(a){a.Cj--;0>a.Cj&&(a.Cj=0)}function La(a){for(var b="\n",c=a.Cj;0<c;c--)b+=a.IA;a.Zv.push(b)}function Ma(){}v.m(Ma,{f:"iterator"},function(){return this});
Ma.prototype.reset=Ma.prototype.reset=aa();Ma.prototype.next=Ma.prototype.next=da(p);v.m(Ma,{count:"count"},da(0));Ma.prototype.Mf=aa();Ma.prototype.toString=da("EmptyIterator");v.Df=new Ma;function Na(a){this.key=-1;this.value=a}v.od(Na,{key:h,value:h});v.m(Na,{f:"iterator"},function(){return this});Na.prototype.reset=Na.prototype.reset=function(){this.key=-1};Na.prototype.next=Na.prototype.next=function(){return-1===this.key?(this.key=0,h):p};v.m(Na,{count:"count"},da(1));
Na.prototype.Mf=function(){this.value=m};Na.prototype.toString=function(){return"SingletonIterator("+this.value+")"};function Pa(a){this.Uf=a;this.Ft=m;this.reset()}v.od(Pa,{key:h,value:h});v.m(Pa,{f:"iterator"},function(){return this});v.a(Pa,"predicate",Pa.prototype.Yu);v.defineProperty(Pa,{Yu:"predicate"},s("Ft"),ba("Ft"));Pa.prototype.reset=Pa.prototype.reset=function(){var a=this.Uf;a.Bg=m;this.bb=a.Wb;this.W=-1};
Pa.prototype.next=Pa.prototype.next=function(){var a=this.Uf;a.Wb!==this.bb&&v.g("the List has been modified during iteration");var a=a.i,b=a.length,c=++this.W,d=this.Ft;if(d!==m)for(;c<b;){var e=a[c];if(d(e))return this.key=this.W=c,this.value=e,h;c++}else{if(c<b)return this.key=c,this.value=a[c],h;this.Mf()}return p};v.m(Pa,{count:"count"},function(){var a=this.Ft;if(a!==m){for(var b=0,c=this.Uf.i,d=c.length,e=0;e<d;e++)a(c[e])&&b++;return b}return this.Uf.i.length});
Pa.prototype.Mf=function(){this.key=-1;this.value=m;this.bb=-1;this.Uf.Bg=this};Pa.prototype.toString=function(){return"ListIterator@"+this.W+"/"+this.Uf.count};function Qa(a){this.Uf=a;this.reset()}v.od(Qa,{key:h,value:h});v.m(Qa,{f:"iterator"},function(){return this});Qa.prototype.reset=Qa.prototype.reset=function(){var a=this.Uf;a.Fw=m;this.bb=a.Wb;this.W=a.i.length};
Qa.prototype.next=Qa.prototype.next=function(){var a=this.Uf;a.Wb!==this.bb&&v.g("the List has been modified during iteration");var b=--this.W;if(0<=b)return this.key=b,this.value=a.i[b],h;this.Mf();return p};v.m(Qa,{count:"count"},function(){return this.Uf.i.length});Qa.prototype.Mf=function(){this.key=-1;this.value=m;this.bb=-1;this.Uf.Fw=this};Qa.prototype.toString=function(){return"ListIteratorBackwards("+this.W+"/"+this.Uf.count+")"};
function y(a){v.Mb(this);this.La=p;this.i=[];this.Wb=0;this.Fw=this.Bg=m;a===f||a===m?this.K=m:"string"===typeof a?"string"===a||"number"===a||"boolean"===a||"function"===a?this.K=a:v.ha(a,"the string 'number', 'string', 'boolean', or 'function'","List constructor: type"):"function"===typeof a?this.K=a===Object?"object":a===String?"string":a===Number?"number":a===Boolean?"boolean":a===Function?"function":a:v.ha(a,"null, a primitive type name, or a class type","List constructor: type")}
v.H("List",y);y.prototype.Hf=function(a){this.K!==m&&("string"===typeof this.K?(typeof a!==this.K||a===m)&&v.Ac(a,this.K):a instanceof this.K||v.Ac(a,this.K))};y.prototype.$c=function(){var a=this.Wb;a++;999999999<a&&(a=0);this.Wb=a};y.prototype.freeze=y.prototype.freeze=function(){this.La=h;return this};y.prototype.thaw=y.prototype.qa=function(){this.La=p;return this};y.prototype.toString=function(){return"List("+v.eh(this.K)+")#"+v.kc(this)};
y.prototype.add=y.prototype.add=function(a){a!==m&&(t&&this.Hf(a),v.v(this,a),this.i.push(a),this.$c())};y.prototype.addAll=y.prototype.cg=function(a){if(a===m)return this;v.v(this);var b=this.i;if(v.isArray(a))for(var c=v.Cb(a),d=0;d<c;d++){var e=v.qb(a,d);t&&this.Hf(e);b.push(e)}else for(a=a.f;a.next();)e=a.value,t&&this.Hf(e),b.push(e);this.$c();return this};y.prototype.clear=y.prototype.clear=function(){v.v(this);this.i=[];this.$c()};
y.prototype.contains=y.prototype.contains=function(a){if(a===m)return p;t&&this.Hf(a);return-1!==this.i.indexOf(a)};y.prototype.indexOf=y.prototype.indexOf=function(a){if(a===m)return-1;t&&this.Hf(a);return this.i.indexOf(a)};y.prototype.elt=y.prototype.Z=function(a){t&&v.j(a,y,"elt:i");var b=this.i;(0>a||a>=b.length)&&v.ha(a,"0 <= i < length",y,"elt:i");return b[a]};
y.prototype.setElt=y.prototype.ev=function(a,b){t&&(this.Hf(b),v.j(a,y,"setElt:i"));var c=this.i;(0>a||a>=c.length)&&v.ha(a,"0 <= i < length",y,"setElt:i");v.v(this,a);c[a]=b};y.prototype.first=y.prototype.ic=function(){var a=this.i;return 0===a.length?m:a[0]};y.prototype.insertAt=y.prototype.lc=function(a,b){t&&(this.Hf(b),v.j(a,y,"insertAt:i"));0>a&&v.ha(a,">= 0",y,"insertAt:i");v.v(this,a);var c=this.i;a>=c.length?c.push(b):c.splice(a,0,b);this.$c();return h};
y.prototype.remove=y.prototype.remove=function(a){if(a===m)return p;t&&this.Hf(a);v.v(this,a);var b=this.i,a=b.indexOf(a);if(-1===a)return p;a===b.length-1?b.pop():b.splice(a,1);this.$c();return h};y.prototype.removeAt=y.prototype.pe=function(a){t&&v.j(a,y,"removeAt:i");var b=this.i;(0>a||a>=b.length)&&v.ha(a,"0 <= i < length",y,"removeAt:i");v.v(this,a);a===b.length-1?b.pop():b.splice(a,1);this.$c()};
y.prototype.removeRange=y.prototype.removeRange=function(a,b){t&&(v.j(a,y,"removeRange:from"),v.j(b,y,"removeRange:to"));var c=this.i;(0>a||a>=c.length)&&v.ha(a,"0 <= from < length",y,"elt:from");(0>b||b>=c.length)&&v.ha(b,"0 <= to < length",y,"elt:to");v.v(this,a);var d=c.slice((b||a)+1||c.length);c.length=0>a?c.length+a:a;c.push.apply(c,d);this.$c()};y.prototype.copy=y.prototype.copy=function(){for(var a=new y(this.K),b=this.i,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};
y.prototype.toArray=y.prototype.Cf=function(){for(var a=[],b=this.i,c=this.count,d=0;d<c;d++)a.push(b[d]);return a};y.prototype.toSet=y.prototype.RG=function(){for(var a=new qa(this.K),b=this.i,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};y.prototype.sort=y.prototype.sort=function(a){t&&v.e(a,"function",y,"sort:sortfunc");v.v(this);this.i.sort(a);this.$c();return this};
y.prototype.sortRange=y.prototype.co=function(a,b,c){var d=this.i,e=d.length;b===f&&(b=0);c===f&&(c=e);t&&(v.e(a,"function",y,"sortRange:sortfunc"),v.j(b,y,"sortRange:from"),v.j(c,y,"sortRange:to"));v.v(this);var g=c-b;if(1>=g)return this;(0>b||b>=e-1)&&v.ha(b,"0 <= from < length",y,"sortRange:from");if(2===g)return c=d[b],e=d[b+1],0<a(c,e)&&(d[b]=e,d[b+1]=c,this.$c()),this;if(0===b)if(c>=e)d.sort(a);else{g=d.slice(0,c);g.sort(a);for(a=0;a<c;a++)d[a]=g[a]}else if(c>=e){g=d.slice(b);g.sort(a);for(a=
b;a<e;a++)d[a]=g[a-b]}else{g=d.slice(b,c);g.sort(a);for(a=b;a<c;a++)d[a]=g[a-b]}this.$c();return this};y.prototype.reverse=y.prototype.reverse=function(){v.v(this);this.i.reverse();this.$c();return this};v.m(y,{count:"count"},function(){return this.i.length});v.m(y,{length:"length"},function(){return this.i.length});v.m(y,{f:"iterator"},function(){if(0>=this.i.length)return v.Df;var a=this.Bg;return a!==m?(a.reset(),a):new Pa(this)});
v.m(y,{Gn:"iteratorBackwards"},function(){if(0>=this.i.length)return v.Df;var a=this.Fw;return a!==m?(a.reset(),a):new Qa(this)});function Ra(a){this.Kd=a;this.reset()}v.od(Ra,{key:h,value:h});v.m(Ra,{f:"iterator"},function(){return this});Ra.prototype.reset=Ra.prototype.reset=function(){var a=this.Kd;a.Bg=m;this.bb=a.Wb;this.ae=m};
Ra.prototype.next=Ra.prototype.next=function(){var a=this.Kd;a.Wb!==this.bb&&v.g("the Set has been modified during iteration");var b=this.ae,b=b===m?a.$e:b.xi;if(b!==m)return this.ae=b,this.value=b.value,this.key=b.key,h;this.Mf();return p};v.m(Ra,{count:"count"},function(){return this.Kd.Yd});Ra.prototype.Mf=function(){this.value=m;this.bb=-1;this.Kd.Bg=this};Ra.prototype.toString=function(){return this.ae!==m?"SetIterator@"+this.ae.value:"SetIterator"};
function qa(a){v.Mb(this);this.La=p;a===f||a===m?this.K=m:"string"===typeof a?"string"===a||"number"===a?this.K=a:v.ha(a,"the string 'number' or 'string'","Set constructor: type"):"function"===typeof a?this.K=a===Object?"object":a===String?"string":a===Number?"number":a:v.ha(a,"null, a primitive type name, or a class type","Set constructor: type");this.oc={};this.Yd=0;this.Bg=m;this.Wb=0;this.Cg=this.$e=m}v.H("Set",qa);
qa.prototype.Hf=function(a){this.K!==m&&("string"===typeof this.K?(typeof a!==this.K||a===m)&&v.Ac(a,this.K):a instanceof this.K||v.Ac(a,this.K))};qa.prototype.$c=function(){var a=this.Wb;a++;999999999<a&&(a=0);this.Wb=a};qa.prototype.freeze=qa.prototype.freeze=function(){this.La=h;return this};qa.prototype.thaw=qa.prototype.qa=function(){this.La=p;return this};qa.prototype.toString=function(){return"Set("+v.eh(this.K)+")#"+v.kc(this)};
qa.prototype.add=qa.prototype.add=function(a){if(a===m)return p;t&&this.Hf(a);v.v(this,a);var b=a;v.Na(a)&&(b=v.Cn(a));return this.oc[b]===f?(this.Yd++,a=new Sa(a,a),this.oc[b]=a,b=this.Cg,b===m?this.$e=a:(a.Hm=b,b.xi=a),this.Cg=a,this.$c(),h):p};qa.prototype.addAll=qa.prototype.cg=function(a){if(a===m)return this;v.v(this);if(v.isArray(a))for(var b=v.Cb(a),c=0;c<b;c++)this.add(v.qb(a,c));else for(a=a.f;a.next();)this.add(a.value);return this};
qa.prototype.contains=qa.prototype.contains=function(a){if(a===m)return p;t&&this.Hf(a);var b=a;return v.Na(a)&&(b=v.kc(a),b===f)?p:this.oc[b]!==f};qa.prototype.containsAll=qa.prototype.YH=function(a){if(a===m)return h;for(a=a.f;a.next();)if(!this.contains(a.value))return p;return h};qa.prototype.containsAny=qa.prototype.ZH=function(a){if(a===m)return h;for(a=a.f;a.next();)if(this.contains(a.value))return h;return p};qa.prototype.first=qa.prototype.ic=function(){var a=this.$e;return a===m?m:a.value};
qa.prototype.remove=qa.prototype.remove=function(a){if(a===m)return p;t&&this.Hf(a);v.v(this,a);var b=a;if(v.Na(a)&&(b=v.kc(a),b===f))return p;a=this.oc[b];if(a===f)return p;var c=a.xi,d=a.Hm;c!==m&&(c.Hm=d);d!==m&&(d.xi=c);this.$e===a&&(this.$e=c);this.Cg===a&&(this.Cg=d);delete this.oc[b];this.Yd--;this.$c();return h};qa.prototype.removeAll=qa.prototype.ZJ=function(a){if(a===m)return this;v.v(this);for(a=a.f;a.next();)this.remove(a.value);return this};
qa.prototype.retainAll=qa.prototype.gK=function(a){if(a===m||0===this.count)return this;v.v(this);var b=new qa(this.K);b.cg(a);for(var a=new y(this.K),c=this.f;c.next();)b.contains(c.value)||a.add(c.value);for(b=a.f;b.next();)this.remove(b.value);return this};qa.prototype.clear=qa.prototype.clear=function(){v.v(this);this.oc={};this.Yd=0;this.Cg=this.$e=m;this.$c()};qa.prototype.copy=qa.prototype.copy=function(){var a=new qa(this.K),b=this.oc,c;for(c in b)a.add(b[c].value);return a};
qa.prototype.toArray=qa.prototype.Cf=function(){var a=[],b=this.oc,c;for(c in b)a.push(b[c].value);return a};qa.prototype.toList=qa.prototype.QG=function(){var a=new y(this.K),b=this.oc,c;for(c in b)a.add(b[c]);return a};v.m(qa,{count:"count"},s("Yd"));v.m(qa,{f:"iterator"},function(){if(0>=this.Yd)return v.Df;var a=this.Bg;return a!==m?(a.reset(),a):new Ra(this)});function Va(a){this.Zc=a;this.reset()}v.od(Va,{key:h,value:h});v.m(Va,{f:"iterator"},function(){return this});
Va.prototype.reset=Va.prototype.reset=function(){this.bb=this.Zc.Wb;this.ae=m};Va.prototype.next=Va.prototype.next=function(){var a=this.Zc;a.Wb!==this.bb&&v.g("the Map has been modified during iteration");var b=this.ae,b=b===m?a.$e:b.xi;if(b!==m)return this.ae=b,this.value=b.key,h;this.Mf();return p};v.m(Va,{count:"count"},function(){return this.Zc.Yd});Va.prototype.Mf=function(){this.value=m;this.bb=-1};Va.prototype.toString=function(){return this.ae!==m?"MapKeySetIterator@"+this.ae.value:"MapKeySetIterator"};
function Ya(a){v.Mb(this);this.Zc=a}v.pa(Ya,qa);Ya.prototype.freeze=function(){return this};Ya.prototype.qa=function(){return this};Ya.prototype.toString=function(){return"MapKeySet("+this.Zc.toString()+")"};Ya.prototype.add=Ya.prototype.add=function(){v.g("This Set is read-only: "+this.toString());return p};Ya.prototype.contains=Ya.prototype.contains=function(a){return this.Zc.contains(a)};Ya.prototype.remove=Ya.prototype.remove=function(){v.g("This Set is read-only: "+this.toString());return p};
Ya.prototype.clear=Ya.prototype.clear=function(){v.g("This Set is read-only: "+this.toString())};Ya.prototype.copy=Ya.prototype.copy=function(){return new Ya(this.Zc)};Ya.prototype.toSet=Ya.prototype.RG=function(){var a=new qa(this.Zc.K),b=this.Zc.oc,c;for(c in b)a.add(b[c].key);return a};Ya.prototype.toArray=Ya.prototype.Cf=function(){var a=[],b=this.Zc.oc,c;for(c in b)a.push(b[c].key);return a};
Ya.prototype.toList=Ya.prototype.QG=function(){var a=new y(this.K),b=this.Zc.oc,c;for(c in b)a.add(b[c].key);return a};v.m(Ya,{count:"count"},function(){return this.Zc.Yd});v.m(Ya,{f:"iterator"},function(){return 0>=this.Zc.Yd?v.Df:new Va(this.Zc)});function Sa(a,b){this.key=a;this.value=b;this.Hm=this.xi=m}v.od(Sa,{key:h,value:h});Sa.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"};function $a(a){this.Zc=a;this.reset()}v.od($a,{key:h,value:h});v.m($a,{f:"iterator"},function(){return this});
$a.prototype.reset=$a.prototype.reset=function(){var a=this.Zc;a.Bg=m;this.bb=a.Wb;this.ae=m};$a.prototype.next=$a.prototype.next=function(){var a=this.Zc;a.Wb!==this.bb&&v.g("the Map has been modified during iteration");var b=this.ae,b=b===m?a.$e:b.xi;if(b!==m)return this.ae=b,this.key=b.key,this.value=b.value,h;this.Mf();return p};v.m($a,{count:"count"},function(){return this.Zc.Yd});$a.prototype.Mf=function(){this.value=this.key=m;this.bb=-1;this.Zc.Bg=this};
$a.prototype.toString=function(){return this.ae!==m?"MapIterator@"+this.ae:"MapIterator"};
function oa(a,b){v.Mb(this);this.La=p;a===f||a===m?this.yh=m:"string"===typeof a?"string"===a||"number"===a?this.yh=a:v.ha(a,"the string 'number' or 'string'","Map constructor: keytype"):"function"===typeof a?this.yh=a===Object?"object":a===String?"string":a===Number?"number":a:v.ha(a,"null, a primitive type name, or a class type","Map constructor: keytype");b===f||b===m?this.Nh=m:"string"===typeof b?"string"===b||"boolean"===b||"number"===b||"function"===b?this.Nh=b:v.ha(b,"the string 'number', 'string', 'boolean', or 'function'",
"Map constructor: valtype"):"function"===typeof b?this.Nh=b===Object?"object":b===String?"string":b===Number?"number":b===Boolean?"boolean":b===Function?"function":b:v.ha(b,"null, a primitive type name, or a class type","Map constructor: valtype");this.oc={};this.Yd=0;this.Bg=m;this.Wb=0;this.Cg=this.$e=m}v.H("Map",oa);function ab(a,b){a.yh!==m&&("string"===typeof a.yh?(typeof b!==a.yh||b===m)&&v.Ac(b,a.yh):b instanceof a.yh||v.Ac(b,a.yh))}
oa.prototype.$c=function(){var a=this.Wb;a++;999999999<a&&(a=0);this.Wb=a};oa.prototype.freeze=oa.prototype.freeze=function(){this.La=h;return this};oa.prototype.thaw=oa.prototype.qa=function(){this.La=p;return this};oa.prototype.toString=function(){return"Map("+v.eh(this.yh)+","+v.eh(this.Nh)+")#"+v.kc(this)};
oa.prototype.add=oa.prototype.add=function(a,b){t&&(ab(this,a),this.Nh!==m&&("string"===typeof this.Nh?(typeof b!==this.Nh||b===m)&&v.Ac(b,this.Nh):b instanceof this.Nh||v.Ac(b,this.Nh)));v.v(this,a);var c=a;v.Na(a)&&(c=v.Cn(a));var d=this.oc[c];if(d===f)return this.Yd++,d=new Sa(a,b),this.oc[c]=d,c=this.Cg,c===m?this.$e=d:(d.Hm=c,c.xi=d),this.Cg=d,this.$c(),h;d.value=b;return p};
oa.prototype.addAll=oa.prototype.cg=function(a){if(a===m)return this;t&&v.c(a,oa,oa,"addAll:map");for(a=a.f;a.next();)this.add(a.key,a.value);return this};oa.prototype.contains=oa.prototype.contains=function(a){t&&ab(this,a);var b=a;return v.Na(a)&&(b=v.kc(a),b===f)?p:this.oc[b]!==f};oa.prototype.getValue=oa.prototype.ca=function(a){t&&ab(this,a);var b=a;if(v.Na(a)&&(b=v.kc(a),b===f))return m;a=this.oc[b];return a===f?m:a.value};
oa.prototype.remove=oa.prototype.remove=function(a){if(a===m)return p;t&&ab(this,a);v.v(this,a);var b=a;if(v.Na(a)&&(b=v.kc(a),b===f))return p;a=this.oc[b];if(a===f)return p;var c=a.xi,d=a.Hm;c!==m&&(c.Hm=d);d!==m&&(d.xi=c);this.$e===a&&(this.$e=c);this.Cg===a&&(this.Cg=d);delete this.oc[b];this.Yd--;this.$c();return h};oa.prototype.clear=oa.prototype.clear=function(){v.v(this);this.oc={};this.Yd=0;this.Cg=this.$e=m;this.$c()};
oa.prototype.copy=oa.prototype.copy=function(){var a=new oa(this.yh,this.Nh),b=this.oc,c;for(c in b){var d=b[c];a.add(d.key,d.value)}return a};oa.prototype.toArray=oa.prototype.Cf=function(){var a=[],b=this.oc,c;for(c in b){var d=b[c];a.push(new Sa(d.key,d.value))}return a};oa.prototype.toKeySet=oa.prototype.dj=function(){return new Ya(this)};v.m(oa,{count:"count"},s("Yd"));v.m(oa,{f:"iterator"},function(){if(0>=this.count)return v.Df;var a=this.Bg;return a!==m?(a.reset(),a):new $a(this)});
function C(a,b){a===f?this.y=this.x=0:"number"===typeof a&&"number"===typeof b?(this.x=a,this.y=b):v.g("Invalid arguments to Point constructor")}v.H("Point",C);v.od(C,{x:h,y:h});C.prototype.Ra=function(a){t&&v.c(a,C,C,"assign:p");this.x=a.x;this.y=a.y};C.prototype.Kd=function(a,b){this.x=a;this.y=b};C.prototype.setTo=C.prototype.bo=function(a,b){t&&(v.e(a,"number",C,"setTo:x"),v.e(b,"number",C,"setTo:y"));v.v(this);this.x=a;this.y=b;return this};
C.prototype.set=C.prototype.set=function(a){t&&v.c(a,C,C,"set:p");v.v(this);this.x=a.x;this.y=a.y;return this};C.prototype.copy=C.prototype.copy=function(){var a=new C;a.x=this.x;a.y=this.y;return a};C.prototype.Ja=function(){this.La=h;Object.freeze(this);return this};C.prototype.B=function(){return Object.isFrozen(this)?this:this.copy().freeze()};C.prototype.freeze=function(){this.La=h;return this};C.prototype.qa=function(){Object.isFrozen(this)&&v.g("cannot thaw constant: "+this);this.La=p;return this};
C.parse=function(a){if("string"===typeof a){for(var a=a.split(" "),b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));return new C(c,e)}return new C};var cb;C.stringify=cb=function(a){return a instanceof C?a.x.toString()+" "+a.y.toString():a.toString()};C.prototype.toString=function(){return"Point("+this.x+","+this.y+")"};C.prototype.equals=C.prototype.u=function(a){return!(a instanceof C)?p:this.x===a.x&&this.y===a.y};
C.prototype.equalTo=C.prototype.dy=function(a,b){return this.x===a&&this.y===b};C.prototype.Pi=function(a){return gb(this.x,a.x)&&gb(this.y,a.y)};C.prototype.hg=function(a){return ib(this.x,a.x)&&ib(this.y,a.y)};C.prototype.add=C.prototype.add=function(a){t&&v.c(a,C,C,"add:p");v.v(this);this.x+=a.x;this.y+=a.y;return this};C.prototype.subtract=C.prototype.es=function(a){t&&v.c(a,C,C,"subtract:p");v.v(this);this.x-=a.x;this.y-=a.y;return this};
C.prototype.offset=C.prototype.offset=function(a,b){t&&(v.j(a,C,"offset:dx"),v.j(b,C,"offset:dy"));v.v(this);this.x+=a;this.y+=b;return this};C.prototype.rotate=C.prototype.rotate=function(a){t&&v.j(a,C,"rotate:angle");v.v(this);if(0===a)return this;var b=this.x,c=this.y;if(0===b&&0===c)return this;var d=a*Math.PI/180,a=Math.cos(d),d=Math.sin(d);this.x=a*b-d*c;this.y=d*b+a*c;return this};
C.prototype.scale=C.prototype.scale=function(a,b){t&&(v.j(a,C,"scale:sx"),v.j(b,C,"scale:sy"));this.x*=a;this.y*=b;return this};C.prototype.distanceSquaredPoint=C.prototype.Mi=function(a){t&&v.c(a,C,C,"distanceSquaredPoint:p");var b=a.x-this.x,a=a.y-this.y;return b*b+a*a};C.prototype.distanceSquared=C.prototype.kI=function(a,b){t&&(v.j(a,C,"distanceSquared:px"),v.j(b,C,"distanceSquared:py"));var c=a-this.x,d=b-this.y;return c*c+d*d};
C.prototype.normalize=C.prototype.normalize=function(){v.v(this);var a=this.x,b=this.y,c=Math.sqrt(a*a+b*b);0<c&&(this.x=a/c,this.y=b/c);return this};C.prototype.directionPoint=C.prototype.Wh=function(a){t&&v.c(a,C,C,"directionPoint:p");return mb(a.x-this.x,a.y-this.y)};C.prototype.direction=C.prototype.direction=function(a,b){t&&(v.j(a,C,"direction:px"),v.j(b,C,"direction:py"));return mb(a-this.x,b-this.y)};
function mb(a,b){if(0===a)return 0<b?90:0>b?270:0;if(0===b)return 0<a?0:180;if(isNaN(a)||isNaN(b))return 0;var c=180*Math.atan(Math.abs(b/a))/Math.PI;0>a?c=0>b?c+180:180-c:0>b&&(c=360-c);return c}C.prototype.setRectSpot=C.prototype.ao=function(a,b){t&&(v.c(a,E,C,"setRectSpot:r"),v.c(b,H,C,"setRectSpot:spot"));v.v(this);this.x=a.x+b.x*a.width+b.offsetX;this.y=a.y+b.y*a.height+b.offsetY;return this};
C.prototype.setSpot=C.prototype.Ml=function(a,b,c,d,e){t&&(v.j(a,C,"setSpot:x"),v.j(b,C,"setSpot:y"),v.j(c,C,"setSpot:w"),v.j(d,C,"setSpot:h"),(0>c||0>d)&&v.g("Point.setSpot:Width and height cannot be negative"),v.c(e,H,C,"setSpot:spot"));v.v(this);this.x=a+e.x*c+e.offsetX;this.y=b+e.y*d+e.offsetY;return this};C.prototype.transform=function(a){t&&v.c(a,ob,C,"transform:t");a.zb(this);return this};function pb(a,b){t&&v.c(b,ob,C,"transformInverted:t");b.bi(a);return a}var sb;
C.distanceLineSegmentSquared=sb=function(a,b,c,d,e,g){t&&(v.j(a,C,"distanceLineSegmentSquared:px"),v.j(b,C,"distanceLineSegmentSquared:py"),v.j(c,C,"distanceLineSegmentSquared:ax"),v.j(d,C,"distanceLineSegmentSquared:ay"),v.j(e,C,"distanceLineSegmentSquared:bx"),v.j(g,C,"distanceLineSegmentSquared:by"));var i=e-c,j=g-d,k=i*i+j*j,c=c-a,d=d-b,l=-c*i-d*j;if(0>=l||l>=k)return i=e-a,j=g-b,Math.min(c*c+d*d,i*i+j*j);a=i*d-j*c;return a*a/k};
C.distanceSquared=function(a,b,c,d){t&&(v.j(a,C,"distanceSquared:px"),v.j(b,C,"distanceSquared:py"),v.j(c,C,"distanceSquared:qx"),v.j(d,C,"distanceSquared:qy"));a=c-a;b=d-b;return a*a+b*b};var tb;
C.direction=tb=function(a,b,c,d){t&&(v.j(a,C,"direction:px"),v.j(b,C,"direction:py"),v.j(c,C,"direction:qx"),v.j(d,C,"direction:qy"));a=c-a;b=d-b;if(0===a)return 0<b?90:0>b?270:0;if(0===b)return 0<a?0:180;if(isNaN(a)||isNaN(b))return 0;d=180*Math.atan(Math.abs(b/a))/Math.PI;0>a?d=0>b?d+180:180-d:0>b&&(d=360-d);return d};C.prototype.isReal=C.prototype.aa=function(){return isFinite(this.x)&&isFinite(this.y)};
function yb(a,b){a===f?this.height=this.width=0:"number"===typeof a&&(0<=a||isNaN(a))&&"number"===typeof b&&(0<=b||isNaN(b))?(this.width=a,this.height=b):v.g("Invalid arguments to Size constructor")}v.H("Size",yb);v.od(yb,{width:h,height:h});yb.prototype.Ra=function(a){t&&v.c(a,yb,yb,"assign:s");this.width=a.width;this.height=a.height};yb.prototype.Kd=function(a,b){this.width=a;this.height=b};
yb.prototype.setTo=yb.prototype.bo=function(a,b){t&&(v.e(a,"number",yb,"setTo:w"),v.e(b,"number",yb,"setTo:h"));0>a&&v.ha(a,">= 0",yb,"setTo:w");0>b&&v.ha(b,">= 0",yb,"setTo:h");v.v(this);this.width=a;this.height=b;return this};yb.prototype.set=yb.prototype.set=function(a){t&&v.c(a,yb,yb,"set:s");v.v(this);this.width=a.width;this.height=a.height;return this};yb.prototype.copy=yb.prototype.copy=function(){var a=new yb;a.width=this.width;a.height=this.height;return a};
yb.prototype.Ja=function(){this.La=h;Object.freeze(this);return this};yb.prototype.B=function(){return Object.isFrozen(this)?this:this.copy().freeze()};yb.prototype.freeze=function(){this.La=h;return this};yb.prototype.qa=function(){Object.isFrozen(this)&&v.g("cannot thaw constant: "+this);this.La=p;return this};
yb.parse=function(a){if("string"===typeof a){for(var a=a.split(" "),b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));return new yb(c,e)}return new yb};var zb;yb.stringify=zb=function(a){return a instanceof yb?a.width.toString()+" "+a.height.toString():a.toString()};yb.prototype.toString=function(){return"Size("+this.width+","+this.height+")"};
yb.prototype.equals=yb.prototype.u=function(a){return!(a instanceof yb)?p:this.width===a.width&&this.height===a.height};yb.prototype.equalTo=yb.prototype.dy=function(a,b){return this.width===a&&this.height===b};yb.prototype.Pi=function(a){return gb(this.width,a.width)&&gb(this.height,a.height)};yb.prototype.hg=function(a){return ib(this.width,a.width)&&ib(this.height,a.height)};yb.prototype.isReal=yb.prototype.aa=function(){return isFinite(this.width)&&isFinite(this.height)};
function E(a,b,c,d){a===f?this.height=this.width=this.y=this.x=0:a instanceof C?b instanceof C?(this.x=Math.min(a.x,b.x),this.y=Math.min(a.y,b.y),this.width=Math.abs(a.x-b.x),this.height=Math.abs(a.y-b.y)):b instanceof yb?(this.x=a.x,this.y=a.y,this.width=b.width,this.height=b.height):v.g("Incorrect arguments supplied"):!t||"number"===typeof a&&"number"===typeof b&&"number"===typeof c&&(0<=c||isNaN(c))&&"number"===typeof d&&(0<=d||isNaN(d))?(this.x=a,this.y=b,this.width=c,this.height=d):v.g("Invalid arguments to Rect constructor")}
v.H("Rect",E);v.od(E,{x:h,y:h,width:h,height:h});E.prototype.Ra=function(a){t&&v.c(a,E,E,"assign:r");this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height};E.prototype.Kd=function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d};function Ab(a,b,c){a.width=b;a.height=c}
E.prototype.setTo=E.prototype.bo=function(a,b,c,d){t&&(v.e(a,"number",E,"setTo:x"),v.e(b,"number",E,"setTo:y"),v.e(c,"number",E,"setTo:w"),v.e(d,"number",E,"setTo:h"));0>c&&v.ha(c,">= 0",E,"setTo:w");0>d&&v.ha(d,">= 0",E,"setTo:h");v.v(this);this.x=a;this.y=b;this.width=c;this.height=d;return this};E.prototype.set=E.prototype.set=function(a){t&&v.c(a,E,E,"set:r");v.v(this);this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height;return this};
E.prototype.setPoint=E.prototype.w=function(a){t&&v.c(a,C,E,"setPoint:p");v.v(this);this.x=a.x;this.y=a.y;return this};E.prototype.setSize=E.prototype.HG=function(a){t&&v.c(a,yb,E,"setSize:s");v.v(this);this.width=a.width;this.height=a.height;return this};E.prototype.copy=E.prototype.copy=function(){var a=new E;a.x=this.x;a.y=this.y;a.width=this.width;a.height=this.height;return a};E.prototype.Ja=function(){this.La=h;Object.freeze(this);return this};
E.prototype.B=function(){return Object.isFrozen(this)?this:this.copy().freeze()};E.prototype.freeze=function(){this.La=h;return this};E.prototype.qa=function(){Object.isFrozen(this)&&v.g("cannot thaw constant: "+this);this.La=p;return this};function Cb(a){var b=a.count,c=h,d=m;if(0===b)return new E;for(var e=0;e<b;e++){var g=a.i[e];c?(d=new E(g.x,g.y,0,0),c=p):Db(d,g.x,g.y,0,0)}return d}
E.parse=function(a){if("string"===typeof a){for(var a=a.split(" "),b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));for(var i=0;""===a[b];)b++;(d=a[b++])&&(i=parseFloat(d));return new E(c,e,g,i)}return new E};var Gb;E.stringify=Gb=function(a){return a instanceof E?a.x.toString()+" "+a.y.toString()+" "+a.width.toString()+" "+a.height.toString():a.toString()};
E.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"};E.prototype.equals=E.prototype.u=function(a){return!(a instanceof E)?p:this.x===a.x&&this.y===a.y&&this.width===a.width&&this.height===a.height};E.prototype.equalTo=E.prototype.dy=function(a,b,c,d){return this.x===a&&this.y===b&&this.width===c&&this.height===d};E.prototype.Pi=function(a){return gb(this.x,a.x)&&gb(this.y,a.y)&&gb(this.width,a.width)&&gb(this.height,a.height)};
E.prototype.hg=function(a){return ib(this.x,a.x)&&ib(this.y,a.y)&&ib(this.width,a.width)&&ib(this.height,a.height)};E.prototype.containsPoint=E.prototype.fa=function(a){t&&v.c(a,C,E,"containsPoint:p");return this.x<=a.x&&this.x+this.width>=a.x&&this.y<=a.y&&this.y+this.height>=a.y};E.prototype.containsRect=E.prototype.pl=function(a){t&&v.c(a,E,E,"containsRect:r");return this.x<=a.x&&a.x+a.width<=this.x+this.width&&this.y<=a.y&&a.y+a.height<=this.y+this.height};
E.prototype.contains=E.prototype.contains=function(a,b,c,d){t?(v.j(a,E,"contains:x"),v.j(b,E,"contains:y"),c===f?c=0:v.j(c,E,"contains:w"),d===f?d=0:v.j(d,E,"contains:h"),(0>c||0>d)&&v.g("Rect.contains:Width and height cannot be negative")):(c===f&&(c=0),d===f&&(d=0));return this.x<=a&&a+c<=this.x+this.width&&this.y<=b&&b+d<=this.y+this.height};E.prototype.reset=function(){v.v(this);this.height=this.width=this.y=this.x=0};
E.prototype.offset=E.prototype.offset=function(a,b){t&&(v.j(a,E,"offset:dx"),v.j(b,E,"offset:dy"));v.v(this);this.x+=a;this.y+=b;return this};E.prototype.inflate=E.prototype.nf=function(a,b){t&&(v.j(a,E,"inflate:w"),v.j(b,E,"inflate:h"));return Ib(this,b,a,b,a)};E.prototype.addMargin=E.prototype.er=function(a){t&&v.c(a,Kb,E,"addMargin:m");return Ib(this,a.top,a.right,a.bottom,a.left)};
E.prototype.subtractMargin=E.prototype.xK=function(a){t&&v.c(a,Kb,E,"subtractMargin:m");return Ib(this,-a.top,-a.right,-a.bottom,-a.left)};E.prototype.grow=E.prototype.$I=function(a,b,c,d){t&&(v.j(a,E,"grow:t"),v.j(b,E,"grow:r"),v.j(c,E,"grow:b"),v.j(d,E,"grow:l"));return Ib(this,a,b,c,d)};function Ib(a,b,c,d,e){v.v(a);var g=a.width;c+e<=-g?(a.x+=g/2,a.width=0):(a.x-=e,a.width+=c+e);c=a.height;b+d<=-c?(a.y+=c/2,a.height=0):(a.y-=b,a.height+=b+d);return a}
E.prototype.intersectRect=E.prototype.kJ=function(a){t&&v.c(a,E,E,"intersectRect:r");return Lb(this,a.x,a.y,a.width,a.height)};E.prototype.intersect=E.prototype.jJ=function(a,b,c,d){t&&(v.j(a,E,"intersect:x"),v.j(b,E,"intersect:y"),v.j(c,E,"intersect:w"),v.j(d,E,"intersect:h"),(0>c||0>d)&&v.g("Rect.intersect:Width and height cannot be negative"));return Lb(this,a,b,c,d)};
function Lb(a,b,c,d,e){v.v(a);var g=Math.max(a.x,b),i=Math.max(a.y,c),b=Math.min(a.x+a.width,b+d),c=Math.min(a.y+a.height,c+e);a.x=g;a.y=i;a.width=Math.max(0,b-g);a.height=Math.max(0,c-i);return a}E.prototype.intersectsRect=E.prototype.Re=function(a){t&&v.c(a,E,E,"intersectsRect:r");return this.NF(a.x,a.y,a.width,a.height)};
E.prototype.intersects=E.prototype.NF=function(a,b,c,d){t&&(v.j(a,E,"intersects:x"),v.j(b,E,"intersects:y"),v.j(a,E,"intersects:w"),v.j(b,E,"intersects:h"),(0>c||0>d)&&v.g("Rect.intersects:Width and height cannot be negative"));var e=this.width,g=this.x;if(Infinity!==e&&Infinity!==c&&(e+=g,c+=a,isNaN(c)||isNaN(e)||g>c||a>e))return p;a=this.height;e=this.y;return Infinity!==a&&Infinity!==d&&(a+=e,d+=b,isNaN(d)||isNaN(a)||e>d||b>a)?p:h};
E.prototype.unionPoint=E.prototype.lv=function(a){t&&v.c(a,C,E,"unionPoint:p");return Db(this,a.x,a.y,0,0)};E.prototype.unionRect=E.prototype.ej=function(a){t&&v.c(a,E,E,"unionRect:r");return Db(this,a.x,a.y,a.width,a.height)};
E.prototype.union=E.prototype.BK=function(a,b,c,d){v.v(this);t?(v.j(a,E,"union:x"),v.j(b,E,"union:y"),c===f?c=0:v.j(c,E,"union:w"),d===f?d=0:v.j(d,E,"union:h"),(0>c||0>d)&&v.g("Rect.union:Width and height cannot be negative")):(c===f&&(c=0),d===f&&(d=0));return Db(this,a,b,c,d)};function Db(a,b,c,d,e){var g=Math.min(a.x,b),i=Math.min(a.y,c),b=Math.max(a.x+a.width,b+d),c=Math.max(a.y+a.height,c+e);a.x=g;a.y=i;a.width=b-g;a.height=c-i;return a}
E.prototype.setSpot=E.prototype.Ml=function(a,b,c){t&&(v.j(a,E,"setSpot:x"),v.j(b,E,"setSpot:y"),v.c(c,H,E,"setSpot:spot"));v.v(this);this.x=a-c.offsetX-c.x*this.width;this.y=b-c.offsetY-c.y*this.height;return this};var Nb;
E.contains=Nb=function(a,b,c,d,e,g,i,j){t?(v.j(a,E,"contains:rx"),v.j(b,E,"contains:ry"),v.j(c,E,"contains:rw"),v.j(d,E,"contains:rh"),v.j(e,E,"contains:x"),v.j(g,E,"contains:y"),i===f?i=0:v.j(i,E,"contains:w"),j===f?j=0:v.j(j,E,"contains:h"),(0>c||0>d||0>i||0>j)&&v.g("Rect.contains:Width and height cannot be negative")):(i===f&&(i=0),j===f&&(j=0));return a<=e&&e+i<=a+c&&b<=g&&g+j<=b+d};
E.intersects=function(a,b,c,d,e,g,i,j){t&&(v.j(a,E,"intersects:rx"),v.j(b,E,"intersects:ry"),v.j(c,E,"intersects:rw"),v.j(d,E,"intersects:rh"),v.j(e,E,"intersects:x"),v.j(g,E,"intersects:y"),v.j(i,E,"intersects:w"),v.j(j,E,"intersects:h"),(0>c||0>d||0>i||0>j)&&v.g("Rect.intersects:Width and height cannot be negative"));c+=a;i+=e;if(a>i||e>c)return p;a=d+b;j+=g;return b>j||g>a?p:h};v.a(E,"left",E.prototype.left);
v.defineProperty(E,{left:"left"},s("x"),function(a){v.v(this,a);t&&v.e(a,"number",E,"left");this.x=a});v.a(E,"top",E.prototype.top);v.defineProperty(E,{top:"top"},s("y"),function(a){v.v(this,a);t&&v.e(a,"number",E,"top");this.y=a});v.a(E,"right",E.prototype.right);v.defineProperty(E,{right:"right"},function(){return this.x+this.width},function(a){v.v(this,a);t&&v.j(a,E,"right");this.x+=a-(this.x+this.width)});v.a(E,"bottom",E.prototype.bottom);
v.defineProperty(E,{bottom:"bottom"},function(){return this.y+this.height},function(a){v.v(this,a);t&&v.j(a,E,"top");this.y+=a-(this.y+this.height)});v.a(E,"position",E.prototype.position);v.defineProperty(E,{position:"position"},function(){return new C(this.x,this.y)},function(a){v.v(this,a);t&&v.c(a,C,E,"position");this.x=a.x;this.y=a.y});v.a(E,"size",E.prototype.size);
v.defineProperty(E,{size:"size"},function(){return new yb(this.width,this.height)},function(a){v.v(this,a);t&&v.c(a,yb,E,"size");this.width=a.width;this.height=a.height});v.a(E,"center",E.prototype.ou);v.defineProperty(E,{ou:"center"},function(){return new C(this.x+this.width/2,this.y+this.height/2)},function(a){v.v(this,a);t&&v.c(a,C,E,"center");this.x=a.x-this.width/2;this.y=a.y-this.height/2});v.a(E,"centerX",E.prototype.za);
v.defineProperty(E,{za:"centerX"},function(){return this.x+this.width/2},function(a){v.v(this,a);t&&v.j(a,E,"centerX");this.x=a-this.width/2});v.a(E,"centerY",E.prototype.Aa);v.defineProperty(E,{Aa:"centerY"},function(){return this.y+this.height/2},function(a){v.v(this,a);t&&v.j(a,E,"centerY");this.y=a-this.height/2});E.prototype.isReal=E.prototype.aa=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)};
E.prototype.isEmpty=E.prototype.mJ=function(){return 0===this.width&&0===this.height};function Kb(a,b,c,d){a===f?this.left=this.bottom=this.right=this.top=0:b===f?this.left=this.bottom=this.right=this.top=a:c===f?(d=b,this.top=a,this.right=b,this.bottom=a,this.left=d):d!==f?(this.top=a,this.right=b,this.bottom=c,this.left=d):v.g("Invalid arguments to Margin constructor")}v.H("Margin",Kb);v.od(Kb,{top:h,right:h,bottom:h,left:h});
Kb.prototype.Ra=function(a){t&&v.c(a,Kb,Kb,"assign:m");this.top=a.top;this.right=a.right;this.bottom=a.bottom;this.left=a.left};Kb.prototype.setTo=Kb.prototype.bo=function(a,b,c,d){t&&(v.e(a,"number",Kb,"setTo:t"),v.e(b,"number",Kb,"setTo:r"),v.e(c,"number",Kb,"setTo:b"),v.e(d,"number",Kb,"setTo:l"));v.v(this);this.top=a;this.right=b;this.bottom=c;this.left=d;return this};
Kb.prototype.set=Kb.prototype.set=function(a){t&&v.c(a,Kb,Kb,"assign:m");v.v(this);this.top=a.top;this.right=a.right;this.bottom=a.bottom;this.left=a.left;return this};Kb.prototype.copy=Kb.prototype.copy=function(){var a=new Kb;a.top=this.top;a.right=this.right;a.bottom=this.bottom;a.left=this.left;return a};Kb.prototype.Ja=function(){this.La=h;Object.freeze(this);return this};Kb.prototype.B=function(){return Object.isFrozen(this)?this:this.copy().freeze()};
Kb.prototype.freeze=function(){this.La=h;return this};Kb.prototype.qa=function(){Object.isFrozen(this)&&v.g("cannot thaw constant: "+this);this.La=p;return this};Kb.parse=function(a){if("string"===typeof a){for(var a=a.split(" "),b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));for(var i=0;""===a[b];)b++;(d=a[b++])&&(i=parseFloat(d));return new Kb(c,e,g,i)}return new Kb};var Ob;
Kb.stringify=Ob=function(a){return a instanceof Kb?a.top.toString()+" "+a.right.toString()+" "+a.bottom.toString()+" "+a.left.toString():a.toString()};Kb.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"};Kb.prototype.equals=Kb.prototype.u=function(a){return!(a instanceof Kb)?p:this.top===a.top&&this.right===a.right&&this.bottom===a.bottom&&this.left===a.left};
Kb.prototype.equalTo=Kb.prototype.dy=function(a,b,c,d){return this.top===a&&this.right===b&&this.bottom===c&&this.left===d};Kb.prototype.Pi=function(a){return gb(this.top,a.top)&&gb(this.right,a.right)&&gb(this.bottom,a.bottom)&&gb(this.left,a.left)};Kb.prototype.hg=function(a){return ib(this.top,a.top)&&ib(this.right,a.right)&&ib(this.bottom,a.bottom)&&ib(this.left,a.left)};Kb.prototype.isReal=Kb.prototype.aa=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)};
function ob(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.Ta=this.Sa=0}v.od(ob,{m11:h,m12:h,m21:h,m22:h,Sa:h,Ta:h});ob.prototype.set=ob.prototype.set=function(a){t&&v.c(a,ob,ob,"set:t");this.m11=a.m11;this.m12=a.m12;this.m21=a.m21;this.m22=a.m22;this.Sa=a.Sa;this.Ta=a.Ta;return this};ob.prototype.copy=ob.prototype.copy=function(){var a=new ob;a.m11=this.m11;a.m12=this.m12;a.m21=this.m21;a.m22=this.m22;a.Sa=this.Sa;a.Ta=this.Ta;return a};
ob.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.Sa+","+this.Ta+")"};ob.prototype.equals=ob.prototype.u=function(a){return!(a instanceof ob)?p:this.m11===a.m11&&this.m12===a.m12&&this.m21===a.m21&&this.m22===a.m22&&this.Sa===a.Sa&&this.Ta===a.Ta};ob.prototype.reset=ob.prototype.reset=function(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.Ta=this.Sa=0};
ob.prototype.multiply=ob.prototype.multiply=function(a){t&&v.c(a,ob,ob,"multiply:matrix");var b=this.m12*a.m11+this.m22*a.m12,c=this.m11*a.m21+this.m21*a.m22,d=this.m12*a.m21+this.m22*a.m22,e=this.m11*a.Sa+this.m21*a.Ta+this.Sa,g=this.m12*a.Sa+this.m22*a.Ta+this.Ta;this.m11=this.m11*a.m11+this.m21*a.m12;this.m12=b;this.m21=c;this.m22=d;this.Sa=e;this.Ta=g;return this};
ob.prototype.multiplyInverted=ob.prototype.MJ=function(a){t&&v.c(a,ob,ob,"multiplyInverted:matrix");var b=1/(a.m11*a.m22-a.m12*a.m21),c=a.m22*b,d=-a.m12*b,e=-a.m21*b,g=a.m11*b,i=b*(a.m21*a.Ta-a.m22*a.Sa),j=b*(a.m12*a.Sa-a.m11*a.Ta),a=this.m12*c+this.m22*d,b=this.m11*e+this.m21*g,e=this.m12*e+this.m22*g,g=this.m11*i+this.m21*j+this.Sa,i=this.m12*i+this.m22*j+this.Ta;this.m11=this.m11*c+this.m21*d;this.m12=a;this.m21=b;this.m22=e;this.Sa=g;this.Ta=i;return this};
ob.prototype.invert=ob.prototype.Lu=function(){var a=1/(this.m11*this.m22-this.m12*this.m21),b=-this.m12*a,c=-this.m21*a,d=this.m11*a,e=a*(this.m21*this.Ta-this.m22*this.Sa),g=a*(this.m12*this.Sa-this.m11*this.Ta);this.m11=this.m22*a;this.m12=b;this.m21=c;this.m22=d;this.Sa=e;this.Ta=g};
ob.prototype.rotate=ob.prototype.rotate=function(a,b,c){t&&(v.j(a,ob,"rotate:angle"),v.j(b,ob,"rotate:rx"),v.j(c,ob,"rotate:ry"));this.translate(b,c);var d=a*Math.PI/180,a=Math.cos(d),d=Math.sin(d),e=this.m12*a+this.m22*d,g=this.m11*-d+this.m21*a,i=this.m12*-d+this.m22*a;this.m11=this.m11*a+this.m21*d;this.m12=e;this.m21=g;this.m22=i;this.translate(-b,-c)};
ob.prototype.translate=ob.prototype.translate=function(a,b){t&&(v.j(a,ob,"translate:x"),v.j(b,ob,"translate:y"));this.Sa+=this.m11*a+this.m21*b;this.Ta+=this.m12*a+this.m22*b};ob.prototype.scale=ob.prototype.scale=function(a,b){b===f&&(b=a);t&&(v.j(a,ob,"translate:sx"),v.j(b,ob,"translate:sy"));this.m11*=a;this.m12*=a;this.m21*=b;this.m22*=b};
ob.prototype.transformPoint=ob.prototype.zb=function(a){t&&v.c(a,C,ob,"transformPoint:p");var b=a.x,c=a.y;a.x=b*this.m11+c*this.m21+this.Sa;a.y=b*this.m12+c*this.m22+this.Ta;return a};ob.prototype.invertedTransformPoint=ob.prototype.bi=function(a){t&&v.c(a,C,ob,"invertedTransformPoint:p");var b=1/(this.m11*this.m22-this.m12*this.m21),c=-this.m12*b,d=this.m11*b,e=b*(this.m12*this.Sa-this.m11*this.Ta),g=a.x,i=a.y;a.x=g*this.m22*b+i*-this.m21*b+b*(this.m21*this.Ta-this.m22*this.Sa);a.y=g*c+i*d+e;return a};
ob.prototype.transformRect=ob.prototype.ED=function(a){t&&v.c(a,E,ob,"transformRect:rect");var b=a.x,c=a.y,d=b+a.width,e=c+a.height,g=this.m11,i=this.m12,j=this.m21,k=this.m22,l=this.Sa,n=this.Ta,r=b*g+c*j+l,q=b*i+c*k+n,u=d*g+c*j+l,c=d*i+c*k+n,x=b*g+e*j+l,b=b*i+e*k+n,g=d*g+e*j+l,d=d*i+e*k+n,e=r,i=q,r=Math.min(r,u),e=Math.max(e,u),i=Math.min(i,c),q=Math.max(q,c),r=Math.min(r,x),e=Math.max(e,x),i=Math.min(i,b),q=Math.max(q,b),r=Math.min(r,g),e=Math.max(e,g),i=Math.min(i,d),q=Math.max(q,d);a.x=r;a.y=
i;a.width=e-r;a.height=q-i};function Rb(a,b){return new C(b.x*a.m11+b.y*a.m21+a.Sa,b.x*a.m12+b.y*a.m22+a.Ta)}ob.prototype.isIdentity=ob.prototype.py=function(){return 1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22&&0===this.Sa&&0===this.Ta};function H(a,b,c,d){a===f?this.offsetY=this.offsetX=this.y=this.x=0:(b===f&&(b=0),c===f&&(c=0),d===f&&(d=0),this.x=a,this.y=b,this.offsetX=c,this.offsetY=d)}v.H("Spot",H);v.od(H,{x:h,y:h,offsetX:h,offsetY:h});
H.prototype.Ra=function(a){t&&v.c(a,H,H,"assign:s");this.x=a.x;this.y=a.y;this.offsetX=a.offsetX;this.offsetY=a.offsetY};H.prototype.setTo=H.prototype.bo=function(a,b,c,d){t&&(Sb(a,"setTo:x"),Sb(b,"setTo:y"),Yb(c,"setTo:offx"),Yb(d,"setTo:offy"));v.v(this);this.x=a;this.y=b;this.offsetX=c;this.offsetY=d;return this};H.prototype.set=H.prototype.set=function(a){t&&v.c(a,H,H,"set:s");v.v(this);this.x=a.x;this.y=a.y;this.offsetX=a.offsetX;this.offsetY=a.offsetY;return this};
H.prototype.copy=H.prototype.copy=function(){var a=new H;a.x=this.x;a.y=this.y;a.offsetX=this.offsetX;a.offsetY=this.offsetY;return a};H.prototype.Ja=function(){this.La=h;Object.freeze(this);return this};H.prototype.B=function(){return Object.isFrozen(this)?this:this.copy().freeze()};H.prototype.freeze=function(){this.La=h;return this};H.prototype.qa=function(){Object.isFrozen(this)&&v.g("cannot thaw constant: "+this);this.La=p;return this};function Zb(a,b){a.x=NaN;a.y=NaN;a.offsetX=b;return a}
function Sb(a,b){(isNaN(a)||1<a||0>a)&&v.ha(a,"0 <= "+b+" <= 1",H,b)}function Yb(a,b){(isNaN(a)||Infinity===a||-Infinity===a)&&v.ha(a,"real number, not NaN or Infinity",H,b)}var cc;
H.parse=cc=function(a){if("string"===typeof a){a=a.trim();if("None"===a)return v.NONE;if("TopLeft"===a)return v.Lv;if("Top"===a||"TopCenter"===a||"MiddleTop"===a)return v.lo;if("TopRight"===a)return v.Nv;if("Left"===a||"LeftCenter"===a||"MiddleLeft"===a)return v.jo;if("Center"===a)return v.Bv;if("Right"===a||"RightCenter"===a||"MiddleRight"===a)return v.ko;if("BottomLeft"===a)return v.wv;if("Bottom"===a||"BottomCenter"===a||"MiddleBottom"===a)return v.io;if("BottomRight"===a)return v.yv;if("TopSide"===
a)return v.Pv;if("LeftSide"===a)return v.Ev;if("RightSide"===a)return v.Jv;if("BottomSide"===a)return v.Av;if("TopBottomSides"===a)return v.Kv;if("LeftRightSides"===a)return v.Dv;if("TopLeftSides"===a)return v.Mv;if("TopRightSides"===a)return v.Ov;if("BottomLeftSides"===a)return v.xv;if("BottomRightSides"===a)return v.zv;if("NotTopSide"===a)return v.Iv;if("NotLeftSide"===a)return v.Gv;if("NotRightSide"===a)return v.Hv;if("NotBottomSide"===a)return v.Fv;if("AllSides"===a)return v.vv;if("Default"===
a)return v.Cv;for(var a=a.split(" "),b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));for(var i=0;""===a[b];)b++;(d=a[b++])&&(i=parseFloat(d));return new H(c,e,g,i)}return new H};var dc;H.stringify=dc=function(a){return a instanceof H?fc(a)?a.x.toString()+" "+a.y.toString()+" "+a.offsetX.toString()+" "+a.offsetY.toString():a.toString():a.toString()};
H.prototype.toString=function(){return fc(this)?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.u(v.NONE)?"None":this.u(v.Lv)?"TopLeft":this.u(v.lo)?"Top":this.u(v.Nv)?"TopRight":this.u(v.jo)?"Left":this.u(v.Bv)?"Center":this.u(v.ko)?"Right":this.u(v.wv)?"BottomLeft":this.u(v.io)?"Bottom":this.u(v.yv)?"BottomRight":this.u(v.Pv)?"TopSide":this.u(v.Ev)?"LeftSide":this.u(v.Jv)?"RightSide":this.u(v.Av)?"BottomSide":
this.u(v.Kv)?"TopBottomSides":this.u(v.Dv)?"LeftRightSides":this.u(v.Mv)?"TopLeftSides":this.u(v.Ov)?"TopRightSides":this.u(v.xv)?"BottomLeftSides":this.u(v.zv)?"BottomRightSides":this.u(v.Iv)?"NotTopSide":this.u(v.Gv)?"NotLeftSide":this.u(v.Hv)?"NotRightSide":this.u(v.Fv)?"NotBottomSide":this.u(v.vv)?"AllSides":this.u(v.Cv)?"Default":"None"};
H.prototype.equals=H.prototype.u=function(a){return!(a instanceof H)?p:(this.x===a.x||isNaN(this.x)&&isNaN(a.x))&&(this.y===a.y||isNaN(this.y)&&isNaN(a.y))&&this.offsetX===a.offsetX&&this.offsetY===a.offsetY};H.prototype.opposite=H.prototype.NJ=function(){return new H(0.5-(this.x-0.5),0.5-(this.y-0.5),-this.offsetX,-this.offsetY)};H.prototype.includesSide=H.prototype.dJ=function(a){if(!gc(this)||!gc(a))return p;a=a.offsetY;return(this.offsetY&a)===a};
function fc(a){return!isNaN(a.x)&&!isNaN(a.y)}function hc(a){return isNaN(a.x)||isNaN(a.y)}function gc(a){return hc(a)&&1===a.offsetX&&0!==a.offsetY}function ic(a){return isNaN(a.x)&&isNaN(a.y)&&-1===a.offsetX&&0===a.offsetY}v.Tc=1;v.Bc=2;v.Mc=4;v.Lc=8;v.NONE=Zb(new H(0,0,0,0),0).Ja();v.Cv=Zb(new H(0,0,-1,0),-1).Ja();v.Lv=(new H(0,0,0,0)).Ja();v.lo=(new H(0.5,0,0,0)).Ja();v.Nv=(new H(1,0,0,0)).Ja();v.jo=(new H(0,0.5,0,0)).Ja();v.Bv=(new H(0.5,0.5,0,0)).Ja();v.ko=(new H(1,0.5,0,0)).Ja();
v.wv=(new H(0,1,0,0)).Ja();v.io=(new H(0.5,1,0,0)).Ja();v.yv=(new H(1,1,0,0)).Ja();v.Pv=Zb(new H(0,0,1,v.Tc),1).Ja();v.Ev=Zb(new H(0,0,1,v.Bc),1).Ja();v.Jv=Zb(new H(0,0,1,v.Mc),1).Ja();v.Av=Zb(new H(0,0,1,v.Lc),1).Ja();v.Kv=Zb(new H(0,0,1,v.Tc|v.Lc),1).Ja();v.Dv=Zb(new H(0,0,1,v.Bc|v.Mc),1).Ja();v.Mv=Zb(new H(0,0,1,v.Tc|v.Bc),1).Ja();v.Ov=Zb(new H(0,0,1,v.Tc|v.Mc),1).Ja();v.xv=Zb(new H(0,0,1,v.Lc|v.Bc),1).Ja();v.zv=Zb(new H(0,0,1,v.Lc|v.Mc),1).Ja();v.Iv=Zb(new H(0,0,1,v.Bc|v.Mc|v.Lc),1).Ja();
v.Gv=Zb(new H(0,0,1,v.Tc|v.Mc|v.Lc),1).Ja();v.Hv=Zb(new H(0,0,1,v.Tc|v.Bc|v.Lc),1).Ja();v.Fv=Zb(new H(0,0,1,v.Tc|v.Bc|v.Mc),1).Ja();v.vv=Zb(new H(0,0,1,v.Tc|v.Bc|v.Mc|v.Lc),1).Ja();var lc;H.None=lc=v.NONE;var mc;H.Default=mc=v.Cv;var pc;H.TopLeft=pc=v.Lv;var qc;H.TopCenter=qc=v.lo;var rc;H.TopRight=rc=v.Nv;H.LeftCenter=v.jo;var sc;H.Center=sc=v.Bv;H.RightCenter=v.ko;var xc;H.BottomLeft=xc=v.wv;var yc;H.BottomCenter=yc=v.io;var zc;H.BottomRight=zc=v.yv;var Ac;H.MiddleTop=Ac=v.lo;var Ec;
H.MiddleLeft=Ec=v.jo;var Fc;H.MiddleRight=Fc=v.ko;var Gc;H.MiddleBottom=Gc=v.io;H.Top=v.lo;H.Left=v.jo;H.Right=v.ko;H.Bottom=v.io;var Hc;H.TopSide=Hc=v.Pv;var Ic;H.LeftSide=Ic=v.Ev;var Oc;H.RightSide=Oc=v.Jv;var Pc;H.BottomSide=Pc=v.Av;H.TopBottomSides=v.Kv;H.LeftRightSides=v.Dv;H.TopLeftSides=v.Mv;H.TopRightSides=v.Ov;H.BottomLeftSides=v.xv;H.BottomRightSides=v.zv;H.NotTopSide=v.Iv;H.NotLeftSide=v.Gv;H.NotRightSide=v.Hv;H.NotBottomSide=v.Fv;var Qc;H.AllSides=Qc=v.vv;
var Rc=4*((Math.sqrt(2)-1)/3),Wc=(new C(0,0)).Ja(),Xc=(new yb(Infinity,Infinity)).Ja(),Yc=(new C(-Infinity,-Infinity)).Ja(),Zc=(new C(Infinity,Infinity)).Ja(),fd=(new yb(0,0)).Ja(),gd=(new C(NaN,NaN)).Ja();function ib(a,b){var c=a-b;return 0.5>c&&-0.5<c}function gb(a,b){var c=a-b;return 5E-8>c&&-5E-8<c}
function hd(a,b,c,d,e,g,i){0>=e&&(e=1E-6);var j,k,l,n;a<c?(k=a,j=c):(k=c,j=a);b<d?(n=b,l=d):(n=d,l=b);if(a===c)return n<=i&&i<=l&&a-e<=g&&g<=a+e;if(b===d)return k<=g&&g<=j&&b-e<=i&&i<=b+e;j+=e;k-=e;if(k<=g&&g<=j&&(l+=e,n-=e,n<=i&&i<=l))if(j-k>l-n)if(a-c>e||c-a>e){if(g=(d-b)/(c-a)*(g-a)+b,g-e<=i&&i<=g+e)return h}else return h;else if(b-d>e||d-b>e){if(i=(c-a)/(d-b)*(i-b)+a,i-e<=g&&g<=i+e)return h}else return h;return p}
function id(a,b,c,d,e,g,i,j,k,l,n){if(!hd(a,b,i,j,k,c,d)||!hd(a,b,i,j,k,e,g)){var r=(a+c)/2,q=(b+d)/2,u=(c+e)/2,x=(d+g)/2,e=(e+i)/2,g=(g+j)/2,d=(r+u)/2,c=(q+x)/2,u=(u+e)/2,x=(x+g)/2,z=(d+u)/2,D=(c+x)/2;return id(a,b,r,q,d,c,z,D,k,l,n)||id(z,D,u,x,e,g,i,j,k,l,n)}return hd(a,b,i,j,k,l,n)}
function jd(a,b,c,d,e,g,i,j,k,l){if(!hd(a,b,i,j,k,c,d)||!hd(a,b,i,j,k,e,g)){var n=(a+c)/2,r=(b+d)/2,q=(c+e)/2,u=(d+g)/2,e=(e+i)/2,g=(g+j)/2,d=(n+q)/2,c=(r+u)/2,q=(q+e)/2,u=(u+g)/2,x=(d+q)/2,z=(c+u)/2;jd(a,b,n,r,d,c,x,z,k,l);jd(x,z,q,u,e,g,i,j,k,l)}else Db(l,a,b,0,0),Db(l,i,j,0,0)}function kd(a,b,c,d,e,g,i,j,k){if(hd(a,b,e,g,i,c,d))return hd(a,b,e,g,i,j,k);var l=(a+c)/2,n=(b+d)/2,c=(c+e)/2,d=(d+g)/2,r=(l+c)/2,q=(n+d)/2;return kd(a,b,l,n,r,q,i,j,k)||kd(r,q,c,d,e,g,i,j,k)}
function ld(a,b,c,d,e,g,i,j){if(hd(a,b,e,g,i,c,d))Db(j,a,b,0,0),Db(j,e,g,0,0);else{var k=(a+c)/2,l=(b+d)/2,c=(c+e)/2,d=(d+g)/2,n=(k+c)/2,r=(l+d)/2;ld(a,b,k,l,n,r,i,j);ld(n,r,c,d,e,g,i,j)}}
function sd(a,b,c,d,e,g,i,j,k,l,n,r,q,u){0>=q&&(q=1E-6);if(!hd(a,b,i,j,q,c,d)||!hd(a,b,i,j,q,e,g)){var x=(a+c)/2,z=(b+d)/2,c=(c+e)/2,d=(d+g)/2,e=(e+i)/2,g=(g+j)/2,D=(x+c)/2,F=(z+d)/2,c=(c+e)/2,d=(d+g)/2,G=(D+c)/2,I=(F+d)/2,M=(n-k)*(n-k)+(r-l)*(r-l),T=p;sd(a,b,x,z,D,F,G,I,k,l,n,r,q,u)&&(a=(u.x-k)*(u.x-k)+(u.y-l)*(u.y-l),a<M&&(M=a,T=h));b=u.x;x=u.y;sd(G,I,c,d,e,g,i,j,k,l,n,r,q,u)&&(a=(u.x-k)*(u.x-k)+(u.y-l)*(u.y-l),a<M?T=h:(u.x=b,u.y=x));return T}x=(a-i)*(l-r)-(b-j)*(k-n);if(!x)return p;q=((a*j-b*i)*
(k-n)-(a-i)*(k*r-l*n))/x;x=((a*j-b*i)*(l-r)-(b-j)*(k*r-l*n))/x;if((k>n?k-n:n-k)<(l>r?l-r:r-l)){if(b<j?(k=b,i=j):(k=j,i=b),x<k||x>i)return p}else if(a<i?k=a:(k=i,i=a),q<k||q>i)return p;u.x=q;u.y=x;return h}
function td(a,b,c,d,e,g,i,j,k,l,n,r,q){var u=0;0>=q&&(q=1E-6);if(!hd(a,b,i,j,q,c,d)||!hd(a,b,i,j,q,e,g))var x=(a+c)/2,z=(b+d)/2,D=(c+e)/2,F=(d+g)/2,e=(e+i)/2,g=(g+j)/2,d=(x+D)/2,c=(z+F)/2,D=(D+e)/2,F=(F+g)/2,G=(d+D)/2,I=(c+F)/2,u=u+td(a,b,x,z,d,c,G,I,k,l,n,r,q),u=u+td(G,I,D,F,e,g,i,j,k,l,n,r,q);else{q=(a-i)*(l-r)-(b-j)*(k-n);if(!q)return u;x=((a*j-b*i)*(k-n)-(a-i)*(k*r-l*n))/q;z=((a*j-b*i)*(l-r)-(b-j)*(k*r-l*n))/q;if(x>=n)return u;if((k>n?k-n:n-k)<(l>r?l-r:r-l)){if(b<j?(k=b,a=j):(k=j,a=b),z<k||z>
a)return u}else if(a<i?(k=a,a=i):k=i,x<k||x>a)return u;0<q?u++:0>q&&u--}return u}function ud(a,b,c,d,e,g,i){if(gb(a,c)){var j;b<d?(j=b,c=d):(j=d,c=b);d=g;if(d<j)return i.x=a,i.y=j,p;if(d>c)return i.x=a,i.y=c,p;i.x=a;i.y=d;return h}if(gb(b,d)){a<c?j=a:(j=c,c=a);d=e;if(d<j)return i.x=j,i.y=b,p;if(d>c)return i.x=c,i.y=b,p;i.x=d;i.y=b;return h}j=((a-e)*(a-c)+(b-g)*(b-d))/((c-a)*(c-a)+(d-b)*(d-b));if(-5E-6>j)return i.x=a,i.y=b,p;if(1.000005<j)return i.x=c,i.y=d,p;i.x=a+j*(c-a);i.y=b+j*(d-b);return h}
function vd(a,b,c,d,e,g,i,j,k){if(ib(a,c)&&ib(b,d))return k.x=a,k.y=b,p;if(gb(e,i)){if(gb(a,c))return ud(a,b,c,d,e,g,k),p;g=(d-b)/(c-a)*(e-a)+b;return ud(a,b,c,d,e,g,k)}j=(j-g)/(i-e);if(gb(a,c)){g=j*(a-e)+g;b<d?(i=b,c=d):(i=d,c=b);if(g<i)return k.x=a,k.y=i,p;if(g>c)return k.x=a,k.y=c,p;k.x=a;k.y=g;return h}i=(d-b)/(c-a);if(gb(j,i))return ud(a,b,c,d,e,g,k),p;e=(i*a-j*e+g-b)/(i-j);if(gb(i,0)){a<c?i=a:(i=c,c=a);if(e<i)return k.x=i,k.y=b,p;if(e>c)return k.x=c,k.y=b,p;k.x=e;k.y=b;return h}g=i*(e-a)+b;
return ud(a,b,c,d,e,g,k)}
function wd(a,b,c,d,e,g,i,j,k){function l(c,d){var e=(c-a)*(c-a)+(d-b)*(d-b);e<n&&(n=e,k.x=c,k.y=d)}var n=Infinity;l(k.x,k.y);var r,q,u,x;e<i?(r=e,q=i):(r=i,q=e);g<j?(u=e,x=i):(u=i,x=e);r=(q-r)/2+0;u=(x-u)/2+0;e=(e+i)/2;g=(g+j)/2;0===r||0===u||(0.5>(c>a?c-a:a-c)?(r=1-(c-e)*(c-e)/(r*r),0>r||(r=Math.sqrt(r),d=-u*r+g,l(c,u*r+g),l(c,d))):(c=(d-b)/(c-a),d=1/(r*r)+c*c/(u*u),j=2*c*(b-c*a)/(u*u)-2*c*g/(u*u)-2*e/(r*r),u=j*j-4*d*(2*c*a*g/(u*u)-2*b*g/(u*u)+g*g/(u*u)+e*e/(r*r)-1+(b-c*a)*(b-c*a)/(u*u)),0>u||(r=
Math.sqrt(u),u=(-j+r)/(2*d),l(u,c*u-c*a+b),u=(-j-r)/(2*d),l(u,c*u-c*a+b))))}
function xd(a,b,c,d){var e=a.left,g=a.right,i=a.top,a=a.bottom,j=b.x,b=b.y,k=c.x,c=c.y,l=1E21,n=e,r=i;if(vd(e,i,e,a,j,b,k,c,d)){var q=(d.x-j)*(d.x-j)+(d.y-b)*(d.y-b);q<l&&(l=q,n=d.x,r=d.y)}vd(g,i,g,a,j,b,k,c,d)&&(q=(d.x-j)*(d.x-j)+(d.y-b)*(d.y-b),q<l&&(l=q,n=d.x,r=d.y));vd(e,i,g,i,j,b,k,c,d)&&(q=(d.x-j)*(d.x-j)+(d.y-b)*(d.y-b),q<l&&(l=q,n=d.x,r=d.y));vd(e,a,g,a,j,b,k,c,d)&&(q=(d.x-j)*(d.x-j)+(d.y-b)*(d.y-b),q<l&&(l=q,n=d.x,r=d.y));d.x=n;d.y=r;return 1E21>l}
function Bd(a,b,c){var d=b.x,e=b.y,g=c.x,i=c.y,j=a.left,k=a.right,l=a.top,n=a.bottom;return d===g?(e<i?(a=e,g=i):(a=i,g=e),j<=d&&d<=k&&a<=n&&g>=l):e===i?(d<g?a=d:(a=g,g=d),l<=e&&e<=n&&a<=k&&g>=j):a.fa(b)||a.fa(c)||Cd(j,l,k,l,d,e,g,i)||Cd(k,l,k,n,d,e,g,i)||Cd(k,n,j,n,d,e,g,i)||Cd(j,n,j,l,d,e,g,i)?h:p}function Cd(a,b,c,d,e,g,i,j){return 0>=Dd(a,b,c,d,e,g)*Dd(a,b,c,d,i,j)&&0>=Dd(e,g,i,j,a,b)*Dd(e,g,i,j,c,d)}
function Dd(a,b,c,d,e,g){c-=a;d-=b;a=e-a;b=g-b;g=a*d-b*c;0===g&&(g=a*c+b*d,0<g&&(g=(a-c)*c+(b-d)*d,0>g&&(g=0)));return 0>g?-1:0<g?1:0}function Ed(a){0>a&&(a+=360);360<=a&&(a-=360);return a}function Fd(a,b,c,d,e,g){var c=Math.floor((a-c)/e)*e+c,d=Math.floor((b-d)/g)*g+d,i=c;c+e-a<e/2&&(i=c+e);a=d;d+g-b<g/2&&(a=d+g);return new C(i,a)}function Gd(a,b){var c=Math.max(a,b),d=Math.min(a,b),e=1,g=1;do e=c%d,c=g=d,d=e;while(0<e);return g}
function Kd(a){v.Mb(this);a===f?a=Ld:t&&v.Ua(a,Kd,Kd,"constructor:type");this.K=a;this.Nc=this.Dc=this.bc=this.Pb=0;this.Lk=new y(Md);this.Ns=this.Lk.Wb;this.Bs=(new E).freeze();this.Ha=h;this.cH=new C;this.Ih=pc;this.Jh=zc;this.Us=this.Vs=NaN;this.vd=fd;this.Nb=Nd}v.H("Geometry",Kd);
Kd.prototype.copy=Kd.prototype.copy=function(){var a=new Kd;a.K=this.K;a.Pb=this.Pb;a.bc=this.bc;a.Dc=this.Dc;a.Nc=this.Nc;for(var b=this.Lk,c=b.length,d=a.Lk,e=0;e<c;e++){var g=b.i[e].copy();d.add(g)}a.Ns=this.Ns;a.Bs.Ra(this.Bs);a.Ha=this.Ha;a.Ih=this.Ih.B();a.Jh=this.Jh.B();a.Vs=this.Vs;a.Us=this.Us;a.vd=this.vd.B();a.Nb=this.Nb;return a};var Od;Kd.Line=Od=v.l(Kd,"Line",0);var Vd;Kd.Rectangle=Vd=v.l(Kd,"Rectangle",1);var Zd;Kd.Ellipse=Zd=v.l(Kd,"Ellipse",2);var Ld;Kd.Path=Ld=v.l(Kd,"Path",3);
Kd.prototype.Ja=function(){this.freeze();Object.freeze(this);return this};Kd.prototype.freeze=function(){this.La=h;var a=this.Ib;a.freeze();for(var b=a.length,c=0;c<b;c++)a.i[c].freeze();return this};Kd.prototype.qa=function(){Object.isFrozen(this)&&v.g("cannot thaw constant: "+this);this.La=p;var a=this.Ib;a.qa();for(var b=a.length,c=0;c<b;c++)a.i[c].qa();return this};
Kd.prototype.equalsApprox=Kd.prototype.Pi=function(a){if(!(a instanceof Kd))return p;if(this.type!==a.type)return this.type===Od&&a.type===Ld?$d(this,a):a.type===Od&&this.type===Ld?$d(a,this):p;if(this.type===Ld){var b=this.Ib,a=a.Ib,c=b.length;if(c!==a.length)return p;for(var d=0;d<c;d++)if(!b.i[d].Pi(a.i[d]))return p;return h}return ib(this.Ba,a.Ba)&&ib(this.Ca,a.Ca)&&ib(this.N,a.N)&&ib(this.O,a.O)};
function $d(a,b){if(a.type!==Od||b.type!==Ld)return p;if(1===b.Ib.count){var c=b.Ib.Z(0);if(1===c.gb.count&&(ib(a.Ba,c.Ba)&&ib(a.Ca,c.Ca))&&(c=c.gb.Z(0),c.type===ae&&ib(a.N,c.N)&&ib(a.O,c.O)))return h}return p}
Kd.prototype.toString=function(a){switch(this.type){case Od:return"M"+this.Ba.toFixed(a)+" "+this.Ca.toFixed(a)+"L"+this.N.toFixed(a)+" "+this.O.toFixed(a);case Vd:var b=new E(this.Ba,this.Ca,0,0);Db(b,this.N,this.O,0,0);return"M"+b.x.toFixed(a)+" "+b.y.toFixed(a)+"H"+b.right.toFixed(a)+"V"+b.bottom.toFixed(a)+"H"+b.left.toFixed(a)+"z";case Zd:b=new E(this.Ba,this.Ca,0,0);Db(b,this.N,this.O,0,0);var c=b.left.toFixed(a)+" "+(b.y+b.height/2).toFixed(a);return"M"+c+"A"+(b.width/2).toFixed(a)+" "+(b.height/
2).toFixed(a)+" 0 0 1 "+(b.right.toFixed(a)+" "+(b.y+b.height/2).toFixed(a))+"A"+(b.width/2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+c;case Ld:for(var b="",c=this.Ib,d=c.length,e=0;e<d;e++){var g=c.i[e];0<e&&(b+=" ");b+=g.toString(a)}return b;default:return this.type.toString()}};var be;
Kd.parse=be=function(a,b){function c(){return l>=x-1?h:k[l+1].match(/[A-Za-z]/)!==m}function d(){l++;return k[l]}function e(){var a=new C(parseFloat(d()),parseFloat(d()));n===n.toLowerCase()&&(a.x=u.x+a.x,a.y=u.y+a.y);return a}function g(){return u=e()}function i(){return q=e()}function j(){return"c"!==r.toLowerCase()&&"s"!==r.toLowerCase()?u:new C(2*u.x-q.x,2*u.y-q.y)}b===f&&(b=h);var a=a.replace(/,/gm," "),a=a.replace(/([MmZzLlHhVvCcSsQqTtAaFf])([MmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),a=a.replace(/([MmZzLlHhVvCcSsQqTtAaFf])([MmZzLlHhVvCcSsQqTtAaFf])/gm,
"$1 $2"),a=a.replace(/([MmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm,"$1 $2"),a=a.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),a=a.replace(/([0-9])([+\-])/gm,"$1 $2"),a=a.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),a=a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),a=a.replace(/[\s\r\t\n]+/gm," "),a=a.replace(/^\s+|\s+$/g,""),k=a.split(" "),l=-1,n="",r="";new C(0,0);for(var q=new C(0,0),u=new C(0,0),x=k.length,z=new J,D;!(l>=x-1);)if(r=n,n=d(),""!==n)switch(n.toUpperCase()){case "M":D=g();
for(z.ec===m?K(z,D.x,D.y,p,p):z.moveTo(D.x,D.y);!c();)D=g(),z.lineTo(D.x,D.y);break;case "L":for(;!c();)D=g(),z.lineTo(D.x,D.y);break;case "H":for(;!c();)u=D=new C((n===n.toLowerCase()?u.x:0)+parseFloat(d()),u.y),z.lineTo(u.x,u.y);break;case "V":for(;!c();)u=D=new C(u.x,(n===n.toLowerCase()?u.y:0)+parseFloat(d())),z.lineTo(u.x,u.y);break;case "C":for(;!c();){D=e();var F=i(),G=g();L(z,D.x,D.y,F.x,F.y,G.x,G.y)}break;case "S":for(;!c();)D=j(),F=i(),G=g(),L(z,D.x,D.y,F.x,F.y,G.x,G.y);break;case "Q":for(;!c();)F=
i(),G=g(),ce(z,F.x,F.y,G.x,G.y);break;case "T":for(;!c();)q=F=j(),G=g(),ce(z,F.x,F.y,G.x,G.y);break;case "B":for(;!c();)D=[parseFloat(d()),parseFloat(d()),parseFloat(d()),parseFloat(d()),parseFloat(d())],c()||(D.push(parseFloat(d())),c()||D.push(parseFloat(d()))),n===n.toLowerCase()&&(D[2]+=u.x,D[3]+=u.y),z.arcTo(D[0],D[1],D[2],D[3],D[4],D[5],D[6]);break;case "Z":N(z);break;case "F":b=h}z=z.k;if(b)for(D=z.Ib.f;D.next();)D.value.Fr=h;return z};
Kd.prototype.qy=function(){if(this.Ha)return h;var a=this.Ib;if(this.Ns!==a.Wb)return h;for(var b=a.length,c=0;c<b;c++)if(a.i[c].qy())return h;return p};Kd.prototype.iz=function(){this.Ha=p;var a=this.Ib;this.Ns=a.Wb;for(var b=a.length,c=0;c<b;c++)a.i[c].iz()};
Kd.prototype.Ke=function(){var a=this.Bs;a.qa();a.reset();a.HG(this.vd);switch(this.type){case Od:case Vd:case Zd:Db(a,this.Pb,this.bc,0,0);Db(a,this.Dc,this.Nc,0,0);break;case Ld:for(var b=this.Ib,c=b.length,d=0;d<c;d++){var e=b.i[d];Db(a,e.Ba,e.Ca,0,0);for(var g=e.gb,i=g.length,j=e.Ba,e=e.Ca,k=0;k<i;k++){var l=g.i[k];switch(l.type){case ae:case de:j=l.N;e=l.O;Db(a,j,e,0,0);break;case me:jd(j,e,l.zc,l.qd,l.pk,l.qk,l.N,l.O,0.5,a);j=l.N;e=l.O;break;case ne:ld(j,e,l.zc,l.qd,l.N,l.O,0.5,a);j=l.N;e=l.O;
break;case oe:for(var l=pe(l),n=l.length,r=m,d=0;d<n;d++)r=l[d],jd(r.Sl,r.Tl,r.rv,r.tv,r.sv,r.uv,r.xk,r.yk,0.5,a);r!==m&&(j=r.xk,e=r.yk);break;default:v.g("Unknown Segment type: "+l.type)}}}break;default:v.g("Unknown Geometry type: "+this.type)}Db(a,0,0,0,0);a.freeze()};
Kd.prototype.fa=function(a,b,c,d){for(var e=a.x,g=a.y,i=this.lb.x-20,a=a.y,j=0,k,l,n,r,q,u,x,z=this.Ib.i,D=z.length,F=0;F<D;F++){var G=z[F];if(G.Fr){if(c&&G.fa(e,g,b))return h;var I=G.gb;k=G.Ba;l=G.Ca;for(var M=k,T=l,pa=0;pa<=I.length;pa++){pa!==I.length?(n=I.i[pa],r=n.type,u=n.N,x=n.O):(r=ae,u=G.Ba,x=G.Ca);switch(r){case de:q=qe(e,g,i,a,k,l,M,T);if(q===h)return h;j+=q;M=u;T=x;break;case ae:q=qe(e,g,i,a,k,l,u,x);if(q===h)return h;j+=q;break;case me:q=td(k,l,n.zc,n.qd,n.pk,n.qk,u,x,i,a,e,g,0.5);j+=
q;break;case ne:q=td(k,l,(k+2*n.zc)/3,(l+2*n.qd)/3,(n.zc+2*u)/3,(n.zc+2*u)/3,u,x,i,a,e,g,0.5);j+=q;break;case oe:r=pe(n);for(var ea=r.length,Aa=m,ta=0;ta<ea;ta++){Aa=r[ta];if(0===ta){q=qe(e,g,i,a,k,l,Aa.Sl,Aa.Tl);if(q===h)return h;j+=q}q=td(Aa.Sl,Aa.Tl,Aa.rv,Aa.tv,Aa.sv,Aa.uv,Aa.xk,Aa.yk,i,a,e,g,0.5);j+=q}Aa!==m&&(u=Aa.xk,x=Aa.yk);break;default:v.g("Unknown Segment type: "+n.type)}k=u;l=x}if(0!==j)return h;j=0}else if(G.fa(e,g,d?b:b+2))return h}return 0!==j};
function qe(a,b,c,d,e,g,i,j){if(hd(e,g,i,j,0.05,a,b))return h;var k=(a-c)*(g-j);if(0===k)return 0;var l=((a*d-b*c)*(e-i)-(a-c)*(e*j-g*i))/k,b=(a*d-b*c)*(g-j)/k;if(l>=a)return 0;if((e>i?e-i:i-e)<(g>j?g-j:j-g)){if(g<j?(a=g,e=j):(a=j,e=g),b<a||b>e)return 0}else if(e<i?(a=e,e=i):a=i,l<a||l>e)return 0;return 0<k?1:-1}function ze(a,b,c,d){for(var e=a.Ib.length,g=0;g<e;g++)if(a.Ib.i[g].fa(b,c,d))return h;return p}v.a(Kd,"type",Kd.prototype.type);
v.defineProperty(Kd,{type:"type"},s("K"),function(a){this.K!==a&&(t&&v.Ua(a,Kd,Kd,"type"),v.v(this,a),this.K=a,this.Ha=h)});v.a(Kd,"startX",Kd.prototype.Ba);v.defineProperty(Kd,{Ba:"startX"},s("Pb"),function(a){this.Pb!==a&&(t&&v.j(a,Kd,"startX"),v.v(this,a),this.Pb=a,this.Ha=h)});v.a(Kd,"startY",Kd.prototype.Ca);v.defineProperty(Kd,{Ca:"startY"},s("bc"),function(a){this.bc!==a&&(t&&v.j(a,Kd,"startY"),v.v(this,a),this.bc=a,this.Ha=h)});v.a(Kd,"endX",Kd.prototype.N);
v.defineProperty(Kd,{N:"endX"},s("Dc"),function(a){this.Dc!==a&&(t&&v.j(a,Kd,"endX"),v.v(this,a),this.Dc=a,this.Ha=h)});v.a(Kd,"endY",Kd.prototype.O);v.defineProperty(Kd,{O:"endY"},s("Nc"),function(a){this.Nc!==a&&(t&&v.j(a,Kd,"endY"),v.v(this,a),this.Nc=a,this.Ha=h)});v.a(Kd,"figures",Kd.prototype.Ib);v.defineProperty(Kd,{Ib:"figures"},s("Lk"),function(a){this.Lk!==a&&(t&&v.c(a,y,Kd,"figures"),v.v(this,a),this.Lk=a,this.Ha=h)});
v.defineProperty(Kd,{n:"spot1"},s("Ih"),function(a){t&&v.c(a,H,Kd,"spot1");v.v(this,a);this.Ih=a.B()});v.defineProperty(Kd,{o:"spot2"},s("Jh"),function(a){t&&v.c(a,H,Kd,"spot2");v.v(this,a);this.Jh=a.B()});v.m(Kd,{lb:"bounds"},function(){this.qy()&&(this.iz(),this.Ke());return this.Bs});v.a(Kd,"minSize",Kd.prototype.Wd);
v.defineProperty(Kd,{Wd:"minSize"},s("vd"),function(a){this.vd.u(a)||(t&&v.c(a,yb,Kd,"minSize"),a=a.B(),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),a.freeze(),this.vd=a)});function Md(a,b,c){v.Mb(this);c===f&&(c=h);this.np=c;this.Qf=h;this.Zs=p;a!==f?(t&&v.j(a,Md,"sx"),this.Pb=a):this.Pb=0;b!==f?(t&&v.j(b,Md,"sy"),this.bc=b):this.bc=0;this.zq=new y(Ae);this.Ot=this.zq.Wb;this.Ha=h}v.H("PathFigure",Md);
Md.prototype.copy=Md.prototype.copy=function(){var a=new Md;a.np=this.np;a.Qf=this.Qf;a.Zs=this.Zs;a.Pb=this.Pb;a.bc=this.bc;for(var b=this.zq,c=b.length,d=a.zq,e=0;e<c;e++){var g=b.i[e].copy();d.add(g)}a.Ot=this.Ot;a.Ha=this.Ha;return a};Md.prototype.equalsApprox=Md.prototype.Pi=function(a){if(!(a instanceof Md)||this.ty!==a.ty||!ib(this.Ba,a.Ba)||!ib(this.Ca,a.Ca))return p;var b=this.gb,a=a.gb,c=b.length;if(c!==a.length)return p;for(var d=0;d<c;d++)if(!b.i[d].Pi(a.i[d]))return p;return h};fa=Md.prototype;
fa.toString=function(a){for(var b="M"+this.Ba.toFixed(a)+" "+this.Ca.toFixed(a),c=this.gb,d=c.length,e=0;e<d;e++)b+=" "+c.i[e].toString(a);this.Fr&&(b+="\t");return b};fa.freeze=function(){this.La=h;var a=this.gb;a.freeze();for(var b=a.length,c=0;c<b;c++)a.i[c].freeze();return this};fa.qa=function(){this.La=p;var a=this.gb;a.qa();for(var b=a.length,c=0;c<b;c++)a.i[c].qa();return this};
fa.qy=function(){if(this.Ha)return h;var a=this.gb;if(this.Ot!==a.Wb)return h;for(var b=a.length,c=0;c<b;c++)if(a.i[c].Ha)return h;return p};fa.iz=function(){this.Ha=p;var a=this.gb;this.Ot=a.Wb;for(var b=a.length,c=0;c<b;c++)a.i[c].Ha=p};v.a(Md,"isFilled",Md.prototype.Fr);v.defineProperty(Md,{Fr:"isFilled"},s("np"),function(a){t&&v.e(a,"boolean",Md,"isFilled");v.v(this,a);this.np=a});v.a(Md,"isShadowed",Md.prototype.Dl);
v.defineProperty(Md,{Dl:"isShadowed"},s("Qf"),function(a){t&&v.e(a,"boolean",Md,"isShadowed");v.v(this,a);this.Qf=a});v.a(Md,"isSubPath",Md.prototype.ty);v.defineProperty(Md,{ty:"isSubPath"},s("Zs"),function(a){t&&v.e(a,"boolean",Md,"isSubPath");v.v(this,a);this.Zs=a});v.a(Md,"startX",Md.prototype.Ba);v.defineProperty(Md,{Ba:"startX"},s("Pb"),function(a){t&&v.j(a,Md,"startX");v.v(this,a);this.Pb=a;this.Ha=h});v.a(Md,"startY",Md.prototype.Ca);
v.defineProperty(Md,{Ca:"startY"},s("bc"),function(a){t&&v.j(a,Md,"startY");v.v(this,a);this.bc=a;this.Ha=h});v.a(Md,"segments",Md.prototype.gb);v.defineProperty(Md,{gb:"segments"},s("zq"),function(a){t&&v.c(a,y,Md,"segments");v.v(this,a);this.zq=a;this.Ha=h});
Md.prototype.fa=function(a,b,c){for(var d=this.Ba,e=this.Ca,g=d,i=e,j=this.gb.i,k=j.length,l=0;l<k;l++){var n=j[l];switch(n.type){case de:g=n.N;i=n.O;break;case ae:if(hd(d,e,n.N,n.O,c,a,b))return h;break;case me:if(id(d,e,n.zc,n.qd,n.pk,n.qk,n.N,n.O,c,a,b))return h;break;case ne:if(kd(d,e,n.zc,n.qd,n.N,n.O,c,a,b))return h;break;case oe:for(var r=pe(n),q=r.length,u=m,x=0;x<q;x++)if(u=r[x],0===x&&hd(d,e,u.Sl,u.Tl,c,a,b)||id(u.Sl,u.Tl,u.rv,u.tv,u.sv,u.uv,u.xk,u.yk,c,a,b))return h;u!==m&&(n.N=u.xk,n.O=
u.yk);break;default:v.g("Unknown Segment type: "+n.type)}d=n.N;e=n.O;if(n.ri&&(d!==g||e!==i)&&hd(d,e,g,i,c,a,b))return h}return p};
function Ae(a,b,c,d,e,g,i){v.Mb(this);a===f?a=ae:t&&v.Ua(a,Ae,Ae,"constructor:type");this.K=a;a===oe?(b!==f?(t&&v.j(b,Ae,"ex"),this.Kg=b):this.Kg=0,c!==f?(t&&v.j(c,Ae,"ey"),this.Mg=c):this.Mg=0,d!==f&&(t&&v.j(d,Ae,"x1"),this.am=d),e!==f&&(t&&v.j(e,Ae,"y1"),this.bm=e),g!==f&&(t&&v.j(g,Ae,"x2"),this.It=g),i!==f&&(t&&v.j(i,Ae,"y2"),this.Jt=i)):(b!==f?(t&&v.j(b,Ae,"ex"),this.cl=b):this.cl=0,c!==f?(t&&v.j(c,Ae,"ey"),this.dl=c):this.dl=0,d!==f&&(t&&v.j(d,Ae,"x1"),this.Sj=d),e!==f&&(t&&v.j(e,Ae,"y1"),this.Tj=
e),g!==f&&(t&&v.j(g,Ae,"x2"),this.al=g),i!==f&&(t&&v.j(i,Ae,"y2"),this.bl=i));this.Ha=h;this.ri=p}v.H("PathSegment",Ae);Ae.prototype.copy=Ae.prototype.copy=function(){var a=new Ae;a.K=this.K;this.K===oe?(a.Kg=this.Kg,a.Mg=this.Mg,a.am=this.am,a.bm=this.bm,a.It=this.It,a.Jt=this.Jt):(a.cl=this.cl,a.dl=this.dl,a.Sj=this.Sj,a.Tj=this.Tj,a.al=this.al,a.bl=this.bl);a.Ha=this.Ha;a.ri=this.ri;return a};
Ae.prototype.equalsApprox=Ae.prototype.Pi=function(a){if(!(a instanceof Ae)||this.type!==a.type||this.Nu!==a.Nu)return p;switch(this.type){case de:case ae:return ib(this.N,a.N)&&ib(this.O,a.O);case me:return ib(this.N,a.N)&&ib(this.O,a.O)&&ib(this.zc,a.zc)&&ib(this.qd,a.qd)&&ib(this.pk,a.pk)&&ib(this.qk,a.qk);case ne:return ib(this.N,a.N)&&ib(this.O,a.O)&&ib(this.zc,a.zc)&&ib(this.qd,a.qd);case oe:return ib(this.fi,a.fi)&&ib(this.cj,a.cj)&&ib(this.za,a.za)&&ib(this.Aa,a.Aa)&&ib(this.Il,a.Il)&&ib(this.Wn,
a.Wn);default:return p}};
Ae.prototype.toString=function(a){switch(this.type){case de:a="M"+this.N.toFixed(a)+" "+this.O.toFixed(a);break;case ae:a="L"+this.N.toFixed(a)+" "+this.O.toFixed(a);break;case me:a="C"+this.zc.toFixed(a)+" "+this.qd.toFixed(a)+" "+this.pk.toFixed(a)+" "+this.qk.toFixed(a)+" "+this.N.toFixed(a)+" "+this.O.toFixed(a);break;case ne:a="Q"+this.zc.toFixed(a)+" "+this.qd.toFixed(a)+" "+this.N.toFixed(a)+" "+this.O.toFixed(a);break;case oe:a="A";break;default:a=this.type.toString()}return a+(this.ri?"z":
"")};var de;Ae.Move=de=v.l(Ae,"Move",0);var ae;Ae.Line=ae=v.l(Ae,"Line",1);var me;Ae.Bezier=me=v.l(Ae,"Bezier",2);var ne;Ae.QuadraticBezier=ne=v.l(Ae,"QuadraticBezier",3);var oe;Ae.Arc=oe=v.l(Ae,"Arc",4);Ae.prototype.freeze=function(){this.La=h;return this};Ae.prototype.qa=function(){this.La=p;return this};Ae.prototype.close=Ae.prototype.close=function(){this.ri=h;return this};
function pe(a){if(a.Yv&&a.Ha===p)return a.Yv;for(var b=a.am,c=a.bm,d=a.Il,e=a.fi,g=a.fi+a.cj,i=Math.PI,e=e*(i/180),g=g*(i/180),j=e<g?1:-1,k=[],l=i/2,n=e,e=Math.min(2*i+1E-5,Math.abs(g-e));1E-5<e;){var g=n+j*Math.min(e,l),r=(g-n)/2,q=d*Math.cos(r),u=d*Math.sin(r),x=0.5522847498*Math.tan(r),i=q+x*u,q=-u+x*q,u=-q,x=r+n,r=Math.cos(x),x=Math.sin(x);k.push({Sl:b+d*Math.cos(n),Tl:c+d*Math.sin(n),rv:b+i*r-q*x,tv:c+i*x+q*r,sv:b+i*r-u*x,uv:c+i*x+u*r,xk:b+d*Math.cos(g),yk:c+d*Math.sin(g)});e-=Math.abs(g-n);
n=g}a.Yv=k;return a.Yv}v.a(Ae,"isClosed",Ae.prototype.Nu);v.defineProperty(Ae,{Nu:"isClosed"},s("ri"),function(a){this.ri!==a&&(this.ri=a,this.Ha=h)});v.a(Ae,"type",Ae.prototype.type);v.defineProperty(Ae,{type:"type"},s("K"),function(a){t&&v.Ua(a,Ae,Ae,"type");v.v(this,a);this.K=a;this.Ha=h});v.a(Ae,"endX",Ae.prototype.N);v.defineProperty(Ae,{N:"endX"},s("cl"),function(a){t&&v.j(a,Ae,"endX");v.v(this,a);this.cl=a;this.Ha=h});v.a(Ae,"endY",Ae.prototype.O);
v.defineProperty(Ae,{O:"endY"},s("dl"),function(a){t&&v.j(a,Ae,"endY");v.v(this,a);this.dl=a;this.Ha=h});v.defineProperty(Ae,{zc:"point1X"},s("Sj"),function(a){t&&v.j(a,Ae,"point1X");v.v(this,a);this.Sj=a;this.Ha=h});v.defineProperty(Ae,{qd:"point1Y"},s("Tj"),function(a){t&&v.j(a,Ae,"point1Y");v.v(this,a);this.Tj=a;this.Ha=h});v.defineProperty(Ae,{pk:"point2X"},s("al"),function(a){t&&v.j(a,Ae,"point2X");v.v(this,a);this.al=a;this.Ha=h});
v.defineProperty(Ae,{qk:"point2Y"},s("bl"),function(a){t&&v.j(a,Ae,"point2Y");v.v(this,a);this.bl=a;this.Ha=h});v.defineProperty(Ae,{za:"centerX"},s("am"),function(a){t&&v.j(a,Ae,"centerX");v.v(this,a);this.am=a;this.Ha=h});v.defineProperty(Ae,{Aa:"centerY"},s("bm"),function(a){t&&v.j(a,Ae,"centerY");v.v(this,a);this.bm=a;this.Ha=h});v.defineProperty(Ae,{Il:"radiusX"},s("It"),function(a){t&&v.j(a,Ae,"radiusX");v.v(this,a);this.It=a;this.Ha=h});
v.defineProperty(Ae,{Wn:"radiusY"},s("Jt"),function(a){t&&v.j(a,Ae,"radiusY");v.v(this,a);this.Jt=a;this.Ha=h});v.defineProperty(Ae,{fi:"startAngle"},s("Kg"),function(a){t&&v.j(a,Ae,"startAngle");v.v(this,a);this.Kg=a;this.Ha=h});v.defineProperty(Ae,{cj:"sweepAngle"},s("Mg"),function(a){t&&v.j(a,Ae,"sweepAngle");v.v(this,a);this.Mg=a;this.Ha=h});
function Be(){this.L=m;this.vx=(new C(0,0)).freeze();this.lw=(new C(0,0)).freeze();this.us=this.pt=0;this.bt="";this.Js=this.ys=0;this.ji=this.Ps=p;this.ni=m;this.bu=0;this.jf=this.Zt=m}v.H("InputEvent",Be);Be.prototype.copy=Be.prototype.copy=function(){var a=new Be;a.L=this.L;a.vx=this.gd.copy().freeze();a.lw=this.C.copy().freeze();a.pt=this.pt;a.us=this.us;a.bt=this.bt;a.ys=this.ys;a.Js=this.Js;a.Ps=this.Ps;a.ji=this.ji;a.ni=this.ni;a.bu=this.bu;a.Zt=this.Zt;a.jf=this.jf;return a};
Be.prototype.toString=function(){var a="^";this.fh&&(a+="M:"+this.fh);this.button&&(a+="B:"+this.button);this.key&&(a+="K:"+this.key);this.Je&&(a+="C:"+this.Je);this.Li&&(a+="D:"+this.Li);this.zd&&(a+="h");this.bubbles&&(a+="b");this.C!==m&&(a+="@"+this.C.toString());return a};v.a(Be,"diagram",Be.prototype.b);v.defineProperty(Be,{b:"diagram"},s("L"),ba("L"));v.a(Be,"viewPoint",Be.prototype.gd);v.defineProperty(Be,{gd:"viewPoint"},s("vx"),function(a){v.c(a,C,Be,"viewPoint");this.vx.Ra(a)});
v.a(Be,"documentPoint",Be.prototype.C);v.defineProperty(Be,{C:"documentPoint"},s("lw"),function(a){v.c(a,C,Be,"documentPoint");this.lw.Ra(a)});v.a(Be,"modifiers",Be.prototype.fh);v.defineProperty(Be,{fh:"modifiers"},s("pt"),ba("pt"));v.a(Be,"button",Be.prototype.button);v.defineProperty(Be,{button:"button"},s("us"),ba("us"));v.a(Be,"key",Be.prototype.key);v.defineProperty(Be,{key:"key"},s("bt"),ba("bt"));v.a(Be,"clickCount",Be.prototype.Je);v.defineProperty(Be,{Je:"clickCount"},s("ys"),ba("ys"));
v.a(Be,"delta",Be.prototype.Li);v.defineProperty(Be,{Li:"delta"},s("Js"),ba("Js"));v.a(Be,"handled",Be.prototype.zd);v.defineProperty(Be,{zd:"handled"},s("Ps"),ba("Ps"));v.a(Be,"bubbles",Be.prototype.bubbles);v.defineProperty(Be,{bubbles:"bubbles"},s("ji"),ba("ji"));v.a(Be,"event",Be.prototype.event);v.defineProperty(Be,{event:"event"},s("ni"),ba("ni"));v.a(Be,"timestamp",Be.prototype.timestamp);v.defineProperty(Be,{timestamp:"timestamp"},s("bu"),ba("bu"));v.a(Be,"targetDiagram",Be.prototype.Af);
v.defineProperty(Be,{Af:"targetDiagram"},s("Zt"),ba("Zt"));v.a(Be,"targetObject",Be.prototype.fd);v.defineProperty(Be,{fd:"targetObject"},s("jf"),ba("jf"));v.m(Be,{gk:"control"},function(){return 0!==(this.fh&1)});v.m(Be,{shift:"shift"},function(){return 0!==(this.fh&4)});v.m(Be,{alt:"alt"},function(){return 0!==(this.fh&2)});v.m(Be,{HJ:"meta"},function(){return 0!==(this.fh&8)});v.m(Be,{left:"left"},function(){return 0===this.button});v.m(Be,{IJ:"middle"},function(){return 1===this.button});
v.m(Be,{right:"right"},function(){return 2===this.button});function Ce(){this.L=m;this.ub="";this.Ct=this.Vt=m;this.vs=p}v.H("DiagramEvent",Ce);Ce.prototype.copy=Ce.prototype.copy=function(){var a=new Ce;a.L=this.L;a.ub=this.ub;a.Vt=this.Vt;a.Ct=this.Ct;a.vs=this.vs;return a};Ce.prototype.toString=function(){var a="*"+this.name;this.cancel&&(a+="x");this.jv!==m&&(a+=":"+this.jv.toString());this.Xu!==m&&(a+="("+this.Xu.toString()+")");return a};v.a(Ce,"diagram",Ce.prototype.b);
v.defineProperty(Ce,{b:"diagram"},s("L"),ba("L"));v.a(Ce,"name",Ce.prototype.name);v.defineProperty(Ce,{name:"name"},s("ub"),ba("ub"));v.a(Ce,"subject",Ce.prototype.jv);v.defineProperty(Ce,{jv:"subject"},s("Vt"),ba("Vt"));v.a(Ce,"parameter",Ce.prototype.Xu);v.defineProperty(Ce,{Xu:"parameter"},s("Ct"),ba("Ct"));v.a(Ce,"cancel",Ce.prototype.cancel);v.defineProperty(Ce,{cancel:"cancel"},s("vs"),ba("vs"));function De(){this.clear()}v.H("ChangedEvent",De);var Ee;
De.Transaction=Ee=v.l(De,"Transaction",-1);var Fe;De.Property=Fe=v.l(De,"Property",0);var Ge;De.Insert=Ge=v.l(De,"Insert",1);var He;De.Remove=He=v.l(De,"Remove",2);De.prototype.clear=De.prototype.clear=function(){this.ws=Fe;this.Ht=this.ot="";this.st=this.tt=this.zt=this.At=this.yt=this.L=this.ef=m};
De.prototype.copy=De.prototype.copy=function(){var a=new De;a.ef=this.ef;a.L=this.L;a.ws=this.ws;a.ot=this.ot;a.Ht=this.Ht;a.yt=this.yt;var b=this.At;a.At=v.Na(b)&&"function"===typeof b.B?b.B():b;b=this.zt;a.zt=v.Na(b)&&"function"===typeof b.B?b.B():b;b=this.tt;a.tt=v.Na(b)&&"function"===typeof b.B?b.B():b;b=this.st;a.st=v.Na(b)&&"function"===typeof b.B?b.B():b;return a};
De.prototype.toString=function(){var a="",a=this.Rc===Ee?a+"* ":this.Rc===Fe?a+(this.P!==m?"!m":"!d"):a+((this.P!==m?"!m":"!d")+this.Rc);this.propertyName&&"string"===typeof this.propertyName&&(a+=" "+this.propertyName);this.me&&this.me!==this.propertyName&&(a+=" "+this.me);a+=": ";this.Rc===Ee?this.oldValue!==m&&(a+=" "+this.oldValue):(this.object!==m&&(a+=Ie(this.object)),this.oldValue!==m&&(a+="  old: "+Ie(this.oldValue)),this.Ue!==m&&(a+=" "+this.Ue),this.newValue!==m&&(a+="  new: "+Ie(this.newValue)),
this.Te!==m&&(a+=" "+this.Te));return a};De.prototype.getValue=De.prototype.ca=function(a){return a?this.oldValue:this.newValue};De.prototype.getParam=De.prototype.UI=function(a){return a?this.Ue:this.Te};De.prototype.canUndo=De.prototype.ek=function(){return this.P!==m||this.b!==m?h:p};De.prototype.undo=De.prototype.wk=function(){this.ek()&&(this.P!==m?this.P.jr(this,h):this.b!==m&&this.b.jr(this,h))};De.prototype.canRedo=De.prototype.dk=function(){return this.P!==m||this.b!==m?h:p};
De.prototype.redo=De.prototype.Xn=function(){this.dk()&&(this.P!==m?this.P.jr(this,p):this.b!==m&&this.b.jr(this,p))};v.a(De,"model",De.prototype.P);v.defineProperty(De,{P:"model"},s("ef"),ba("ef"));v.a(De,"diagram",De.prototype.b);v.defineProperty(De,{b:"diagram"},s("L"),ba("L"));v.a(De,"change",De.prototype.Rc);v.defineProperty(De,{Rc:"change"},s("ws"),function(a){t&&v.Ua(a,De,De,"change");this.ws=a});v.a(De,"modelChange",De.prototype.me);
v.defineProperty(De,{me:"modelChange"},s("ot"),function(a){t&&v.e(a,"string",De,"modelChange");this.ot=a});v.a(De,"propertyName",De.prototype.propertyName);v.defineProperty(De,{propertyName:"propertyName"},s("Ht"),function(a){t&&"string"!==typeof a&&v.c(a,Function,De,"propertyName");this.Ht=a});v.a(De,"object",De.prototype.object);v.defineProperty(De,{object:"object"},s("yt"),ba("yt"));v.a(De,"oldValue",De.prototype.oldValue);v.defineProperty(De,{oldValue:"oldValue"},s("At"),ba("At"));
v.a(De,"oldParam",De.prototype.Ue);v.defineProperty(De,{Ue:"oldParam"},s("zt"),ba("zt"));v.a(De,"newValue",De.prototype.newValue);v.defineProperty(De,{newValue:"newValue"},s("tt"),ba("tt"));v.a(De,"newParam",De.prototype.Te);v.defineProperty(De,{Te:"newParam"},s("st"),ba("st"));
function B(a){v.Mb(this);this.fw=this.ub="";this.Hj=p;this.Xf=[];this.Fc=new oa(m,Object);this.aq="key";this.Es=this.et=m;this.Zp="category";this.rg=new oa(m,qa);this.si=m;this.Pk=this.Hh=p;this.rx=m;this.da=new Je;a!==f&&(this.hh=a)}v.H("Model",B);B.prototype.clear=B.prototype.clear=function(){this.Xf=[];this.Fc.clear();this.rg.clear();this.da.clear()};
B.prototype.writeJsonProtected=B.prototype.OD=function(){var a="";""!==this.name&&(a+=',\n  "name": '+this.quote(this.name));""!==this.sl&&(a+=',\n  "dataFormat": '+this.quote(this.sl));this.Oa&&(a+=',\n  "isReadOnly": '+this.Oa);"key"!==this.Hl&&"string"===typeof this.Hl&&(a+=',\n  "nodeKeyProperty": '+this.quote(this.Hl));"category"!==this.Gl&&"string"===typeof this.Gl&&(a+=',\n  "nodeCategoryProperty": '+this.quote(this.Gl));return a};
B.prototype.mz=function(){return',\n  "nodeDataArray": '+Ke(this,this.hh,h)};B.prototype.readJsonProtected=B.prototype.QC=function(a){a.name&&(this.name=a.name);a.dataFormat&&(this.sl=a.dataFormat);a.isReadOnly&&(this.Oa=a.isReadOnly);a.nodeKeyProperty&&(this.Hl=a.nodeKeyProperty);a.nodeCategoryProperty&&(this.Gl=a.nodeCategoryProperty)};B.prototype.Ny=function(a){a.nodeDataArray&&(a=a.nodeDataArray,Le(this,a),this.hh=a)};
B.prototype.toString=function(a){a===f&&(a=0);if(2<=a)return this.vD();var b=(""!==this.name?this.name:"")+" Model";if(0<a){var b=b+"\n node data:",a=this.hh,c=v.Cb(a),d;for(d=0;d<c;d++)var e=v.qb(a,d),b=b+(" "+this.cc(e)+":"+Ie(e))}return b};B.prototype.toJson=B.prototype.vD=function(a){a===f&&(a=this.constructor===B?"go.Model":this.constructor===O?"go.GraphLinksModel":v.Ri(this));return'{ "class": '+this.quote(a)+this.writeJsonProtected()+this.mz()+"}"};
B.fromJson=function(a,b){b===f&&(b=m);v.e(a,"string",B,"fromJson:s");b&&v.c(b,B,B,"fromJson:model");var c=m;if(window&&window.JSON&&window.JSON.parse)try{c=window.JSON.parse(a)}catch(d){t&&v.trace("JSON.parse error: "+d.toString())}else v.trace("WARNING: no JSON.parse available");if(c===m)return m;if(b===m){var e;e=m;var g=c["class"];if("string"===typeof g)try{var i=m;0===g.indexOf("go.")?(g=g.substr(3),i=ha[g]):(i=ha[g])||(i=window[g]);"function"===typeof i&&(e=new i)}catch(j){}e===m||e instanceof
B?b=e:v.g("Unable to construct a Model of declared class: "+c["class"])}b===m&&(b=new O);b.readJsonProtected(c);b.Ny(c);return b};
function Le(a,b){if(v.isArray(b))for(var c=v.Cb(b),d=0;d<c;d++){var e=v.qb(b,d);v.Na(e)&&v.UE(b,d,Le(a,e))}else if(v.Na(b)){for(d in b)if(e=b[d],v.Na(e)&&(e=Le(a,e),b[d]=e,"points"===d&&Array.isArray(e))){for(var g=h,i=0;i<e.length;i++)if("number"!==typeof e[i]){g=p;break}if(g){g=new y(C);for(i=0;i<e.length/2;i++){var j=new C(e[2*i],e[2*i+1]);g.add(j)}g.freeze();b[d]=g}}if("object"!==typeof b)c=b;else{d=b;e=b["class"];if("NaN"===e)d=NaN;else if("go.Point"===e)d=new C(b.x,b.y);else if("go.Size"===
e)d=new yb(b.width,b.height);else if("go.Rect"===e)d=new E(b.x,b.y,b.width,b.height);else if("go.Margin"===e)d=new Kb(b.top,b.right,b.bottom,b.left);else if("go.Spot"===e)d="string"===typeof b["enum"]?cc(b["enum"]):new H(b.x,b.y,b.offsetX,b.offsetY);else if("go.Brush"===e){if(d=new Me,d.type=v.wl(Me,b.type),b.start instanceof H&&(d.start=b.start),b.end instanceof H&&(d.end=b.end),"number"===typeof b.startRadius&&(d.fo=b.startRadius),"number"===typeof b.endRadius&&(d.rn=b.endRadius),e=b.colorStops)for(c in e)d.addColorStop(parseFloat(c),
e[c])}else"go.Geometry"===e&&(d="string"===typeof b.path?be(b.path):new Kd,d.type=v.wl(Kd,b.type),"number"===typeof b.startX&&(d.Ba=b.startX),"number"===typeof b.startY&&(d.Ca=b.startY),"number"===typeof b.endX&&(d.N=b.endX),"number"===typeof b.endY&&(d.O=b.endY),b.spot1 instanceof H&&(d.n=b.spot1),b.spot2 instanceof H&&(d.o=b.spot2));c=d}return c}return b}
B.prototype.quote=function(a){for(var b="",c=a.length,d=0;d<c;d++)var e=a[d],b='"'===e||"\\"===e?b+("\\"+e):"\b"===e?b+"\\b":"\f"===e?b+"\\f":"\n"===e?b+"\\n":"\r"===e?b+"\\r":"\t"===e?b+"\\t":b+e;return'"'+b+'"'};
B.prototype.writeJsonValue=B.prototype.qv=function(a){var b;if(a===f)b="undefined";else if(a===m)b="null";else if(a===h)b="true";else if(a===p)b="false";else if("string"===typeof a)b=this.quote(a);else if("number"===typeof a)b=Infinity===a?"9e9999":-Infinity===a?"-9e9999":isNaN(a)?'{"class":"NaN"}':a.toString();else if(v.isArray(a))b=Ke(this,a);else if(v.Na(a)){var c=a;if(c instanceof C)a={"class":"go.Point",x:c.x,y:c.y};else if(c instanceof yb)a={"class":"go.Size",width:c.width,height:c.height};
else if(c instanceof E)a={"class":"go.Rect",x:c.x,y:c.y,width:c.width,height:c.height};else if(c instanceof Kb)a={"class":"go.Margin",top:c.top,right:c.right,bottom:c.bottom,left:c.left};else if(c instanceof H)a=fc(c)?{"class":"go.Spot",x:c.x,y:c.y,offsetX:c.offsetX,offsetY:c.offsetY}:{"class":"go.Spot","enum":c.toString()};else if(c instanceof Me){a={"class":"go.Brush",type:c.type.name};if(c.type===Ne)a.color=c.color;else if(c.type===We||c.type===Xe)a.start=c.start,a.end=c.end,c.type===Xe&&(0!==
c.fo&&(a.startRadius=c.fo),isNaN(c.rn)||(a.endRadius=c.rn));if(c.mn!==m){for(var d={},c=c.mn.f;c.next();)d[c.key.toString()]=c.value;a.colorStops=d}}else c instanceof Kd&&(a={"class":"go.Geometry",type:c.type.name},0!==c.Ba&&(a.startX=c.Ba),0!==c.Ca&&(a.startY=c.Ca),0!==c.N&&(a.endX=c.N),0!==c.O&&(a.endY=c.O),c.n.u(pc)||(a.spot1=c.n),c.o.u(zc)||(a.spot2=c.o),0<c.Ib.count&&(a.path=a.toString()));var d="{",e=h;for(b in a)if(c=v.Ya(a,b),!(c===f||"__gohashid"===b||"_"===b[0]||"function"===typeof c))if(e?
e=p:d+=", ",d+='"'+b+'":',"points"===b&&c instanceof y&&c.K===C){for(var g="[",c=c.f;c.next();){var i=c.value;1<g.length&&(g+=",");g+=this.qv(i.x);g+=",";g+=this.qv(i.y)}g+="]";d+=g}else d+=this.qv(c);b=d+"}"}else b="function"===typeof a?"null":a.toString();return b};function Ke(a,b,c){var d=v.Cb(b),e="[ ";c&&1<d&&(e+="\n");for(var g=0;g<d;g++){var i=v.qb(b,g);i!==f&&(0<g&&(e+=",",c&&(e+="\n")),e+=a.qv(i))}c&&1<d&&(e+="\n");return e+" ]"}v.a(B,"name",B.prototype.name);
v.defineProperty(B,{name:"name"},s("ub"),function(a){var b=this.ub;b!==a&&(v.e(a,"string",B,"name"),this.ub=a,this.d("name",b,a))});v.a(B,"dataFormat",B.prototype.sl);v.defineProperty(B,{sl:"dataFormat"},s("fw"),function(a){var b=this.fw;b!==a&&(v.e(a,"string",B,"dataFormat"),this.fw=a,this.d("dataFormat",b,a))});v.a(B,"isReadOnly",B.prototype.Oa);v.defineProperty(B,{Oa:"isReadOnly"},s("Hj"),function(a){var b=this.Hj;b!==a&&(v.e(a,"boolean",B,"isReadOnly"),this.Hj=a,this.d("isReadOnly",b,a))});
B.prototype.addChangedListener=B.prototype.Bx=function(a){v.e(a,"function",B,"addChangedListener:listener");this.si===m&&(this.si=new y("function"));this.si.add(a)};B.prototype.removeChangedListener=B.prototype.Py=function(a){v.e(a,"function",B,"removeChangedListener:listener");this.si!==m&&(this.si.remove(a),0===this.si.count&&(this.si=m))};B.prototype.nu=function(a){this.nb||this.da.$B(a);if(this.si!==m)for(var b=this.si.f;b.next();){var c=b.value;c(a)}};
B.prototype.raiseChangedEvent=B.prototype.Xd=function(a,b,c,d,e,g,i){Ye(this,"",a,b,c,d,e,g,i)};B.prototype.raiseChanged=B.prototype.d=function(a,b,c,d,e){Ye(this,"",Fe,a,this,b,c,d,e)};B.prototype.raiseDataChanged=B.prototype.WJ=function(a,b,c,d,e,g){Ye(this,"",Fe,b,a,c,d,e,g)};function Ye(a,b,c,d,e,g,i,j,k){j===f&&(j=m);k===f&&(k=m);var l=new De;l.P=a;l.Rc=c;l.me=b;l.propertyName=d;l.object=e;l.oldValue=g;l.Ue=j;l.newValue=i;l.Te=k;a.nu(l)}v.a(B,"undoManager",B.prototype.da);
v.defineProperty(B,{da:"undoManager"},s("rx"),function(a){var b=this.rx;b!==a&&(v.c(a,Je,B,"undoManager"),b!==m&&b.wG(this),this.rx=a,a!==m&&a.xE(this))});v.a(B,"skipsUndoManager",B.prototype.nb);v.defineProperty(B,{nb:"skipsUndoManager"},s("Hh"),function(a){v.e(a,"boolean",B,"skipsUndoManager");this.Hh=a});B.prototype.jr=function(a,b){if(a!==m&&a.P===this){var c=this.Pk;try{this.Pk=h,this.Kx(a,b)}finally{this.Pk=c}}};
B.prototype.Kx=function(a,b){if(a.Rc===Fe){var c=a.object,d=a.propertyName,e=a.ca(b);v.fb(c,d,e)}else a.Rc===Ge?"nodeDataArray"===a.me?(c=a.newValue,v.Na(c)&&(d=this.cc(c),d!==f&&(b?(v.Sh(this.Xf,a.Te),this.Fc.remove(d)):(v.Rh(this.Xf,a.Te,c),this.Fc.add(d,c))))):""===a.me?(c=a.object,!v.isArray(c)&&a.propertyName&&(c=v.Ya(a.object,a.propertyName)),v.isArray(c)&&(d=a.newValue,e=a.Te,b?v.Sh(c,e):v.Rh(c,e,d))):v.g("unknown ChangedEvent.Insert object: "+a.toString()):a.Rc===He?"nodeDataArray"===a.me?
(c=a.oldValue,v.Na(c)&&(d=this.cc(c),d!==f&&(b?(v.Rh(this.Xf,a.Ue,c),this.Fc.add(d,c)):(v.Sh(this.Xf,a.Ue),this.Fc.remove(d))))):""===a.me?(c=a.object,!v.isArray(c)&&a.propertyName&&(c=v.Ya(a.object,a.propertyName)),v.isArray(c)&&(d=a.oldValue,e=a.Ue,b?v.Rh(c,e,d):v.Sh(c,e))):v.g("unknown ChangedEvent.Remove object: "+a.toString()):a.Rc!==Ee&&v.g("unknown ChangedEvent: "+a.toString())};B.prototype.startTransaction=B.prototype.Lb=function(a){return this.da.Lb(a)};
B.prototype.commitTransaction=B.prototype.Rd=function(a){return this.da.Rd(a)};B.prototype.rollbackTransaction=B.prototype.Xr=function(){return this.da.Xr()};B.prototype.updateTargetBindings=B.prototype.nc=function(a,b){b===f&&(b="");Ye(this,"SourceChanged",Ee,b,a,m,m)};v.a(B,"nodeKeyProperty",B.prototype.Hl);
v.defineProperty(B,{Hl:"nodeKeyProperty"},s("aq"),function(a){var b=this.aq;b!==a&&(Ze(a,B,"nodeKeyProperty"),0<this.Fc.count&&v.g("Cannot set Model.nodeKeyProperty when there is existing node data"),this.aq=a,this.d("nodeKeyProperty",b,a))});function Ze(a,b,c){"string"!==typeof a&&"function"!==typeof a&&v.Ac(a,"string or function",b,c)}
B.prototype.getKeyForNodeData=B.prototype.cc=function(a){if(a!==m){var b=this.aq;if(""!==b&&(b=v.Ya(a,b),b!==f)){if($e(b))return b;t&&v.trace("Key value for node data "+a+" is not a number or a string: "+b)}}};v.a(B,"makeUniqueKeyFunction",B.prototype.dG);v.defineProperty(B,{dG:"makeUniqueKeyFunction"},s("et"),function(a){var b=this.et;b!==a&&(a!==m&&v.e(a,"function",B,"makeUniqueKeyFunction"),this.et=a,this.d("makeUniqueKeyFunction",b,a))});
function $e(a){return"number"===typeof a||"string"===typeof a}B.prototype.containsNodeData=B.prototype.Hi=function(a){a=this.cc(a);return a===f?p:this.Fc.contains(a)};B.prototype.findNodeDataForKey=B.prototype.$g=function(a){a===m&&v.g("Model.findNodeDataForKey:key must not be null");return a===f||!$e(a)?m:this.Fc.ca(a)};v.a(B,"nodeDataArray",B.prototype.hh);
v.defineProperty(B,{hh:"nodeDataArray"},s("Xf"),function(a){var b=this.Xf;if(b!==a){v.pu(a,B,"nodeDataArray");this.Fc.clear();this.gz();for(var c=v.Cb(a),d=0;d<c;d++){var e=v.qb(a,d);if(!v.Na(e)){v.g("Model.nodeDataArray must only contain Objects, not: "+e);return}v.Cn(e)}this.Xf=a;for(var g=new y(Object),d=0;d<c;d++){var e=v.qb(a,d),i=this.cc(e);i===f?g.add(e):this.Fc.ca(i)!==m?g.add(e):this.Fc.add(i,e)}for(d=g.f;d.next();)e=d.value,this.wC(e),g=this.cc(e),this.Fc.add(g,e);Ye(this,"nodeDataArray",
Fe,"nodeDataArray",this,b,a);for(d=0;d<c;d++)e=v.qb(a,d),this.$u(e),this.Zu(e);this.hB();Array.isArray(a)||(this.Oa=h)}});
B.prototype.makeNodeDataKeyUnique=B.prototype.wC=function(a){if(a!==m){var b=this.aq;if(""!==b){var c=this.cc(a);if(c===f||this.Fc.contains(c)){var d=this.et;if(d!==m&&(c=d(this,a),c!==f&&c!==m&&!this.Fc.contains(c))){v.fb(a,b,c);return}if("string"===typeof c){for(d=2;this.Fc.contains(c+d);)d++;v.fb(a,b,c+d)}else if(c===f||"number"===typeof c){for(d=-this.Fc.count-1;this.Fc.contains(d);)d--;v.fb(a,b,d)}else v.g("Model.getKeyForNodeData returned something other than a string or a number: "+c)}}}};
B.prototype.addNodeData=B.prototype.iu=function(a){if(a!==m){v.Cn(a);var b=this.cc(a);b!==f&&this.Fc.ca(b)===a||(this.wC(a),b=this.cc(a),this.Fc.add(b,a),b=v.Cb(this.Xf),v.Rh(this.Xf,b,a),Ye(this,"nodeDataArray",Ge,"nodeDataArray",this,m,a,m,b),this.$u(a),this.Zu(a))}};B.prototype.removeNodeData=B.prototype.VC=function(a){if(a!==m){var b=this.cc(a);b!==f&&this.Fc.contains(b)&&(this.Fc.remove(b),b=v.Fx(this.Xf,a),0>b||(v.Sh(this.Xf,b),Ye(this,"nodeDataArray",He,"nodeDataArray",this,a,m,b,m),this.hz(a)))}};
B.prototype.gz=aa();B.prototype.$u=aa();B.prototype.Zu=aa();B.prototype.hz=aa();B.prototype.delayReference=B.prototype.fg=function(a,b){if(a!==f){var c=this.rg.ca(a);c===m&&(c=new qa,this.rg.add(a,c));c.add(b)}};B.prototype.forgetDelayedReference=B.prototype.bh=function(a,b){if(a!==f){var c=this.rg.ca(a);c instanceof qa&&(b===f||b===m?this.rg.remove(a):(c.remove(b),0===c.count&&this.rg.remove(a)))}};
B.prototype.dumpDelayedReferences=B.prototype.zI=function(){v.trace("DelayedReferences ("+this.rg.count+")");for(var a=this.rg.f;a.next();){for(var b="",c=a.value.f;c.next();)b+=Ie(c.value)+", ";v.trace("  "+a.key+": "+b)}};B.prototype.findDelayedReferences=B.prototype.LB=function(a){if(a===f)return m;a=this.rg.ca(a);return a instanceof qa?a:m};B.prototype.clearUnresolvedReferences=B.prototype.hB=function(a){a===f?this.rg.clear():this.rg.remove(a)};v.a(B,"copyNodeDataFunction",B.prototype.fF);
v.defineProperty(B,{fF:"copyNodeDataFunction"},s("Es"),function(a){var b=this.Es;b!==a&&(a!==m&&v.e(a,"function",B,"copyNodeDataFunction"),this.Es=a,this.d("copyNodeDataFunction",b,a))});B.prototype.copyNodeData=B.prototype.nn=function(a){if(a===m)return m;var b=m,b=this.Es;if(b!==m)b=b(a);else{var b=new a.constructor,c;for(c in a)v.fb(b,c,v.Ya(a,c))}b&&v.Mb(b);return b};
B.prototype.setDataProperty=B.prototype.GG=function(a,b,c){t&&(v.e(a,"object",B,"setDataProperty:data"),v.e(b,"string",B,"setDataProperty:propname"),""===b&&v.g("Model.setDataProperty: property name must not be an empty string when setting "+a+" to "+c));if(this.Hi(a))if(b===this.Hl)v.g("Model.setDataProperty: property name must not be the key for the node data: "+b);else if(b===this.Gl&&"string"===typeof c){this.Uy(a,c);return}var d=v.Ya(a,b);d!==c&&(v.fb(a,b,c),Ye(this,"",Fe,b,a,d,c))};
B.prototype.insertArrayItem=B.prototype.gJ=function(a,b,c){t&&(v.pu(a,B,"insertArrayItem:arr"),v.j(b,B,"insertArrayItem:idx"));0>b&&(b=v.Cb(a));v.Rh(a,b,c);Ye(this,"",Ge,"",a,m,c,m,b)};B.prototype.removeArrayItem=B.prototype.$J=function(a,b){b===f&&(b=-1);t&&(v.pu(a,B,"removeArrayItem:arr"),v.j(b,B,"removeArrayItem:idx"));-1===b&&(b=v.Cb(a)-1);var c=v.qb(a,b);v.Sh(a,b);Ye(this,"",He,"",a,c,m,b,m)};v.a(B,"nodeCategoryProperty",B.prototype.Gl);
v.defineProperty(B,{Gl:"nodeCategoryProperty"},s("Zp"),function(a){var b=this.Zp;b!==a&&(Ze(a,B,"nodeCategoryProperty"),this.Zp=a,this.d("nodeCategoryProperty",b,a))});B.prototype.getCategoryForNodeData=B.prototype.TB=function(a){if(a===m)return"";var b=this.Zp;if(""===b)return"";b=v.Ya(a,b);if(b===f)return"";if("string"===typeof b)return b;t&&v.trace("getCategoryForNodeData found a non-string category for "+a+": "+b);return""};
B.prototype.setCategoryForNodeData=B.prototype.Uy=function(a,b){v.e(b,"string",B,"setCategoryForNodeData:val");if(a!==m){var c=this.Zp;if(""!==c)if(this.Hi(a)){var d=v.Ya(a,c);d===f&&(d="");d!==b&&(v.fb(a,c,b),Ye(this,"nodeCategory",Fe,c,a,d,b))}else v.fb(a,c,b)}};function O(a,b){B.call(this);this.Jj=[];this.Fp=new qa(Object);this.Ds=m;this.Kj="from";this.Mj="to";this.Ip=this.Hp="";this.Dp="category";this.Ah=this.vt="";this.ut="isGroup";this.Pj="group";a!==f&&(this.hh=a);b!==f&&(this.jg=b)}
v.H("GraphLinksModel",O);v.pa(O,B);O.prototype.clear=O.prototype.clear=function(){B.prototype.clear.call(this);this.Jj=[];this.Fp.clear()};O.prototype.toString=function(a){a===f&&(a=0);if(2<=a)return this.vD();var b=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<a){var b=b+"\n node data:",a=this.hh,c=v.Cb(a),d;for(d=0;d<c;d++)var e=v.qb(a,d),b=b+(" "+this.cc(e)+":"+Ie(e));b+="\n link data:";a=this.jg;c=v.Cb(a);for(d=0;d<c;d++)e=v.qb(a,d),b+=" "+this.An(e)+"--\>"+this.Bn(e)}return b};
O.prototype.writeJsonProtected=O.prototype.OD=function(){var a=B.prototype.OD.call(this),b="";"category"!==this.Hn&&"string"===typeof this.Hn&&(b+=',\n  "linkCategoryProperty": '+this.quote(this.Hn));"from"!==this.In&&"string"===typeof this.In&&(b+=',\n "linkFromKeyProperty": '+this.quote(this.In));"to"!==this.Mn&&"string"===typeof this.Mn&&(b+=',\n  "linkToKeyProperty": '+this.quote(this.Mn));""!==this.Jn&&"string"===typeof this.Jn&&(b+=',\n  "linkFromPortIdProperty": '+this.quote(this.Jn));""!==
this.Nn&&"string"===typeof this.Nn&&(b+=',\n  "linkToPortIdProperty": '+this.quote(this.Nn));""!==this.Vn&&"string"===typeof this.Vn&&(b+=',\n "nodeIsLinkLabelProperty": '+this.quote(this.Vn));""!==this.Kn&&"string"===typeof this.Kn&&(b+=',\n  "linkLabelKeysProperty": '+this.quote(this.Kn));"isGroup"!==this.Un&&"string"===typeof this.Un&&(b+=',\n "nodeIsGroupProperty": '+this.quote(this.Un));"group"!==this.Tn&&"string"===typeof this.Tn&&(b+=',\n  "nodeGroupKeyProperty": '+this.quote(this.Tn));return a+
b};O.prototype.mz=function(){var a=B.prototype.mz.call(this),b=',\n  "linkDataArray": '+Ke(this,this.jg,h);return a+b};
O.prototype.readJsonProtected=O.prototype.QC=function(a){B.prototype.QC.call(this,a);a.linkFromKeyProperty&&(this.In=a.linkFromKeyProperty);a.linkToKeyProperty&&(this.Mn=a.linkToKeyProperty);a.linkFromPortIdProperty&&(this.Jn=a.linkFromPortIdProperty);a.linkToPortIdProperty&&(this.Nn=a.linkToPortIdProperty);a.linkCategoryProperty&&(this.Hn=a.linkCategoryProperty);a.nodeIsLinkLabelProperty&&(this.Vn=a.nodeIsLinkLabelProperty);a.linkLabelKeysProperty&&(this.Kn=a.linkLabelKeysProperty);a.nodeIsGroupProperty&&
(this.Un=a.nodeIsGroupProperty);a.nodeGroupKeyProperty&&(this.Tn=a.nodeGroupKeyProperty)};O.prototype.Ny=function(a){B.prototype.Ny.call(this,a);a.linkDataArray&&(a=a.linkDataArray,Le(this,a),this.jg=a)};
O.prototype.Kx=function(a,b){if(a.Rc===Ge){var c=m;"linkDataArray"===a.me?c=this.jg:"linkLabelKeys"===a.me&&(c=this.zl(a.object));if(v.isArray(c)){b?v.Sh(c,a.Te):v.Rh(c,a.Te,a.newValue);return}}else if(a.Rc===He&&(c=m,"linkDataArray"===a.me?c=this.jg:"linkLabelKeys"===a.me&&(c=this.zl(a.object)),v.isArray(c))){b?v.Rh(c,a.Ue,a.oldValue):v.Sh(c,a.Ue);return}B.prototype.Kx.call(this,a,b)};v.a(O,"linkFromKeyProperty",O.prototype.In);
v.defineProperty(O,{In:"linkFromKeyProperty"},s("Kj"),function(a){var b=this.Kj;b!==a&&(Ze(a,O,"linkFromKeyProperty"),this.Kj=a,this.d("linkFromKeyProperty",b,a))});O.prototype.getFromKeyForLinkData=O.prototype.An=function(a){if(a!==m){var b=this.Kj;if(""!==b&&(b=v.Ya(a,b),b!==f)){if($e(b))return b;t&&v.trace("FromKey value for link data "+a+" is not a number or a string: "+b)}}};
O.prototype.setFromKeyForLinkData=O.prototype.fv=function(a,b){b===m&&(b=f);b!==f&&!$e(b)&&v.Ac(b,"number or string",O,"setFromKeyForLinkData:key");if(a!==m){var c=this.Kj;if(""!==c)if(this.Vh(a)){var d=v.Ya(a,c);d!==b&&(this.bh(d,a),v.fb(a,c,b),this.$g(b)===m&&this.fg(b,a),Ye(this,"linkFromKey",Fe,c,a,d,b),"string"===typeof c&&this.nc(a,c))}else v.fb(a,c,b)}};v.a(O,"linkToKeyProperty",O.prototype.Mn);
v.defineProperty(O,{Mn:"linkToKeyProperty"},s("Mj"),function(a){var b=this.Mj;b!==a&&(Ze(a,O,"linkToKeyProperty"),this.Mj=a,this.d("linkToKeyProperty",b,a))});O.prototype.getToKeyForLinkData=O.prototype.Bn=function(a){if(a!==m){var b=this.Mj;if(""!==b&&(b=v.Ya(a,b),b!==f)){if($e(b))return b;t&&v.trace("ToKey value for link data "+a+" is not a number or a string: "+b)}}};
O.prototype.setToKeyForLinkData=O.prototype.gv=function(a,b){b===m&&(b=f);b!==f&&!$e(b)&&v.Ac(b,"number or string",O,"setToKeyForLinkData:key");if(a!==m){var c=this.Mj;if(""!==c)if(this.Vh(a)){var d=v.Ya(a,c);d!==b&&(this.bh(d,a),v.fb(a,c,b),this.$g(b)===m&&this.fg(b,a),Ye(this,"linkToKey",Fe,c,a,d,b),"string"===typeof c&&this.nc(a,c))}else v.fb(a,c,b)}};v.a(O,"linkFromPortIdProperty",O.prototype.Jn);
v.defineProperty(O,{Jn:"linkFromPortIdProperty"},s("Hp"),function(a){var b=this.Hp;b!==a&&(Ze(a,O,"linkFromPortIdProperty"),this.Hp=a,this.d("linkFromPortIdProperty",b,a))});O.prototype.getFromPortIdForLinkData=O.prototype.CF=function(a){if(a===m)return"";var b=this.Hp;if(""===b)return"";a=v.Ya(a,b);return a===f?"":a};
O.prototype.setFromPortIdForLinkData=O.prototype.as=function(a,b){v.e(b,"string",O,"setFromPortIdForLinkData:portname");if(a!==m){var c=this.Hp;if(""!==c)if(this.Vh(a)){var d=v.Ya(a,c);d===f&&(d="");d!==b&&(v.fb(a,c,b),Ye(this,"linkFromPortId",Fe,c,a,d,b),"string"===typeof c&&this.nc(a,c))}else v.fb(a,c,b)}};v.a(O,"linkToPortIdProperty",O.prototype.Nn);
v.defineProperty(O,{Nn:"linkToPortIdProperty"},s("Ip"),function(a){var b=this.Ip;b!==a&&(Ze(a,O,"linkToPortIdProperty"),this.Ip=a,this.d("linkToPortIdProperty",b,a))});O.prototype.getToPortIdForLinkData=O.prototype.EF=function(a){if(a===m)return"";var b=this.Ip;if(""===b)return"";a=v.Ya(a,b);return a===f?"":a};
O.prototype.setToPortIdForLinkData=O.prototype.bs=function(a,b){v.e(b,"string",O,"setToPortIdForLinkData:portname");if(a!==m){var c=this.Ip;if(""!==c)if(this.Vh(a)){var d=v.Ya(a,c);d===f&&(d="");d!==b&&(v.fb(a,c,b),Ye(this,"linkToPortId",Fe,c,a,d,b),"string"===typeof c&&this.nc(a,c))}else v.fb(a,c,b)}};v.a(O,"nodeIsLinkLabelProperty",O.prototype.Vn);
v.defineProperty(O,{Vn:"nodeIsLinkLabelProperty"},s("vt"),function(a){var b=this.vt;b!==a&&(Ze(a,O,"nodeIsLinkLabelProperty"),this.vt=a,this.d("nodeIsLinkLabelProperty",b,a))});O.prototype.isLinkLabelForNodeData=O.prototype.sy=function(a){if(a===m)return p;var b=this.vt;return""===b?p:v.Ya(a,b)?h:p};v.a(O,"linkLabelKeysProperty",O.prototype.Kn);
v.defineProperty(O,{Kn:"linkLabelKeysProperty"},s("Ah"),function(a){var b=this.Ah;b!==a&&(Ze(a,O,"linkLabelKeysProperty"),this.Ah=a,this.d("linkLabelKeysProperty",b,a))});O.prototype.getLabelKeysForLinkData=O.prototype.zl=function(a){if(a===m)return[];var b=this.Ah;if(""===b)return[];a=v.Ya(a,b);return a===f?[]:a};
O.prototype.setLabelKeysForLinkData=O.prototype.nD=function(a,b){v.c(b,Array,O,"setLabelKeysForLinkData:arr");if(a!==m){var c=this.Ah;if(""!==c)if(this.Vh(a)){var d=v.Ya(a,c);d===f&&(d=[]);if(d!==b){for(var e=v.Cb(d),g=0;g<e;g++){var i=v.qb(d,g);this.bh(i,a)}v.fb(a,c,b);e=v.Cb(b);for(g=0;g<e;g++)i=v.qb(b,g),this.$g(i)===m&&this.fg(i,a);Ye(this,"linkLabelKeys",Fe,c,a,d,b);"string"===typeof c&&this.nc(a,c)}}else v.fb(a,c,b)}};
O.prototype.addLabelKeyForLinkData=O.prototype.UA=function(a,b){if(!(b===m||b===f))if($e(b)||v.Ac(b,"number or string",O,"addLabelKeyForLinkData:key"),a!==m){var c=this.Ah;if(""!==c){var d=v.Ya(a,c);d===f?this.nD(a,[b]):v.isArray(d)?0<=v.Fx(d,b)||(v.Rh(d,Infinity,b),this.Vh(a)&&(this.$g(b)===m&&this.fg(b,a),Ye(this,"linkLabelKeys",Ge,c,a,m,b))):v.g(c+" property is not an Array; cannot addLabelKeyForLinkData: "+a)}}};
O.prototype.removeLabelKeyForLinkData=O.prototype.uG=function(a,b){if(!(b===m||b===f))if($e(b)||v.Ac(b,"number or string",O,"removeLabelKeyForLinkData:key"),a!==m){var c=this.Ah;if(""!==c){var d=v.Ya(a,c);if(v.isArray(d)){var e=v.Fx(d,b);0>e||(v.Sh(d,e),this.Vh(a)&&(this.bh(b,a),Ye(this,"linkLabelKeys",He,c,a,b,m)))}else d!==f&&v.g(c+" property is not an Array; cannot removeLabelKeyforLinkData: "+a)}}};v.a(O,"linkDataArray",O.prototype.jg);
v.defineProperty(O,{jg:"linkDataArray"},s("Jj"),function(a){var b=this.Jj;if(b!==a){v.pu(a,O,"linkDataArray");for(var c=v.Cb(a),d=0;d<c;d++){var e=v.qb(a,d);if(!v.Na(e)){v.g("GraphLinksModel.linkDataArray must only contain Objects, not: "+e);return}v.Cn(e)}this.Jj=a;for(var g=new qa(Object),d=0;d<c;d++)e=v.qb(a,d),g.add(e);this.Fp=g;Ye(this,"linkDataArray",Fe,"linkDataArray",this,b,a);for(d=0;d<c;d++)e=v.qb(a,d),af(this,e)}});
O.prototype.containsLinkData=O.prototype.Vh=function(a){return a===m?p:this.Fp.contains(a)};O.prototype.addLinkData=O.prototype.VA=function(a){if(a!==m){if(v.kc(a)===f)v.Mb(a);else if(this.Vh(a))return;this.Fp.add(a);var b=v.Cb(this.Jj);v.Rh(this.Jj,b,a);Ye(this,"linkDataArray",Ge,"linkDataArray",this,m,a,m,b);af(this,a)}};
O.prototype.removeLinkData=O.prototype.vG=function(a){if(a!==m){this.Fp.remove(a);var b=this.Jj.indexOf(a);if(!(0>b)){v.Sh(this.Jj,b);Ye(this,"linkDataArray",He,"linkDataArray",this,a,m,b,m);b=this.An(a);this.bh(b,a);b=this.Bn(a);this.bh(b,a);for(var c=this.zl(a),d=v.Cb(c),e=0;e<d;e++)b=v.qb(c,e),this.bh(b,a)}}};function af(a,b){var c=a.An(b);a.$g(c)===m&&a.fg(c,b);c=a.Bn(b);a.$g(c)===m&&a.fg(c,b);for(var d=a.zl(b),e=v.Cb(d),g=0;g<e;g++)c=v.qb(d,g),a.$g(c)===m&&a.fg(c,b)}
v.a(O,"copyLinkDataFunction",O.prototype.eF);v.defineProperty(O,{eF:"copyLinkDataFunction"},s("Ds"),function(a){var b=this.Ds;b!==a&&(a!==m&&v.e(a,"function",O,"copyLinkDataFunction"),this.Ds=a,this.d("copyLinkDataFunction",b,a))});
O.prototype.copyLinkData=O.prototype.qB=function(a){if(a===m)return m;var b=m,b=this.Ds;if(b!==m)b=b(a);else{var b=new a.constructor,c;for(c in a)v.fb(b,c,v.Ya(a,c))}b&&(v.Mb(b),""!==this.Kj&&v.fb(b,this.Kj,f),""!==this.Mj&&v.fb(b,this.Mj,f),""!==this.Ah&&v.fb(b,this.Ah,[]));return b};v.a(O,"nodeIsGroupProperty",O.prototype.Un);v.defineProperty(O,{Un:"nodeIsGroupProperty"},s("ut"),function(a){var b=this.ut;b!==a&&(Ze(a,O,"nodeIsGroupProperty"),this.ut=a,this.d("nodeIsGroupProperty",b,a))});
O.prototype.isGroupForNodeData=O.prototype.oy=function(a){if(a===m)return p;var b=this.ut;return""===b?p:v.Ya(a,b)?h:p};v.a(O,"nodeGroupKeyProperty",O.prototype.Tn);v.defineProperty(O,{Tn:"nodeGroupKeyProperty"},s("Pj"),function(a){var b=this.Pj;b!==a&&(Ze(a,O,"nodeGroupKeyProperty"),this.Pj=a,this.d("nodeGroupKeyProperty",b,a))});
O.prototype.getGroupKeyForNodeData=O.prototype.Ar=function(a){if(a!==m){var b=this.Pj;if(""!==b&&(b=v.Ya(a,b),b!==f)){if($e(b))return b;t&&v.trace("GroupKey value for node data "+a+" is not a number or a string: "+b)}}};
O.prototype.setGroupKeyForNodeData=O.prototype.Wy=function(a,b){b===m&&(b=f);b!==f&&!$e(b)&&v.Ac(b,"number or string",O,"setGroupKeyForNodeData:key");if(a!==m){var c=this.Pj;if(""!==c)if(this.Hi(a)){var d=v.Ya(a,c);d!==b&&(this.bh(d,a),v.fb(a,c,b),this.$g(b)===m&&this.fg(b,a),Ye(this,"nodeGroupKey",Fe,c,a,d,b),"string"===typeof c&&this.nc(a,c))}else v.fb(a,c,b)}};O.prototype.copyNodeData=O.prototype.nn=function(a){if(a===m)return m;a=B.prototype.nn.call(this,a);""!==this.Pj&&v.fb(a,this.Pj,f);return a};
O.prototype.setDataProperty=O.prototype.GG=function(a,b,c){t&&(v.e(a,"object",O,"setDataProperty:data"),v.e(b,"string",O,"setDataProperty:propname"),""===b&&v.g("GraphLinksModel.setDataProperty: property name must not be an empty string when setting "+a+" to "+c));if(this.Hi(a))if(b===this.Hl)v.g("GraphLinksModel.setDataProperty: property name must not be the key for the node data: "+b);else{if(b===this.Gl&&"string"===typeof c){this.Uy(a,c);return}if(b===this.Tn&&("string"===typeof c||"number"===
typeof c)){this.Wy(a,c);return}b===this.Un?v.g("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+b):b===this.Vn&&v.g("GraphLinksModel.setDataProperty: property name must not be the nodeIsLinkLabelProperty: "+b)}else if(this.Vh(a)){if(b===this.In&&("string"===typeof c||"number"===typeof c)){this.fv(a,c);return}if(b===this.Mn&&("string"===typeof c||"number"===typeof c)){this.gv(a,c);return}if(b===this.Jn&&"string"===typeof c){this.as(a,c);return}if(b===this.Nn&&
"string"===typeof c){this.bs(a,c);return}if(b===this.Hn&&"string"===typeof c){this.mD(a,c);return}if(b===this.Kn&&v.isArray(c)){this.nD(a,c);return}}var d=v.Ya(a,b);d!==c&&(v.fb(a,b,c),Ye(this,"",Fe,b,a,d,c))};O.prototype.gz=function(){B.prototype.gz.call(this);for(var a=this.jg,b=v.Cb(a),c=0;c<b;c++)af(this,v.qb(a,c))};
O.prototype.$u=function(a){B.prototype.$u.call(this,a);var a=this.cc(a),b=this.LB(a);if(b!==m){for(var c=new y(Object),b=b.f;b.next();){var d=b.value;if(this.Hi(d)){if(this.Ar(d)===a){var e=this.Pj;Ye(this,"nodeGroupKey",Fe,e,d,a,a);"string"===typeof e&&this.nc(d,e);c.add(d)}}else{this.An(d)===a&&(e=this.Kj,Ye(this,"linkFromKey",Fe,e,d,a,a),"string"===typeof e&&this.nc(d,e),c.add(d));this.Bn(d)===a&&(e=this.Mj,Ye(this,"linkToKey",Fe,e,d,a,a),"string"===typeof e&&this.nc(d,e),c.add(d));for(var g=this.zl(d),
i=v.Cb(g),e=this.Ah,j=0;j<i;j++)v.qb(g,j)===a&&(Ye(this,"linkLabelKeys",Ge,e,d,a,a),c.add(d))}}for(c=c.f;c.next();)this.bh(a,c.value)}};O.prototype.Zu=function(a){B.prototype.Zu.call(this,a);var b=this.Ar(a);this.$g(b)===m&&this.fg(b,a)};O.prototype.hz=function(a){B.prototype.hz.call(this,a);var b=this.Ar(a);this.bh(b,a)};v.a(O,"linkCategoryProperty",O.prototype.Hn);
v.defineProperty(O,{Hn:"linkCategoryProperty"},s("Dp"),function(a){var b=this.Dp;b!==a&&(Ze(a,O,"linkCategoryProperty"),this.Dp=a,this.d("linkCategoryProperty",b,a))});O.prototype.getCategoryForLinkData=O.prototype.SB=function(a){if(a===m)return"";var b=this.Dp;if(""===b)return"";b=v.Ya(a,b);if(b===f)return"";if("string"===typeof b)return b;t&&v.trace("getCategoryForLinkData found a non-string category for "+a+": "+b);return b};
O.prototype.setCategoryForLinkData=O.prototype.mD=function(a,b){v.e(b,"string",O,"setCategoryForLinkData:val");if(a!==m){var c=this.Dp;if(""===c)return"";if(this.Vh(a)){var d=v.Ya(a,c);d===f&&(d="");d!==b&&(v.fb(a,c,b),Ye(this,"linkCategory",Fe,c,a,d,b),"string"===typeof c&&this.nc(a,c))}else v.fb(a,c,b)}};
function bf(a,b,c){v.Mb(this);a===f?a="":v.e(a,"string",bf,"constructor:targetprop");b===f?b=a:v.e(b,"string",bf,"constructor:sourceprop");c===f?c=m:c!==m&&v.e(c,"function",bf,"constructor:conv");this.JA="";this.jf=m;this.$t=a;this.Yt=this.jx=0;this.AA=m;this.Tt=b;this.cw=c;this.Kw=cf;this.Xv=m}v.H("Binding",bf);var cf;bf.OneWay=cf=v.l(bf,"OneWay",1);var df;bf.TwoWay=df=v.l(bf,"TwoWay",2);
bf.parseEnum=function(a,b){v.e(a,"function",bf,"parseEnum:ctor");v.Ua(b,a,bf,"parseEnum:defval");return function(c){return v.wl(a,c)||b}};var Ie;bf.toString=Ie=function(a){var b=a;v.Na(a)&&(a.text?b=a.text:a.name?b=a.name:a.key!==f?b=a.key:a.id!==f&&(b=a.id));return b===f?"undefined":b===m?"null":b.toString()};bf.prototype.toString=function(){return"Binding("+this.Ol+" "+this.cz+":"+this.Yy+")"};bf.prototype.freeze=function(){this.La=h;return this};bf.prototype.qa=function(){this.La=p;return this};
v.a(bf,"targetId",bf.prototype.Ol);v.defineProperty(bf,{Ol:"targetId"},s("JA"),function(a){v.v(this);v.e(a,"string",bf,"targetId");this.JA=a});v.a(bf,"targetProperty",bf.prototype.cz);v.defineProperty(bf,{cz:"targetProperty"},s("$t"),function(a){v.v(this);v.e(a,"string",bf,"targetProperty");this.$t=a});v.a(bf,"sourceName",bf.prototype.eo);v.defineProperty(bf,{eo:"sourceName"},s("AA"),function(a){v.v(this);v.e(a,"string",bf,"sourceName");this.AA=a});v.a(bf,"sourceProperty",bf.prototype.Yy);
v.defineProperty(bf,{Yy:"sourceProperty"},s("Tt"),function(a){v.v(this);v.e(a,"string",bf,"sourceProperty");this.Tt=a});v.a(bf,"converter",bf.prototype.nB);v.defineProperty(bf,{nB:"converter"},s("cw"),function(a){v.v(this);a!==m&&v.e(a,"function",bf,"converter");this.cw=a});v.a(bf,"backConverter",bf.prototype.fB);v.defineProperty(bf,{fB:"backConverter"},s("Xv"),function(a){v.v(this);a!==m&&v.e(a,"function",bf,"backConverter");this.Xv=a});v.a(bf,"mode",bf.prototype.mode);
v.defineProperty(bf,{mode:"mode"},s("Kw"),function(a){v.v(this);v.Ua(a,bf,bf,"mode");this.Kw=a});bf.prototype.makeTwoWay=bf.prototype.zJ=function(a){a===f&&(a=m);this.mode=df;this.fB=a;return this};bf.prototype.ofObject=bf.prototype.Ly=function(a){a===f&&(a="");t&&v.e(a,"string",bf,"ofObject:srcname");this.eo=a;return this};
bf.prototype.updateTarget=bf.prototype.KD=function(a,b,c){var d=this.Tt;if(!(c&&d!==c)){var c=this.$t,e=this.cw;if(!(e===m&&""===c)){t&&("string"===typeof c&&"function"!==typeof a.setAttribute&&!v.ly(a,c))&&v.trace("Binding error: undefined target property: "+c+" on "+a.toString());var g=b;""!==d&&(g=v.Ya(b,d));if(g!==f)if(e===m)""!==c&&v.fb(a,c,g);else try{if(""!==c){var i=e(g,a);v.fb(a,c,i)}else e(g,a)}catch(j){t&&v.trace("Binding error: "+j.toString())}}}};
bf.prototype.updateSource=bf.prototype.JD=function(a,b,c){if(this.Kw===df){var d=this.$t;if(!(c&&d!==c)){var c=this.Tt,e=this.Xv;if(!(e===m&&""===c)){var g=a;""!==d&&(g=v.Ya(a,d));if(g!==f)if(e===m)v.fb(b,c,g);else try{if(""!==c){var i=e(g,b);v.fb(b,c,i)}else e(g,b)}catch(j){t&&v.trace("Binding error: "+j.toString())}}}}};function ef(){this.VD=(new y(De)).freeze();this.ub="";this.Wz=p}v.H("Transaction",ef);
ef.prototype.toString=function(a){var b="Transaction: "+this.name+" "+this.Vg.count.toString()+(this.En?"":", incomplete");if(a!==f&&0<a)for(var c=this.Vg.count,d=0;d<c;d++){var e=this.Vg.Z(d);e!==m&&(b+="\n  "+e.toString(a-1))}return b};ef.prototype.clear=ef.prototype.clear=function(){var a=this.Vg;a.qa();for(var b=a.count-1;0<=b;b--){var c=a.Z(b);c!==m&&c.clear()}a.clear();a.freeze()};ef.prototype.canUndo=ef.prototype.ek=s("En");
ef.prototype.undo=ef.prototype.wk=function(){if(this.ek())for(var a=this.Vg.count-1;0<=a;a--){var b=this.Vg.Z(a);b!==m&&b.wk()}};ef.prototype.canRedo=ef.prototype.dk=s("En");ef.prototype.redo=ef.prototype.Xn=function(){if(this.dk())for(var a=this.Vg.count,b=0;b<a;b++){var c=this.Vg.Z(b);c!==m&&c.Xn()}};v.m(ef,{Vg:"changes"},s("VD"));v.a(ef,"name",ef.prototype.name);v.defineProperty(ef,{name:"name"},s("ub"),ba("ub"));v.a(ef,"isComplete",ef.prototype.En);
v.defineProperty(ef,{En:"isComplete"},s("Wz"),ba("Wz"));function Je(){this.Lw=new qa(B);this.wh=p;this.bE=(new y(ef)).freeze();this.Bj=-1;this.bA=999;this.xh=p;this.Is=m;this.$j=0;this.$v=p;t&&(this.$v=h);this.Wf=(new y("string")).freeze();this.Fm=new y("number");this.rw=h}v.H("UndoManager",Je);
Je.prototype.toString=function(a){for(var b="UndoManager "+this.Si+"<"+this.history.count+"<="+this.By,b=b+"[",c=this.HC.count,d=0;d<c;d++)0<d&&(b+=" "),b+=this.HC.Z(d);b+="]";if(a!==f&&0<a){c=this.history.count;for(d=0;d<c;d++)b+="\n "+this.history.Z(d).toString(a-1)}return b};
Je.prototype.clear=Je.prototype.clear=function(){var a=this.history;a.qa();for(var b=a.count-1;0<=b;b--){var c=a.Z(b);c!==m&&c.clear()}a.clear();this.Bj=-1;a.freeze();this.xh=p;this.Is=m;this.$j=0;this.Wf.qa();this.Wf.clear();this.Wf.freeze();this.Fm.clear()};Je.prototype.addModel=Je.prototype.xE=function(a){this.Lw.add(a)};Je.prototype.removeModel=Je.prototype.wG=function(a){this.Lw.remove(a)};
Je.prototype.startTransaction=Je.prototype.Lb=function(a){a===m&&(a="");if(this.cb)return p;this.rw===h&&(this.rw=p,this.$j++,this.wd("StartingFirstTransaction",a,this.rl),0<this.$j&&this.$j--);this.isEnabled&&(this.Wf.qa(),this.Wf.add(a),this.Wf.freeze(),this.rl===m?this.Fm.add(0):this.Fm.add(this.rl.Vg.count));this.$j++;var b=1===this.vk;b&&this.wd("StartedTransaction",a);return b};Je.prototype.commitTransaction=Je.prototype.Rd=function(a){return ff(this,h,a)};
Je.prototype.rollbackTransaction=Je.prototype.Xr=function(){return ff(this,p,"")};
function ff(a,b,c){if(a.cb)return p;a.Lx&&1>a.vk&&v.trace("Ending transaction without having started a transaction: "+c);var d=1===a.vk;d&&(b&&a.isEnabled)&&a.wd("CommittingTransaction",c,a.rl);var e=0;if(0<a.vk&&(a.$j--,a.isEnabled)){var g=a.Wf.count;0<g&&(""===c&&(c=a.Wf.Z(0)),a.Wf.qa(),a.Wf.pe(g-1),a.Wf.freeze());g=a.Fm.count;0<g&&(e=a.Fm.Z(g-1),a.Fm.pe(g-1))}g=a.rl;if(d){if(b){if(a.isEnabled&&g!==m){b=g;b.En=h;b.name=c;d=a.history;d.qa();for(e=d.count-1;e>a.Si;e--)g=d.Z(e),g!==m&&g.clear(),d.pe(e);
e=a.By;0===e&&(e=1);0<e&&d.count>=e&&(g=d.Z(0),g!==m&&g.clear(),d.pe(0),a.Bj--);d.add(b);a.Bj++;d.freeze();g=b}a.wd("CommittedTransaction",c,g)}else{a.xh=h;try{a.isEnabled&&g!==m&&(g.En=h,g.wk())}finally{a.wd("RolledBackTransaction",c,g),a.xh=p}g!==m&&g.clear()}a.Is=m;return h}if(a.isEnabled&&!b&&g!==m){a=e;c=g.Vg;c.qa();for(b=c.count-1;b>=a;b--)d=c.Z(b),d!==m&&d.wk(),c.pe(b);c.freeze()}return p}
Je.prototype.canUndo=Je.prototype.ek=function(){if(!this.isEnabled||0<this.vk||this.cb)return p;var a=this.DD;return a!==m&&a.ek()?h:p};Je.prototype.undo=Je.prototype.wk=function(){if(this.ek()){var a=this.DD;try{this.wd("StartingUndo","Undo",a),this.xh=h,this.Bj--,a.wk()}catch(b){v.trace("undo error: "+b.toString())}finally{this.xh=p,this.wd("FinishedUndo","Undo",a)}}};
Je.prototype.canRedo=Je.prototype.dk=function(){if(!this.isEnabled||0<this.vk||this.cb)return p;var a=this.CD;return a!==m&&a.dk()?h:p};Je.prototype.redo=Je.prototype.Xn=function(){if(this.dk()){var a=this.CD;try{this.wd("StartingRedo","Redo",a),this.xh=h,this.Bj++,a.Xn()}catch(b){v.trace("redo error: "+b.toString())}finally{this.xh=p,this.wd("FinishedRedo","Redo",a)}}};
Je.prototype.wd=function(a,b,c){c===f&&(c=m);var d=new De;d.Rc=Ee;d.propertyName=a;d.object=c;d.oldValue=b;for(a=this.hG;a.next();)b=a.value,d.P=b,b.nu(d)};Je.prototype.handleChanged=Je.prototype.$B=function(a){if(this.isEnabled&&!this.cb&&!this.skipsEvent(a)){var b=this.rl;b===m&&(this.Is=b=new ef);var c=a.copy(),b=b.Vg;b.qa();b.add(c);b.freeze();this.Lx&&(0>=this.vk&&!this.rw)&&(a=a.b,a!==m&&a.Pf===p||v.trace("Change not within a transaction: "+c.toString()))}};
Je.prototype.skipsEvent=Je.prototype.oK=function(a){if(a===m||0>a.Rc.value)return h;a=a.object;if(a instanceof R){if(a=a.ta,a!==m&&a.Sc)return h}else if(a instanceof gf&&a.Sc)return h;return p};v.m(Je,{hG:"models"},function(){return this.Lw.f});v.a(Je,"isEnabled",Je.prototype.isEnabled);v.defineProperty(Je,{isEnabled:"isEnabled"},s("wh"),ba("wh"));v.m(Je,{DD:"transactionToUndo"},function(){return 0<=this.Si&&this.Si<=this.history.count-1?this.history.Z(this.Si):m});
v.m(Je,{CD:"transactionToRedo"},function(){return this.Si<this.history.count-1?this.history.Z(this.Si+1):m});v.m(Je,{cb:"isUndoingRedoing"},s("xh"));v.m(Je,{history:"history"},s("bE"));v.a(Je,"maxHistoryLength",Je.prototype.By);v.defineProperty(Je,{By:"maxHistoryLength"},s("bA"),ba("bA"));v.m(Je,{Si:"historyIndex"},s("Bj"));v.m(Je,{rl:"currentTransaction"},s("Is"));v.m(Je,{vk:"transactionLevel"},s("$j"));v.m(Je,{QF:"isInTransaction"},function(){return 0<this.$j});
v.defineProperty(Je,{Lx:"checksTransactionLevel"},s("$v"),ba("$v"));v.m(Je,{HC:"nestedTransactionNames"},s("Wf"));function sa(){this.L=m;this.Hz=this.Cz=p;this.Oj=this.vz=m}v.H("CommandHandler",sa);var hf=m,jf="";sa.prototype.toString=da("CommandHandler");v.m(sa,{b:"diagram"},s("L"));sa.prototype.xf=function(a){t&&a!==m&&v.c(a,A,sa,"setDiagram");this.L=a};
sa.prototype.doKeyDown=sa.prototype.Yx=function(){var a=this.b;if(a!==m){var b=a.F,c=b.gk,d=b.shift,e=b.alt,g=b.key;c&&("C"===g||"Insert"===g)?this.canCopySelection()&&this.copySelection():c&&"X"===g||d&&"Del"===g?this.canCutSelection()&&this.cutSelection():"Del"===g?this.canDeleteSelection()&&this.deleteSelection():c&&"V"===g||d&&"Insert"===g?this.canPasteSelection()&&this.pasteSelection():c&&"Y"===g||e&&d&&"Backspace"===g?this.canRedo()&&this.redo():c&&"Z"===g||e&&"Backspace"===g?this.canUndo()&&
this.undo():c&&"A"===g?this.canSelectAll()&&this.selectAll():c&&"P"===g?this.canPrint()&&this.print():"Esc"===g?this.canStopCommand()&&this.stopCommand():"Up"===g?a.Ie&&(c?a.scroll("pixel","up"):a.scroll("line","up")):"Down"===g?a.Ie&&(c?a.scroll("pixel","down"):a.scroll("line","down")):"Left"===g?a.He&&(c?a.scroll("pixel","left"):a.scroll("line","left")):"Right"===g?a.He&&(c?a.scroll("pixel","right"):a.scroll("line","right")):"PageUp"===g?a.He?a.scroll("page","left"):!c&&a.Ie&&a.scroll("page","up"):
"PageDown"===g?a.He?a.scroll("page","right"):!c&&a.Ie&&a.scroll("page","down"):"Home"===g?(b=a.yc,c&&a.Ie?a.position=new C(a.position.x,b.y):!c&&a.He&&(a.position=new C(b.x,a.position.y))):"End"===g?(b=a.yc,d=a.ob,c&&a.Ie?a.position=new C(d.x,b.bottom-d.height):!c&&a.He&&(a.position=new C(b.right-d.width,d.y))):"Subtract"===g?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===g?this.canIncreaseZoom()&&this.increaseZoom():c&&"0"===g?this.canResetZoom()&&this.resetZoom():c&&!d&&"G"===g?this.canGroupSelection()&&
this.groupSelection():c&&d&&"G"===g?this.canUngroupSelection()&&this.ungroupSelection():b.event&&113===b.event.which?this.canEditTextBlock()&&this.editTextBlock():b.bubbles=h}};sa.prototype.doKeyUp=sa.prototype.Zx=function(){var a=this.b;a!==m&&(a.F.bubbles=h)};sa.prototype.stopCommand=sa.prototype.vK=function(){var a=this.b;if(a!==m){var b=a.ra;b instanceof kf&&a.Od&&a.Nx();b!==m&&b.doCancel()}};sa.prototype.canStopCommand=sa.prototype.JH=da(h);
sa.prototype.selectAll=sa.prototype.iK=function(){var a=this.b;if(a!==m)try{a.xc="wait";a.ga("ChangingSelection");for(var b=a.Yi;b.next();)b.value.Ga=h;for(b=a.ok;b.next();)b.value.Ga=h;for(b=a.links;b.next();)b.value.Ga=h}finally{a.ga("ChangedSelection"),a.xc=""}};sa.prototype.canSelectAll=sa.prototype.IH=function(){var a=this.b;return a!==m&&a.Od};
sa.prototype.deleteSelection=sa.prototype.iI=function(){var a=this.b;if(a!==m&&!a.ga("SelectionDeleting",a.selection))try{a.xc="wait";a.Lb("Delete");a.ga("ChangingSelection");for(var b=new qa(S),c=a.selection.f;c.next();)lf(b,c.value,h,this.FB,function(a){return a.canDelete()});this.deleteParts(b,h);a.ga("SelectionDeleted",b)}finally{a.ga("ChangedSelection"),a.Rd("Delete"),a.xc=""}};
sa.prototype.canDeleteSelection=sa.prototype.sH=function(){var a=this.b;return a===m||(a.Oa||a.Ud)||!a.bk||0===a.selection.count?p:h};sa.prototype.deleteParts=sa.prototype.kF=function(a,b){for(var c=a.f;c.next();){var d=c.value;if(!b||d.canDelete()){var e=d.b;e!==m&&e.remove(d)}}};
function lf(a,b,c,d,e){if(!a.contains(b)&&(e===f&&(e=m),(e===m||e(b))&&!(b instanceof mf)))if(a.add(b),b instanceof U){if(c&&b instanceof nf)for(var g=b.mc;g.next();){var i=g.value;lf(a,i,c,d,e)}for(i=b.le;i.next();)if(g=i.value,!a.contains(g)){var j=g.ea,k=g.ia;j!==m&&a.contains(j)&&k!==m&&a.contains(k)?lf(a,g,c,d,e):(j===m||k===m)&&lf(a,g,c,d,e)}if(d){i=h;g=b.b;g!==m&&(i=g.rf);for(b=i?b.vn():b.un();b.next();)i=b.value,lf(a,i,c,d,e)}}else if(b instanceof V)for(i=b.di;i.next();)lf(a,i.value,c,d,e)}
sa.prototype.copyParts=sa.prototype.$H=function(a,b,c){for(var d=new oa(S,S),a=a.f;a.next();)of(this,a.value,b,d,c);if(b!==m){c=new qa(V);for(a=d.f;a.next();){var e=a.value;e instanceof V&&(e.ea===m||e.ia===m)&&c.add(e)}0<c.count&&b.yd.kF(c,p)}for(b=d.f;b.next();)b.value.nc();return d};
function of(a,b,c,d,e){if(b===m||e&&!b.canCopy())return m;if(d.contains(b))return a=d.ca(b),a instanceof S?a:m;var g=m,i=b.data;if(i!==m&&c!==m){var j=c.P;b instanceof V?j instanceof O&&(i=j.qB(i),v.Na(i)&&(j.VA(i),g=c.ig(i))):(i=j.nn(i),v.Na(i)&&(j.iu(i),g=c.ig(i)))}else pf(b),g=b.copy(),c!==m&&g instanceof S&&c.add(g);if(!(g instanceof S))return m;g.Ga=p;d.add(b,g);if(b instanceof U){for(j=b.le;j.next();){i=j.value;if(i.ea===b){var k=d.ca(i);k!==m&&(k.ea=g)}i.ia===b&&(k=d.ca(i),k!==m&&(k.ia=g))}if(b instanceof
nf&&g instanceof nf)for(b=b.mc;b.next();)j=of(a,b.value,c,d,e),!(j instanceof V)&&j!==m&&(j.Va=g)}else if(b instanceof V){j=b.ea;j!==m&&(j=d.ca(j),j!==m&&(g.ea=j));j=b.ia;j!==m&&(j=d.ca(j),j!==m&&(g.ia=j));for(b=b.di;b.next();)j=of(a,b.value,c,d,e),j!==m&&(j.ke=g)}return g}sa.prototype.copySelection=sa.prototype.bI=function(){var a=this.b;if(a!==m){for(var b=new qa(S),a=a.selection.f;a.next();)lf(b,a.value,h,this.pB,function(a){return a.canCopy()});this.copyToClipboard(b)}};
sa.prototype.canCopySelection=sa.prototype.oH=function(){var a=this.b;return a===m||(!a.Oh||!a.ku)||0===a.selection.count?p:h};sa.prototype.cutSelection=sa.prototype.eI=function(){this.copySelection();this.deleteSelection()};sa.prototype.canCutSelection=sa.prototype.pH=function(){var a=this.b;return a===m||(a.Oa||a.Ud)||(!a.Oh||!a.bk||!a.ku)||0===a.selection.count?p:h};
sa.prototype.copyToClipboard=sa.prototype.cI=function(a){var b=this.b;if(b!==m){var c=m;a===m?(hf=m,jf=""):(a=this.copyParts(a,m,h),c=new y(S),c.cg(a),hf=c,jf=b.P.sl);b.ga("ClipboardChanged",c)}};
sa.prototype.pasteFromClipboard=sa.prototype.RJ=function(){var a=hf;if(a===m)return v.Df;var b=this.b;if(b===m||jf!==b.P.sl)return v.Df;b=this.copyParts(a,b,p);a=new qa(S);for(b=b.f;b.next();){var c=b.value;c.location.aa()||(c.location=b.key.location.copy());c.position.aa()||(c.position=b.key.position.copy());a.add(c)}return a};
sa.prototype.pasteSelection=sa.prototype.SJ=function(a){var b=this.b;if(b!==m)try{b.xc="wait";b.Lb("Paste");b.ga("ChangingSelection");var c=this.pasteFromClipboard();0<c.count&&xf(b);for(var d=c.f;d.next();)d.value.Ga=h;b.ga("ChangedSelection");if(a instanceof C){var e=this.computeBounds(b.selection);if(e){var g=b.Tb.he,i=g.computeEffectiveCollection(b.selection);g.moveParts(i,new C(a.x-e.za,a.y-e.Aa),p)}}b.ga("ClipboardPasted",c)}finally{b.Rd("Paste"),b.xc=""}};
sa.prototype.canPasteSelection=sa.prototype.BH=function(){var a=this.b;return a===m||(a.Oa||a.Ud)||(!a.dn||!a.ku)||hf===m||jf!==a.P.sl?p:h};sa.prototype.computeBounds=sa.prototype.Ke=function(a){for(var b=m,a=a.f;a.next();){var c=a.value;c instanceof V||(c.Zh(),b===m?b=c.la:b.ej(c.la))}return b};sa.prototype.undo=sa.prototype.wk=function(){var a=this.b;a!==m&&a.da.wk()};sa.prototype.canUndo=sa.prototype.ek=function(){var a=this.b;return a===m||a.Oa||a.Ud?p:a.Cx&&a.da.ek()};
sa.prototype.redo=sa.prototype.Xn=function(){var a=this.b;a!==m&&a.da.Xn()};sa.prototype.canRedo=sa.prototype.dk=function(){var a=this.b;return a===m||a.Oa||a.Ud?p:a.Cx&&a.da.dk()};sa.prototype.decreaseZoom=sa.prototype.gF=function(a){a===f&&(a=1/1.05);var b=this.b;b!==m&&(a*=b.scale,a<b.Xi||a>b.Wi||(b.scale=a,yf(b)))};sa.prototype.canDecreaseZoom=sa.prototype.qH=function(a){a===f&&(a=1/1.05);var b=this.b;if(b===m)return p;a*=b.scale;return a<b.Xi||a>b.Wi?p:b.hr};
sa.prototype.increaseZoom=sa.prototype.JF=function(a){a===f&&(a=1.05);var b=this.b;b!==m&&(a*=b.scale,a<b.Xi||a>b.Wi||(b.scale=a,yf(b)))};sa.prototype.canIncreaseZoom=sa.prototype.zH=function(a){a===f&&(a=1.05);var b=this.b;if(b===m)return p;a*=b.scale;return a<b.Xi||a>b.Wi?p:b.hr};sa.prototype.resetZoom=sa.prototype.dK=function(a){a===f&&(a=1);var b=this.b;if(b!==m&&!(a<b.Xi||a>b.Wi))b.scale=a,yf(b)};
sa.prototype.canResetZoom=sa.prototype.EH=function(a){a===f&&(a=1);var b=this.b;return b===m||a<b.Xi||a>b.Wi?p:b.hr};sa.prototype.collapseTree=sa.prototype.lr=function(a){a===f&&(a=m);var b=this.b;if(b===m)return p;b.Lb("Collapse Tree");var c=new y(U);if(a instanceof U&&a.Vd)a.lr(),c.add(a);else for(a=b.selection.f;a.next();){var d=a.value;d instanceof U&&d.Vd&&(d.lr(),c.add(d))}b.ga("TreeCollapsed",c);b.Rd("Collapse Tree")};
sa.prototype.canCollapseTree=sa.prototype.mH=function(a){a===f&&(a=m);var b=this.b;if(b===m||b.Oa)return p;if(a instanceof U){if(!a.Vd)return p;if(b.rf){if(0<a.vn().count)return h}else if(0<a.un().count)return h}else for(a=b.selection.f;a.next();){var c=a.value;if(c instanceof U&&c.Vd)if(b.rf){if(0<c.vn().count)return h}else if(0<c.un().count)return h}return p};
sa.prototype.expandTree=sa.prototype.rr=function(a){a===f&&(a=m);var b=this.b;if(b===m)return p;b.Lb("Expand Tree");var c=new y(U);if(a instanceof U&&!a.Vd)a.rr(),c.add(a);else for(a=b.selection.f;a.next();){var d=a.value;d instanceof U&&!d.Vd&&(d.rr(),c.add(d))}b.ga("TreeExpanded",c);b.Rd("Expand Tree")};
sa.prototype.canExpandTree=sa.prototype.wH=function(a){a===f&&(a=m);var b=this.b;if(b===m||b.Oa)return p;if(a instanceof U){if(a.Vd)return p;if(b.rf){if(0<a.vn().count)return h}else if(0<a.un().count)return h}else for(a=b.selection.f;a.next();){var c=a.value;if(c instanceof U&&!c.Vd)if(b.rf){if(0<c.vn().count)return h}else if(0<c.un().count)return h}return p};
sa.prototype.groupSelection=sa.prototype.ZI=function(){var a=this.b;if(a!==m){var b=a.P;if(b!==m&&b instanceof O){var c=this.Dx;if(c!==m)try{a.xc="wait";a.Lb("Group");a.ga("ChangingSelection");for(var d=new y(S),e=a.selection.f;e.next();){var g=e.value;(g instanceof U||g.constructor===S)&&g.canGroup()&&d.add(g)}for(var i=new y(S),j=d.f;j.next();){for(var k=j.value,g=p,e=d.f;e.next();)if(k.Cl(e.value)){g=h;break}g||i.add(k)}if(0<i.count){e=i.f;e.next();var l=e.value.Va;if(l!==m)for(;l!==m;){e=i.f;
e.next();for(d=p;e.next();)if(k=e.value,!k.Cl(l)){d=h;break}if(d)l=l.Va;else break}var n=m;if(c instanceof nf)pf(c),n=c.copy(),n instanceof nf&&a.add(n);else if(b.oy(c)){var r=b.nn(c);v.Na(r)&&(b.iu(r),n=a.ig(r))}if(n instanceof nf){l!==m&&this.isValidMember(l,n)&&(n.Va=l);for(e=i.f;e.next();)k=e.value,this.isValidMember(n,k)&&(k.Va=n);a.select(n)}}a.ga("ChangedSelection");a.ga("SelectionGrouped",n)}finally{a.Rd("Group"),a.xc=""}}}};
sa.prototype.canGroupSelection=sa.prototype.yH=function(){var a=this.b;if(a===m||a.Oa||a.Ud||!a.dn||!a.cn)return p;var b=a.P;if(b===m||!(b instanceof O)||this.Dx===m)return p;for(a=a.selection.f;a.next();)if(b=a.value,(b instanceof U||b.constructor===S)&&b.canGroup())return h;return p};
sa.prototype.findUnnestedNodes=sa.prototype.ey=function(a){for(var b=[],a=a.f;a.next();){var c=a.value;c instanceof V||b.push(c)}for(var a=new qa(S),c=b.length,d=0;d<c;d++){for(var e=b[d],g=h,i=0;i<c;i++)if(e.Cl(b[i])){g=p;break}g&&a.add(e)}return a};
sa.prototype.isValidMember=sa.prototype.uy=function(a,b){if(b===m||a===b||b instanceof V)return p;if(a!==m){if(a===b||a.Cl(b))return p;var c=a.Mr;if(c!==m&&!c(a,b)||a.data===m&&b.data!==m||a.data!==m&&b.data===m)return p}c=this.Mr;return c!==m?c(a,b):h};
sa.prototype.ungroupSelection=sa.prototype.AK=function(a){a===f&&(a=m);var b=this.b;if(b!==m){var c=b.P;if(c!==m&&c instanceof O)try{b.xc="wait";b.Lb("Ungroup");b.ga("ChangingSelection");var d=new y(nf);if(a instanceof nf)d.add(a);else for(var e=b.selection.f;e.next();){var g=e.value;g instanceof nf&&g.canUngroup()&&d.add(g)}if(0<d.count){b.Nx();for(e=d.f;e.next();){var i=e.value,j=i.data,k=i.Va,l=k!==m&&k.data!==m?c.cc(k.data):f,n=new y(S);n.cg(i.mc);for(var r=n.f;r.next();){var q=r.value;if(!(q instanceof
V)){var u=q.data;u!==m?c.Wy(u,l):q.Va=k;q.Ga=h}}j!==m?c.VC(j):b.remove(i)}}b.ga("ChangedSelection");b.ga("SelectionUngrouped",d)}finally{b.Rd("Ungroup"),b.xc=""}}};sa.prototype.canUngroupSelection=sa.prototype.LH=function(a){a===f&&(a=m);var b=this.b;if(b===m||b.Oa||b.Ud||!b.bk||!b.kn)return p;var c=b.P;if(c===m||!(c instanceof O))return p;if(a instanceof nf){if(a.canUngroup())return h}else for(a=b.selection.f;a.next();)if(b=a.value,b instanceof nf&&b.canUngroup())return h;return p};
sa.prototype.addTopLevelParts=sa.prototype.hH=function(a,b){for(var c=h,d=this.ey(a).f;d.next();){var e=d.value;e.Va!==m&&(!b||this.uy(m,e)?e.Va=m:c=p)}return c};sa.prototype.collapseSubGraph=sa.prototype.kr=function(a){a===f&&(a=m);var b=this.b;if(b===m)return p;b.Lb("Collapse SubGraph");var c=new y(nf);if(a instanceof nf&&a.je)a.kr(),c.add(a);else for(a=b.selection.f;a.next();){var d=a.value;d instanceof nf&&d.je&&(d.kr(),c.add(d))}b.ga("SubGraphCollapsed",c);b.Rd("Collapse SubGraph")};
sa.prototype.canCollapseSubGraph=sa.prototype.lH=function(a){a===f&&(a=m);var b=this.b;if(b===m||b.Oa)return p;if(a instanceof nf)return!a.je?p:h;for(a=b.selection.f;a.next();)if(b=a.value,b instanceof nf&&b.je)return h;return p};
sa.prototype.expandSubGraph=sa.prototype.qr=function(a){a===f&&(a=m);var b=this.b;if(b===m)return p;b.Lb("Expand SubGraph");var c=new y(nf);if(a instanceof nf&&!a.je)a.qr(),c.add(a);else for(a=b.selection.f;a.next();){var d=a.value;d instanceof nf&&!d.je&&(d.qr(),c.add(d))}b.ga("SubGraphExpanded",c);b.Rd("Expand SubGraph")};
sa.prototype.canExpandSubGraph=sa.prototype.vH=function(a){a===f&&(a=m);var b=this.b;if(b===m||b.Oa)return p;if(a instanceof nf)return a.je?p:h;for(a=b.selection.f;a.next();)if(b=a.value,b instanceof nf&&!b.je)return h;return p};
sa.prototype.editTextBlock=sa.prototype.AI=function(a){a===f&&(a=m);var b=this.b;if(b!==m&&b.Tb!==m){var c=b.Tb.kv;if(c!==m){if(a===m){for(var a=b.selection.f,d=m;a.next();){var e=a.value;if(e.canEdit()){d=e;break}}if(d===m)return;a=d.NB(function(a){return a instanceof ra&&a.Au})}a!==m&&a instanceof ra&&(c.Bf=a,b.ra=c)}}};
sa.prototype.canEditTextBlock=sa.prototype.uH=function(a){a===f&&(a=m);var b=this.b;if(b===m||(b.Oa||b.Ud)||!b.jn||b.Tb===m||b.Tb.kv===m)return p;if(a instanceof ra){if(a=a.V,a!==m&&a.canEdit())return h}else for(b=b.selection.f;b.next();)if(a=b.value,a.canEdit()&&(a=a.NB(function(a){return a instanceof ra&&a.Au}),a!==m))return h;return p};sa.prototype.print=sa.prototype.print=aa();sa.prototype.canPrint=sa.prototype.XE=function(){var a=this.b;return a!==m&&a.en};v.a(sa,"copiesTree",sa.prototype.pB);
v.defineProperty(sa,{pB:"copiesTree"},s("Cz"),ba("Cz"));v.a(sa,"deletesTree",sa.prototype.FB);v.defineProperty(sa,{FB:"deletesTree"},s("Hz"),ba("Hz"));v.a(sa,"archetypeGroupData",sa.prototype.Dx);
v.defineProperty(sa,{Dx:"archetypeGroupData"},s("vz"),function(a){a!==m&&v.c(a,Object,sa,"archetypeGroupData");var b=this.b;b!==m&&(b=b.P,b!==m&&!(a instanceof nf)&&!b.oy(a)&&v.g("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+a));this.vz=a});v.a(sa,"memberValidation",sa.prototype.Mr);v.defineProperty(sa,{Mr:"memberValidation"},s("Oj"),function(a){a!==m&&v.e(a,"function",sa,"memberValidation");this.Oj=a});
function zf(){v.Mb(this);this.L=m;this.ub="";this.wh=h;this.Uz=p;this.OA=m;this.fu=-1}v.H("Tool",zf);zf.prototype.xf=function(a){t&&a!==m&&v.c(a,A,zf,"setDiagram");this.L=a};zf.prototype.toString=function(){return""!==this.name?this.name+" Tool":v.Ri(Object.getPrototypeOf(this))};zf.prototype.updateAdornments=zf.prototype.ii=aa();zf.prototype.canStart=zf.prototype.lf=s("isEnabled");zf.prototype.doStart=zf.prototype.$x=aa();zf.prototype.doActivate=zf.prototype.Yh=function(){this.S=h};
zf.prototype.doDeactivate=zf.prototype.ik=function(){this.S=p};zf.prototype.doStop=zf.prototype.Oi=aa();zf.prototype.doCancel=zf.prototype.Ni=function(){this.stopTool()};zf.prototype.stopTool=zf.prototype.wK=function(){var a=this.b;a!==m&&a.ra===this&&(a.ra=m,a.xc="")};zf.prototype.doMouseDown=zf.prototype.zu=function(){!this.S&&this.canStart()&&this.doActivate()};zf.prototype.doMouseMove=zf.prototype.Zg=aa();zf.prototype.doMouseUp=zf.prototype.Ne=function(){this.stopTool()};
zf.prototype.doMouseWheel=zf.prototype.pF=aa();zf.prototype.doKeyDown=zf.prototype.Yx=function(){var a=this.b;a!==m&&"Esc"===a.F.key&&this.doCancel()};zf.prototype.doKeyUp=zf.prototype.Zx=aa();zf.prototype.startTransaction=zf.prototype.Lb=function(a){this.te=m;var b=this.b;return b===m?p:b.Lb(a)};zf.prototype.stopTransaction=zf.prototype.bj=function(){var a=this.b;return a===m?p:this.te===m?a.Xr():a.Rd(this.te)};
zf.prototype.standardMouseSelect=zf.prototype.KG=function(){var a=this.b;if(a!==m&&a.Od){var b=a.F,c=a.tr(b.C,h);c!==m?b.gk?(a.ga("ChangingSelection"),c.Ga=!c.Ga,a.ga("ChangedSelection")):b.shift?c.Ga||(a.ga("ChangingSelection"),c.Ga=h,a.ga("ChangedSelection")):c.Ga||a.select(c):b.left&&(!b.gk&&!b.shift)&&a.Nx()}};zf.prototype.standardMouseClick=zf.prototype.rK=function(a,b){a===f&&(a=m);b===f&&(b=function(a){return!a.ta.Sc});var c=this.b;if(c!==m){var d=c.F,e=c.dd(d.C,a,b);d.fd=e;Af(e,d,c)}};
function Af(a,b,c){var d=0;b.left?d=1===b.Je?1:2===b.Je?2:1:b.right&&1===b.Je&&(d=3);var e="";if(a!==m){switch(d){case 1:e="ObjectSingleClicked";break;case 2:e="ObjectDoubleClicked";break;case 3:e="ObjectContextClicked"}0!==d&&c.ga(e,a)}else{switch(d){case 1:e="BackgroundSingleClicked";break;case 2:e="BackgroundDoubleClicked";break;case 3:e="BackgroundContextClicked"}0!==d&&c.ga(e)}if(a!==m)for(;a!==m;){e=m;switch(d){case 1:e=a.click;break;case 2:e=a.ul?a.ul:a.click;break;case 3:e=a.mr}if(e!==m&&
(e(b,a),b.zd))break;a=a.Y}else{e=m;switch(d){case 1:e=c.click;break;case 2:e=c.ul?c.ul:c.click;break;case 3:e=c.mr}e!==m&&e(b)}}
zf.prototype.standardMouseOver=zf.prototype.sK=function(){var a=this.b;if(a!==m){var b=a.F,c=a.dd(b.C,m,m);b.fd=c;var d=a.nb;a.nb=h;var e=p;if(c!==a.dm){var g=a.dm;a.$w=g;a.dm=c;for(this.doCurrentObjectChanged(g,c);g!==m;){var i=g.Fy;if(i!==m){if(c===g)break;if(c!==m&&c.ci(g))break;i(b,g,c);e=h;if(b.zd)break}g=g.Y}for(g=a.$w;c!==m;){i=c.Ey;if(i!==m){if(g===c)break;if(g!==m&&g.ci(c))break;i(b,c,g);e=h;if(b.zd)break}c=c.Y}c=a.dm}if(c!==m){g=c;for(i="";g!==m;){i=g.cursor;if(""!==i)break;g=g.Y}a.xc=i;
for(g=c;g!==m;){i=g.Rr;if(i!==m&&(i(b,g),e=h,b.zd))break;g=g.Y}}else a.xc="",i=a.Rr,i!==m&&(i(b),e=h);e&&a.update();a.nb=d}};zf.prototype.doCurrentObjectChanged=zf.prototype.oF=aa();
zf.prototype.standardMouseWheel=zf.prototype.tK=function(){var a=this.b;if(a!==m){var b=a.F,c=b.Li;if(0!==c){var d=a.Tb.Fl;if(a.hr&&(d===Bf&&!b.shift||d===Cf&&b.gk)){d=a.zk;a.zk=b.gd;var e=a.yd;e!==m?0<c?e.JF():e.gF():a.scale=0<c?1.05*a.scale:a.scale/1.05;a.zk=d;b.bubbles=p}else if(d===Bf&&b.shift||d===Cf&&!b.gk)d=a.position.copy(),!b.shift&&a.Ie?0<c?a.scroll("line","up",3):a.scroll("line","down",3):b.shift&&a.He&&(0<c?a.scroll("line","left",3):a.scroll("line","right",3)),a.position.u(d)||(b.bubbles=
p)}}};zf.prototype.standardWaitAfter=zf.prototype.uK=function(a){v.e(a,"number",zf,"standardWaitAfter:delay");this.cancelWaitAfter();var b=this;this.fu=window.setTimeout(function(){b.doWaitAfter()},a)};zf.prototype.cancelWaitAfter=zf.prototype.MH=function(){-1!==this.fu&&window.clearTimeout(this.fu);this.fu=-1};zf.prototype.doWaitAfter=zf.prototype.sF=aa();
zf.prototype.findToolHandleAt=zf.prototype.NI=function(a,b){var c=this.b;if(c===m)return m;c=c.dd(a,m,function(a){a=a.V;return a===m?p:a.Nd!==m});if(c===m)return m;var d=c.V;return d===m||d.nd!==b?m:c};zf.prototype.isBeyondDragSize=zf.prototype.lJ=function(){var a=this.b;if(a===m)return p;var b=a.jc.gd,a=a.F.gd,c=2;v.hx&&(c+=4);return Math.abs(a.x-b.x)>c||Math.abs(a.y-b.y)>c};v.m(zf,{b:"diagram"},s("L"));v.a(zf,"name",zf.prototype.name);v.defineProperty(zf,{name:"name"},s("ub"),ba("ub"));
v.a(zf,"isEnabled",zf.prototype.isEnabled);v.defineProperty(zf,{isEnabled:"isEnabled"},s("wh"),ba("wh"));v.a(zf,"isActive",zf.prototype.S);v.defineProperty(zf,{S:"isActive"},s("Uz"),ba("Uz"));v.a(zf,"transactionResult",zf.prototype.te);v.defineProperty(zf,{te:"transactionResult"},s("OA"),ba("OA"));function Df(a){this.Xw=a!==f?a.copy():new C;this.zA=m}Df.prototype.toString=function(){return this.Xw.toString()};v.a(Df,"point",Df.prototype.ih);v.defineProperty(Df,{ih:"point"},s("Xw"),ba("Xw"));
function Ef(){zf.call(this);this.name="Dragging";this.Bz=h;this.Qk=this.Oz=p;this.uw=(new yb(NaN,NaN)).freeze();this.vw=pc;this.ww=(new C(NaN,NaN)).freeze();this.Lz=this.Xz=p;this.Mz=this.Az=this.Nz=this.Ez=m;this.To=this.Kz=p;this.Om=new C(NaN,NaN);this.Kh=new C;this.Wt=p;this.St=h;this.hm=100;this.Jk=this.Gt=m}v.H("DraggingTool",Ef);v.pa(Ef,zf);v.a(Ef,"copiesEffectiveCollection",Ef.prototype.oB);v.defineProperty(Ef,{oB:"copiesEffectiveCollection"},s("Bz"),ba("Bz"));v.a(Ef,"dragsTree",Ef.prototype.JB);
v.defineProperty(Ef,{JB:"dragsTree"},s("Oz"),ba("Oz"));v.a(Ef,"isGridSnapEnabled",Ef.prototype.Fn);v.defineProperty(Ef,{Fn:"isGridSnapEnabled"},s("Qk"),function(a){this.Qk!==a&&(v.e(a,"boolean",Ef,"isGridSnapEnabled"),this.Qk=a)});v.a(Ef,"gridSnapCellSize",Ef.prototype.jy);v.defineProperty(Ef,{jy:"gridSnapCellSize"},s("uw"),function(a){this.uw.u(a)||(v.c(a,yb,Ef,"gridSnapCellSize"),this.uw=a=a.B())});v.a(Ef,"gridSnapCellSpot",Ef.prototype.WB);
v.defineProperty(Ef,{WB:"gridSnapCellSpot"},s("vw"),function(a){this.vw.u(a)||(v.c(a,H,Ef,"gridSnapCellSpot"),this.vw=a=a.B())});v.a(Ef,"gridSnapOrigin",Ef.prototype.XB);v.defineProperty(Ef,{XB:"gridSnapOrigin"},s("ww"),function(a){this.ww.u(a)||(v.c(a,C,Ef,"gridSnapOrigin"),this.ww=a=a.B())});v.a(Ef,"isDragSnapEnabled",Ef.prototype.PF);v.defineProperty(Ef,{PF:"isDragSnapEnabled"},s("Xz"),ba("Xz"));v.a(Ef,"draggableLinks",Ef.prototype.vl);v.defineProperty(Ef,{vl:"draggableLinks"},s("Lz"),ba("Lz"));
v.a(Ef,"currentPart",Ef.prototype.ql);v.defineProperty(Ef,{ql:"currentPart"},s("Ez"),ba("Ez"));v.a(Ef,"copiedParts",Ef.prototype.wc);v.defineProperty(Ef,{wc:"copiedParts"},s("Az"),ba("Az"));v.a(Ef,"draggedParts",Ef.prototype.Hb);v.defineProperty(Ef,{Hb:"draggedParts"},s("Nz"),ba("Nz"));v.a(Ef,"draggedLink",Ef.prototype.Gb);v.defineProperty(Ef,{Gb:"draggedLink"},s("Mz"),ba("Mz"));v.a(Ef,"dragOutStarted",Ef.prototype.by);v.defineProperty(Ef,{by:"dragOutStarted"},s("Kz"),ba("Kz"));v.a(Ef,"delay",Ef.prototype.xu);
v.defineProperty(Ef,{xu:"delay"},s("hm"),ba("hm"));Ef.prototype.canStart=Ef.prototype.lf=function(){if(!this.isEnabled)return p;var a=this.b;if(a===m||!a.ck&&!a.Oh&&!a.lu||!a.Od)return p;var b=a.F;return!b.left||a.ra!==this&&(!this.isBeyondDragSize()||window.TouchEvent&&(b.ni!==m&&b.ni instanceof window.TouchEvent)&&b.timestamp-a.jc.timestamp<this.hm)?p:this.findDraggablePart()!==m};
Ef.prototype.findDraggablePart=Ef.prototype.FI=function(){var a=this.b;if(a===m)return m;a=a.tr(a.jc.C,h);return a!==m&&(a.canMove()||a.canCopy())?a:m};Ef.prototype.standardMouseSelect=Ef.prototype.KG=function(){var a=this.b;if(a!==m&&a.Od&&(this.ql=a.tr(a.jc.C,h),this.ql!==m&&!this.ql.Ga)){a.ga("ChangingSelection");var b=a.F;!b.gk&&!b.shift&&xf(a);this.ql.Ga=h;a.ga("ChangedSelection")}};
Ef.prototype.doActivate=Ef.prototype.Yh=function(){var a=this.b;if(a!==m){this.standardMouseSelect();var b=this.ql;b===m||!b.canMove()&&!b.canCopy()||(this.S=h,this.Om.set(a.position),Ff(this,a.selection),this.Jk=this.Gt=m,this.Hb=this.computeEffectiveCollection(a.selection),Gf(this,this.Hb),this.Lb("Drag"),this.Kh.set(a.jc.C),a.lu?(this.by=h,this.To=p,Hf=this,this.b.Jc=h):a.Jc=h)}};
function Ff(a,b){if(a.vl){var c=a.b;c!==m&&c.Fi&&(1===b.count?(c=b.f,c.next(),a.Gb=c.value,a.Gb!==m&&(a.Gb.canRelinkFrom()&&a.Gb.canRelinkTo())&&a.Gb.Wg()):a.Gb=m)}}
Ef.prototype.computeEffectiveCollection=Ef.prototype.RH=function(a){var b=this.b!==m&&this.b.ra===this,c=new oa(S,Df);if(a===m)return c;for(var d=a.f;d.next();){var e=d.value;If(this,c,e,b)}if(this.Gb!==m&&this.vl)return c;for(d=a.f;d.next();)e=d.value,e instanceof V&&(a=e,b=a.ea,b!==m&&!c.contains(b)?c.remove(a):(b=a.ia,b!==m&&!c.contains(b)&&c.remove(a)));return c};
function If(a,b,c,d){if(!b.contains(c)&&(!d||c.canMove()||c.canCopy()))if(c instanceof U){b.add(c,new Df(c.location));if(c instanceof nf)for(var e=c.mc;e.next();){var g=e.value;If(a,b,g,d)}for(g=c.le;g.next();)if(e=g.value,!b.contains(e)){var i=e.ea,j=e.ia;i!==m&&(b.contains(i)&&j!==m&&b.contains(j))&&If(a,b,e,d)}if(a.JB){g=h;e=c.b;e!==m&&(g=e.rf);for(c=g?c.vn():c.un();c.next();)g=c.value,If(a,b,g,d)}}else if(c instanceof V){e=c;b.add(e,new Df);for(g=e.di;g.next();)If(a,b,g.value,d)}else c.constructor===
S&&b.add(c,new Df(c.location))}Ef.prototype.doStop=Ef.prototype.Oi=function(){var a=this.b;a!==m&&Jf(a);Kf(this);Lf(this,this.Hb);this.Hb=m;this.To=this.by=p;if(0<Mf.count){for(var b=Mf.length,c=0;c<b;c++){var d=Mf.i[c];d.Gb!==m&&(d.Gb=m);Nf(d);Kf(d);d.b!==m&&Jf(d.b)}Mf.clear()}this.Gb!==m&&(this.Gb=m);this.Om.bo(NaN,NaN);Hf=Of=m;Nf(this);a.Jc=p;this.bj()};
function Kf(a){var b=a.b;if(b!==m){var c=b.nb;b.nb=h;for(var d=b.F,e=a.Jk;e!==m;){var g=e.Dy;if(g!==m&&(g(d,e,m),d.zd))break;e=e.Y}b.nb=c}a.Gt=m;a.Jk=m}Ef.prototype.doCancel=Ef.prototype.Ni=function(){Nf(this);Pf(this);var a=this.b;a!==m&&this.Om.aa()&&(a.position=this.Om);this.stopTool()};function Gf(a,b){if(b!==m){a.Wt=h;for(var c=b.f;c.next();){var d=c.key;d instanceof V&&(d.Sm=h)}}}
function Lf(a,b){if(b!==m&&a.Wt){for(var c=b.f;c.next();){var d=c.key;d instanceof V&&(d.Sm=p,d.Xe===Qf?d.Rb():d.J())}a.Wt=p}}Ef.prototype.doKeyDown=Ef.prototype.Yx=function(){var a=this.b;a!==m&&(a=a.F,a!==m&&this.S&&("Esc"===a.key?this.doCancel():this.doMouseMove()))};Ef.prototype.doKeyUp=Ef.prototype.Zx=function(){var a=this.b;a!==m&&(a.F!==m&&this.S)&&this.doMouseMove()};
function Vf(a){for(var b=Infinity,c=Infinity,d=-Infinity,e=-Infinity,a=a.f;a.next();){var g=a.value;if(g instanceof U||g.constructor===S){var i=g.location,g=i.x,i=i.y;!isNaN(g)&&!isNaN(i)&&(g<b&&(b=g),i<c&&(c=i),g>d&&(d=g),i>e&&(e=i))}}return Infinity===b?new E(0,0,0,0):new E(b,c,d-b,e-c)}
function Wf(a,b){if(a.wc===m){var c=a.b;if(!(c===m||c.Oa||c.Ud)&&a.Hb!==m){c.nb=!b;c.gr=!b;Pf(a);a.Kh.set(c.jc.C);for(var c=a.oB?c.yd.copyParts(a.Hb.dj(),c,h):c.yd.copyParts(c.selection,c,h),d=c.f;d.next();)d.value.location=d.key.location.copy();d=Vf(c);new C(d.x+d.width/2,d.y+d.height/2);for(var d=new oa(S,Df),e=a.Hb.f;e.next();){var g=e.key;if((g instanceof U||g.constructor===S)&&g.canCopy())g=c.ca(g),g!==m&&(g.Zh(),d.add(g,new Df(g.location)))}for(c=c.f;c.next();)e=c.value,e instanceof V&&e.canCopy()&&
d.add(e,new Df);a.wc=d;Ff(a,d.dj());a.Gb!==m&&(c=a.Gb,d=Cb(c.mb),c.nk(a.Kh.x-(d.x+d.width/2),a.Kh.y-(d.y+d.height/2)))}}}function Nf(a){var b=a.b;b!==m&&(a.wc!==m&&(b.yd.deleteParts(a.wc.dj(),p),a.wc=m),b.nb=p,b.gr=p,a.Kh.set(b.jc.C))}function Xf(a,b){var c=a.b;if(c!==m){var d=a.Kh;a.moveParts(b,c.F.C.copy().es(d),h)}}
Ef.prototype.moveParts=Ef.prototype.LJ=function(a,b,c){if(!(a===m||0===a.count)){var d=b.copy();isNaN(d.x)&&(d.x=0);isNaN(d.y)&&(d.y=0);var e=this.Wt;e||Gf(this,a);for(var g=new y,i=new y(Sa),j=a.f;j.next();){var k=j.key;if(k instanceof U||k.constructor===S){var l=Yf(this,k,a);if(l!==m)g.add({gh:k,info:j.value,FF:l});else if(!c||k.canMove()){var l=j.value.ih,n=this.computeMove(k,l.copy().add(d),a);k.location=n;j.value.zA=n.copy().es(l)}}else j.key instanceof V&&i.add(j.ae)}for(c=g.f;c.next();)g=c.value,
l=g.info.ih,n=l.copy().add(g.FF.zA),g.gh.location=n;for(i=i.f;i.next();)if(j=i.value,l=j.key,l instanceof V)if(l.Sm)if(c=l.ea,g=l.ia,this.Gb!==m&&this.vl)j=j.value.ih,a.add(l,new Df(d)),n=b.x-j.x,c=b.y-j.y,l.nk(n,c);else{n=new C(0,0);if(c!==m){n.set(c.location);var r=a.ca(c);r!==m&&n.es(r.ih)}k=new C(0,0);g!==m&&(k.set(g.location),r=a.ca(g),r!==m&&k.es(r.ih));c!==m&&g!==m?n.hg(k)?(j=j.value.ih,c=n.copy(),c.es(j),a.add(l,new Df(n)),l.nk(c.x,c.y)):(l.Sm=p,l.Rb()):(j=j.value.ih,a.add(l,new Df(c!==m?
n:g!==m?k:b)),n=d.x-j.x,c=d.y-j.y,l.nk(n,c))}else if(l.ea===m||l.ia===m)j=j.value.ih,a.add(l,new Df(b)),n=d.x-j.x,c=d.y-j.y,l.nk(n,c);e||Lf(this,a)}};function Yf(a,b,c){b=b.Va;if(b!==m){a=Yf(a,b,c);if(a!==m)return a;a=c.ca(b);if(a!==m&&a instanceof Df)return a}return m}
function Pf(a){if(a.Hb!==m){var b=a.b,c=p;b!==m&&(c=b.nb,b.nb=h);for(var d=a.Hb.f;d.next();){var e=d.key;if(e instanceof U||e.constructor===S)e.location=d.value.ih}for(d=a.Hb.f;d.next();)if(e=d.key,e instanceof V&&e.Sm){var g=d.value.ih;a.Hb.add(e,new Df);e.nk(-g.x,-g.y)}b!==m&&(b.nb=c,b.ai())}}
Ef.prototype.computeMove=Ef.prototype.UH=function(a,b){if(a===m)return b;var c=b,c=b;if(this.Fn&&(c=b.copy(),a!==m)){var d=this.b;if(d!==m){var e=d.Ku,g=this.jy,d=g.width,g=g.height,i=this.XB,j=i.x,i=i.y,k=this.WB;if(e!==m){var l=e.Br;isNaN(d)&&(d=l.width);isNaN(g)&&(g=l.height);e=e.iy;isNaN(j)&&(j=e.x);isNaN(i)&&(i=e.y)}e=(new C).Ml(0,0,d,g,k);c=Fd(c.x,c.y,j+e.x,i+e.y,d,g)}}c=a.ay!==m?a.ay(a,b,c):c;g=a.DC;d=g.x;isNaN(d)&&(d=a.location.x);g=g.y;isNaN(g)&&(g=a.location.y);e=a.xC;j=e.x;isNaN(j)&&(j=
a.location.x);e=e.y;isNaN(e)&&(e=a.location.y);return new C(Math.max(d,Math.min(c.x,j)),Math.max(g,Math.min(c.y,e)))};function Zf(a,b){if(b===m)return h;var c=b.V;return c===m||c.Ga||c instanceof mf||c.ta.Sc||a.Hb&&a.Hb.contains(c)||a.wc&&a.wc.contains(c)?h:p}
Ef.prototype.dragOver=Ef.prototype.nI=function(a,b,c){var d=this.b;if(d!==m){if(this.vl&&this.Gb!==m){var e=this.b.P;e instanceof O&&(this.Gb.ea!==m&&e.as(this.Gb.data,""),this.Gb.ia!==m&&e.bs(this.Gb.data,""))}e=p;this.St===p&&(e=d.nb,d.nb=h);var g=p,i=this,j=$f(d,a,m,function(a){return!Zf(i,a)}),k=d.F;k.fd=j;var l=d.nb;d.nb=h;if(j!==this.Jk){var n=this.Jk;this.Gt=n;for(this.Jk=j;n!==m;){var r=n.Dy;if(r!==m){if(j===n)break;if(j!==m&&j.ci(n))break;r(k,n,j);g=h;if(k.zd)break}n=n.Y}for(n=this.Gt;j!==
m;){r=j.EC;if(r!==m){if(n===j)break;if(n!==m&&n.ci(j))break;r(k,j,n);g=h;if(k.zd)break}j=j.Y}j=this.Jk}j===m&&(r=d.FC,r!==m&&(r(k),g=h));d.nb=l;g&&d.update();this.St===p&&(d.nb=e);if((d.He||d.Ie)&&(b||c))d.Wv=d.js(a),ag(d,d.Wv).hg(d.position)?Jf(d):bg(d)}};
Ef.prototype.dropOnto=Ef.prototype.yI=function(a){var b=this.b;if(b!==m&&b.P!==m){var c=this;Kf(this);var d=$f(b,a,m,function(a){return!Zf(c,a)}),a=b.F;a.fd=d;if(d!==m)for(;d!==m;){var e=d.Nr;if(e!==m&&(e(a,d),a.zd))break;d=d.Y}else e=b.Nr,e!==m&&e(a);for(a=b.selection.f;a.next();)d=a.value,d instanceof U&&cg(b,d.la)}};
Ef.prototype.doMouseMove=Ef.prototype.Zg=function(){if(this.S){var a=this.b;if(a!==m&&this.ql!==m&&this.Hb!==m){var b=p,c=p;this.mayCopy()?(b=h,Wf(this,p),Xf(this,this.wc)):this.mayMove()?(c=h,Nf(this),Xf(this,this.Hb)):Nf(this);this.dragOver(a.F.C,c,b);yf(a)}}};
Ef.prototype.doMouseUp=Ef.prototype.Ne=function(){if(this.S){this.To=h;var a=this.b;if(a!==m){var b=p,c=this.mayCopy();c&&this.wc!==m?(Pf(this),Nf(this),Wf(this,h),Xf(this,this.wc),this.wc!==m&&a.Ty(this.wc.dj())):(b=h,Nf(this),this.mayMove()&&(Xf(this,this.Hb),this.St=p,this.dragOver(a.F.C,h,p),this.St=h));this.dropOnto(a.F.C);if(this.S){this.wc=m;if(b&&this.Hb!==m)for(b=this.Hb.f;b.next();){var d=b.key;d instanceof U&&(d=d.Va,d!==m&&d.placeholder!==m&&!this.Hb.contains(d)&&d.Tx&&d.J())}a.ai();Lf(this,
this.Hb);this.te=c?"Copy":"Move";a.ga(c?"SelectionCopied":"SelectionMoved",a.selection)}this.stopTool()}}};Ef.prototype.mayCopy=Ef.prototype.EJ=function(){var a=this.b;if(a===m||(a.Oa||a.Ud||!a.dn||!a.Oh)||!a.F.gk)return p;for(a=a.selection.f;a.next();){var b=a.value;if((b instanceof U||b.constructor===S)&&b.canCopy())return h}return this.Gb!==m&&this.vl&&this.Gb.canCopy()?h:p};
Ef.prototype.mayMove=Ef.prototype.GJ=function(){var a=this.b;if(a===m||a.Oa||!a.ck)return p;for(a=a.selection.f;a.next();){var b=a.value;if((b instanceof U||b.constructor===S)&&b.canMove())return h}return this.Gb!==m&&this.vl&&this.Gb.canMove()?h:p};var Mf=new y(Ef),Hf=m,Of=m;Ef.prototype.mayCopyExternal=Ef.prototype.FJ=function(){var a=this.b;return a===m||(!a.ZA||a.Oa||a.Ud||!a.dn)||a.P===m?p:h};
Ef.prototype.doSimulatedDragEnter=Ef.prototype.GB=function(){this.mayCopyExternal()&&(Mf.contains(this)||Mf.add(this))};Ef.prototype.doSimulatedDragLeave=Ef.prototype.HB=function(){Nf(this);var a=this.b;a!==m&&(a.ra!==this&&this.Om.aa())&&(a.position=this.Om)};Ef.prototype.doSimulatedDragOver=Ef.prototype.qF=function(){if(this.mayCopyExternal()){var a=this.b;if(a!==m){var b=Hf;b!==m&&b.Hb!==m&&(dg(this,b.Hb.dj(),p),Xf(this,this.wc),a.Ty(this.wc.dj()),this.dragOver(a.F.C,p,h),yf(a))}}};
Ef.prototype.doSimulatedDrop=Ef.prototype.rF=function(){var a=Hf;if(a!==m&&(a.To=h,Nf(this),this.mayCopyExternal())){var b=this.b;b!==m&&(this.Lb("Drop"),dg(this,a.Hb.dj(),h),Xf(this,this.wc),this.wc!==m&&b.Ty(this.wc.dj()),this.te="ExternalCopy",this.dropOnto(b.F.C),this.wc=m,b.ga("ExternalObjectsDropped",b.selection),this.bj(),b.ai())}};
function dg(a,b,c){if(a.wc===m){var d=a.b;if(!(d===m||d.Oa||d.Ud)&&d.P!==m){d.nb=!c;d.gr=!c;a.Kh.set(d.F.C);for(var d=d.yd.copyParts(b,d,h),c=Vf(b),e=new C(c.x+c.width/2,c.y+c.height/2),g=a.Kh,c=new oa(S,Df),b=b.f;b.next();){var i=b.value;if((i instanceof U||i.constructor===S)&&i.canCopy()){var j=i.location,i=d.ca(i);i.location=new C(g.x-(e.x-j.x),g.y-(e.y-j.y));i.Zh();c.add(i,new Df(i.location))}}for(d=d.f;d.next();)e=d.value,e instanceof V&&e.canCopy()&&c.add(e,new Df);a.wc=c;Ff(a,c.dj());a.Gb!==
m&&(c=a.Gb,d=Cb(c.mb),c.nk(a.Kh.x-(d.x+d.width/2),a.Kh.y-(d.y+d.height/2)))}}}
function eg(){zf.call(this);this.Yw=100;this.ux=p;var a=new V;a.$n="PATH";var b=new W;b.Ui=h;b.name="PATH";b.stroke="blue";a.add(b);b=new W;b.Rl="Standard";b.fill="blue";a.add(b);a.Cd="Tool";this.nx=a;a=new U;b=new W;b.oe="";b.Wa="Rectangle";b.fill=m;b.stroke="magenta";b.Qa=2;b.ma=new yb(1,1);a.add(b);a.rk=p;a.Cd="Tool";this.lx=a;this.mx=b;a=new U;b=new W;b.oe="";b.Wa="Rectangle";b.fill=m;b.stroke="magenta";b.Qa=2;b.ma=new yb(1,1);a.add(b);a.rk=p;a.Cd="Tool";this.ox=a;this.px=b;this.Ww=this.Vw=this.Sw=
this.Rw=this.Tw=m;this.Ws=h;this.nE=new oa(R,"boolean");this.aA=this.kx=m}v.H("LinkingBaseTool",eg);v.pa(eg,zf);eg.prototype.doStop=eg.prototype.Oi=function(){this.wf=this.We=this.vf=this.Ve=this.Jb=m;this.mv.clear();this.qe=m};v.a(eg,"portGravity",eg.prototype.NC);v.defineProperty(eg,{NC:"portGravity"},s("Yw"),function(a){this.Yw!==a&&(t&&v.e(a,"number",eg,"portGravity"),this.Yw=a)});v.a(eg,"validUnconnectedLinks",eg.prototype.ho);
v.defineProperty(eg,{ho:"validUnconnectedLinks"},s("ux"),function(a){this.ux!==a&&(t&&v.e(a,"boolean",eg,"validUnconnectedLinks"),this.ux=a)});v.a(eg,"temporaryLink",eg.prototype.lh);v.defineProperty(eg,{lh:"temporaryLink"},s("nx"),function(a){this.nx!==a&&(t&&v.c(a,V,eg,"temporaryLink"),this.nx=a)});v.a(eg,"temporaryFromNode",eg.prototype.re);v.defineProperty(eg,{re:"temporaryFromNode"},s("lx"),function(a){this.lx!==a&&(t&&v.c(a,U,eg,"temporaryFromNode"),this.lx=a)});v.a(eg,"temporaryFromPort",eg.prototype.Pl);
v.defineProperty(eg,{Pl:"temporaryFromPort"},s("mx"),function(a){this.mx!==a&&(t&&v.c(a,R,eg,"temporaryFromPort"),this.mx=a)});v.a(eg,"temporaryToNode",eg.prototype.se);v.defineProperty(eg,{se:"temporaryToNode"},s("ox"),function(a){this.ox!==a&&(t&&v.c(a,U,eg,"temporaryToNode"),this.ox=a)});v.a(eg,"temporaryToPort",eg.prototype.Ql);v.defineProperty(eg,{Ql:"temporaryToPort"},s("px"),function(a){this.px!==a&&(t&&v.c(a,R,eg,"temporaryToPort"),this.px=a)});v.a(eg,"originalLink",eg.prototype.Jb);
v.defineProperty(eg,{Jb:"originalLink"},s("Tw"),function(a){this.Tw!==a&&(t&&a!==m&&v.c(a,V,eg,"originalLink"),this.Tw=a)});v.a(eg,"originalFromNode",eg.prototype.Ve);v.defineProperty(eg,{Ve:"originalFromNode"},s("Rw"),function(a){this.Rw!==a&&(t&&a!==m&&v.c(a,U,eg,"originalFromNode"),this.Rw=a)});v.a(eg,"originalFromPort",eg.prototype.vf);v.defineProperty(eg,{vf:"originalFromPort"},s("Sw"),function(a){this.Sw!==a&&(t&&a!==m&&v.c(a,R,eg,"originalFromPort"),this.Sw=a)});v.a(eg,"originalToNode",eg.prototype.We);
v.defineProperty(eg,{We:"originalToNode"},s("Vw"),function(a){this.Vw!==a&&(t&&a!==m&&v.c(a,U,eg,"originalToNode"),this.Vw=a)});v.a(eg,"originalToPort",eg.prototype.wf);v.defineProperty(eg,{wf:"originalToPort"},s("Ww"),function(a){this.Ww!==a&&(t&&a!==m&&v.c(a,R,eg,"originalToPort"),this.Ww=a)});v.m(eg,{Bd:"isForwards"},s("Ws"));v.m(eg,{mv:"validPortsCache"},s("nE"));v.a(eg,"targetPort",eg.prototype.qe);
v.defineProperty(eg,{qe:"targetPort"},s("kx"),function(a){this.kx!==a&&(t&&a!==m&&v.c(a,R,eg,"targetPort"),this.kx=a)});eg.prototype.copyPortProperties=eg.prototype.aI=function(a,b,c,d,e){a===m||(b===m||c===m||d===m)||(d.ma=b.la.size,e?(d.Za=b.Za,d.uk=b.uk):(d.Xa=b.Xa,d.jk=b.jk),c.sf=sc,c.location=b.xb(sc),d.Pa=b.zn(),c.of())};eg.prototype.setNoTargetPortProperties=eg.prototype.kK=function(a,b){b!==m&&(b.ma=new yb(1,1),b.Xa=lc,b.Za=lc);a!==m&&(a.location=this.b.F.C)};
eg.prototype.doMouseMove=eg.prototype.Zg=function(){if(this.S){var a=this.b;if(a!==m){this.qe=this.findTargetPort(this.Bd);if(this.qe!==m){var b=this.qe.V;if(b instanceof U){this.Bd?this.copyPortProperties(b,this.qe,this.se,this.Ql,h):this.copyPortProperties(b,this.qe,this.re,this.Pl,p);yf(a);return}}this.Bd?this.setNoTargetPortProperties(this.se,this.Ql):this.setNoTargetPortProperties(this.re,this.Pl);yf(a)}}};
eg.prototype.findValidLinkablePort=eg.prototype.QI=function(a,b){if(a===m)return m;var c=a.V;if(!(c instanceof U))return m;for(;a!==m;){var d=b?a.ez:a.fy;if(d===h&&(a.oe!==m||a instanceof U)&&(b?this.isValidTo(c,a):this.isValidFrom(c,a)))return a;if(d===p)break;a=a.Y}return m};
eg.prototype.findTargetPort=eg.prototype.KI=function(a){for(var b=this.b,c=b.F.C,d=this.NC,e=this,g=b.xn(c,d,function(b){return e.findValidLinkablePort(b,a)},m),b=d*d,d=m,g=g.f;g.next();){var i=g.value,j=i.V;if(j instanceof U){var k=i.xb(sc),l=c.x-k.x,k=c.y-k.y,l=l*l+k*k;l<b&&(k=this.mv.ca(i),k!==m?k&&(d=i,b=l):a&&this.isValidLink(this.Ve,this.vf,j,i)||!a&&this.isValidLink(j,i,this.We,this.wf)?(this.mv.add(i,h),d=i,b=l):this.mv.add(i,p))}}return d!==m&&(c=d.V,c instanceof U&&(c.ta===m||c.ta.kl))?
d:m};eg.prototype.isValidFrom=eg.prototype.rJ=function(a,b){if(a===m||b===m)return this.ho;if(this.b.ra===this&&(a.ta!==m&&!a.ta.kl||b.fy!==h))return p;var c=b.RB;if(Infinity>c){if(this.Jb!==m&&a===this.Ve&&b===this.vf)return h;var d=b.oe;d===m&&(d="");if(a.sr(d).count>=c)return p}return h};
eg.prototype.isValidTo=eg.prototype.uJ=function(a,b){if(a===m||b===m)return this.ho;if(this.b.ra===this&&(a.ta!==m&&!a.ta.kl||b.ez!==h))return p;var c=b.yD;if(Infinity>c){if(this.Jb!==m&&a===this.We&&b===this.wf)return h;var d=b.oe;d===m&&(d="");if(a.Oe(d).count>=c)return p}return h};eg.prototype.isInSameNode=eg.prototype.nJ=function(a,b){if(a===m||b===m)return p;if(a===b)return h;var c=a.V,d=b.V;return c!==m&&c===d};
eg.prototype.isLinked=eg.prototype.pJ=function(a,b){if(a===m||b===m)return p;var c=a.V;if(!(c instanceof U))return p;var d=a.oe;d===m&&(d="");var e=b.V;if(!(e instanceof U))return p;var g=b.oe;g===m&&(g="");for(e=e.Oe(g);e.next();)if(g=e.value,g.ea===c&&g.dh===d)return h;return p};
eg.prototype.isValidLink=eg.prototype.sJ=function(a,b,c,d){return!this.isValidFrom(a,b)||!this.isValidTo(c,d)||b!==m&&d!==m&&((!b.QB||!d.xD)&&this.isInSameNode(b,d)||(!b.PB||!d.wD)&&this.isLinked(b,d))||this.Jb!==m&&(a!==m&&a.Cl(this.Jb)||c!==m&&c.Cl(this.Jb))||a!==m&&c!==m&&(a.data===m&&c.data!==m||a.data!==m&&c.data===m)||!fg(this,a,c,this.Jb)?p:this.zy!==m?this.zy(a,b,c,d,this.Jb):h};
function fg(a,b,c,d){if(b===m||c===m)return p;var e=a.b.LD;if(e!==gg){if(e===hg){for(e=c.le;e.next();){var g=e.value;if(g!==d&&g.ia===c)return p}return!ig(a,b,c,d)}if(e===jg){for(e=b.le;e.next();)if(g=e.value,g!==d&&g.ea===b)return p;return!ig(a,b,c,d)}if(e===kg)return b===c?a=h:(e=new qa(U),e.add(c),a=qg(a,e,b,c,d)),!a;if(e===rg)return!ig(a,b,c,d);if(e===sg)return b===c?a=h:(e=new qa(U),e.add(c),a=tg(a,e,b,c,d)),!a}return h}
function ig(a,b,c,d){if(b===c)return h;if(b===m||c===m)return p;for(var e=b.le;e.next();){var g=e.value;if(g!==d&&g.ia===b&&(g=g.ea,g!==b&&ig(a,g,c,d)))return h}return p}function qg(a,b,c,d,e){if(c===d)return h;if(c===m||d===m||b.contains(c))return p;b.add(c);for(var g=c.le;g.next();){var i=g.value;if(i!==e&&i.ia===c&&(i=i.ea,i!==c&&qg(a,b,i,d,e)))return h}return p}
function tg(a,b,c,d,e){if(c===d)return h;if(c===m||d===m||b.contains(c))return p;b.add(c);for(var g=c.le;g.next();){var i=g.value;if(i!==e){var j=i.ea,i=i.ia,j=j===c?i:j;if(j!==c&&tg(a,b,j,d,e))return h}}return p}v.a(eg,"linkValidation",eg.prototype.zy);v.defineProperty(eg,{zy:"linkValidation"},s("aA"),function(a){a!==m&&v.e(a,"function",eg,"linkValidation");this.aA=a});function ua(){eg.call(this);this.name="Linking";this.Uv={};this.Tv=m;this.Q=ug;this.fx=this.ex=m}v.H("LinkingTool",ua);v.pa(ua,eg);
var ug;ua.Either=ug=v.l(ua,"Either",0);var vg;ua.ForwardsOnly=vg=v.l(ua,"ForwardsOnly",0);var wg;ua.BackwardsOnly=wg=v.l(ua,"BackwardsOnly",0);v.a(ua,"archetypeLinkData",ua.prototype.aB);v.defineProperty(ua,{aB:"archetypeLinkData"},s("Uv"),function(a){this.Uv!==a&&(a!==m&&v.c(a,Object,ua,"archetypeLinkData"),this.Uv=a)});v.a(ua,"archetypeLabelNodeData",ua.prototype.$A);
v.defineProperty(ua,{$A:"archetypeLabelNodeData"},s("Tv"),function(a){if(this.Tv!==a){a!==m&&v.c(a,Object,ua,"archetypeLabelNodeData");var b=this.b;b!==m&&(b=b.P,b!==m&&!(a instanceof U)&&!b.sy(a)&&v.g("CommandHandler.archetypeLabelNodeData must be either a Node or a data object for which GraphLinksModel.isLinkLabelForNodeData is true: "+a));this.Tv=a}});v.a(ua,"direction",ua.prototype.direction);
v.defineProperty(ua,{direction:"direction"},s("Q"),function(a){this.Q!==a&&(t&&v.Ua(a,ua,ua,"direction"),this.Q=a)});v.a(ua,"startObject",ua.prototype.Zy);v.defineProperty(ua,{Zy:"startObject"},s("ex"),function(a){this.ex!==a&&(t&&a!==m&&v.c(a,R,ua,"startObject"),this.ex=a)});v.m(ua,{iv:"startPort"},s("fx"));
ua.prototype.canStart=ua.prototype.lf=function(){if(!this.isEnabled)return p;var a=this.b;if(a===m||(a.Oa||a.Ud)||!a.kl)return p;var b=a.P;return b===m||!(b instanceof O)||!a.F.left||a.ra!==this&&!this.isBeyondDragSize()?p:this.findLinkablePort()!==m};
ua.prototype.findLinkablePort=ua.prototype.GI=function(){var a=this.b;if(a===m)return m;var b=this.Zy;b===m&&(b=a.dd(a.jc.C,m,m));if(b===m||!(b.V instanceof U))return m;var c=this.direction;if(c===ug||c===vg)if(a=this.findValidLinkablePort(b,p),a!==m)return this.Ws=h,a;if(c===ug||c===wg)if(a=this.findValidLinkablePort(b,h),a!==m)return this.Ws=p,a;return m};
ua.prototype.doActivate=ua.prototype.Yh=function(){var a=this.b;if(a!==m&&(this.iv===m&&(this.fx=this.findLinkablePort()),this.iv!==m)){this.Lb(this.name);a.Jc=h;a.xc="hand";a.add(this.re);a.add(this.se);if(this.Bd){this.vf=this.iv;var b=this.vf.V;b instanceof U&&(this.Ve=b);this.copyPortProperties(this.Ve,this.vf,this.re,this.Pl,p)}else this.wf=this.iv,b=this.wf.V,b instanceof U&&(this.We=b),this.copyPortProperties(this.We,this.wf,this.se,this.Ql,h);this.lh&&(this.re!==m&&(this.lh.ea=this.re),this.se!==
m&&(this.lh.ia=this.se),a.add(this.lh));this.S=h}};ua.prototype.doDeactivate=ua.prototype.ik=function(){this.S=p;var a=this.b;a!==m&&(a.remove(this.lh),a.remove(this.re),a.remove(this.se),a.Jc=p,a.xc="",this.bj())};ua.prototype.doStop=ua.prototype.Oi=function(){eg.prototype.Oi.call(this);this.Zy=this.fx=m};
ua.prototype.doMouseUp=ua.prototype.Ne=function(){if(this.S){var a=this.b;if(a===m)return;var b=this.te=m,c=m,d=m,e=m,g=this.qe=this.findTargetPort(this.Bd),i=m;g!==m?(i=g.V,i instanceof U&&(this.Bd?(this.Ve!==m&&(b=this.Ve,c=this.vf),d=i,e=g):(b=i,c=g,this.We!==m&&(d=this.We,e=this.wf)))):this.Bd?this.Ve!==m&&this.ho&&(b=this.Ve,c=this.vf):this.We!==m&&this.ho&&(d=this.We,e=this.wf);if(b!==m||d!==m)b=this.insertLink(b,c,d,e),b!==m?(g===m&&(this.Bd?b.iF=a.F.C:b.hF=a.F.C),a.Od&&a.select(b),this.te=
this.name,a.ga("LinkDrawn",b)):a.P.hB()}this.stopTool()};
ua.prototype.insertLink=ua.prototype.hJ=function(a,b,c,d){var e=this.b;if(e===m)return m;var g=e.P;if(g===m||!(g instanceof O))return m;b===m&&(b=a);b=b.oe;b===m&&(b="");d===m&&(d=c);var i=d.oe;i===m&&(i="");d=this.aB;if(d instanceof V){if(pf(d),g=d.copy(),g instanceof V)return g.ea=a,g.dh=b,g.ia=c,g.gi=i,e.add(g),g}else if(d!==m&&(d=g.qB(d),v.Na(d)))return g.fv(d,g.cc(a.data)),g.as(d,b),g.gv(d,g.cc(c.data)),g.bs(d,i),g.VA(d),a=this.$A,a!==m&&g.sy(a)&&(a=g.nn(a),v.Na(a)&&(g.iu(a),a=g.cc(a),a!==f&&
g.UA(d,a))),g=e.Qi(d);return m};function xg(){eg.call(this);this.name="Relinking";var a=new W;a.Wa="Diamond";a.ma=new yb(8,8);a.fill="cyan";a.cursor="pointer";a.jh=0;this.Qz=a;a=new W;a.Wa="Diamond";a.ma=new yb(8,8);a.fill="cyan";a.cursor="pointer";a.jh=-1;this.LA=a;this.Zb=m;this.nA=new E}v.H("RelinkingTool",xg);v.pa(xg,eg);
xg.prototype.updateAdornments=xg.prototype.ii=function(a){if(a instanceof V){var b=m,c="RelinkFrom";if(a.Ga){var d=a.Zn;d!==m&&(a.eb()&&a.canRelinkFrom()&&d.mk()&&d.la.aa())&&(b=a.sn(c),b===m&&(b=this.makeAdornment(d,p),b.nd=c),b!==m&&b.J());a.Ym(c,b)}else a.Ll(c);b=m;c="RelinkTo";a.Ga?(d=a.Zn,d!==m&&(a.eb()&&a.canRelinkTo()&&d.mk()&&d.la.aa())&&(b=a.sn(c),b===m&&(b=this.makeAdornment(d,h),b.nd=c),b!==m&&b.J()),a.Ym(c,b)):a.Ll(c)}};
xg.prototype.makeAdornment=xg.prototype.Ay=function(a,b){var c=new mf;c.type=yg;var d=b?this.PG:this.AF;d!==m&&c.add(d.copy());c.Nd=a;return c};v.defineProperty(xg,{AF:"fromHandleArchetype"},s("Qz"),function(a){a&&v.c(a,R,xg,"fromHandleArchetype");this.Qz=a});v.defineProperty(xg,{PG:"toHandleArchetype"},s("LA"),function(a){a&&v.c(a,R,xg,"toHandleArchetype");this.LA=a});v.m(xg,{handle:"handle"},s("Zb"));
xg.prototype.canStart=xg.prototype.lf=function(){if(!this.isEnabled)return p;var a=this.b;if(a===m||(a.Oa||a.Ud)||!a.Fi)return p;var b=a.P;if(b===m||!(b instanceof O)||!a.F.left)return p;b=this.findToolHandleAt(a.jc.C,"RelinkFrom");b===m&&(b=this.findToolHandleAt(a.jc.C,"RelinkTo"));return b!==m};
xg.prototype.doActivate=xg.prototype.Yh=function(){var a=this.b;if(a!==m){var b=this.findToolHandleAt(a.jc.C,"RelinkFrom");b===m&&(b=this.findToolHandleAt(a.jc.C,"RelinkTo"));if(b!==m){var c=b.V;c instanceof mf&&c.bn instanceof V&&(this.Zb=b,this.Lb(this.name),a.Jc=h,a.xc="hand",this.Ws=c===m||"RelinkTo"===c.nd,this.Jb=c.bn,this.vf=this.Jb.Ic,this.Ve=this.Jb.ea,this.wf=this.Jb.rd,this.We=this.Jb.ia,this.nA=this.Jb.la,a.add(this.re),a.add(this.se),this.Bd?this.copyPortProperties(this.Ve,this.vf,this.re,
this.Pl,h):this.copyPortProperties(this.We,this.wf,this.se,this.Ql,p),this.Jb!==m&&0<this.Jb.ba&&(this.Ve===m&&(this.Pl!==m&&(this.Pl.ma=new yb(0,0)),this.re!==m&&(this.re.location=this.Jb.h(0))),this.We===m&&(this.Ql!==m&&(this.Ql.ma=new yb(0,0)),this.se!==m&&(this.se.location=this.Jb.h(this.Jb.ba-1)))),this.lh!==m&&(this.re!==m&&(this.lh.ea=this.re),this.se!==m&&(this.lh.ia=this.se),a.add(this.lh)),this.S=h)}}};
xg.prototype.doDeactivate=xg.prototype.ik=function(){this.S=p;var a=this.b;a!==m&&(a.remove(this.lh),a.remove(this.re),a.remove(this.se),a.Jc=p,a.xc="",this.bj())};xg.prototype.doStop=xg.prototype.Oi=function(){eg.prototype.Oi.call(this);this.Zb=m};
xg.prototype.doMouseUp=xg.prototype.Ne=function(){if(this.S){var a=this.b;if(a===m)return;this.te=m;var b=this.Ve,c=this.vf,d=this.We,e=this.wf,g=this.Jb;this.qe=this.findTargetPort(this.Bd);if(this.qe!==m){var i=this.qe.V;i instanceof U&&(this.Bd?(d=i,e=this.qe):(b=i,c=this.qe))}else this.ho?this.Bd?e=d=m:c=b=m:g=m;g!==m&&(this.reconnectLink(g,this.Bd?d:b,this.Bd?e:c,this.Bd),this.qe===m&&(this.Bd?g.iF=a.F.C:g.hF=a.F.C,g.Rb()),a.Od&&(g.Ga=h),this.te=this.name,a.ga("LinkRelinked",g,this.Bd?this.wf:
this.vf));zg(this.Jb,this.nA)}this.stopTool()};xg.prototype.reconnectLink=xg.prototype.XJ=function(a,b,c,d){var e=this.b;if(e===m)return p;var g=b!==m?b.data:m,g=g!==m?e.P.cc(g):f,c=c.oe!==m?c.oe:"",a=a.data;if(a!==m&&g!==f){b=e.P;if(b===m||!(b instanceof O))return p;d?(b.gv(a,g),b.bs(a,c)):(b.fv(a,g),b.as(a,c))}else d?(this.Jb.ia=b,this.Jb.gi=c):(this.Jb.ea=b,this.Jb.dh=c);return h};
function Ag(){zf.call(this);this.name="LinkReshaping";var a=new W;a.Wa="Rectangle";a.ma=new yb(6,6);a.fill="cyan";this.Aj=a;this.Uw=this.pA=this.Rv=this.Zb=m}v.H("LinkReshapingTool",Ag);v.pa(Ag,zf);var Bg;Ag.None=Bg=v.l(Ag,"None",0);var Cg;Ag.Horizontal=Cg=v.l(Ag,"Horizontal",1);var Dg;Ag.Vertical=Dg=v.l(Ag,"Vertical",2);var Ig;Ag.All=Ig=v.l(Ag,"All",3);
Ag.prototype.updateAdornments=Ag.prototype.ii=function(a){if(a instanceof V){var b=m;if(a.Ga){var c=a.path;c!==m&&(a.eb()&&a.canReshape()&&c.mk()&&c.la.aa())&&(b=a.sn(this.name),b===m&&(b=this.makeAdornment(c),b.nd=this.name),b!==m&&(b.location=a.position,b.J()));a.Ym(this.name,b)}else a.Ll(this.name)}};
Ag.prototype.makeAdornment=Ag.prototype.Ay=function(a){var b=new mf;b.type=yg;var c=a.V,d=c.ba,e=Ng(c);if(c.mb!==m&&2<d){for(var d=c.Fu,g=c.wy,i=d+1;i<=g-1;i++){var j=this.makeHandle(a,i);if(j!==m){j.jh=i;if(i!==d)if(i===d+1&&e){var k=c.h(d),l=c.h(d+1);ib(k.x,l.x)&&ib(k.y,l.y)&&(l=c.h(d-1));ib(k.x,l.x)?(j.Yn=Dg,j.cursor="n-resize"):ib(k.y,l.y)&&(j.Yn=Cg,j.cursor="w-resize")}else i===g-1&&e?(k=c.h(g-1),l=c.h(g),ib(k.x,l.x)&&ib(k.y,l.y)&&(k=c.h(g+1)),ib(k.x,l.x)?(j.Yn=Dg,j.cursor="n-resize"):ib(k.y,
l.y)&&(j.Yn=Cg,j.cursor="w-resize")):i!==g&&(j.Yn=Ig,j.cursor="move");b.add(j)}}b.Nd=a}return b};Ag.prototype.makeHandle=Ag.prototype.bG=function(){var a=this.Cr;return a===m?m:a.copy()};v.defineProperty(Ag,{Cr:"handleArchetype"},s("Aj"),function(a){a&&v.c(a,R,Ag,"handleArchetype");this.Aj=a});v.m(Ag,{handle:"handle"},s("Zb"));v.m(Ag,{an:"adornedLink"},s("Rv"));
Ag.prototype.canStart=Ag.prototype.lf=function(){if(!this.isEnabled)return p;var a=this.b;return a===m||a.Oa||!a.fn?p:this.findToolHandleAt(a.jc.C,this.name)!==m};Ag.prototype.doActivate=Ag.prototype.Yh=function(){var a=this.b;if(a!==m&&(this.Zb=this.findToolHandleAt(a.jc.C,this.name),this.Zb!==m)){var b=this.Zb.V.bn;b instanceof V&&(this.Rv=b,a.Jc=h,this.pA=b.h(this.Zb.jh),this.Uw=b.mb.copy(),this.Lb(this.name),this.S=h)}};
Ag.prototype.doDeactivate=Ag.prototype.ik=function(){this.bj();this.Uw=this.pA=this.Rv=this.Zb=m;var a=this.b;a!==m&&(a.Jc=p);this.S=p};Ag.prototype.doCancel=Ag.prototype.Ni=function(){var a=this.an;a!==m&&(a.mb=this.Uw);this.stopTool()};Ag.prototype.doMouseMove=Ag.prototype.Zg=function(){var a=this.b;this.S&&a!==m&&(a=this.computeReshape(a.F.C),this.reshape(a))};
Ag.prototype.doMouseUp=Ag.prototype.Ne=function(){var a=this.b;if(this.S&&a!==m){var b=this.computeReshape(a.F.C);this.reshape(b);b=this.an;b!==m&&(b.mb=this.an.mb);a.ai();this.te=this.name;a.ga("LinkReshaped",this.an)}this.stopTool()};
Ag.prototype.reshape=Ag.prototype.eK=function(a){var b=this.an;b.tk();var c=this.handle.jh,d=this.handle.Yn;if(Ng(b))if(c===b.Fu+1)c=b.Fu+1,d==Dg?(b.w(c,new C(b.h(c-1).x,a.y)),b.w(c+1,new C(b.h(c+2).x,a.y))):d==Cg&&(b.w(c,new C(a.x,b.h(c-1).y)),b.w(c+1,new C(a.x,b.h(c+2).y)));else if(c===b.wy-1)c=b.wy-1,d===Dg?(b.w(c-1,new C(b.h(c-2).x,a.y)),b.w(c,new C(b.h(c+1).x,a.y))):d===Cg&&(b.w(c-1,new C(a.x,b.h(c-2).y)),b.w(c,new C(a.x,b.h(c+1).y)));else{var d=c,e=b.h(d),g=b.h(d-1),i=b.h(d+1);ib(g.x,e.x)&&
ib(e.y,i.y)?(ib(g.x,b.h(d-2).x)&&!ib(g.y,b.h(d-2).y)?(e=b.mb,e.lc(d,new C(a.x,g.y)),b.mb=e,c++,d++):b.w(d-1,new C(a.x,g.y)),ib(i.y,b.h(d+2).y)&&!ib(i.x,b.h(d+2).x)?(e=b.mb,e.lc(d+1,new C(i.x,a.y)),b.mb=e):b.w(d+1,new C(i.x,a.y))):ib(g.y,e.y)&&ib(e.x,i.x)?(ib(g.y,b.h(d-2).y)&&!ib(g.x,b.h(d-2).x)?(e=b.mb,e.lc(d,new C(g.x,a.y)),b.mb=e,c++,d++):b.w(d-1,new C(g.x,a.y)),ib(i.x,b.h(d+2).x)&&!ib(i.y,b.h(d+2).y)?(e=b.mb,e.lc(d+1,new C(a.x,i.y)),b.mb=e):b.w(d+1,new C(a.x,i.y))):ib(g.x,e.x)&&ib(e.x,i.x)?(ib(g.x,
b.h(d-2).x)&&!ib(g.y,b.h(d-2).y)?(e=b.mb,e.lc(d,new C(a.x,g.y)),b.mb=e,c++,d++):b.w(d-1,new C(a.x,g.y)),ib(i.x,b.h(d+2).x)&&!ib(i.y,b.h(d+2).y)?(e=b.mb,e.lc(d+1,new C(a.x,i.y)),b.mb=e):b.w(d+1,new C(a.x,i.y))):ib(g.y,e.y)&&ib(e.y,i.y)&&(ib(g.y,b.h(d-2).y)&&!ib(g.x,b.h(d-2).x)?(e=b.mb,e.lc(d,new C(g.x,a.y)),b.mb=e,c++,d++):b.w(d-1,new C(g.x,a.y)),ib(i.y,b.h(d+2).y)&&!ib(i.x,b.h(d+2).x)?(e=b.mb,e.lc(d+1,new C(i.x,a.y)),b.mb=e):b.w(d+1,new C(i.x,a.y)));b.w(c,a.copy())}else b.w(c,a.copy());b.Uh()};
Ag.prototype.computeReshape=Ag.prototype.VH=function(a){var b=this.an,c=this.handle.jh;switch(this.handle.Yn){case Ig:return a;case Dg:return b=b.h(c),new C(b.x,a.y);case Cg:return b=b.h(c),new C(a.x,b.y);default:case Bg:return b.h(c)}};
function Og(){zf.call(this);this.name="Resizing";this.vd=(new yb(1,1)).freeze();this.vi=(new yb(9999,9999)).freeze();this.ki=(new yb(NaN,NaN)).freeze();this.Qk=p;this.va=m;var a=new W;a.Ei=sc;a.Wa="Rectangle";a.ma=new yb(6,6);a.fill="cyan";a.stroke="black";a.Qa=1;a.cursor="pointer";this.Aj=a;this.Zb=m;this.bq=0;this.fE=new E;this.Qw=new yb;this.oA=new C;this.qw=new yb(0,0);this.pw=new yb(Infinity,Infinity);this.ow=new yb(1,1)}v.H("ResizingTool",Og);v.pa(Og,zf);
Og.prototype.updateAdornments=Og.prototype.ii=function(a){if(!(a===m||a instanceof V)){var b=m;if(a.Ga){var c=a.yG;if(c!==m&&(a.eb()&&a.canResize()&&c.mk()&&c.la.aa())&&(b=a.sn(this.name),b===m&&(b=this.makeAdornment(c),b.nd=this.name),b!==m)){var d=c.zn();b.Pa=d;b.location=c.xb(pc);var e=b.placeholder;if(e!==m){var g=c.yl(),c=c.ua;e.ma=new yb(c.width*g,c.height*g)}Pg(this,b,d)}a.Ym(this.name,b)}else a.Ll(this.name)}};
Og.prototype.makeAdornment=Og.prototype.Ay=function(a){var b=m,b=a.V.ZC;if(b===m){b=new mf;b.type=Qg;var c=new Rg;c.Ui=h;b.add(c);b.add(this.makeHandle(a,pc));b.add(this.makeHandle(a,rc));b.add(this.makeHandle(a,zc));b.add(this.makeHandle(a,xc));b.add(this.makeHandle(a,Ac));b.add(this.makeHandle(a,Fc));b.add(this.makeHandle(a,Gc));b.add(this.makeHandle(a,Ec))}else if(pf(b),b=b.copy(),!(b instanceof mf))return m;b.Nd=a;return b};
Og.prototype.makeHandle=Og.prototype.bG=function(a,b){var c=this.Cr;if(c===m)return m;c=c.copy();c.pb=b;return c};
function Pg(a,b,c){if(b!==m)if(!ic(b.pb)&&""!==b.cursor)a:{a=b.pb;hc(a)&&(a=sc);if(0>=a.x)c=0>=a.y?c+225:1<=a.y?c+135:c+180;else if(1<=a.x)0>=a.y?c+=315:1<=a.y&&(c+=45);else if(0>=a.y)c+=270;else if(1<=a.y)c+=90;else break a;0>c?c+=360:360<=c&&(c-=360);b.cursor=22.5>c?"e-resize":67.5>c?"se-resize":112.5>c?"s-resize":157.5>c?"sw-resize":202.5>c?"w-resize":247.5>c?"nw-resize":292.5>c?"n-resize":337.5>c?"ne-resize":"e-resize"}else if(b instanceof w)for(b=b.elements;b.next();)Pg(a,b.value,c)}
v.defineProperty(Og,{Cr:"handleArchetype"},s("Aj"),function(a){a&&v.c(a,R,Og,"handleArchetype");this.Aj=a});v.m(Og,{handle:"handle"},s("Zb"));v.m(Og,{Nd:"adornedObject"},s("va"));Og.prototype.canStart=Og.prototype.lf=function(){if(!this.isEnabled)return p;var a=this.b;return a===m||a.Oa||!a.gn||!a.F.left?p:this.findToolHandleAt(a.jc.C,this.name)!==m?h:p};
Og.prototype.doActivate=Og.prototype.Yh=function(){var a=this.b;a!==m&&(this.Zb=this.findToolHandleAt(a.jc.C,this.name),this.Zb!==m&&(this.va=this.Zb.V.Nd,this.bq=this.va.Pa,this.fE.set(this.va.ua),this.oA.set(this.va.V.location),this.Qw.set(this.va.ma),this.ow=this.computeCellSize(),this.qw=this.computeMinSize(),this.pw=this.computeMaxSize(),a.Jc=h,this.Lb(this.name),this.S=h))};Og.prototype.doDeactivate=Og.prototype.ik=function(){var a=this.b;a!==m&&(this.bj(),this.va=this.Zb=m,this.S=a.Jc=p)};
Og.prototype.doCancel=Og.prototype.Ni=function(){this.va.ma=this.Qw;this.va.V.location=this.oA;this.stopTool()};Og.prototype.doMouseMove=Og.prototype.Zg=function(){var a=this.b;if(this.S&&a!==m){var b=this.qw,c=this.pw,d=this.ow,e=this.va.UB(a.F.C),g=this.va.yn;g===Sg&&(g=this.va.xa.Nb);b=this.computeResize(e,this.Zb.pb,b,c,d,!(g===Tg||g===Ug||a.F.shift));this.resize(b);Vg(a)}};
Og.prototype.doMouseUp=Og.prototype.Ne=function(){var a=this.b;if(this.S&&a!==m){var b=this.qw,c=this.pw,d=this.ow,e=this.va.UB(a.F.C),g=this.va.yn;g===Sg&&(g=this.va.xa.Nb);b=this.computeResize(e,this.Zb.pb,b,c,d,!(g===Tg||g===Ug||a.F.shift));this.resize(b);a.ai();this.te=this.name;a.ga("PartResized",this.va,this.Qw)}this.stopTool()};
Og.prototype.resize=Og.prototype.fK=function(a){var b=this.b;if(b!==m){var c=this.va.V,d=c.position.copy(),e=this.va.ua.copy(),g=this.va.zn();360<=g?g-=360:0>g&&(g+=360);var i=Math.PI*g/180,j=Math.cos(i),i=Math.sin(i),k=a.width-e.width,e=a.height-e.height,l=90<g&&270>g?1:0;d.x+=(a.x+k*l)*j-(a.y+e*(0<g&&180>g?1:0))*i;d.y+=(a.x+k*(180<g&&360>g?1:0))*i+(a.y+e*l)*j;this.va.ma=a.size;c.Zh();c.position=d;yf(b)}};
Og.prototype.computeResize=Og.prototype.WH=function(a,b,c,d,e,g){hc(b)&&(b=sc);var i=this.va.ua,j=i.x,k=i.y,l=i.x+i.width,n=i.y+i.height,r=1;if(!g){var r=i.width,q=i.height;0>=r&&(r=1);0>=q&&(q=1);r=q/r}a=Fd(a.x,a.y,j,k,e.width,e.height);e=i.copy();0>=b.x?0>=b.y?(e.x=Math.max(a.x,l-d.width),e.x=Math.min(e.x,l-c.width),e.width=Math.max(l-e.x,c.width),e.y=Math.max(a.y,n-d.height),e.y=Math.min(e.y,n-c.height),e.height=Math.max(n-e.y,c.height),g||(a=e.height/e.width,r<a?(e.height=r*e.width,e.y=n-e.height):
(e.width=e.height/r,e.x=l-e.width))):1<=b.y?(e.x=Math.max(a.x,l-d.width),e.x=Math.min(e.x,l-c.width),e.width=Math.max(l-e.x,c.width),e.height=Math.max(Math.min(a.y-k,d.height),c.height),g||(a=e.height/e.width,r<a?e.height=r*e.width:(e.width=e.height/r,e.x=l-e.width))):(e.x=Math.max(a.x,l-d.width),e.x=Math.min(e.x,l-c.width),e.width=l-e.x,g||(e.height=r*e.width,e.y=k+0.5*(n-k-e.height))):1<=b.x?0>=b.y?(e.width=Math.max(Math.min(a.x-j,d.width),c.width),e.y=Math.max(a.y,n-d.height),e.y=Math.min(e.y,
n-c.height),e.height=Math.max(n-e.y,c.height),g||(a=e.height/e.width,r<a?(e.height=r*e.width,e.y=n-e.height):e.width=e.height/r)):1<=b.y?(e.width=Math.max(Math.min(a.x-j,d.width),c.width),e.height=Math.max(Math.min(a.y-k,d.height),c.height),g||(a=e.height/e.width,r<a?e.height=r*e.width:e.width=e.height/r)):(e.width=Math.max(Math.min(a.x-j,d.width),c.width),g||(e.height=r*e.width,e.y=k+0.5*(n-k-e.height))):0>=b.y?(e.y=Math.max(a.y,n-d.height),e.y=Math.min(e.y,n-c.height),e.height=n-e.y,g||(e.width=
e.height/r,e.x=j+0.5*(l-j-e.width))):1<=b.y&&(e.height=Math.max(Math.min(a.y-k,d.height),c.height),g||(e.width=e.height/r,e.x=j+0.5*(l-j-e.width)));return e};Og.prototype.computeMinSize=Og.prototype.TH=function(){var a=this.va.Wd.copy(),b=this.Wd;!isNaN(b.width)&&b.width>a.width&&(a.width=b.width);!isNaN(b.height)&&b.height>a.height&&(a.height=b.height);return a};
Og.prototype.computeMaxSize=Og.prototype.SH=function(){var a=this.va.Dd.copy(),b=this.Dd;!isNaN(b.width)&&b.width<a.width&&(a.width=b.width);!isNaN(b.height)&&b.height<a.height&&(a.height=b.height);return a};
Og.prototype.computeCellSize=Og.prototype.QH=function(){var a=new yb(NaN,NaN),b=this.va.V;if(b){var c=b.$C;!isNaN(c.width)&&0<c.width&&(a.width=c.width);!isNaN(c.height)&&0<c.height&&(a.height=c.height)}c=this.fk;isNaN(a.width)&&(!isNaN(c.width)&&0<c.width)&&(a.width=c.width);isNaN(a.height)&&(!isNaN(c.height)&&0<c.height)&&(a.height=c.height);b=this.b;if((isNaN(a.width)||isNaN(a.height))&&b)c=b.Tb.he,c!==m&&c.Fn&&(c=c.jy,isNaN(a.width)&&(!isNaN(c.width)&&0<c.width)&&(a.width=c.width),isNaN(a.height)&&
(!isNaN(c.height)&&0<c.height)&&(a.height=c.height)),b=b.Ku,b!==m&&(b.visible&&this.Fn)&&(c=b.Br,isNaN(a.width)&&(!isNaN(c.width)&&0<c.width)&&(a.width=c.width),isNaN(a.height)&&(!isNaN(c.height)&&0<c.height)&&(a.height=c.height));if(isNaN(a.width)||0===a.width||Infinity===a.width)a.width=1;if(isNaN(a.height)||0===a.height||Infinity===a.height)a.height=1;return a};v.a(Og,"minSize",Og.prototype.Wd);
v.defineProperty(Og,{Wd:"minSize"},s("vd"),function(a){this.vd.u(a)||(t&&v.c(a,yb,Og,"minSize"),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),this.vd.Ra(a))});v.a(Og,"maxSize",Og.prototype.Dd);v.defineProperty(Og,{Dd:"maxSize"},s("vi"),function(a){this.vi.u(a)||(t&&v.c(a,yb,Og,"maxSize"),isNaN(a.width)&&(a.width=Infinity),isNaN(a.height)&&(a.height=Infinity),this.vi.Ra(a))});v.a(Og,"cellSize",Og.prototype.fk);
v.defineProperty(Og,{fk:"cellSize"},s("ki"),function(a){this.ki.u(a)||(t&&v.c(a,yb,Og,"cellSize"),this.ki.Ra(a))});v.a(Og,"isGridSnapEnabled",Og.prototype.Fn);v.defineProperty(Og,{Fn:"isGridSnapEnabled"},s("Qk"),function(a){this.Qk!==a&&(v.e(a,"boolean",Og,"isGridSnapEnabled"),this.Qk=a)});
function Wg(){zf.call(this);this.name="Rotating";this.dx=45;this.cx=2;this.va=m;var a=new W;a.Wa="Ellipse";a.ma=new yb(6,6);a.fill="yellow";a.stroke="black";a.Qa=1;a.cursor="pointer";this.Aj=a;this.Zb=m;this.bq=0;this.tA=new C}v.H("RotatingTool",Wg);v.pa(Wg,zf);
Wg.prototype.updateAdornments=Wg.prototype.ii=function(a){if(!(a===m||a instanceof V)){var b=m;if(a.Ga){var c=a.CG;if(c!==m&&(a.eb()&&a.canRotate()&&c.mk()&&c.la.aa())&&(b=a.sn(this.name),b===m&&(b=this.makeAdornment(c),b.nd=this.name),b!==m)){b.Pa=c.zn();var d=m,e=m;c===a||c===a.yb?(d=a.yb,e=a.sf):(d=c,e=sc);for(var g=d.ua,e=new C(g.width*e.x+e.offsetX,g.height*e.y+e.offsetY);d!==m&&d!==c;)d.transform.zb(e),d=d.Y;d=e.y;e=Math.max(e.x-c.ua.width,0);b.sf=sc;b.location=c.xb(new H(1,0,50+e,d))}a.Ym(this.name,
b)}else a.Ll(this.name)}};Wg.prototype.makeAdornment=Wg.prototype.Ay=function(a){var b=m,b=a.V.dD;if(b===m){b=new mf;b.type=Xg;var c=this.Cr;c!==m&&b.add(c.copy())}else if(pf(b),b=b.copy(),!(b instanceof mf))return m;b.Nd=a;return b};v.defineProperty(Wg,{Cr:"handleArchetype"},s("Aj"),function(a){a&&v.c(a,R,Wg,"handleArchetype");this.Aj=a});v.m(Wg,{handle:"handle"},s("Zb"));v.m(Wg,{Nd:"adornedObject"},s("va"));
Wg.prototype.canStart=Wg.prototype.lf=function(){if(!this.isEnabled)return p;var a=this.b;return a===m||a.Oa||!a.hn||!a.F.left?p:this.findToolHandleAt(a.jc.C,this.name)!==m?h:p};Wg.prototype.doActivate=Wg.prototype.Yh=function(){var a=this.b;if(a!==m&&(this.Zb=this.findToolHandleAt(a.jc.C,this.name),this.Zb!==m)){this.va=this.Zb.V.Nd;var b=this.va.V,c=b.yb;this.tA=this.va===b||this.va===c?c.xb(b.sf):this.va.xb(sc);this.bq=this.va.Pa;a.Jc=h;this.Lb(this.name);this.S=h}};
Wg.prototype.doDeactivate=Wg.prototype.ik=function(){var a=this.b;a!==m&&(this.bj(),this.va=this.Zb=m,this.S=a.Jc=p)};Wg.prototype.doCancel=Wg.prototype.Ni=function(){this.rotate(this.bq);this.stopTool()};Wg.prototype.doMouseMove=Wg.prototype.Zg=function(){var a=this.b;this.S&&a!==m&&(a=this.computeRotate(a.F.C),this.rotate(a))};
Wg.prototype.doMouseUp=Wg.prototype.Ne=function(){var a=this.b;if(this.S&&a!==m){var b=this.computeRotate(a.F.C);this.rotate(b);a.ai();this.te=this.name;a.ga("PartRotated",this.va,this.bq)}this.stopTool()};Wg.prototype.rotate=Wg.prototype.rotate=function(a){this.va!==m&&(this.va.Pa=a,yf(this.b))};
Wg.prototype.computeRotate=Wg.prototype.XH=function(a){var a=this.tA.Wh(a),b=this.va.Y;b&&(a-=b.zn(),360<=a?a-=360:0>a&&(a+=360));var b=Math.min(Math.abs(this.rD),180),c=Math.min(Math.abs(this.qD),b/2);!this.b.F.shift&&(0<b&&0<c)&&(a%b<c?a=Math.floor(a/b)*b:a%b>b-c&&(a=(Math.floor(a/b)+1)*b));360<=a?a-=360:0>a&&(a+=360);return a};v.a(Wg,"snapAngleMultiple",Wg.prototype.rD);
v.defineProperty(Wg,{rD:"snapAngleMultiple"},s("dx"),function(a){this.dx!==a&&(t&&v.e(a,"number",Wg,"snapAngleMultiple"),this.dx=a)});v.a(Wg,"snapAngleEpsilon",Wg.prototype.qD);v.defineProperty(Wg,{qD:"snapAngleEpsilon"},s("cx"),function(a){this.cx!==a&&(t&&v.e(a,"number",Wg,"snapAngleEpsilon"),this.cx=a)});function Yg(){zf.call(this);this.name="ClickSelecting"}v.H("ClickSelectingTool",Yg);v.pa(Yg,zf);
Yg.prototype.canStart=Yg.prototype.lf=function(){return!this.isEnabled||this.b===m||this.isBeyondDragSize()?p:h};Yg.prototype.doMouseUp=Yg.prototype.Ne=function(){this.S&&(this.standardMouseSelect(),this.standardMouseClick());this.stopTool()};function Zg(){zf.call(this);this.name="Action";this.Wl=m}v.H("ActionTool",Zg);v.pa(Zg,zf);
Zg.prototype.canStart=Zg.prototype.lf=function(){if(!this.isEnabled)return p;var a=this.b;if(a===m)return p;var b=a.F,c=a.dd(b.C,function(a){for(;a.Y!==m;){if(a.Mu)return a;a=a.Y}return m},function(a){return a.Mu});return c!==m?(this.Wl=c,a.dm=a.dd(b.C,m,m),h):p};Zg.prototype.doMouseDown=Zg.prototype.zu=function(){if(this.S){var a=this.b.F,b=this.Wl;b!==m&&(a.fd=b,b.yx!==m&&b.yx(a,b))}else this.canStart()&&this.doActivate()};
Zg.prototype.doMouseMove=Zg.prototype.Zg=function(){if(this.S){var a=this.b.F,b=this.Wl;b!==m&&(a.fd=b,b.zx!==m&&b.zx(a,b))}};Zg.prototype.doMouseUp=Zg.prototype.Ne=function(){if(this.S){var a=this.b,b=a.F,c=this.Wl;if(c===m)return;b.fd=c;c.Ax!==m&&c.Ax(b,c);this.isBeyondDragSize()||Af(c,b,a)}this.stopTool()};Zg.prototype.doCancel=Zg.prototype.Ni=function(){var a=this.b;if(a!==m){var a=a.F,b=this.Wl;if(b===m)return;a.fd=b;b.xx!==m&&b.xx(a,b)}this.stopTool()};
Zg.prototype.doStop=Zg.prototype.Oi=function(){this.Wl=m};function wa(){zf.call(this);this.name="ClickCreating";this.Vv=m;this.Bw=h}v.H("ClickCreatingTool",wa);v.pa(wa,zf);wa.prototype.canStart=wa.prototype.lf=function(){if(!this.isEnabled||this.Ex===m)return p;var a=this.b;if(a===m||(a.Oa||a.Ud)||!a.dn||!a.F.left||this.isBeyondDragSize())return p;if(this.iC){if(2!==a.F.Je)return p}else if(1!==a.F.Je)return p;return a.ra!==this&&a.tr(a.F.C,h)!==m?p:h};
wa.prototype.doMouseUp=wa.prototype.Ne=function(){var a=this.b;this.S&&a!==m&&this.insertPart(a.F.C);this.stopTool()};wa.prototype.insertPart=wa.prototype.iJ=function(a){var b=this.b;if(b!==m){var c=this.Ex;if(c!==m){this.Lb(this.name);var d=m;c instanceof U||c.constructor===S?(pf(c),d=c.copy(),d instanceof S&&b.add(d)):c!==m&&(c=b.P.nn(c),v.Na(c)&&(b.P.iu(c),d=b.ig(c)));d instanceof S&&(d.location=a,b.Od&&b.select(d));b.ai();this.te=this.name;b.ga("PartCreated",d);this.bj()}}};
v.a(wa,"archetypeNodeData",wa.prototype.Ex);v.defineProperty(wa,{Ex:"archetypeNodeData"},s("Vv"),function(a){this.Vv!==a&&(a!==m&&v.c(a,Object,wa,"archetypeNodeData"),this.Vv=a)});v.a(wa,"isDoubleClick",wa.prototype.iC);v.defineProperty(wa,{iC:"isDoubleClick"},s("Bw"),function(a){this.Bw!==a&&(v.e(a,"boolean",wa,"isDoubleClick"),this.Bw=a)});
function $g(){zf.call(this);this.name="ContextMenu";this.Dz=m;this.eA=new C;this.gm=m;if(v.hx===h){this.gm=new mf;this.gw=m;var a=this;this.MA=function(){a.stopTool()};if(v.Gz===p){var b=document.createElement("div"),c=document.createElement("div");b.style.cssText="top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px";c.style.cssText="z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;-moz-opacity: 0.8;opacity:.80;filter: alpha(opacity=80);";
var d=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(d);d.sheet.insertRule(".defaultCXul { list-style: none; }",0);d.sheet.insertRule(".defaultCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0);d.sheet.insertRule(".defaultCXa {color: #444;display: inline-block;padding: 6px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0);b.addEventListener("contextmenu",function(a){a.preventDefault();
return p},p);b.addEventListener("selectstart",function(a){a.preventDefault();return p},p);c.addEventListener("contextmenu",function(a){a.preventDefault();return p},p);document.body&&(document.body.appendChild(b),document.body.appendChild(c));v.As=b;v.zs=c;v.Gz=h}}}v.H("ContextMenuTool",$g);v.pa($g,zf);$g.prototype.canStart=$g.prototype.lf=function(){if(!this.isEnabled)return p;var a=this.b;return a===m||this.isBeyondDragSize()||!a.F.right?p:this.gm!==m||this.findObjectWithContextMenu()!==m?h:p};
$g.prototype.doStart=$g.prototype.$x=function(){var a=this.b;a!==m&&this.eA.set(a.jc.C)};$g.prototype.doStop=$g.prototype.Oi=function(){this.hideDefaultContextMenu();this.hideContextMenu()};$g.prototype.findObjectWithContextMenu=$g.prototype.II=function(){var a=this.b;if(a===m)return m;var b=a.dd(a.F.C,m,function(a){return!a.ta.Sc});if(b!==m){for(a=b;a!==m;){var c=a.contextMenu;if(c!==m)return a;a=a.Y}if(this.gm!==m)return b.V}else if(c=a.contextMenu,c!==m)return a;return m};
$g.prototype.doActivate=$g.prototype.Yh=aa();$g.prototype.doMouseDown=$g.prototype.zu=function(){this.S&&ah(this,p)};$g.prototype.doMouseUp=$g.prototype.Ne=function(){!this.S&&this.canStart()&&(this.S=h);ah(this,h)};
function ah(a,b){if(a.ge===m){a.standardMouseSelect();var c=a.findObjectWithContextMenu();if(c!==m){var d=c.contextMenu;d!==m?a.showContextMenu(d,c instanceof R?c:m):a.showDefaultContextMenu()}else a.showDefaultContextMenu()}else c=a.b,d=c.dd(c.F.C,m,m),d!==m&&d.ci(a.ge)?(a.standardMouseClick(m,m),a.stopTool()):(a.stopTool(),b?c.ra.doMouseUp():c.ra.doMouseDown())}$g.prototype.doMouseMove=$g.prototype.Zg=function(){this.S&&this.standardMouseOver()};
$g.prototype.showContextMenu=$g.prototype.lK=function(a,b){v.c(a,mf,$g,"showContextMenu:contextmenu");b!==m&&v.c(b,R,$g,"showContextMenu:obj");var c=this.b;if(c!==m){a!==this.ge&&this.hideContextMenu();a.Cd="Tool";a.rk=p;c.add(a);if(b!==m){var d=m,e=b.vr();e!==m&&(d=e.data);a.Nd=b;a.data=d}else a.data=c.P;a.Zh();this.positionContextMenu(a,b);this.ge=a;yf(c)}};
$g.prototype.positionContextMenu=$g.prototype.UJ=function(a){var b=this.b;if(b!==m){var c=b.F.C.copy(),d=a.na,b=b.ob;c.x+d.width>b.right&&(c.x-=d.width+5);c.y+d.height>b.bottom&&(c.y-=d.height+5);a.position=c}};$g.prototype.hideContextMenu=$g.prototype.aJ=function(){var a=this.b;a!==m&&this.ge!==m&&(this.ge.data=m,this.ge.Nd=m,a.remove(this.ge),this.ge=m,this.standardMouseOver(),yf(a))};
$g.prototype.initializeDefaultButtons=$g.prototype.eJ=function(){if(this.b===m)return m;var a=new y,b=this.b.yd;a.add({text:"Copy",mf:function(){b.copySelection()},visible:function(){return b.canCopySelection()}});a.add({text:"Cut",mf:function(){b.cutSelection()},visible:function(){return b.canCutSelection()}});a.add({text:"Delete",mf:function(){b.deleteSelection()},visible:function(){return b.canDeleteSelection()}});a.add({text:"Paste",mf:function(a){b.pasteSelection(a.F.C)},visible:function(){return b.canPasteSelection()}});
a.add({text:"Select All",mf:function(){b.selectAll()},visible:function(){return b.canSelectAll()}});a.add({text:"Undo",mf:function(){b.undo()},visible:function(){return b.canUndo()}});a.add({text:"Redo",mf:function(){b.redo()},visible:function(){return b.canRedo()}});a.add({text:"Zoom Out",mf:function(){b.decreaseZoom()},visible:function(){return b.canDecreaseZoom()}});a.add({text:"Zoom In",mf:function(){b.increaseZoom()},visible:function(){return b.canIncreaseZoom()}});a.add({text:"Reset Zoom",mf:function(){b.resetZoom()},
visible:function(){return b.canResetZoom()}});a.add({text:"Group Selection",mf:function(){b.groupSelection()},visible:function(){return b.canGroupSelection()}});a.add({text:"Ungroup Selection",mf:function(){b.ungroupSelection()},visible:function(){return b.canUngroupSelection()}});a.add({text:"Edit Text",mf:function(){b.editTextBlock()},visible:function(){return b.canEditTextBlock()}});return a};
$g.prototype.showDefaultContextMenu=$g.prototype.mK=function(){var a=this.b;if(a!==m){this.gw===m&&(this.gw=this.initializeDefaultButtons());this.gm!==this.ge&&this.hideContextMenu();v.As.innerHTML="";v.zs.addEventListener("click",this.MA,p);var b=this,c=document.createElement("ul");c.className="defaultCXul";v.As.appendChild(c);c.innerHTML="";for(var d=this.gw.f;d.next();){var e=d.value,g=e.text,i=e.visible;if("function"!==typeof i||i()){i=document.createElement("li");i.className="defaultCXli";var j=
document.createElement("a");j.className="defaultCXa";j.href="#";j.WD=e.mf;j.addEventListener("click",function(c){this.WD(a);b.stopTool();c.preventDefault();return p},p);j.textContent=g;i.appendChild(j);c.appendChild(i)}}v.As.style.display="block";v.zs.style.display="block";this.ge=this.gm}};$g.prototype.hideDefaultContextMenu=$g.prototype.bJ=function(){this.ge!==m&&this.ge===this.gm&&(v.As.style.display="none",v.zs.style.display="none",v.zs.removeEventListener("click",this.MA,p),this.ge=m)};
v.a($g,"currentContextMenu",$g.prototype.ge);v.defineProperty($g,{ge:"currentContextMenu"},s("Dz"),ba("Dz"));v.m($g,{KJ:"mouseDownPoint"},s("eA"));function bh(){zf.call(this);this.name="DragSelecting";this.hm=175;this.$z=p;var a=new S;a.Cd="Tool";a.rk=p;var b=new W;b.name="Shape";b.Wa="Rectangle";b.fill=m;b.stroke="magenta";b.position=new C(0,0);a.add(b);this.$l=a}v.H("DragSelectingTool",bh);v.pa(bh,zf);
bh.prototype.canStart=bh.prototype.lf=function(){if(!this.isEnabled)return p;var a=this.b;if(a===m||!a.Od)return p;var b=a.F;return!b.left||a.ra!==this&&(!this.isBeyondDragSize()||b.timestamp-a.jc.timestamp<this.xu||a.tr(b.C,h)!==m)?p:h};bh.prototype.doActivate=bh.prototype.Yh=function(){var a=this.b;a!==m&&(this.S=h,a.Jc=h,a.nb=h,a.add(this.dg))};bh.prototype.doDeactivate=bh.prototype.ik=function(){var a=this.b;a!==m&&(a.remove(this.dg),a.nb=p,this.S=a.Jc=p,yf(a))};
bh.prototype.doMouseMove=bh.prototype.Zg=function(){var a=this.b;if(a!==m&&this.S&&this.dg!==m){var b=this.computeBoxBounds();this.dg.Pe("Shape").ma=b.size;this.dg.position=b.position;yf(a)}};bh.prototype.doMouseUp=bh.prototype.Ne=function(){if(this.S){var a=this.b;a.remove(this.dg);try{a.xc="wait",this.selectInRect(this.computeBoxBounds())}finally{a.xc=""}}this.stopTool()};bh.prototype.computeBoxBounds=bh.prototype.PH=function(){var a=this.b;return a===m?new E(0,0,0,0):new E(a.jc.C,a.F.C)};
bh.prototype.selectInRect=bh.prototype.jK=function(a){var b=this.b;if(b!==m){var c=b.F;b.ga("ChangingSelection");a=b.xl(a,m,function(a){return a instanceof S&&a.Jx()},this.mC);if(c.gk)if(c.shift)for(a=a.f;a.next();)c=a.value,c.Ga&&(c.Ga=p);else for(a=a.f;a.next();)c=a.value,c.Ga=!c.Ga;else{if(!c.shift){for(var d=new y(S),e=b.selection.f;e.next();)c=e.value,a.contains(c)||d.add(c);for(d=d.f;d.next();)c=d.value,c.Ga=p}for(a=a.f;a.next();)c=a.value,c.Ga||(c.Ga=h)}b.ga("ChangedSelection")}};
v.a(bh,"delay",bh.prototype.xu);v.defineProperty(bh,{xu:"delay"},s("hm"),ba("hm"));v.a(bh,"isPartialInclusion",bh.prototype.mC);v.defineProperty(bh,{mC:"isPartialInclusion"},s("$z"),ba("$z"));v.a(bh,"box",bh.prototype.dg);v.defineProperty(bh,{dg:"box"},s("$l"),ba("$l"));function ch(){zf.call(this);this.name="Panning";this.qA=new C;this.ji=p;var a=this;this.BA=function(){document.removeEventListener("scroll",a.BA,p);a.stopTool()}}v.H("PanningTool",ch);v.pa(ch,zf);
ch.prototype.canStart=ch.prototype.lf=function(){if(!this.isEnabled)return p;var a=this.b;return a===m||!a.He&&!a.Ie||!a.F.left||a.ra!==this&&!this.isBeyondDragSize()?p:h};ch.prototype.doActivate=ch.prototype.Yh=function(){var a=this.b;a!==m&&(this.ji?(a.F.bubbles=h,document.addEventListener("scroll",this.BA,p)):(a.xc="move",a.Jc=h,this.qA=a.position),this.S=h)};ch.prototype.doDeactivate=ch.prototype.ik=function(){var a=this.b;a!==m&&(a.xc="",this.S=a.Jc=p)};
ch.prototype.doCancel=ch.prototype.Ni=function(){var a=this.b;a!==m&&(a.position=this.qA,a.Jc=p);this.stopTool()};ch.prototype.doMouseMove=ch.prototype.Zg=function(){var a=this.b;if(this.S&&a)if(this.ji)a.F.bubbles=h;else{var b=a.position,c=a.jc.C,d=a.F.C,e=b.x+c.x-d.x,c=b.y+c.y-d.y;a.He||(e=b.x);a.Ie||(c=b.y);a.position=new C(e,c);a.update()}};v.a(ch,"bubbles",ch.prototype.bubbles);v.defineProperty(ch,{bubbles:"bubbles"},s("ji"),ba("ji"));
function dh(){zf.call(this);this.name="TextEditing";this.hw=this.Fz=this.qx=m;this.gx=eh;this.Di=m;this.bb=fh;this.Qj=m}v.H("TextEditingTool",dh);v.pa(dh,zf);var gh;dh.LostFocus=gh=v.l(dh,"LostFocus",0);var hh;dh.MouseDown=hh=v.l(dh,"MouseDown",1);var ih;dh.Tab=ih=v.l(dh,"Tab",2);var jh;dh.Enter=jh=v.l(dh,"Enter",3);dh.SingleClick=v.l(dh,"SingleClick",0);var eh;dh.SingleClickSelected=eh=v.l(dh,"SingleClickSelected",1);
var fh=v.l(dh,"StateNone",0),kh=v.l(dh,"StateActive",1),lh=v.l(dh,"StateEditing",2),mh=v.l(dh,"StateEditing2",3),nh=v.l(dh,"StateValidating",4),oh=v.l(dh,"StateValidated",5);v.a(dh,"textBlock",dh.prototype.Bf);v.defineProperty(dh,{Bf:"textBlock"},s("qx"),ba("qx"));v.a(dh,"currentTextEditor",dh.prototype.eg);v.defineProperty(dh,{eg:"currentTextEditor"},s("Fz"),ba("Fz"));v.a(dh,"defaultTextEditor",dh.prototype.AB);v.defineProperty(dh,{AB:"defaultTextEditor"},s("hw"),ba("hw"));v.a(dh,"starting",dh.prototype.sD);
v.defineProperty(dh,{sD:"starting"},s("gx"),function(a){this.gx!==a&&(t&&v.Ua(a,dh,dh,"starting"),this.gx=a)});dh.prototype.canStart=dh.prototype.lf=function(){if(!this.isEnabled)return p;var a=this.b;if(a===m||a.Oa||!a.F.left||this.isBeyondDragSize())return p;a=a.dd(a.F.C,m,function(a){return a instanceof ra});if(!(a instanceof ra)||!a.Au)return p;a=a.V;return a===m||this.sD===eh&&!a.Ga?p:h};dh.prototype.doStart=dh.prototype.$x=function(){!this.S&&this.Bf!==m&&this.doActivate()};
dh.prototype.doActivate=dh.prototype.Yh=function(){if(!this.S){var a=this.b;if(a!==m){var b=this.Bf;b===m&&(b=a.dd(a.F.C,function(a){return a instanceof ra?a:m}),b=b instanceof ra?b:m);if(b!==m&&(this.Bf=b,b.V!==m)){this.S=h;this.bb=kh;this.Lb(this.name);var c=this.AB,d=p;b.dz!==m&&(c=b.dz);c!==m&&!c.sz&&(d=h);if(c===m){c=document.createElement("textarea");c.sz=h;this.hw=c;var e=this.Bf.copy();c.addEventListener("input",function(){e.text=this.value;ph(e,Infinity,Infinity);this.style.width=20+e.na.width*
this.OG+"px";this.rows=e.Vk},p);c.addEventListener("keydown",function(a){var b=a.which,c=this.textEditingTool;if(c!==m)if(13==b)c.wx(jh);else{if(9==b)return c.wx(ih),a.preventDefault(),p;27==b&&(c.doCancel(),c.b&&c.b.focus())}},p);c.addEventListener("focus",function(){var a=this.textEditingTool;a.bb===kh?a.bb=lh:a.bb===oh?a.bb=mh:a.bb===mh&&(a.bb=lh)},p)}if(c.sz){var g=b.xb(sc),i=a.position,j=a.scale,k=b.yl()*j,l=b.ua.width*k;qh(b,b.font);g=new C((g.x-i.x)*j,(g.y-i.y)*j);c.value=b.text;a.Xh.style.font=
b.font;c.style.font="inherit";c.style.fontSize=100*k+"%";c.style.lineHeight="normal";l=20+l;c.style.width=l+"px";c.style.height="";c.rows=b.Vk;a.Xh.appendChild(c);c.style.left=(g.x-l/2|0)+"px";c.style.top=(g.y-c.clientHeight/2|0)+"px";c.style.textAlign=b.textAlign}else a.Xh.appendChild(c);c.style.position="absolute";c.style.zIndex=100;c.className="start";c.textEditingTool=this;c.OG=k;if(d&&c.onActivate!==f)c.onActivate();this.eg=c;c.focus()}}}};
dh.prototype.doCancel=dh.prototype.Ni=function(){this.Qj!==m&&(this.eg.style.border=this.Qj,this.Qj=m);this.stopTool()};dh.prototype.doMouseUp=dh.prototype.Ne=function(){!this.S&&this.canStart()&&this.doActivate()};dh.prototype.doMouseDown=dh.prototype.zu=function(){this.S&&this.wx(hh)};
dh.prototype.acceptText=dh.prototype.wx=function(a){switch(a){case hh:if(this.bb===oh||this.bb===mh)this.eg.focus();else if(this.bb===kh||this.bb===lh)this.bb=nh,vh(this);break;case gh:case jh:case ih:if(jh===a&&this.qx.Pu===h)break;if(this.bb===kh||this.bb===lh)this.bb=nh,vh(this)}};
function vh(a){if(a.Bf!==m&&a.eg!==m){var b=a.Bf,c=a.Bf.text,d=a.eg.value,e="",e="function"===typeof d?d():d;if(!a.isValidText(a.Bf,c,e)){a.bb=lh;b.pr!==m&&b.pr(a,c,e);a.Qj===m&&(a.Qj=a.eg.style.border,a.eg.style.border="3px solid red");a.eg.focus();return}a.bb=oh;c!==e&&(a.Bf.text=e);a.te=a.name;b=a.b;b!==m&&b.ga("TextEdited",a.Bf,c);a.stopTool();b!==m&&b.focus()}a.Qj!==m&&(a.eg.style.border=a.Qj,a.Qj=m)}
dh.prototype.doDeactivate=dh.prototype.ik=function(){var a=this.b;if(a!==m){this.S&&this.bj();this.bb=fh;this.Bf=m;if(this.eg!==m){var b=this.eg;if(b.onDeactivate!==f)b.onDeactivate();b!==m&&a.Xh.removeChild(b)}this.S=p}};dh.prototype.isValidText=dh.prototype.tJ=function(a,b,c){v.c(a,ra,dh,"isValidText:textblock");var d=this.fs;if(d!==m&&!d(a,b,c))return p;d=a.fs;return d!==m&&!d(a,b,c)?p:h};v.a(dh,"textValidation",dh.prototype.fs);
v.defineProperty(dh,{fs:"textValidation"},s("Di"),function(a){this.Di!==a&&(this.Di=a)});function kf(){zf.call(this);this.name="ToolManager";this.fA=new y(zf);this.gA=new y(zf);this.hA=new y(zf);this.Sz=this.Tz=1E3;this.Hs=this.ew=m;this.iA=Cf}v.H("ToolManager",kf);v.pa(kf,zf);var Cf;kf.WheelScroll=Cf=v.l(kf,"WheelScroll",0);var Bf;kf.WheelZoom=Bf=v.l(kf,"WheelZoom",1);v.a(kf,"mouseWheelBehavior",kf.prototype.Fl);v.defineProperty(kf,{Fl:"mouseWheelBehavior"},s("iA"),ba("iA"));
kf.prototype.initializeStandardTools=kf.prototype.fJ=function(){this.QA=new Zg;this.TC=new xg;this.tC=new Ag;this.bD=new Og;this.fD=new Wg;this.vC=new ua;this.he=new Ef;this.IB=new bh;this.LC=new ch;this.mB=new $g;this.kv=new dh;this.iB=new wa;this.jB=new Yg};
kf.prototype.doMouseDown=kf.prototype.zu=function(){var a=this.b;if(a!==m){var b=a.da;b.Lx&&0!==b.vk&&v.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");for(var b=this.ne.length,c=0;c<b;c++){var d=this.ne.Z(c);if(d.canStart()){a.ra=d;a.ra===d&&(d.S||d.doActivate(),d.doMouseDown());return}}1===a.F.button&&(this.Fl===Cf?this.Fl=Bf:this.Fl===Bf&&(this.Fl=Cf));this.doActivate();this.standardWaitAfter(this.my)}};
kf.prototype.doMouseMove=kf.prototype.Zg=function(){var a=this.b;if(a!==m){if(this.S)for(var b=this.kg.length,c=0;c<b;c++){var d=this.kg.Z(c);if(d.canStart()){a.ra=d;a.ra===d&&(d.S||d.doActivate(),d.doMouseMove());return}}this.standardMouseOver();this.isBeyondDragSize()&&this.standardWaitAfter(this.S?this.my:this.dC)}};kf.prototype.doCurrentObjectChanged=kf.prototype.oF=function(a,b){var c=this.hk;c!==m&&!(b!==m&&(b===c||b.ci(c)))&&this.hideToolTip()};
kf.prototype.doWaitAfter=kf.prototype.sF=function(){this.b&&this.b.oa&&(this.doMouseHover(),this.S||this.doToolTip())};kf.prototype.doMouseHover=kf.prototype.lI=function(){var a=this.b;if(a!==m){var b=a.F;b.fd===m&&(b.fd=a.dd(b.C,m,m));var c=b.fd;if(c!==m)for(;c!==m;){a=this.S?c.Pr:c.Qr;if(a!==m&&(a(b,c),b.zd))break;c=c.Y}else a=this.S?a.Pr:a.Qr,a!==m&&a(b)}};
kf.prototype.doToolTip=kf.prototype.mI=function(){var a=this.b;if(a!==m){var b=a.F;b.fd===m&&(b.fd=a.dd(b.C,m,m));b=b.fd;if(b!==m){if(!(b===this.hk||b.ci(this.hk))){for(;b!==m;){a=b.is;if(a!==m){this.showToolTip(a,b);return}b=b.Y}this.hideToolTip()}}else a=a.is,a!==m?this.showToolTip(a,m):this.hideToolTip()}};
kf.prototype.showToolTip=kf.prototype.nK=function(a,b){v.c(a,mf,kf,"showToolTip:tooltip");b!==m&&v.c(b,R,kf,"showToolTip:obj");var c=this.b;if(c!==m){a!==this.hk&&this.hideToolTip();a.Cd="Tool";a.rk=p;c.add(a);if(b!==m&&b!==this.Hs){var d=m,e=b.V;e!==m&&(d=e.data);a.Nd=b;a.data=d}else b===m&&(a.data=c.P);if(b===m||b!==this.Hs)a.Zh(),this.positionToolTip(a,b);this.ew=a;this.Hs=b;yf(c)}};
kf.prototype.positionToolTip=kf.prototype.VJ=function(a){var b=this.b;if(b!==m){var c=b.F.C.copy(),d=a.na,b=b.ob;c.x+d.width>b.right&&(c.x-=d.width+5);c.y=c.y+20+d.height>b.bottom?c.y-(d.height+5):c.y+20;a.position=c}};kf.prototype.hideToolTip=kf.prototype.cJ=function(){if(this.hk!==m){var a=this.b;a!==m&&(this.hk.data=m,this.hk.Nd=m,a.remove(this.hk),this.Hs=this.ew=m,yf(a))}};v.m(kf,{hk:"currentToolTip"},s("ew"));
kf.prototype.doMouseUp=kf.prototype.Ne=function(){this.cancelWaitAfter();if(this.S){var a=this.b;if(a===m)return;for(var b=this.lg.length,c=0;c<b;c++){var d=this.lg.Z(c);if(d.canStart()){a.ra=d;a.ra===d&&(d.S||d.doActivate(),d.doMouseUp());return}}}this.doDeactivate()};kf.prototype.doMouseWheel=kf.prototype.pF=function(){this.standardMouseWheel()};kf.prototype.doKeyDown=kf.prototype.Yx=function(){var a=this.b;a!==m&&a.yd.doKeyDown()};
kf.prototype.doKeyUp=kf.prototype.Zx=function(){var a=this.b;a!==m&&a.yd.doKeyUp()};kf.prototype.doCancel=kf.prototype.Ni=function(){Hf!==m&&Hf.doCancel();zf.prototype.Ni.call(this)};kf.prototype.findTool=kf.prototype.Qe=function(a){v.e(a,"string",kf,"findTool:name");for(var b=this.ne.length,c=0;c<b;c++){var d=this.ne.Z(c);if(d.name===a)return d}b=this.kg.length;for(c=0;c<b;c++)if(d=this.kg.Z(c),d.name===a)return d;b=this.lg.length;for(c=0;c<b;c++)if(d=this.lg.Z(c),d.name===a)return d;return m};
kf.prototype.replaceTool=kf.prototype.xG=function(a,b){v.e(a,"string",kf,"replaceTool:name");b!==m&&(v.c(b,zf,kf,"replaceTool:newtool"),b.b&&b.b!==this.b&&v.g("Cannot share tools between Diagrams: "+b.toString()),b.xf(this.b));for(var c=this.ne.length,d=0;d<c;d++){var e=this.ne.Z(d);if(e.name===a)return b!==m?this.ne.ev(d,b):this.ne.pe(d),e}c=this.kg.length;for(d=0;d<c;d++)if(e=this.kg.Z(d),e.name===a)return b!==m?this.kg.ev(d,b):this.kg.pe(d),e;c=this.lg.length;for(d=0;d<c;d++)if(e=this.lg.Z(d),
e.name===a)return b!==m?this.lg.ev(d,b):this.lg.pe(d),e;return m};function wh(a,b,c,d){v.e(b,"string",kf,"replaceStandardTool:name");v.c(d,y,kf,"replaceStandardTool:list");c!==m&&(v.c(c,zf,kf,"replaceStandardTool:newtool"),c.b&&c.b!==a.b&&v.g("Cannot share tools between Diagrams: "+c.toString()),c.name=b,c.xf(a.b));a.Qe(b)?a.xG(b,c):c!==m&&d.add(c)}v.m(kf,{ne:"mouseDownTools"},s("fA"));v.m(kf,{kg:"mouseMoveTools"},s("gA"));v.m(kf,{lg:"mouseUpTools"},s("hA"));v.a(kf,"hoverDelay",kf.prototype.dC);
v.defineProperty(kf,{dC:"hoverDelay"},s("Tz"),ba("Tz"));v.a(kf,"holdDelay",kf.prototype.my);v.defineProperty(kf,{my:"holdDelay"},s("Sz"),ba("Sz"));v.a(kf,"actionTool",kf.prototype.QA);v.defineProperty(kf,{QA:"actionTool"},function(){return this.Qe("Action")},function(a){wh(this,"Action",a,this.ne)});v.a(kf,"relinkingTool",kf.prototype.TC);v.defineProperty(kf,{TC:"relinkingTool"},function(){return this.Qe("Relinking")},function(a){wh(this,"Relinking",a,this.ne)});v.a(kf,"linkReshapingTool",kf.prototype.tC);
v.defineProperty(kf,{tC:"linkReshapingTool"},function(){return this.Qe("LinkReshaping")},function(a){wh(this,"LinkReshaping",a,this.ne)});v.a(kf,"resizingTool",kf.prototype.bD);v.defineProperty(kf,{bD:"resizingTool"},function(){return this.Qe("Resizing")},function(a){wh(this,"Resizing",a,this.ne)});v.a(kf,"rotatingTool",kf.prototype.fD);v.defineProperty(kf,{fD:"rotatingTool"},function(){return this.Qe("Rotating")},function(a){wh(this,"Rotating",a,this.ne)});v.a(kf,"linkingTool",kf.prototype.vC);
v.defineProperty(kf,{vC:"linkingTool"},function(){return this.Qe("Linking")},function(a){wh(this,"Linking",a,this.kg)});v.a(kf,"draggingTool",kf.prototype.he);v.defineProperty(kf,{he:"draggingTool"},function(){return this.Qe("Dragging")},function(a){wh(this,"Dragging",a,this.kg)});v.a(kf,"dragSelectingTool",kf.prototype.IB);v.defineProperty(kf,{IB:"dragSelectingTool"},function(){return this.Qe("DragSelecting")},function(a){wh(this,"DragSelecting",a,this.kg)});v.a(kf,"panningTool",kf.prototype.LC);
v.defineProperty(kf,{LC:"panningTool"},function(){return this.Qe("Panning")},function(a){wh(this,"Panning",a,this.kg)});v.a(kf,"contextMenuTool",kf.prototype.mB);v.defineProperty(kf,{mB:"contextMenuTool"},function(){return this.Qe("ContextMenu")},function(a){wh(this,"ContextMenu",a,this.lg)});v.a(kf,"textEditingTool",kf.prototype.kv);v.defineProperty(kf,{kv:"textEditingTool"},function(){return this.Qe("TextEditing")},function(a){wh(this,"TextEditing",a,this.lg)});v.a(kf,"clickCreatingTool",kf.prototype.iB);
v.defineProperty(kf,{iB:"clickCreatingTool"},function(){return this.Qe("ClickCreating")},function(a){wh(this,"ClickCreating",a,this.lg)});v.a(kf,"clickSelectingTool",kf.prototype.jB);v.defineProperty(kf,{jB:"clickSelectingTool"},function(){return this.Qe("ClickSelecting")},function(a){wh(this,"ClickSelecting",a,this.lg)});
function gf(){v.Mb(this);this.L=m;this.Bb=new y(S);this.ub="";this.Dw=p;this.Ug=this.pj=this.oj=this.nj=this.mj=this.kj=this.jj=this.lj=this.ij=this.rj=this.hj=this.qj=this.gj=this.fj=h;this.gE=[]}v.H("Layer",gf);gf.prototype.xf=ba("L");
gf.prototype.toString=function(a){a===f&&(a=0);var b='Layer "'+this.name+'"';if(0>=a)return b;for(var c=0,d=0,e=0,g=0,i=0,j=this.Bb.f;j.next();){var k=j.value.constructor;k===S?c++:k===U?d++:k===nf?e++:k===V?g++:k===mf&&i++}j="";0<c&&(j+=c+" Parts ");0<d&&(j+=d+" Nodes ");0<e&&(j+=e+" Groups ");0<g&&(j+=g+" Links ");0<i&&(j+=i+" Adornments ");if(1<a)for(c=this.Bb.f;c.next();)d=c.value,j+="\n    "+d.toString(a-1),(e=d.data)&&v.kc(e)&&(j+=" #"+v.kc(e)),d instanceof U?j+=" "+Ie(e):d instanceof V&&(j+=
" "+Ie(d.ea)+" "+Ie(d.ia));return b+" "+this.Bb.count+": "+j};gf.prototype.findObjectAt=gf.prototype.dd=function(a,b,c){b===f&&(b=m);c===f&&(c=m);var d=this.Bb,e=p;this.b.ob.fa(a)&&(e=h);for(var g=new C,i=d.length;i--;){var j=d.Z(i);if(!(e===h&&j.af===p)&&j.eb()&&(pb(g.set(a),j.fe),j=j.dd(g,b,c),j!==m&&(b!==m&&(j=b(j)),j&&(c===m||c(j)))))return j}return m};
gf.prototype.findObjectsAt=gf.prototype.wn=function(a,b,c,d){b===f&&(b=m);c===f&&(c=m);!(d instanceof y)&&!(d instanceof qa)&&(d=new y(R));var e=this.Bb,g=p;this.b.ob.fa(a)&&(g=h);for(var i=new C,j=e.length;j--;){var k=e.Z(j);!(g===h&&k.af===p)&&k.eb()&&(pb(i.set(a),k.fe),k.wn(i,b,c,d)&&(b!==m&&(k=b(k)),k&&(c===m||c(k))&&d.add(k)))}return d};
gf.prototype.findObjectsIn=gf.prototype.xl=function(a,b,c,d,e){b===f&&(b=m);c===f&&(c=m);d===f&&(d=p);!(e instanceof y)&&!(e instanceof qa)&&(e=new y(R));var g=this.Bb,i=p;this.b.ob.pl(a)&&(i=h);for(var j=g.length;j--;){var k=g.Z(j);!(i===h&&k.af===p)&&(k.eb()&&k.xl(a,b,c,d,e))&&(b!==m&&(k=b(k)),k&&(c===m||c(k))&&e.add(k))}return e};
gf.prototype.findObjectsNear=gf.prototype.xn=function(a,b,c,d,e){c===f&&(c=m);d===f&&(d=m);!(e instanceof y)&&!(e instanceof qa)&&(e=new y(R));var g=this.Bb,i=p;this.b.ob.fa(a)&&(i=h);for(var j=new C,k=g.length;k--;){var l=g.i[k];if(!(i===h&&l.af===p)&&l.eb()){pb(j.set(a),l.fe);var n=new C(a.x+b,a.y);pb(n,l.fe);l.xn(j,n,c,d,e)&&(c!==m&&(l=c(l)),l&&(d===m||d(l))&&e.add(l))}}return e};fa=gf.prototype;
fa.gg=function(a,b){if(this.visible){var c=this.Bb,d=b.ob,e=[];if(b.vm)for(var g=c.length,i=0;i<g;i++){var j=c.i[i];j.eE=i;if(j instanceof V&&((j.Bi===Qf||j.Bi===xh)&&e.push(j),j.hl===p))continue;j.la.Re(d)?(j.gg(a,b),j.af=h):j.af=p}else{g=c.length;for(i=0;i<g;i++)if(j=c.i[i],j.af){if(j instanceof V&&((j.Bi===Qf||j.Bi===xh)&&e.push(j),j.hl===p))continue;j.gg(a,b)}}this.gE=e}};fa.d=function(a,b,c,d,e){var g=this.b;g!==m&&g.Xd(Fe,a,this,b,c,d,e)};
fa.kk=function(a,b,c){var d=this.Bb;b.s=this;if(a>=d.count)a=d.count;else if(d.Z(a)===b)return-1;d.lc(a,b);b.Dr();d=this.b;d!==m&&(c?yh(d):d.kk(b));b instanceof nf&&this.hv(b);return a};fa.Ad=function(a,b,c){var d=this.Bb;if(0>a||a>=d.length){if(a=d.indexOf(b),0>a)return-1}else if(d.Z(a)!==b&&(a=d.indexOf(b),0>a))return-1;b.Er();d.pe(a);d=this.b;d!==m&&(c?yh(d):d.Ad(b));b.s=m;return a};
fa.hv=function(a){for(;a!==m;){if(a.ta===this){var b=a;if(b.mc.next()){for(var c=-1,d=-1,e=this.Bb.i,g=e.length,i=0;i<g;i++){var j=e[i];if(j===b&&(c=i,0<=d))break;if(0>d&&j.Va===b&&(d=i,0<=c))break}!(0>d)&&d<c&&(e=this.Bb,e.pe(c),e.lc(d,b))}}a=a.Va}};fa.clear=function(){for(var a=this.Bb.Cf(),b=a.length,c=0;c<b;c++)a[c].af=p,this.Ad(-1,a[c])};v.m(gf,{Yi:"parts"},function(){return this.Bb.f});v.m(gf,{QJ:"partsBackwards"},function(){return this.Bb.Gn});v.m(gf,{b:"diagram"},s("L"));v.a(gf,"name",gf.prototype.name);
v.defineProperty(gf,{name:"name"},s("ub"),function(a){v.e(a,"string",gf,"name");var b=this.ub;if(b!==a){var c=this.b;if(c!==m){""===b&&v.g("Cannot rename default Layer to: "+a);for(c=c.Jr;c.next();)c.value.name===a&&v.g("Layer.name is already present in this diagram: "+a)}this.ub=a;this.d("name",b,a)}});v.a(gf,"isTemporary",gf.prototype.Sc);v.defineProperty(gf,{Sc:"isTemporary"},s("Dw"),function(a){var b=this.Dw;b!==a&&(v.e(a,"boolean",gf,"isTemporary"),this.Dw=a,this.d("isTemporary",b,a))});
v.a(gf,"visible",gf.prototype.visible);v.defineProperty(gf,{visible:"visible"},s("Ug"),function(a){var b=this.Ug;if(b!==a){v.e(a,"boolean",gf,"visible");this.Ug=a;this.d("visible",b,a);for(a=this.Bb.f;a.next();)a.value.updateAdornments();a=this.b;a!==m&&yh(a)}});v.a(gf,"allowCopy",gf.prototype.Oh);v.defineProperty(gf,{Oh:"allowCopy"},s("fj"),function(a){var b=this.fj;b!==a&&(v.e(a,"boolean",gf,"allowCopy"),this.fj=a,this.d("allowCopy",b,a))});v.a(gf,"allowDelete",gf.prototype.bk);
v.defineProperty(gf,{bk:"allowDelete"},s("gj"),function(a){var b=this.gj;b!==a&&(v.e(a,"boolean",gf,"allowDelete"),this.gj=a,this.d("allowDelete",b,a))});v.a(gf,"allowTextEdit",gf.prototype.jn);v.defineProperty(gf,{jn:"allowTextEdit"},s("qj"),function(a){var b=this.qj;b!==a&&(v.e(a,"boolean",gf,"allowTextEdit"),this.qj=a,this.d("allowTextEdit",b,a))});v.a(gf,"allowGroup",gf.prototype.cn);
v.defineProperty(gf,{cn:"allowGroup"},s("hj"),function(a){var b=this.hj;b!==a&&(v.e(a,"boolean",gf,"allowGroup"),this.hj=a,this.d("allowGroup",b,a))});v.a(gf,"allowUngroup",gf.prototype.kn);v.defineProperty(gf,{kn:"allowUngroup"},s("rj"),function(a){var b=this.rj;b!==a&&(v.e(a,"boolean",gf,"allowUngroup"),this.rj=a,this.d("allowUngroup",b,a))});v.a(gf,"allowLink",gf.prototype.kl);
v.defineProperty(gf,{kl:"allowLink"},s("ij"),function(a){var b=this.ij;b!==a&&(v.e(a,"boolean",gf,"allowLink"),this.ij=a,this.d("allowLink",b,a))});v.a(gf,"allowRelink",gf.prototype.Fi);v.defineProperty(gf,{Fi:"allowRelink"},s("lj"),function(a){var b=this.lj;b!==a&&(v.e(a,"boolean",gf,"allowRelink"),this.lj=a,this.d("allowRelink",b,a))});v.a(gf,"allowMove",gf.prototype.ck);
v.defineProperty(gf,{ck:"allowMove"},s("jj"),function(a){var b=this.jj;b!==a&&(v.e(a,"boolean",gf,"allowMove"),this.jj=a,this.d("allowMove",b,a))});v.a(gf,"allowPrint",gf.prototype.en);v.defineProperty(gf,{en:"allowPrint"},s("kj"),function(a){var b=this.kj;b!==a&&(v.e(a,"boolean",gf,"allowPrint"),this.kj=a,this.d("allowPrint",b,a))});v.a(gf,"allowReshape",gf.prototype.fn);
v.defineProperty(gf,{fn:"allowReshape"},s("mj"),function(a){var b=this.mj;b!==a&&(v.e(a,"boolean",gf,"allowReshape"),this.mj=a,this.d("allowReshape",b,a))});v.a(gf,"allowResize",gf.prototype.gn);v.defineProperty(gf,{gn:"allowResize"},s("nj"),function(a){var b=this.nj;b!==a&&(v.e(a,"boolean",gf,"allowResize"),this.nj=a,this.d("allowResize",b,a))});v.a(gf,"allowRotate",gf.prototype.hn);
v.defineProperty(gf,{hn:"allowRotate"},s("oj"),function(a){var b=this.oj;b!==a&&(v.e(a,"boolean",gf,"allowRotate"),this.oj=a,this.d("allowRotate",b,a))});v.a(gf,"allowSelect",gf.prototype.Od);v.defineProperty(gf,{Od:"allowSelect"},s("pj"),function(a){var b=this.pj;b!==a&&(v.e(a,"boolean",gf,"allowSelect"),this.pj=a,this.d("allowSelect",b,a))});
function A(a){function b(a){var b=a.toLowerCase(),c=new y("function");e.add(a,c);e.add(b,c);g.add(a,a);g.add(b,a)}function c(){document.removeEventListener("DOMContentLoaded",c,p);zh(d)}v.Mb(this);v.Iz=[];this.fc=h;this.de=17;var d=this;document.body!==m?zh(this):document.addEventListener("DOMContentLoaded",c,p);this.Ab=new y(gf);this.DA=this.CA=this.FA=this.EA=this.Fb=this.Ik=this.oa=m;this.kb=(new C(NaN,NaN)).freeze();this.Ob=1;this.nt=1E-4;this.it=100;this.Ld=new ob;this.gu=(new C(NaN,NaN)).freeze();
this.Os=(new E(NaN,NaN,NaN,NaN)).freeze();this.Ck=Ah;this.Gk=mc;this.Dj=Ah;this.sm=mc;this.Ts=this.Ss=pc;this.zg=new qa(R);this.pi=h;this.im=new oa(V,E);this.So=h;this.UD=250;this.TD=1E3;this.pg=m;this.ts=(new Kb(16,16,16,16)).freeze();this.Jz=h;this.Wq=this.Tg=p;this.Zo=h;this.tx=p;this.Of=new Be;this.sc=new Be;this.pc=new Be;this.li=m;this.Xt=-1;this.ix=p;this.kw=new oa("string",y);this.jw=new oa("string","string");var e=new oa("string",y),g=new oa("string","string");b("BackgroundSingleClicked");
b("BackgroundDoubleClicked");b("BackgroundContextClicked");b("ClipboardChanged");b("ClipboardPasted");b("DocumentBoundsChanged");b("ExternalObjectsDropped");b("InitialLayoutCompleted");b("LayoutCompleted");b("LinkDrawn");b("LinkRelinked");b("LinkReshaped");b("ObjectSingleClicked");b("ObjectDoubleClicked");b("ObjectContextClicked");b("PartCreated");b("PartResized");b("PartRotated");b("SelectionMoved");b("SelectionCopied");b("SelectionDeleting");b("SelectionDeleted");b("SelectionGrouped");b("SelectionUngrouped");
b("ChangingSelection");b("ChangedSelection");b("SubGraphCollapsed");b("SubGraphExpanded");b("TextEdited");b("TreeCollapsed");b("TreeExpanded");b("ViewportBoundsChanged");this.kw=e;this.jw=g;this.wt=new qa(U);this.gl=new qa(nf);this.ct=new qa(V);this.Bb=new qa(S);this.$s=h;this.Vz=p;this.du=gg;this.dw=this.iw=this.cu=m;this.Gs="";this.Lo="auto";this.rh=this.Mh=this.Ch=this.qt=this.Dh=this.Eh=this.Fh=this.qh=this.sh=this.ph=m;this.Nk=h;this.Sv=p;this.aw=m;this.Pk=this.Hh=this.uz=p;this.ya=h;this.ef=
m;var i=this;this.cA=function(a){if(a.P===i.P&&i.ya){i.ya=p;try{var b=a.Rc;""===a.me&&b===Fe&&Bh(i,a.object,a.propertyName)}finally{i.ya=h}}};this.dA=function(a){if(a.P===i.P&&i.ya){i.ya=p;try{var b=a.Rc,c=a.me;if(""!==c)if(b===Fe)if("linkFromKey"===c){var d=a.object,e=i.Qi(d);if(e!==m){var g=a.newValue,u=i.ah(g);e.ea=u}}else if("linkToKey"===c)d=a.object,e=i.Qi(d),e!==m&&(g=a.newValue,u=i.ah(g),e.ia=u);else if("linkFromPortId"===c){if(d=a.object,e=i.Qi(d),e!==m){var x=a.newValue;"string"===typeof x&&
(e.dh=x)}}else if("linkToPortId"===c)d=a.object,e=i.Qi(d),e!==m&&(x=a.newValue,"string"===typeof x&&(e.gi=x));else if("nodeGroupKey"===c){var d=a.object,z=i.ig(d);if(z!==m){var D=a.newValue;if(D!==f){var F=i.ah(D);z.Va=F instanceof nf?F:m}else z.Va=m}}else if("linkLabelKeys"===c){if(d=a.object,e=i.Qi(d),e!==m){var G=a.oldValue,I=a.newValue;if(v.isArray(G))for(var M=v.Cb(G),T=0;T<M;T++){var pa=v.qb(G,T),u=i.ah(pa);u!==m&&(u.ke=m)}if(v.isArray(I)){M=v.Cb(I);for(T=0;T<M;T++)pa=v.qb(I,T),u=i.ah(pa),u!==
m&&(u.ke=e)}}}else if("nodeCategory"===c){var d=a.object,ea=i.ig(d),Aa=a.newValue;ea!==m&&"string"===typeof Aa&&(ea.nd=Aa)}else if("linkCategory"===c){var d=a.object,ta=i.Qi(d),Aa=a.newValue;ta!==m&&"string"===typeof Aa&&(ta.nd=Aa)}else if("nodeDataArray"===c){var va=a.oldValue;Ch(i,va);var Ia=a.newValue;Dh(i,Ia)}else"linkDataArray"===c&&(va=a.oldValue,Ch(i,va),Ia=a.newValue,Eh(i,Ia));else if(b===Ge)Ia=a.newValue,"nodeDataArray"===c&&v.Na(Ia)?Fh(i,Ia):"linkDataArray"===c&&v.Na(Ia)?Gh(i,Ia):"linkLabelKeys"===
c&&$e(Ia)&&(e=i.Qi(a.object),u=i.ah(Ia),e!==m&&u!==m&&(u.ke=e));else if(b===He)va=a.oldValue,"nodeDataArray"===c&&v.Na(va)?Hh(i,va):"linkDataArray"===c&&v.Na(va)?Hh(i,va):"linkLabelKeys"===c&&$e(va)&&(u=i.ah(va),u!==m&&(u.ke=m));else{if(b===Ee&&"SourceChanged"===c){var z=i.ig(a.object),jb=a.propertyName;z!==m&&"string"===typeof jb&&z.nc(jb)}}else if(b===Fe){var hb=a.propertyName,d=a.object;if(d===i.P){if("nodeKeyProperty"===hb||"nodeCategoryProperty"===hb||"linkFromKeyProperty"===hb||"linkToKeyProperty"===
hb||"linkFromPortIdProperty"===hb||"linkToPortIdProperty"===hb||"nodeIsLinkLabelProperty"===hb||"linkLabelKeysProperty"===hb||"nodeIsGroupProperty"===hb||"nodeGroupKeyProperty"===hb||"linkCategoryProperty"===hb)i.da.cb||i.Kl()}else Bh(i,d,hb)}else if(b===Ge||b===He){var ub=a.Rc===Ge,kb=ub?a.Te:a.Ue,Wa=ub?a.newValue:a.oldValue,rb=i.Sk.ca(a.object);if(Array.isArray(rb))for(a=0;a<rb.length;a++){var bb=rb[a];"number"===typeof kb&&(ub?v.Na(Wa)&&(Ih(bb,Wa,kb),Jh(bb,bb)):(bb.Ad(kb),Jh(bb,bb)))}}else if(b===
Ee){var Bc=a.propertyName;if("S"!==Bc[0]){if("CommittingTransaction"!==Bc){if("FinishedUndo"===Bc||"FinishedRedo"===Bc)i.da.xh=h,Kh(i),i.da.xh=p;i.Pf&&i.ra.standardMouseOver();for(var Sc=i.selection.f;Sc.next();)Sc.value.updateAdornments()}i.Wq=h;i.update();Vg(i)}else"StartingFirstTransaction"===Bc&&(!i.bf&&!i.Pf)&&(i.Wq=h,i.Zo&&(i.Tg=h),i.update())}}finally{i.ya=h}}};this.Lf=new oa(Object,S);this.Sk=new oa(Object,Array);this.Hj=p;this.gj=this.fj=this.ks=this.wh=h;this.ms=this.ls=p;this.rs=this.ps=
this.pj=this.oj=this.nj=this.mj=this.kj=this.jj=this.lj=this.ij=this.os=this.rj=this.hj=this.qj=h;this.Zz=p;this.qs=this.ns=this.Rs=this.Qs=h;this.Mt=this.Lt=16;this.Kt=p;this.Jd=(new Kb(5)).freeze();this.Pt=(new qa(S)).freeze();this.jt=999999999;this.vm=this.Gj=this.Fj=h;this.qm=this.pm=p;this.Yc=m;this.ss=h;this.Pf=p;this.Oc=m;this.mA=1;this.PA=(new E(NaN,NaN,NaN,NaN)).freeze();this.Ls=(new E(NaN,NaN,NaN,NaN)).freeze();this.bf=p;this.Bt=new qa;Lh(this);Mh(this);this.dm=this.$w=this.Vc=m;this.Tb=
new kf;this.Tb.initializeStandardTools();this.ra=this.wu=this.Tb;this.yd=new sa;this.P=new O;this.Hh=h;this.vb=new Nh;this.Hh=p;a===f&&(a=document.createElement("div"));this.Rz=new Oh;Ph(this,a);this.Eq=this.WG=m;this.fc=p}v.H("Diagram",A);
function Mh(a){a.yi=new oa("string",S);var b=new U,c=new ra;c.bind(new bf("text","",Ie));b.add(c);a.$D=b;a.yi.add("",b);b=new U;c=new ra;c.stroke="brown";c.bind(new bf("text","",Ie));b.add(c);a.yi.add("Comment",b);b=new U;b.rk=p;b.Hx=p;c=new W;c.Wa="Ellipse";c.fill="black";c.stroke=m;c.ma=new yb(3,3);b.add(c);a.yi.add("LinkLabel",b);a.Mk=new oa("string",nf);b=new nf;b.$n="GROUPPANEL";b.type=Qh;c=new ra;c.font="bold 12pt sans-serif";c.bind(new bf("text","",Ie));b.add(c);c=new w(Rh);c.name="GROUPPANEL";
var d=new W;d.Wa="Rectangle";d.fill="rgba(128,128,128,0.2)";d.stroke="black";c.add(d);d=new Rg;d.padding=new Kb(5,5,5,5);c.add(d);b.add(c);a.XD=b;a.Mk.add("",b);a.Lj=new oa("string",V);b=new V;c=new W;c.Ui=h;b.add(c);c=new W;c.Rl="Standard";c.fill="black";c.stroke=m;b.add(c);a.ZD=b;a.Lj.add("",b);b=new V;c=new W;c.Ui=h;c.stroke="brown";b.add(c);a.Lj.add("Comment",b);b=new w;c=new ra;c.bind(new bf("text","",Ie));b.add(c);a.YD=b;b=new mf;b.type=Rh;c=new W;c.fill=m;c.stroke="magenta";c.Qa=2;b.add(c);
c=new Rg;c.margin=new Kb(1,1,1,1);b.add(c);a.Ow=b;a.yw=b;b=new mf;b.type=yg;c=new W;c.Ui=h;c.fill=m;c.stroke="magenta";c.Qa=0;b.add(c);a.Gw=b}
function zh(a){var b=document.createElement("p");b.style.width="100%";b.style.height="200px";var c=document.createElement("div");c.style.position="absolute";c.style.visibility="hidden";c.style.width="200px";c.style.height="150px";c.style.overflow="hidden";c.appendChild(b);document.body.appendChild(c);var d=b.offsetWidth;c.style.overflow="scroll";b=b.offsetWidth;d===b&&(b=c.clientWidth);document.body.removeChild(c);a.de=d-b}
A.prototype.toString=function(a){a===f&&(a=0);var b="";this.id&&(b=this.id);this.Xh&&this.Xh.id&&(b=this.Xh.id);b='Diagram "'+b+'"';if(0>=a)return b;for(var c=this.Ab.f;c.next();)b+="\n  "+c.value.toString(a-1);return b};A.prototype.dumpReferences=A.prototype.KB=function(){for(var a=this.Jr;a.next();){var b=a.value;v.trace(b.toString());for(b=b.Yi;b.next();)b.value.KB()}};A.prototype.checkProperties=A.prototype.OH=function(){return v.ZE(this)};
A.fromDiv=function(a){var b=a;"string"===typeof a&&(b=document.getElementById(a));return b instanceof HTMLDivElement&&b.L instanceof A?b.L:m};v.a(A,"div",A.prototype.Xh);
v.defineProperty(A,{Xh:"div"},s("Fb"),function(a){a!==m&&v.c(a,HTMLDivElement,A,"div");if(this.Fb!==a){var b=this.Fb;if(b!==m){delete b.L;b.innerHTML="";this.oa!==m&&(this.oa.L=m,this.oa.removeEventListener("touchstart",this.BD,p),this.oa.removeEventListener("touchmove",this.AD,p),this.oa.removeEventListener("touchend",this.zD,p));b=this.cu;if(b!==m){for(var c=b.fA,d=c.length,e=0;e<d;e++)c.i[e].cancelWaitAfter();c=b.gA;d=c.length;for(e=0;e<d;e++)c.i[e].cancelWaitAfter();c=b.hA;d=c.length;for(e=0;e<
d;e++)c.i[e].cancelWaitAfter()}b.cancelWaitAfter();this.Ik=this.oa=m;window.removeEventListener("resize",this.Cy,p);window.removeEventListener("mousemove",this.Pn,h);window.removeEventListener("mousedown",this.On,h);window.removeEventListener("mouseup",this.Rn,h);window.removeEventListener("mousewheel",this.mg,h);window.removeEventListener("DOMMouseScroll",this.mg,h);window.removeEventListener("mouseout",this.Qn,h)}this.Fb=m;if(a!==m){if(b=a.L)b.Xh=m;Ph(this,a)}}});
function Oh(){this.HA=h;this.XG=p;this.YG=212;this.mE="63ad05bbe23a1786468a4c741b6d2e";if(this.mE===this._tk)this.Kk=h;else{var a="p",b=window[v.Ka("76a715b2f73f148a")][v.Ka("72ba13b5")];if(v.Ka("77bb5bb2f32603de")===window[v.Ka("76a715b2f73f148a")][v.Ka("6aba19a7ec351488")])try{if(this.Kk=!window[v.Ka("4da118b7ec2108")][v.Ka("5bb806bfea351a904a84515e1b6d38b6")][v.Ka("49bc19a1e6")][v.Ka("59bd04a1e6380fa5539b")][v.Ka("7bb8069ae7")]===v.Ka(v.XA),this.Kk===p)return}catch(c){}for(var d=b[v.Ka("76ad18b4f73e")],
e=b[v.Ka("73a612b6fb191d")](v.Ka("35e7"))+2;e<d;e++)a+=b[e];d=a[v.Ka("73a612b6fb191d")](v.Ka(v.XA));if(this.Kk=!(0<d&&d<a[v.Ka("73a612b6fb191d")](v.Ka("35")))){a=document[v.Ka("69bc0fbfe6051381469f4c")];d=a.length;for(e=0;e<d;e++)if(b=a[e][v.Ka("79bb0581f63a1e97")],b!==m){for(var g=b.length,i=0;i<g;i++)if(b[i][v.Ka("69ad1ab6e0221496778e4767")]==v.Ka("02cncncn")){var j=b[i][v.Ka("69bc0fbfe6")][v.Ka("78a704b7e6242f8b53a8507f1b7b")];if(!j)return;if(-1!==j.indexOf(v.Ka(v.$E))&&-1!==j.indexOf(v.Ka(v.aF))){this.Kk=
p;break}}if(this.Kk===p)break}}this.ZG=new C(NaN,NaN)}}Oh.prototype.pv=function(a){a.SD();return 0<this.Kk&&this!==this.HA?h:p};Oh.prototype.t=Oh.prototype.yK=function(){this.HA=m};
function Ph(a,b){(b===f||b===m)&&v.g("Diagram setup requires an argument DIV.");a.Fb!==m&&v.g("Diagram has already completed setup.");"string"===typeof b?a.Fb=document.getElementById(b):b instanceof HTMLDivElement?a.Fb=b:v.g("No DIV or DIV id supplied: "+b);a.Fb===m&&v.g("Invalid DIV id; could not get element with id: "+b);a.Fb.L!==f&&v.g("Invalid div id; div already has a Diagram associated with it.");"static"===window.getComputedStyle(a.Fb,m).position&&(a.Fb.style.position="relative");a.Fb.style["-webkit-tap-highlight-color"]=
"rgba(255, 255, 255, 0)";a.Fb.innerHTML="";a.Fb.L=a;var c=document.createElement("canvas");if(!c.getContext||!c.getContext("2d"))a.Fb.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.";else{c.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.";c.style.position="absolute";c.style.top="0px";c.style.left="0px";c.style.zIndex="2";c.width=a.Fb.clientWidth||1;c.height=a.Fb.clientHeight||1;document.defaultView&&document.defaultView.getComputedStyle&&
(a.EA=parseInt(document.defaultView.getComputedStyle(c,m).paddingLeft,10)||0,a.FA=parseInt(document.defaultView.getComputedStyle(c,m).paddingTop,10)||0,a.CA=parseInt(document.defaultView.getComputedStyle(c,m).borderLeftWidth,10)||0,a.DA=parseInt(document.defaultView.getComputedStyle(c,m).borderTopWidth,10)||0);a.Aw=0;a.zw=0;if(document.body){var d=document.body.parentNode;a.Aw=d.offsetTop||0;a.zw=d.offsetLeft||0}else document.addEventListener("load",function(){if(document.body){var b=document.body.parentNode;
a.Aw=b.offsetTop||0;a.zw=b.offsetLeft||0}},p);c.L=a;a.oa=c;a.Ik=c.getContext("2d");d=a.Ik;a.SD=d[v.Ka("69ad0287f137159745844d7e")][v.Ka("78a118b7")](d,1,0,0,1,0,0);a.RD=d[v.Ka("7eba17a4ca3b1a8346")][v.Ka("78a118b7")](d,v.pv,4,4);a.Fb.insertBefore(c,a.Fb.firstChild);if(a.Jz!==m){var d=document.createElement("div"),e=document.createElement("div"),g=document.createElement("div"),i=document.createElement("div");d.style.position="absolute";d.style.overflow="auto";d.style.width=a.oa.width+"px";d.style.height=
a.oa.height+"px";d.style.zIndex="1";e.style.position="absolute";e.style.overflow="auto";e.style.width=a.oa.width+"px";e.style.height=a.oa.height+"px";e.style.zIndex="1";g.style.position="absolute";g.style.width="1px";g.style.height="1px";i.style.position="absolute";i.style.width="1px";i.style.height="1px";a.Fb.appendChild(d);a.Fb.appendChild(e);d.appendChild(g);e.appendChild(i);d.onscroll=a.kA;d.onmousedown=a.lA;d.L=a;d.xA=h;e.onscroll=a.kA;e.onmousedown=a.lA;e.L=a;e.yA=h;a.Xj=d;a.Yj=e;a.vA=g;a.wA=
i}a.preventDefault=function(a){a.preventDefault();return p};a.Pn=function(b){if(a.isEnabled){var c=a.sc;window.TouchEvent&&c.ni!==m&&c.ni instanceof window.TouchEvent?(b.preventDefault(),b.simulated=h,a.Eq=b):(a.sc=a.pc,a.pc=c,Sh(a,b,c,h),Th(b,new C,b.target.L)||(a.ra.doMouseMove(),a.ra.isBeyondDragSize()&&Uh(a)))}};a.On=function(b){if(a.isEnabled){var c=a.sc;if(a.Eq!==m)a.Eq=b,b.preventDefault();else if(a.sc=a.pc,a.pc=c,Sh(a,b,c,h),c.Je=b.detail,a.Of=c.copy(),c.ni.simulated===h)b.preventDefault(),
b.simulated=h;else if(t&&t.Jy&&(window.Jy=a.wn(c.C).i,t.trace(window.Jy)),Hf=m,a.ra.doMouseDown(),1===b.button)return b.preventDefault(),p}};a.Rn=function(b){if(a.isEnabled){var c=a.sc;a.Eq!==m?(a.Eq=m,b.preventDefault()):(a.sc=a.pc,a.pc=c,Sh(a,b,c,h),c.Je=b.detail,b.target.L&&(c.Af=b.target.L),Vh(a,b,new C,c.Af)||(a.ra.doMouseUp(),Jf(a),Wh(a,c,b)))}};a.mg=function(b){if(a.isEnabled){var c=a.sc;a.sc=a.pc;a.pc=c;Sh(a,b,c,h);c.bubbles=h;c.Li=b.wheelDelta!==f?b.wheelDelta:-40*b.detail;a.ra.doMouseWheel();
Wh(a,c,b)}};a.Qn=function(){if(a.isEnabled){var b=a.ra;b.cancelWaitAfter();b instanceof kf&&b.hideToolTip()}};a.Cy=function(){var b=a.oa,c=a.Fb,d=0;a.qm&&(d=a.de);var e=0;a.pm&&(e=a.de);if(c.clientWidth!==b.width+d||c.clientHeight!==b.height+e)a.Gj=h,a.pi=h;yf(a)};a.BD=function(b){if(a.isEnabled){a.ix=p;if(1<b.touches.length){a.ra.doCancel();if(a.Nk&&v.GA)return b.preventDefault(),b.cancelBubble=h,p;Uh(a);b.cancelBubble=p;return h}var c=a.sc;a.sc=a.pc;a.pc=c;c.b=a;var d=a.vh(b.targetTouches[0]);c.gd=
a.js(d);c.C=d;c.fh=0;c.button=0;c.Je=1;c.Li=0;c.zd=p;c.bubbles=p;c.event=b;c.timestamp=Date.now();c.Af=b.target.L?b.target.L:m;c.fd=m;a.Of=c.copy();Hf=m;a.ra.doMouseDown();var e=c.copy();a.Xt=setTimeout(function(){e.button=2;a.F=e;a.ix=h;a.ra.doMouseUp()},850);Wh(a,c,b)}};a.AD=function(b){if(a.isEnabled){if(1<b.touches.length){a.ra.doCancel();Uh(a);if(a.Nk&&v.GA)return b.preventDefault(),b.cancelBubble=h,p;b.cancelBubble=p;return h}var c=a.sc;a.sc=a.pc;a.pc=c;var d=m,e,g=m;0<b.changedTouches.length?
g=b.changedTouches[0]:0<b.targetTouches.length&&(g=b.targetTouches[0]);c.b=a;if(g){var d=document.elementFromPoint(g.clientX,g.clientY),i;d&&d.L?(e=d.L.vh(g),i=d.L):(e=a.vh(b.changedTouches[0]),i=a);c.C=e;c.gd=i.js(e)}else a.sc!==m?(c.C=a.sc.C,c.gd=a.sc.gd,d=a.sc.Af):a.Of!==m&&(c.C=a.Of.C,c.gd=a.Of.gd,d=a.Of.Af);c.fh=0;c.button=0;c.Je=1;c.Li=0;c.zd=p;c.bubbles=p;c.event=b;c.timestamp=Date.now();c.Af=d===m?b.target.L:d.L?d.L:m;c.fd=m;a.ra.isBeyondDragSize()&&Uh(a);if(!Th(g?g:b,new C,c.Af))a.ra.doMouseMove(),
Wh(a,c,b)}};a.zD=function(b){if(a.isEnabled){Uh(a);if(a.ix)return b.preventDefault(),p;var c=a.sc;a.sc=a.pc;a.pc=c;if(!(1<b.touches.length)){var d=m,e,g=m;0<b.changedTouches.length?g=b.changedTouches[0]:0<b.targetTouches.length&&(g=b.targetTouches[0]);c.b=a;if(g){var d=document.elementFromPoint(g.clientX,g.clientY),i;d&&d.L?(e=d.L.vh(g),i=d.L):(e=a.vh(b.changedTouches[0]),i=a);c.C=e;c.gd=i.js(e)}else a.sc!==m?(c.C=a.sc.C,c.gd=a.sc.gd,d=a.sc.Af):a.Of!==m&&(c.C=a.Of.C,c.gd=a.Of.gd,d=a.Of.Af);c.fh=0;
c.button=0;c.Je=1;c.Li=0;c.zd=p;c.bubbles=p;c.event=b;c.timestamp=Date.now();c.Af=d===m?b.target.L:d.L?d.L:m;c.fd=m;if(!Vh(a,g?g:b,new C,c.Af))a.ra.doMouseUp(),Wh(a,c,b)}}};c.addEventListener("touchstart",a.BD,p);c.addEventListener("touchmove",a.AD,p);c.addEventListener("touchend",a.zD,p);c.addEventListener("gesturestart",function(){a.Nk!==p&&(a.mA=a.scale,a.ra.doCancel())},p);c.addEventListener("gesturechange",function(b){if(a.Nk!==p){var c=a.vh(b),d=a.zk;a.zk=c;a.scale=a.mA*b.scale;a.zk=d}},p);
c.addEventListener("mousemove",a.Pn,p);c.addEventListener("mousedown",a.On,p);c.addEventListener("mouseup",a.Rn,p);c.addEventListener("mousewheel",a.mg,p);c.addEventListener("DOMMouseScroll",a.mg,p);c.addEventListener("mouseout",a.Qn,p);c.addEventListener("keydown",a.XF,p);c.addEventListener("keyup",a.YF,p);c.addEventListener("selectstart",function(a){a.preventDefault();return p},p);c.addEventListener("contextmenu",function(a){a.preventDefault();return p},p);window.addEventListener("resize",a.Cy,
p);c.tabIndex=0;Xh(a)}}A.prototype.focus=A.prototype.focus=function(){this.oa.focus()};function Xh(a,b){b===f&&(b=a.Ik);b.Qv="";b.Vl="";b.Ul=""}function Lh(a){var b=new gf;b.name="Background";a.dr(b);b=new gf;b.name="";a.dr(b);b=new gf;b.name="Foreground";a.dr(b);b=new gf;b.name="Adornment";b.Sc=h;a.dr(b);b=new gf;b.name="Tool";b.Sc=h;a.dr(b);b=new gf;b.name="Grid";b.Od=p;b.Sc=h;a.wE(b,a.tn("Background"))}
function Yh(a){a.Vc=new w(Zh);a.Vc.name="GRID";var b=new W;b.Wa="LineH";b.stroke="lightgray";b.Qa=0.5;b.$h=1;a.Vc.add(b);b=new W;b.Wa="LineH";b.stroke="gray";b.Qa=0.5;b.$h=5;a.Vc.add(b);b=new W;b.Wa="LineH";b.stroke="gray";b.Qa=1;b.$h=10;a.Vc.add(b);b=new W;b.Wa="LineV";b.stroke="lightgray";b.Qa=0.5;b.$h=1;a.Vc.add(b);b=new W;b.Wa="LineV";b.stroke="gray";b.Qa=0.5;b.$h=5;a.Vc.add(b);b=new W;b.Wa="LineV";b.stroke="gray";b.Qa=1;b.$h=10;a.Vc.add(b);b=new S;b.add(a.Vc);b.Cd="Grid";b.Ou=p;b.MC=p;b.Kr="GRID";
a.add(b);a.Bb.remove(b);a.Vc.visible=p}
A.prototype.kA=function(){var a=this.L;if(a.uA){a.Kt=h;var b=a.yc,c=a.ob,d=b.width,e=c.width,g=b.height,i=c.height,j=b.right,k=c.right,l=b.bottom,n=c.bottom,r=b.x,q=c.x,b=b.y,c=c.y;if(e<d||i<g)this.xA&&a.He?a.position=new C(this.scrollLeft+r,a.position.y):this.yA&&a.Ie&&(a.position=new C(a.position.x,this.scrollTop+b)),$h(a),yh(a),a.Kt=p,a.Gj=p;else{var u=a.scale;this.xA&&a.He&&(r<q&&(a.position=new C(this.scrollLeft+r,a.position.y)),j>k&&(a.position=new C(-(a.Xj.de-a.oa.width)+this.scrollLeft-a.oa.width/
u+a.yc.right,a.position.y)));this.yA&&a.Ie&&(b<c&&(a.position=new C(a.position.x,this.scrollTop+b)),l>n&&(a.position=new C(a.position.x,-(a.Yj.scrollHeight-a.oa.height)+this.scrollTop-a.oa.height/u+a.yc.bottom)));$h(a);a.Kt=p;a.Gj=p;yh(a);b=a.yc;c=a.ob;j=b.right;k=c.right;l=b.bottom;n=c.bottom;r=b.x;q=c.x;b=b.y;c=c.y;e>=d&&(r>=q&&j<=k)&&(a.vA.style.width="1px");i>=g&&(b>=c&&l<=n)&&(a.wA.style.height="1px");gi(a)}}};A.prototype.lA=function(){this.L.uA=h};
A.prototype.computeBounds=A.prototype.Ke=function(){0<this.zg.count&&Kh(this);if(this.wr.aa()){var a=this.wr.copy();a.er(this.padding);return a}for(var b=h,c=this.Ab,d=c.length,e=0;e<d;e++){var g=c.i[e];if(g.visible&&!g.Sc)for(var g=g.Bb,i=g.length,j=0;j<i;j++){var k=g.i[j];k.Ou&&k.eb()&&(k=k.la,k.aa()&&(b?(b=p,a=k.copy()):a.ej(k)))}}b&&(a=new E(0,0,0,0));a.er(this.padding);return a};
function hi(a,b){if((b||a.Pf)&&!a.fc&&a.yc.aa()){a.fc=h;var c=a.Ck;b&&a.Dj!==Ah&&(c=a.Dj);var d=c!==Ah?ii(a,c):a.scale,c=a.ob.copy(),e=a.oa.width/d,g=a.oa.height/d;a.position.qa();var i=a.Gk;b&&fc(a.sm)&&(i=a.sm);ji(a,a.kb,a.yc,e,g,i);a.position.freeze();a.scale=d;a.fc=p;d=a.ob;d.hg(c)||a.Vr(c,d)}}
function ii(a,b){var c=a.yc;if(!c.aa())return 1;var d=c.width,c=c.height,e=a.oa.width,g=a.oa.height,i=e/d,j=g/c,k=1;return b===ki?(k=Math.min(j,i),1<k&&(k=1),k):b===li?(k=j>i?(g-a.de)/c:(e-a.de)/d,1<k&&(k=1),k):a.scale}A.prototype.zoomToFit=A.prototype.EK=function(){this.scale=ii(this,ki);yf(this)};
A.prototype.alignDocument=A.prototype.iH=function(a,b){this.Fj&&mi(this,this.Ke());var c=this.yc,d=this.ob,e=this.fc;this.fc=h;this.position=new C(c.x+(a.x*c.width+a.offsetX)-(b.x*d.width-b.offsetX),c.y+(a.y*c.height+a.offsetY)-(b.y*d.height-b.offsetY));this.fc=e;yh(this);this.bf||yf(this)};
function ji(a,b,c,d,e,g){fc(g)&&(d>c.width&&(b.x=c.x+(g.x*c.width+g.offsetX)-(g.x*d-g.offsetX)),e>c.height&&(b.y=c.y+(g.y*c.height+g.offsetY)-(g.y*e-g.offsetY)));d<c.width?(g=b.x+d/2,g=Math.min(g,c.right-d/2),g=Math.max(g,c.left+d/2),b.x=g-d/2):b.x>c.left?b.x=c.left:b.x<c.right-d&&(b.x=c.right-d);e<c.height?(d=b.y+e/2,d=Math.min(d,c.bottom-e/2),d=Math.max(d,c.top+e/2),b.y=d-e/2):b.y>c.top?b.y=c.top:b.y<c.bottom-e&&(b.y=c.bottom-e);isFinite(b.x)||(b.x=-a.padding.left);isFinite(b.y)||(b.y=-a.padding.top)}
A.prototype.findPartAt=A.prototype.tr=function(a,b){var c=b?$f(this,a,function(a){return a.V},function(a){return a.Jx()}):this.dd(a,function(a){return a.V});return c instanceof S?c:m};A.prototype.findObjectAt=A.prototype.dd=function(a,b,c){b===f&&(b=m);c===f&&(c=m);var d=this.Ab.Gn;for(Kh(this);d.next();){var e=d.value;if(e.visible&&(e=e.dd(a,b,c),e!==m))return e}return m};
function $f(a,b,c,d){c===f&&(c=m);d===f&&(d=m);var e=a.Ab.Gn;for(Kh(a);e.next();)if(a=e.value,a.visible&&!a.Sc&&(a=a.dd(b,c,d),a!==m))return a;return m}A.prototype.findObjectsAt=A.prototype.wn=function(a,b,c,d){b===f&&(b=m);c===f&&(c=m);if(!(d instanceof y)||!(d instanceof qa))d=new y(R);Kh(this);for(var e=this.Ab.Gn;e.next();){var g=e.value;g.visible&&g.wn(a,b,c,d)}return d};
A.prototype.findObjectsIn=A.prototype.xl=function(a,b,c,d,e){b===f&&(b=m);c===f&&(c=m);d===f&&(d=p);if(!(e instanceof y)||!(e instanceof qa))e=new y(R);Kh(this);for(var g=this.Ab.Gn;g.next();){var i=g.value;i.visible&&i.xl(a,b,c,d,e)}return e};A.prototype.findObjectsNear=A.prototype.xn=function(a,b,c,d,e){c===f&&(c=m);d===f&&(d=m);!(e instanceof y)&&!(e instanceof qa)&&(e=new y(R));Kh(this);for(var g=this.Ab.Gn;g.next();){var i=g.value;i.visible&&i.xn(a,b,c,d,e)}return e};
function Uh(a){-1!==a.Xt&&(clearTimeout(a.Xt),a.Xt=-1)}function Sh(a,b,c,d){c.b=a;d?(d=a.vh(b),c.gd=a.js(d),c.C=d):(c.gd=a.pc.gd,c.C=a.pc.C);a=0;b.ctrlKey&&(a+=1);b.altKey&&(a+=2);b.shiftKey&&(a+=4);c.fh=a;c.button=b.button;c.Je=1;c.Li=0;c.zd=p;c.bubbles=p;c.event=b;c.timestamp=Date.now();c.Af=b.target.L?b.target.L:m;c.fd=m}
function Wh(a,b,c){if(b.bubbles)return t&&(t.trace&&t.aC)&&t.trace("NOT handled "+c.type+" "+b.toString()),h;t&&(t.trace&&t.aC)&&t.trace("handled "+c.type+" "+a.ra.name+" "+b.toString());c.stopPropagation!==f&&c.stopPropagation();c.preventDefault!==f&&"touchstart"!==c.type&&c.preventDefault();c.cancelBubble=h;return p}
A.prototype.XF=function(a){if(this.L.isEnabled){var b=this.L.pc;Sh(this.L,a,b,p);b.key=String.fromCharCode(a.which);switch(a.which){case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del";break;case 48:b.key="0";break;case 187:b.key="Add";break;case 189:b.key="Subtract";break;case 107:b.key=
"Add";break;case 109:b.key="Subtract";break;case 27:b.key="Esc"}this.L.ra.doKeyDown();return(187===a.which||189===a.which||48===a.which||107===a.which||109===a.which)&&a.ctrlKey===h?(a.cancelBubble=h,a.preventDefault!==f?a.preventDefault():a.returnValue=p,Event.stop&&(v.g("Event.stop can fire for this browser"),Event.stop(a)),a.stopPropagation!==f&&a.stopPropagation(),p):Wh(this.L,b,a)}};
A.prototype.YF=function(a){if(this.L.isEnabled){var b=this.L.pc;Sh(this.L,a,b,p);b.key=String.fromCharCode(a.which);switch(a.which){case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del"}this.L.ra.doKeyUp();return Wh(this.L,b,a)}};
A.prototype.vh=function(a){if(this.Sv){var b=this.oa,c=0,d=0;if(b.offsetParent!==f){do c+=b.offsetLeft+b.clientLeft,d+=b.offsetTop+b.clientTop;while(b=b.offsetParent)}c+=this.EA+this.CA+this.zw;d+=this.FA+this.DA+this.Aw;b=a.pageX-c;a=a.pageY-d;this.Ld!==m&&(a=new C(b,a),pb(a,this.Ld),b=a.x,a=a.y);return new C(b,a)}b=this.oa;c=b.getBoundingClientRect();d=a.clientX-c.left*(b.width/c.width);a=a.clientY-c.top*(b.height/c.height);this.Ld!==m&&(a=new C(d,a),pb(a,this.Ld),d=a.x,a=a.y);return new C(d,a)};
v.a(A,"alternateCoordinates",A.prototype.HE);v.defineProperty(A,{HE:m},s("Sv"),function(a){v.e(a,"boolean",A,"alternateCoordinates");this.Sv=a});A.prototype.invalidateDocumentBounds=A.prototype.ai=function(){if(!this.bf&&(ni(this),this.tx===p)){this.tx=h;var a=this;requestAnimationFrame(function(){a.oa===m||a.Tg===h||(Vg(a),a.tx=p)})}};function Vg(a){a.bf||Kh(a);a.Fj&&mi(a,a.Ke());hi(a);!a.fc&&a.Gj&&oi(a);for(a=a.Bt.f;a.next();)Vg(a.value)}
A.prototype.redraw=A.prototype.YJ=function(){!this.fc&&!this.bf&&(yh(this),gi(this),$h(this),ni(this),this.update())};A.prototype.isUpdateRequested=A.prototype.qJ=s("Tg");function yf(a){!a.fc&&!a.bf&&a.Tg===p&&(a.Tg=h,requestAnimationFrame(function(){a.Tg&&(a.update(),a.Tg=p)}))}
A.prototype.update=A.prototype.update=function(){if(!(this.Fb===m||this.bf))if(!this.Zo||this.Tg){this.Zo&&(this.Zo=p);this.bf=h;this.Cy();this.Tg=p;Kh(this);var a=p;if(!this.Pf||this.Wq&&this.ss)pi(this),this.Wq=p,a=h;Kh(this);this.yc.aa()||mi(this,this.Ke());a&&(this.Pf||(qi(this),ri(this)),this.ga("LayoutCompleted"));Kh(this);!this.fc&&this.Gj&&!oi(this)&&(oi(this),a&&(this.Pf||(qi(this),ri(this)),this.ga("LayoutCompleted")));a&&!this.Pf&&(this.Pf=h);this.gg();this.bf=p}};
function qi(a){a.Dj!==Ah?a.scale=ii(a,a.Dj):a.Ck!==Ah&&(a.scale=ii(a,a.Ck));var b=a.position;if(b.aa())a.kb.u(b)?hi(a,h):a.position=b;else{b=new C;b.ao(a.yc,a.fC);var c=a.ob,c=new E(0,0,c.width,c.height),d=new C;d.ao(c,a.gC);c=a.FD(d);a.position=new C(b.x-c.x,b.y-c.y);hi(a,h)}a.ga("InitialLayoutCompleted");a=a.da;a!==m&&a.clear()}
function Kh(a){for(var b=0;23>b;b++){var c=a.zg.f;if(c===m||0===a.zg.count)break;a.zg=new qa(R);for(var d=a,e=a.zg;c.next();){var g=c.value,i=g.constructor;i===nf&&si(d,g)}for(c.reset();c.next();)d=c.value,i=d.constructor,i!==U&&i!==S||(d.lk()?(ph(d,Infinity,Infinity),d.vc()):e.add(d));for(c.reset();c.next();)d=c.value,i=d.constructor,i===V&&(d.lk()?(ph(d,Infinity,Infinity),d.vc(),ti(d)):e.add(d));for(c.reset();c.next();)d=c.value,i=d.constructor,i===mf&&(d.lk()?(ph(d,Infinity,Infinity),d.vc()):e.add(d))}}
function si(a,b){for(var c=b.mc,d=[];c.next();){var e=c.value,g=e.constructor;g===nf?(e.$b||e.Ec||e.qi)&&si(a,e):g===V?d.push(e):(ph(e,Infinity,Infinity),e.vc())}c=d.length;for(e=0;e<c;e++)g=d[e],ph(g,Infinity,Infinity),g.vc();ph(b,Infinity,Infinity);b.vc()}
A.prototype.gg=function(a){this.Fb===m&&v.g("No div specified");this.oa===m&&v.g("No canvas specified");a||(a=this.Ik);var b=a!==this.Ik;if(b)Xh(this);else if(!this.pi)return;if(0<this.im.count){for(var c=this.im.f;c.next();)zg(c.key,c.value);this.im.clear()}a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,this.oa.width,this.oa.height);c=this.Ld;c.reset();1!==this.Ob&&c.scale(this.Ob);var d=this.kb;(0!==d.x||0!==d.y)&&c.translate(-d.x,-d.y);a.setTransform(c.m11,c.m12,c.m21,c.m22,c.Sa,c.Ta);t&&t.WE&&(a.fillStyle=
"red",a.fillRect(0,0,8,8),a.lineWidth=8,a.strokeStyle="rgba(255,255,0,.6)",c=this.ob,a.strokeRect(c.x,c.y,c.width,c.height),a.fillStyle="rgba(0,255,0,.2)",a.fillRect(this.yc.x,this.yc.y,this.yc.width,this.yc.height));c=this.Ab.length;for(d=0;d<c;d++)this.Ab.i[d].gg(a,this);this.Rz?this.Rz.pv(this)&&this.RD():this.vh=aa();b?Xh(this):this.pi=this.vm=p};function ni(a){if(a.Fj===p||a.Tg===p)a.Fj=h,yf(a)}
function yh(a,b){if(a.pi===p&&(b===f||a.ob.Re(b)))a.pi=h,yf(a);for(var c=a.Bt.f;c.next();)yh(c.value)}function gi(a){a.Gj===p&&(a.Gj=h)}function $h(a){a.vm===p&&(a.vm=h)}
function oi(a){var b=a.oa;if(b!==m){var c=a.Fb,d=b.width,e=b.height,g=a.PA.copy(),i=p,j=0,k=0;a.qm&&(j=a.de);a.pm&&(k=a.de);if(c.clientWidth!==b.width+j||c.clientHeight!==b.height+k)a.qm=p,a.pm=p,b.width=c.clientWidth,b.height=c.clientHeight,i=h;a.Gj=p;if(!a.Jz||a.Kt)(d!==b.width||e!==b.height)&&a.update();else{var l=a.ob,n=a.yc,r=n.width,c=n.height,q=l.width,j=l.height,u=n.x,x=l.x,z=n.right,D=l.right,k=n.y,F=l.y,n=n.bottom,l=l.bottom,G="1px";a.bC&&a.He&&(q+1<r?(G=r-q+b.width+"px",a.Xj.scrollLeft=
a.position.x-u):u+1<x?(G=x-u+b.width+"px",a.Xj.scrollLeft=a.Xj.scrollWidth-a.Xj.clientWidth):z>D+1&&(G=z-D+b.width+"px",a.Xj.scrollLeft=a.position.x));r="1px"!==G;r!==a.pm&&(i=a.de/a.scale,"1px"===G?(b.height+=a.de,j+=i,l+=i):(b.height-=a.de,j-=i,l-=i),i=h);a.pm=r;a.vA.style.width=G;r="1px";a.cC&&a.Ie&&(j+1<c?(r=c-j+b.height+"px",a.Yj.scrollTop=a.position.y-k):k+1<F?(r=F-k+b.height+"px",a.Yj.scrollTop=a.Yj.scrollHeight-a.Yj.clientHeight):n>l+1&&(r=n-l+b.height+"px",a.Yj.scrollTop=a.position.y));c=
"1px"!==r;c!==a.qm&&(b.width="1px"===r?b.width+a.de:b.width-a.de,i=h);a.qm=c;a.wA.style.height=r;i&&Xh(a);c=b.width;j=b.height;a.Yj.style.height=j+"px";a.Yj.style.width=a.qm?c+a.de+"px":c+"px";a.Xj.style.width=c+"px";a.Xj.style.height=a.pm?j+a.de+"px":j+"px";a.uA=p;return d!==b.width||e!==b.height?(l=a.ob,a.Vr(g,l,i?h:f),a.update(),p):h}}}
function ui(a,b){for(var c=a.Ab,d=c.count,e=0;e<d;e++)c.Z(e).name===b&&v.g("Cannot add layer with the name '"+b+"', a layer of the same name is already present in this diagram.")}v.a(A,"addsToTemporaryLayer",A.prototype.gr);v.defineProperty(A,{gr:m},s("uz"),function(a){v.e(a,"boolean",A,"addsToTemporaryLayer");this.uz=a});
A.prototype.add=A.prototype.add=function(a){v.c(a,S,A,"add:part");var b=a.b;if(b!==this){b!==m&&v.g("Cannot add part "+a.toString()+" to "+this.toString()+". It is already a part of "+b.toString());var c=this.gr?"Tool":a.Cd,b=this.tn(c);b===m&&(b=this.tn(""));b===m&&v.g('Cannot add a Part when unable find a Layer named "'+c+'" and there is no default Layer');a.ta!==b&&(c=a.b===this?b.kk(99999999,a,h):b.kk(99999999,a),0<=c&&this.Xd(Ge,"parts",b,m,a,m,c),this.ai(),a.r(vi),c=a.Hr,c!==m&&c(a,m,b))}};
A.prototype.kk=function(a){if(a instanceof U){if(this.wt.add(a),a instanceof nf){var b=a.Va;b===m?this.gl.add(a):b.Zk.add(a);b=a.vb;b!==m&&(b.b=this)}}else a instanceof V?this.ct.add(a):a.constructor===S&&this.Bb.add(a);if(b=a.data){a instanceof mf||this.Lf.add(b,a);var c=this;wi(a,a,function(a){xi(c,a)})}(a.Ec===h||a.qi===h)&&this.zg.add(a);yi(a,h);a.eb()&&(yh(this),ni(this))};
A.prototype.Ad=function(a){if(a instanceof U){if(this.wt.remove(a),a instanceof nf){var b=a.Va;b===m?this.gl.remove(a):b.Zk.remove(a);b=a.vb;b!==m&&(b.b=m)}}else a instanceof V?this.ct.remove(a):a.constructor===S&&this.Bb.remove(a);if(b=a.data){a instanceof mf||this.Lf.remove(b);var c=this;wi(a,a,function(a){zi(c,a)})}this.zg.remove(a);a.eb()&&(yh(this),ni(this))};
A.prototype.remove=A.prototype.remove=function(a){v.c(a,S,A,"remove:part");var b=a.ta;if(b!==m&&b.b===this){a.Ga=p;a.r(Ai);a.tl();var c=b.Ad(-1,a);0<=c&&this.Xd(He,"parts",b,a,m,c,m);c=a.Hr;c!==m&&c(a,b,m);this.ai();this.ra.standardMouseOver()}};A.prototype.addLayer=A.prototype.dr=function(a){v.c(a,gf,A,"addLayer:layer");ui(this,a.name);a.xf(this);var b=this.Ab,c=b.count-1;if(!a.Sc)for(;0<=c&&b.Z(c).Sc;)c--;b.lc(c+1,a);ni(this)};
A.prototype.addLayerBefore=A.prototype.wE=function(a,b){v.c(a,gf,A,"addLayer:layer");ui(this,a.name);a.xf(this);for(var c=this.Ab.count,d=0;d<c;d++)if(this.Ab.Z(d)===b){this.Ab.lc(d,a);break}ni(this)};A.prototype.addLayerAfter=A.prototype.eH=function(a,b){v.c(a,gf,A,"addLayer:layer");ui(this,a.name);a.xf(this);for(var c=this.Ab.count,d=0;d<c;d++)if(this.Ab.Z(d)===b){this.Ab.lc(d+1,a);break}ni(this)};
A.prototype.removeLayer=A.prototype.bK=function(a){if(""!==a.name&&this.Ab.remove(a)){for(var b=a.Bb.copy().f;b.next();){var c=b.value,d=c.Cd;c.Cd="";d!==a.name&&(c.Cd=d)}ni(this)}};A.prototype.findLayer=A.prototype.tn=function(a){for(var b=this.Jr;b.next();){var c=b.value;if(c.name===a)return c}return m};A.prototype.addChangedListener=A.prototype.Bx=function(a){v.e(a,"function",A,"addChangedListener:listener");this.li===m&&(this.li=new y("function"));this.li.add(a)};
A.prototype.removeChangedListener=A.prototype.Py=function(a){v.e(a,"function",A,"removeChangedListener:listener");this.li!==m&&(this.li.remove(a),0===this.li.count&&(this.li=m))};A.prototype.nu=function(a){this.nb||this.da.$B(a);if(this.li!==m)for(var b=this.li.f;b.next();){var c=b.value;c(a)}};A.prototype.raiseChangedEvent=A.prototype.Xd=function(a,b,c,d,e,g,i){g===f&&(g=m);i===f&&(i=m);var j=new De;j.b=this;j.Rc=a;j.propertyName=b;j.object=c;j.oldValue=d;j.Ue=g;j.newValue=e;j.Te=i;this.nu(j)};
A.prototype.raiseChanged=A.prototype.d=function(a,b,c,d,e){this.Xd(Fe,a,this,b,c,d,e)};v.m(A,{da:"undoManager"},function(){return this.ef.da});v.a(A,"skipsUndoManager",A.prototype.nb);v.defineProperty(A,{nb:"skipsUndoManager"},s("Hh"),function(a){v.e(a,"boolean",A,"skipsUndoManager");this.Hh=a;this.ef.Hh=a});
A.prototype.changeState=A.prototype.jr=function(a,b){if(a!==m&&a.b===this){var c=this.Pk;try{this.Pk=h;var d=a.Rc;if(d===Fe){var e=a.object,g=a.propertyName,i=a.ca(b);v.fb(e,g,i);if(e instanceof R){var j=e.V;j!==m&&j.Wg()}}else if(d===Ge){var k=a.object,l=a.Te,e=a.newValue;if(k instanceof w){if("number"===typeof l&&e instanceof R){var n=k;b?n.Ad(l):n.lc(l,e);j=k.V;j!==m&&j.Wg()}}else if(k instanceof gf){var r=a.Ue===h;if("number"===typeof l&&e instanceof S){var q=k;b?(e.Wg(),q.Ad(l,e,r)):q.kk(l,e,
r)}}else v.g("unknown ChangedEvent.Insert object: "+a.toString())}else d===He?(k=a.object,l=a.Ue,e=a.oldValue,k instanceof w?"number"===typeof l&&e instanceof R&&(n=k,b?n.lc(l,e):n.Ad(l)):k instanceof gf?(r=a.Te===h,"number"===typeof l&&e instanceof S&&(q=k,b?q.kk(l,e,r):(e.Wg(),q.Ad(l,e,r)))):v.g("unknown ChangedEvent.Remove object: "+a.toString())):d!==Ee&&v.g("unknown ChangedEvent: "+a.toString())}finally{this.Pk=c}}};A.prototype.startTransaction=A.prototype.Lb=function(a){return this.da.Lb(a)};
A.prototype.commitTransaction=A.prototype.Rd=function(a){return this.da.Rd(a)};A.prototype.rollbackTransaction=A.prototype.Xr=function(){return this.da.Xr()};A.prototype.updateAllTargetBindings=A.prototype.CK=function(){for(var a=this.Yi;a.next();)a.value.nc();for(a=this.ok;a.next();)a.value.nc();for(a=this.links;a.next();)a.value.nc()};
A.prototype.Vr=function(a,b,c){if(!this.fc){$h(this);yh(this);gi(this);ni(this);var d=this.vb;d!==m&&(d.Ru&&!c&&(a.width!==b.width||a.height!==b.height))&&d.r();hi(this);this.ga("ViewportBoundsChanged",c?{}:m,a);ri(this)}};
function ri(a){var b=a.Vc;if(b!==m&&b.visible){for(var c,d=c=1,e=b.wa.length,g=0;g<e;g++){var i=b.wa.i[g],j=i.$h;2>j||("LineV"===i.Wa?d=d*j/Gd(d,j):c=c*j/Gd(c,j))}e=b.Br;c=new yb(c*e.width,d*e.height);a=a.ob;a.aa()&&(b.width=a.width+2*c.width,b.height=a.height+2*c.height,a=Fd(a.x,a.y,0,0,c.width,c.height),b.V.location=new C(a.x-c.width,a.y-c.height))}}A.prototype.clearSelection=A.prototype.Nx=function(){this.ga("ChangingSelection");xf(this);this.ga("ChangedSelection")};
function xf(a){a=a.selection;if(0<a.count){for(var b=a.Cf(),c=b.length,d=0;d<c;d++)b[d].Ga=p;a.qa();a.clear();a.freeze()}}A.prototype.select=A.prototype.select=function(a){if(a!==m&&a.ta.b===this&&(!a.Ga||1<this.selection.count))this.ga("ChangingSelection"),xf(this),a.Ga=h,this.ga("ChangedSelection")};A.prototype.selectCollection=A.prototype.Ty=function(a){this.ga("ChangingSelection");xf(this);for(a=a.f;a.next();)a.value.Ga=h;this.ga("ChangedSelection")};
A.prototype.scroll=function(a,b,c){c===f&&(c=1);var d="up"===b||"down"===b,e;"pixel"===a?e=c:"line"===a?e=c*(d?this.Zr:this.Yr):"page"===a?0!==window.innerHeight&&(e=Math.max(window.innerHeight-(d?this.Zr:this.Yr),0),e*=c):v.g("scrolling unit must be 'pixel', 'line', or 'page', not: "+a);e/=this.scale;c=this.position.copy();"up"===b?c.y=this.position.y-e:"down"===b?c.y=this.position.y+e:"left"===b?c.x=this.position.x-e:"right"===b?c.x=this.position.x+e:v.g("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+
b);this.position=c};A.prototype.scrollToRect=A.prototype.hK=function(a){var b=this.ob;b.pl(a)||(a=a.ou,a.x-=b.width/2,a.y-=b.height/2,this.position=a)};A.prototype.centerRect=A.prototype.NH=function(a){var b=this.ob,a=a.ou;a.x-=b.width/2;a.y-=b.height/2;this.position=a};A.prototype.transformDocToView=A.prototype.js=function(a){var b=this.Ld;b.reset();1!==this.Ob&&b.scale(this.Ob);var c=this.kb;(0!==c.x||0!==c.y)&&(isFinite(c.x)&&isFinite(c.y))&&b.translate(-c.x,-c.y);return a.copy().transform(this.Ld)};
A.prototype.transformViewToDoc=A.prototype.FD=function(a){var b=this.Ld;b.reset();1!==this.Ob&&b.scale(this.Ob);var c=this.kb;(0!==c.x||0!==c.y)&&(isFinite(c.x)&&isFinite(c.y))&&b.translate(-c.x,-c.y);return pb(a.copy(),this.Ld)};var Ah;A.None=Ah=v.l(A,"None",0);var ki;A.Uniform=ki=v.l(A,"Uniform",1);var li;A.UniformToFill=li=v.l(A,"UniformToFill",2);var gg;A.CycleAll=gg=v.l(A,"CycleAll",10);var kg;A.CycleNotDirected=kg=v.l(A,"CycleNotDirected",11);var rg;
A.CycleNotDirectedFast=rg=v.l(A,"CycleNotDirectedFast",12);var sg;A.CycleNotUndirected=sg=v.l(A,"CycleNotUndirected",13);var hg;A.CycleDestinationTree=hg=v.l(A,"CycleDestinationTree",14);var jg;A.CycleSourceTree=jg=v.l(A,"CycleSourceTree",15);v.a(A,"validCycle",A.prototype.LD);v.defineProperty(A,{LD:"validCycle"},s("du"),function(a){var b=this.du;b!==a&&(v.Ua(a,A,A,"validCycle"),this.du=a,this.d("validCycle",b,a))});v.m(A,{Jr:"layers"},function(){return this.Ab.f});v.a(A,"isModelReadOnly",A.prototype.Ud);
v.defineProperty(A,{Ud:"isModelReadOnly"},function(){var a=this.ef;return a===m?p:a.Oa},function(a){var b=this.ef;b!==m&&(b.Oa=a)});v.a(A,"isReadOnly",A.prototype.Oa);v.defineProperty(A,{Oa:"isReadOnly"},s("Hj"),function(a){var b=this.Hj;b!==a&&(v.e(a,"boolean",A,"isReadOnly"),this.Hj=a,this.d("isReadOnly",b,a))});v.a(A,"isEnabled",A.prototype.isEnabled);
v.defineProperty(A,{isEnabled:"isEnabled"},s("wh"),function(a){var b=this.wh;b!==a&&(v.e(a,"boolean",A,"isEnabled"),this.wh=a,this.d("isEnabled",b,a))});v.a(A,"allowClipboard",A.prototype.ku);v.defineProperty(A,{ku:"allowClipboard"},s("ks"),function(a){var b=this.ks;b!==a&&(v.e(a,"boolean",A,"allowClipboard"),this.ks=a,this.d("allowClipboard",b,a))});v.a(A,"allowCopy",A.prototype.Oh);
v.defineProperty(A,{Oh:"allowCopy"},s("fj"),function(a){var b=this.fj;b!==a&&(v.e(a,"boolean",A,"allowCopy"),this.fj=a,this.d("allowCopy",b,a))});v.a(A,"allowDelete",A.prototype.bk);v.defineProperty(A,{bk:"allowDelete"},s("gj"),function(a){var b=this.gj;b!==a&&(v.e(a,"boolean",A,"allowDelete"),this.gj=a,this.d("allowDelete",b,a))});v.a(A,"allowDragOut",A.prototype.lu);
v.defineProperty(A,{lu:"allowDragOut"},s("ls"),function(a){var b=this.ls;b!==a&&(v.e(a,"boolean",A,"allowDragOut"),this.ls=a,this.d("allowDragOut",b,a))});v.a(A,"allowDrop",A.prototype.ZA);v.defineProperty(A,{ZA:"allowDrop"},s("ms"),function(a){var b=this.ms;b!==a&&(v.e(a,"boolean",A,"allowDrop"),this.ms=a,this.d("allowDrop",b,a))});v.a(A,"allowTextEdit",A.prototype.jn);
v.defineProperty(A,{jn:"allowTextEdit"},s("qj"),function(a){var b=this.qj;b!==a&&(v.e(a,"boolean",A,"allowTextEdit"),this.qj=a,this.d("allowTextEdit",b,a))});v.a(A,"allowGroup",A.prototype.cn);v.defineProperty(A,{cn:"allowGroup"},s("hj"),function(a){var b=this.hj;b!==a&&(v.e(a,"boolean",A,"allowGroup"),this.hj=a,this.d("allowGroup",b,a))});v.a(A,"allowUngroup",A.prototype.kn);
v.defineProperty(A,{kn:"allowUngroup"},s("rj"),function(a){var b=this.rj;b!==a&&(v.e(a,"boolean",A,"allowUngroup"),this.rj=a,this.d("allowUngroup",b,a))});v.a(A,"allowInsert",A.prototype.dn);v.defineProperty(A,{dn:"allowInsert"},s("os"),function(a){var b=this.os;b!==a&&(v.e(a,"boolean",A,"allowInsert"),this.os=a,this.d("allowInsert",b,a))});v.a(A,"allowLink",A.prototype.kl);
v.defineProperty(A,{kl:"allowLink"},s("ij"),function(a){var b=this.ij;b!==a&&(v.e(a,"boolean",A,"allowLink"),this.ij=a,this.d("allowLink",b,a))});v.a(A,"allowRelink",A.prototype.Fi);v.defineProperty(A,{Fi:"allowRelink"},s("lj"),function(a){var b=this.lj;b!==a&&(v.e(a,"boolean",A,"allowRelink"),this.lj=a,this.d("allowRelink",b,a))});v.a(A,"allowMove",A.prototype.ck);
v.defineProperty(A,{ck:"allowMove"},s("jj"),function(a){var b=this.jj;b!==a&&(v.e(a,"boolean",A,"allowMove"),this.jj=a,this.d("allowMove",b,a))});v.a(A,"allowPrint",A.prototype.en);v.defineProperty(A,{en:"allowPrint"},s("kj"),function(a){var b=this.kj;b!==a&&(v.e(a,"boolean",A,"allowPrint"),this.kj=a,this.d("allowPrint",b,a))});v.a(A,"allowReshape",A.prototype.fn);
v.defineProperty(A,{fn:"allowReshape"},s("mj"),function(a){var b=this.mj;b!==a&&(v.e(a,"boolean",A,"allowReshape"),this.mj=a,this.d("allowReshape",b,a))});v.a(A,"allowResize",A.prototype.gn);v.defineProperty(A,{gn:"allowResize"},s("nj"),function(a){var b=this.nj;b!==a&&(v.e(a,"boolean",A,"allowResize"),this.nj=a,this.d("allowResize",b,a))});v.a(A,"allowRotate",A.prototype.hn);
v.defineProperty(A,{hn:"allowRotate"},s("oj"),function(a){var b=this.oj;b!==a&&(v.e(a,"boolean",A,"allowRotate"),this.oj=a,this.d("allowRotate",b,a))});v.a(A,"allowSelect",A.prototype.Od);v.defineProperty(A,{Od:"allowSelect"},s("pj"),function(a){var b=this.pj;b!==a&&(v.e(a,"boolean",A,"allowSelect"),this.pj=a,this.d("allowSelect",b,a))});v.a(A,"allowUndo",A.prototype.Cx);
v.defineProperty(A,{Cx:"allowUndo"},s("ps"),function(a){var b=this.ps;b!==a&&(v.e(a,"boolean",A,"allowUndo"),this.ps=a,this.d("allowUndo",b,a))});v.a(A,"allowZoom",A.prototype.hr);v.defineProperty(A,{hr:"allowZoom"},s("rs"),function(a){var b=this.rs;b!==a&&(v.e(a,"boolean",A,"allowZoom"),this.rs=a,this.d("allowZoom",b,a))});v.a(A,"hasVerticalScrollbar",A.prototype.cC);
v.defineProperty(A,{cC:"hasVerticalScrollbar"},s("Rs"),function(a){var b=this.Rs;b!==a&&(v.e(a,"boolean",A,"hasVerticalScrollbar"),this.Rs=a,this.d("hasVerticalScrollbar",b,a),hi(this))});v.a(A,"hasHorizontalScrollbar",A.prototype.bC);v.defineProperty(A,{bC:"hasHorizontalScrollbar"},s("Qs"),function(a){var b=this.Qs;b!==a&&(v.e(a,"boolean",A,"hasHorizontalScrollbar"),this.Qs=a,this.d("hasHorizontalScrollbar",b,a),hi(this))});v.a(A,"allowHorizontalScroll",A.prototype.He);
v.defineProperty(A,{He:"allowHorizontalScroll"},s("ns"),function(a){var b=this.ns;b!==a&&(v.e(a,"boolean",A,"allowHorizontalScroll"),this.ns=a,this.d("allowHorizontalScroll",b,a),hi(this))});v.a(A,"allowVerticalScroll",A.prototype.Ie);v.defineProperty(A,{Ie:"allowVerticalScroll"},s("qs"),function(a){var b=this.qs;b!==a&&(v.e(a,"boolean",A,"allowVerticalScroll"),this.qs=a,this.d("allowVerticalScroll",b,a),hi(this))});v.a(A,"scrollHorizontalLineChange",A.prototype.Yr);
v.defineProperty(A,{Yr:"scrollHorizontalLineChange"},s("Lt"),function(a){var b=this.Lt;b!==a&&(v.e(a,"number",A,"scrollHorizontalLineChange"),0>a&&v.ha(a,">= 0",A,"scrollHorizontalLineChange"),this.Lt=a,this.d("scrollHorizontalLineChange",b,a))});v.a(A,"scrollVerticalLineChange",A.prototype.Zr);
v.defineProperty(A,{Zr:"scrollVerticalLineChange"},s("Mt"),function(a){var b=this.Mt;b!==a&&(v.e(a,"number",A,"scrollVerticalLineChange"),0>a&&v.ha(a,">= 0",A,"scrollVerticalLineChange"),this.Mt=a,this.d("scrollVerticalLineChange",b,a))});v.a(A,"lastInput",A.prototype.F);v.defineProperty(A,{F:"lastInput"},s("pc"),function(a){t&&v.c(a,Be,A,"lastInput");this.pc=a});v.a(A,"firstInput",A.prototype.jc);v.defineProperty(A,{jc:"firstInput"},s("Of"),function(a){t&&v.c(a,Be,A,"firstInput");this.Of=a});
v.a(A,"currentCursor",A.prototype.xc);v.defineProperty(A,{xc:"currentCursor"},s("Gs"),function(a){v.e(a,"string",A,"currentCursor");this.Gs===a||""===a&&this.Gs===this.Lo||(this.Gs=a,""!==a?(this.oa.style.cursor=a,document.body.style.cursor=a):(this.oa.style.cursor=this.Wx,document.body.style.cursor=this.Wx))});v.a(A,"defaultCursor",A.prototype.Wx);
v.defineProperty(A,{Wx:"defaultCursor"},s("Lo"),function(a){v.e(a,"string",A,"defaultCursor");var b=this.Lo;b!==a&&(this.Lo=a,this.d("defaultCursor",b,a))});v.a(A,"hasGestureZoom",A.prototype.HF);v.defineProperty(A,{HF:"hasGestureZoom"},s("Nk"),function(a){var b=this.Nk;b!==a&&(v.e(a,"boolean",A,"hasGestureZoom"),this.Nk=a,this.d("hasGestureZoom",b,a))});v.a(A,"click",A.prototype.click);
v.defineProperty(A,{click:"click"},s("ph"),function(a){var b=this.ph;b!==a&&(a!==m&&v.e(a,"function",A,"click"),this.ph=a,this.d("click",b,a))});v.a(A,"doubleClick",A.prototype.ul);v.defineProperty(A,{ul:"doubleClick"},s("sh"),function(a){var b=this.sh;b!==a&&(a!==m&&v.e(a,"function",A,"doubleClick"),this.sh=a,this.d("doubleClick",b,a))});v.a(A,"contextClick",A.prototype.mr);
v.defineProperty(A,{mr:"contextClick"},s("qh"),function(a){var b=this.qh;b!==a&&(a!==m&&v.e(a,"function",A,"contextClick"),this.qh=a,this.d("contextClick",b,a))});v.a(A,"mouseOver",A.prototype.Rr);v.defineProperty(A,{Rr:"mouseOver"},s("Fh"),function(a){var b=this.Fh;b!==a&&(a!==m&&v.e(a,"function",A,"mouseOver"),this.Fh=a,this.d("mouseOver",b,a))});v.a(A,"mouseHover",A.prototype.Qr);
v.defineProperty(A,{Qr:"mouseHover"},s("Eh"),function(a){var b=this.Eh;b!==a&&(a!==m&&v.e(a,"function",A,"mouseHover"),this.Eh=a,this.d("mouseHover",b,a))});v.a(A,"mouseHold",A.prototype.Pr);v.defineProperty(A,{Pr:"mouseHold"},s("Dh"),function(a){var b=this.Dh;b!==a&&(a!==m&&v.e(a,"function",A,"mouseHold"),this.Dh=a,this.d("mouseHold",b,a))});v.a(A,"mouseDragOver",A.prototype.FC);
v.defineProperty(A,{FC:"mouseDragOver"},s("qt"),function(a){var b=this.qt;b!==a&&(a!==m&&v.e(a,"function",A,"mouseDragOver"),this.qt=a,this.d("mouseDragOver",b,a))});v.a(A,"mouseDrop",A.prototype.Nr);v.defineProperty(A,{Nr:"mouseDrop"},s("Ch"),function(a){var b=this.Ch;b!==a&&(a!==m&&v.e(a,"function",A,"mouseDrop"),this.Ch=a,this.d("mouseDrop",b,a))});v.a(A,"toolTip",A.prototype.is);
v.defineProperty(A,{is:"toolTip"},s("Mh"),function(a){var b=this.Mh;b!==a&&(a!==m&&v.c(a,mf,A,"toolTip"),this.Mh=a,this.d("toolTip",b,a))});v.a(A,"contextMenu",A.prototype.contextMenu);v.defineProperty(A,{contextMenu:"contextMenu"},s("rh"),function(a){var b=this.rh;b!==a&&(a!==m&&v.c(a,mf,A,"contextMenu"),this.rh=a,this.d("contextMenu",b,a))});v.a(A,"commandHandler",A.prototype.yd);
v.defineProperty(A,{yd:"commandHandler"},s("aw"),function(a){var b=this.aw;b!==a&&(v.c(a,sa,A,"commandHandler"),a.b!==m&&v.g("Cannot share CommandHandlers between Diagrams: "+a.toString()),b!==m&&b.xf(m),this.aw=a,a.xf(this))});v.a(A,"toolManager",A.prototype.Tb);v.defineProperty(A,{Tb:"toolManager"},s("cu"),function(a){var b=this.cu;b!==a&&(v.c(a,kf,A,"toolManager"),a.b!==m&&v.g("Cannot share ToolManagers between Diagrams: "+a.toString()),b!==m&&b.xf(m),this.cu=a,a.xf(this))});
v.a(A,"defaultTool",A.prototype.wu);v.defineProperty(A,{wu:"defaultTool"},s("iw"),function(a){var b=this.iw;b!==a&&(v.c(a,zf,A,"defaultTool"),this.iw=a,this.ra===b&&(this.ra=a))});v.a(A,"currentTool",A.prototype.ra);v.defineProperty(A,{ra:"currentTool"},s("dw"),function(a){var b=this.dw;b!==m&&(b.S&&b.doDeactivate(),b.cancelWaitAfter(),b.doStop());a===m&&(a=this.wu);a!==m&&(v.c(a,zf,A,"currentTool"),this.dw=a,a.xf(this),a.doStart())});v.m(A,{selection:"selection"},s("Pt"));
v.a(A,"maxSelectionCount",A.prototype.yC);v.defineProperty(A,{yC:"maxSelectionCount"},s("jt"),function(a){var b=this.jt;if(b!==a)if(v.e(a,"number",A,"maxSelectionCount"),0<=a&&!isNaN(a)){if(this.jt=a,this.d("maxSelectionCount",b,a),!this.da.cb&&(a=this.selection.count-a,0<a)){this.ga("ChangingSelection");for(var b=this.selection.Cf(),c=0;c<a;c++)b[c].Ga=p;this.ga("ChangedSelection")}}else v.ha(a,">= 0",A,"maxSelectionCount")});v.a(A,"nodeSelectionAdornmentTemplate",A.prototype.IC);
v.defineProperty(A,{IC:"nodeSelectionAdornmentTemplate"},s("Ow"),function(a){var b=this.Ow;b!==a&&(v.c(a,mf,A,"nodeSelectionAdornmentTemplate"),this.Ow=a,this.d("nodeSelectionAdornmentTemplate",b,a))});v.a(A,"groupSelectionAdornmentTemplate",A.prototype.YB);v.defineProperty(A,{YB:"groupSelectionAdornmentTemplate"},s("yw"),function(a){var b=this.yw;b!==a&&(v.c(a,mf,A,"groupSelectionAdornmentTemplate"),this.yw=a,this.d("groupSelectionAdornmentTemplate",b,a))});
v.a(A,"linkSelectionAdornmentTemplate",A.prototype.uC);v.defineProperty(A,{uC:"linkSelectionAdornmentTemplate"},s("Gw"),function(a){var b=this.Gw;b!==a&&(v.c(a,mf,A,"linkSelectionAdornmentTemplate"),this.Gw=a,this.d("linkSelectionAdornmentTemplate",b,a))});v.a(A,"isModified",A.prototype.SF);v.defineProperty(A,{SF:"isModified"},function(){var a=this.da;return a===m?this.Yz:a.rl!==m?h:this.Yz&&this.Bj!==a.Si},function(a){v.e(a,"boolean",A,"isModified");this.Yz=a;var b=this.da;!a&&b&&(this.Bj=b.Si)});
v.a(A,"model",A.prototype.P);v.defineProperty(A,{P:"model"},s("ef"),function(a){var b=this.ef;if(b!==a){v.c(a,B,A,"model");b!==m&&(b.da!==a.da&&b.da.QF)&&v.g("Do not replace a Diagram.model while a transaction is in progress.");this.Pf=p;this.Zo=h;this.Tg=p;var c=this.bf;this.bf=h;b!==m&&(b.Py(this.dA),b instanceof O&&Ch(this,b.jg),Ch(this,b.hh));this.ef=a;a.Bx(this.cA);Dh(this,a.hh);a instanceof O&&Eh(this,a.jg);a.Py(this.cA);a.Bx(this.dA);this.bf=c;yf(this);b!==m&&(a.da.isEnabled=b.da.isEnabled)}});
function Bh(a,b,c){var d=a.ig(b);if(d!==m&&"string"===typeof c)d.nc(c);else{d=m;for(a=a.Sk.f;a.next();){for(var e=a.value,g=0;g<e.length;g++){var i=e[g];i.cf!==m&&(i=i.cf.ca(b),i!==m&&(d===m&&(d=[]),d.push(i)))}if(d!==m)break}b=d;if(b!==m&&"string"===typeof c)for(d=0;d<b.length;d++)b[d].nc(c)}}function xi(a,b){var c=b.Ij;if(v.isArray(c)){var d=a.Sk.ca(c);if(d===m)a.Sk.add(c,[b]);else{for(c=0;c<d.length;c++)if(d[c]===b)return;d.push(b)}}}
function zi(a,b){var c=b.Ij;if(v.isArray(c)){var d=a.Sk.ca(c);if(d!==m)for(var e=0;e<d.length;e++)if(d[e]===b){d.splice(e,1);0===d.length&&a.Sk.remove(c);break}}}
A.prototype.clear=A.prototype.clear=function(){var a=m;this.Vc!==m&&(a=this.Vc.V);this.P.clear();for(var b=this.Ab.length,c=0;c<b;c++)this.Ab.i[c].clear();this.zg.clear();this.im.clear();this.wt.clear();this.gl.clear();this.ct.clear();this.Bb.clear();this.Lf.clear();this.Sk.clear();this.Pt.qa();this.Pt.clear();this.Pt.freeze();this.dm=this.$w=m;this.Ls=(new E(NaN,NaN,NaN,NaN)).freeze();a!==m&&(this.add(a),this.Bb.remove(a))};
A.prototype.reset=A.prototype.reset=function(){this.fc=h;this.clear();this.Ab=new y(gf);this.kb=(new C(NaN,NaN)).freeze();this.Ob=1;this.nt=1E-4;this.it=100;this.gu=(new C(NaN,NaN)).freeze();this.Os=(new E(NaN,NaN,NaN,NaN)).freeze();this.Ck=Ah;this.Gk=mc;this.Dj=Ah;this.sm=mc;this.Ts=this.Ss=pc;this.ts=(new Kb(16,16,16,16)).freeze();this.$s=h;this.du=gg;this.Lo="auto";this.ef=this.rh=this.Mh=this.Ch=this.qt=this.Dh=this.Eh=this.Fh=this.qh=this.sh=this.ph=m;this.Hj=p;this.gj=this.fj=this.ks=this.wh=
h;this.ms=this.ls=p;this.qs=this.ns=this.Rs=this.Qs=this.rs=this.ps=this.pj=this.oj=this.nj=this.mj=this.kj=this.jj=this.lj=this.ij=this.os=this.rj=this.hj=this.qj=h;this.Mt=this.Lt=16;this.Jd=(new Kb(5)).freeze();this.jt=999999999;this.Yc=m;Lh(this);Mh(this);this.Vc=m;this.P=new O;this.Hh=h;this.vb=new Nh;this.fc=this.Hh=p};
A.prototype.rebuildParts=A.prototype.Kl=function(){for(var a=[],b=this.selection.f;b.next();){var c=b.value.data;c&&a.push(c)}b=this.P;b instanceof O&&Ch(this,b.jg);Ch(this,b.hh);Dh(this,b.hh);b instanceof O&&Eh(this,b.jg);for(b=0;b<a.length;b++)if(c=this.ig(a[b]))c.Ga=h};function Dh(a,b){if(b!==m){for(var c=a.P,d=v.Cb(b),e=0;e<d;e++){var g=v.qb(b,e);c.Hi(g)?Fh(a,g,p):Gh(a,g)}if(c instanceof O){for(e=0;e<d;e++)g=v.qb(b,e),c.Hi(g)&&Bi(a,g);for(c=a.links;c.next();)Ci(c.value)}a.ny(p)}}
function Fh(a,b,c){if(!(b===f||b===m)&&!a.da.cb&&!a.Lf.contains(b)){c===f&&(c=h);var d=a.getCategoryForNodeData(b),e=a.findTemplateForNodeData(b,d);e instanceof S&&(pf(e),e=e.copy(),e instanceof S&&(e.sj=d,a.add(e),e.data=b,c&&Bi(a,b)))}}A.prototype.getCategoryForNodeData=A.prototype.TB=function(a){var b=this.P,c=b.TB(a),d=p;b instanceof O&&(d=b.sy(a));d&&""===c&&(c="LinkLabel");return c};
A.prototype.findTemplateForNodeData=A.prototype.MI=function(a,b){var c=p,d=this.P;d instanceof O&&(c=d.oy(a));c?(c=this.ky.ca(b),c===m&&(c=this.ky.ca(""),c===m&&(v.pE===f&&(v.pE=h,v.trace('No Group template found for category "'+b+'"'),v.trace("  Using default group template")),c=this.XD))):(c=this.Ky.ca(b),c===m&&(c=this.Ky.ca(""),c===m&&(v.sE===f&&(v.sE=h,v.trace('No Node template found for category "'+b+'"'),v.trace("  Using default node template")),c=this.$D)));return c instanceof S?c:m};
function Bi(a,b){var c=a.P;if(c instanceof O){var d=c.cc(b);if(d!==f){var e=c.LB(d),g=a.ig(b);if(e!==m&&g!==m&&g instanceof U){for(e=e.f;e.next();){var i=e.value;if(c.Hi(i)){if(g instanceof nf&&c.Ar(i)===d){var j=a.ig(i);j!==m&&(j.Va=g)}}else if(j=a.Qi(i),j!==m){c.An(i)===d&&(j.ea=g);c.Bn(i)===d&&(j.ia=g);for(var i=c.zl(i),k=0;k<i.length;k++)if(i[k]===d){g.ke=j;break}}}c.bh(d)}c=c.Ar(b);c!==f&&(c=a.ah(c),c instanceof nf&&(g.Va=c))}}}
function Eh(a,b){if(b!==m){for(var c=v.Cb(b),d=0;d<c;d++)Gh(a,v.qb(b,d));a.ny(p)}}
function Gh(a,b){if(!(b===f||b===m)&&!a.da.cb&&!a.Lf.contains(b)){var c=a.getCategoryForLinkData(b),d=a.findTemplateForLinkData(b,c);if(d instanceof V&&(pf(d),d=d.copy(),d instanceof V)){d.sj=c;var c=a.P,e=c.An(b);e!==f&&(e=a.ah(e),e instanceof U&&(d.ea=e));e=c.CF(b);d.dh=e;e=c.Bn(b);e!==f&&(e=a.ah(e),e instanceof U&&(d.ia=e));e=c.EF(b);d.gi=e;c=c.zl(b);if(v.isArray(c))for(var e=v.Cb(c),g=0;g<e;g++){var i=a.ah(v.qb(c,g));i!==m&&(i.ke=d)}a.add(d);d.data=b}}}
A.prototype.getCategoryForLinkData=A.prototype.SB=function(a){return this.P.SB(a)};A.prototype.findTemplateForLinkData=A.prototype.LI=function(a,b){var c=this.yy.ca(b);c===m&&(c=this.yy.ca(""),c===m&&(v.rE===f&&(v.rE=h,v.trace('No Link template found for category "'+b+'"'),v.trace("  Using default link template")),c=this.ZD));return c instanceof V?c:m};function Ch(a,b){for(var c=v.Cb(b),d=0;d<c;d++)Hh(a,v.qb(b,d))}
function Hh(a,b){if(!(b===f||b===m)){var c=a.ig(b);if(c instanceof S){var d=c.ta;if(!(d===m||d.b!==a)){var e=a.P;if(e instanceof O&&c instanceof U){var g=e.cc(c.data);if(g!==f){for(var i=c.le;i.next();){var j=i.value.data;e.fg(g,j)}c.Ti&&(i=c.ke,i!==m&&(j=i.data,e.fg(g,j)));if(c instanceof nf)for(i=c.mc;i.next();)j=i.value.data,e.Hi(j)&&e.fg(g,j)}}c.Ga=p;e=d.Ad(-1,c);0<=e&&a.Xd(He,"parts",d,c,m,e,m);e=c.Hr;e!==m&&e(c,d,m)}}}}
A.prototype.findPartForKey=A.prototype.JI=function(a){if(a===m||a===f)return m;a=this.P.$g(a);if(a===m)return m;a=this.Lf.ca(a);return a instanceof S?a:m};A.prototype.findNodeForKey=A.prototype.ah=function(a){if(a===m||a===f)return m;a=this.P.$g(a);if(a===m)return m;a=this.Lf.ca(a);return a instanceof U?a:m};A.prototype.findPartForData=A.prototype.ig=function(a){if(a===m)return m;a=this.Lf.ca(a);return a instanceof S?a:m};
A.prototype.findNodeForData=A.prototype.HI=function(a){if(a===m)return m;a=this.Lf.ca(a);return a instanceof U?a:m};A.prototype.findLinkForData=A.prototype.Qi=function(a){if(a===m)return m;a=this.Lf.ca(a);return a instanceof V?a:m};v.a(A,"nodeTemplate",A.prototype.kG);v.defineProperty(A,{kG:"nodeTemplate"},function(){return this.yi.ca("")},function(a){var b=this.yi.ca("");b!==a&&(v.c(a,S,A,"nodeTemplate"),this.yi.add("",a),this.d("nodeTemplate",b,a),this.da.cb||this.Kl())});
v.a(A,"nodeTemplateMap",A.prototype.Ky);v.defineProperty(A,{Ky:"nodeTemplateMap"},s("yi"),function(a){var b=this.yi;b!==a&&(v.c(a,oa,A,"nodeTemplateMap"),this.yi=a,this.d("nodeTemplateMap",b,a),this.da.cb||this.Kl())});v.a(A,"groupTemplate",A.prototype.GF);v.defineProperty(A,{GF:"groupTemplate"},function(){return this.Mk.ca("")},function(a){var b=this.Mk.ca("");b!==a&&(v.c(a,nf,A,"groupTemplate"),this.Mk.add("",a),this.d("groupTemplate",b,a),this.da.cb||this.Kl())});v.a(A,"groupTemplateMap",A.prototype.ky);
v.defineProperty(A,{ky:"groupTemplateMap"},s("Mk"),function(a){var b=this.Mk;b!==a&&(v.c(a,oa,A,"groupTemplateMap"),this.Mk=a,this.d("groupTemplateMap",b,a),this.da.cb||this.Kl())});v.a(A,"linkTemplate",A.prototype.aG);v.defineProperty(A,{aG:"linkTemplate"},function(){return this.Lj.ca("")},function(a){var b=this.Lj.ca("");b!==a&&(v.c(a,V,A,"linkTemplate"),this.Lj.add("",a),this.d("linkTemplate",b,a),this.da.cb||this.Kl())});v.a(A,"linkTemplateMap",A.prototype.yy);
v.defineProperty(A,{yy:"linkTemplateMap"},s("Lj"),function(a){var b=this.Lj;b!==a&&(v.c(a,oa,A,"linkTemplateMap"),this.Lj=a,this.d("linkTemplateMap",b,a),this.da.cb||this.Kl())});v.a(A,"isMouseCaptured",A.prototype.Jc);
v.defineProperty(A,{Jc:"isMouseCaptured"},s("Zz"),function(a){var b=this.oa;a?(this.F.bubbles=p,b.removeEventListener("mousemove",this.Pn,p),b.removeEventListener("mousedown",this.On,p),b.removeEventListener("mouseup",this.Rn,p),b.removeEventListener("mousewheel",this.mg,p),b.removeEventListener("DOMMouseScroll",this.mg,p),b.removeEventListener("mouseout",this.Qn,p),window.addEventListener("mousemove",this.Pn,h),window.addEventListener("mousedown",this.On,h),window.addEventListener("mouseup",this.Rn,
h),window.addEventListener("mousewheel",this.mg,h),window.addEventListener("DOMMouseScroll",this.mg,h),window.addEventListener("mouseout",this.Qn,h),window.addEventListener("selectstart",this.preventDefault,p)):(window.removeEventListener("mousemove",this.Pn,h),window.removeEventListener("mousedown",this.On,h),window.removeEventListener("mouseup",this.Rn,h),window.removeEventListener("mousewheel",this.mg,h),window.removeEventListener("DOMMouseScroll",this.mg,h),window.removeEventListener("mouseout",
this.Qn,h),window.removeEventListener("selectstart",this.preventDefault,p),b.addEventListener("mousemove",this.Pn,p),b.addEventListener("mousedown",this.On,p),b.addEventListener("mouseup",this.Rn,p),b.addEventListener("mousewheel",this.mg,p),b.addEventListener("DOMMouseScroll",this.mg,p),b.addEventListener("mouseout",this.Qn,p));this.Zz=a});v.a(A,"position",A.prototype.position);
v.defineProperty(A,{position:"position"},s("kb"),function(a){var b=this.kb;if(!b.u(a)){v.c(a,C,A,"position");var c=this.ob.copy();c.x=b.x;c.y=b.y;b.Pi(a)?a=b:this.fc||(this.fc=h,b=this.scale,ji(this,a,this.yc,this.oa.width/b,this.oa.height/b,this.Gk),this.fc=p);this.kb=a.B();this.Vr(c,this.ob);yf(this)}});v.a(A,"grid",A.prototype.Ku);
v.defineProperty(A,{Ku:"grid"},function(){this.Vc===m&&Yh(this);return this.Vc},function(a){var b=this.Vc;if(b!==a){b===m&&(Yh(this),b=this.Vc);v.c(a,w,A,"grid");a.type!==Zh&&v.g("Diagram.grid must be a Panel of type Panel.Grid");var c=b.Y;c!==m&&c.remove(b);this.Vc=a;a.name="GRID";c!==m&&c.add(a);yh(this);this.d("grid",b,a)}});v.m(A,{ob:"viewportBounds"},function(){var a=this.kb,b=this.Ob,c=this.oa,d=this.PA;d.Kd(a.x,a.y,Math.max(c.width,0)/b,Math.max(c.height,0)/b);return d});
v.a(A,"fixedBounds",A.prototype.wr);v.defineProperty(A,{wr:"fixedBounds"},s("Os"),function(a){var b=this.Os;b.u(a)||(v.c(a,E,A,"fixedBounds"),this.Os=a=a.B(),ni(this),this.d("fixedBounds",b,a))});v.m(A,{yc:"documentBounds"},s("Ls"));function mi(a,b){var c=a.Ls;c.u(b)||(b=b.B(),a.Ls=b,a.Fj=p,hi(a),a.ga("DocumentBoundsChanged",m,c.copy()),gi(a))}v.a(A,"scale",A.prototype.scale);
v.defineProperty(A,{scale:"scale"},s("Ob"),function(a){var b=this.Ob;if(b!==a){v.j(a,A,"scale");this.Ob=a;var c=a;a<this.Xi&&(c=this.Xi);a>this.Wi&&(c=this.Wi);if(!isNaN(a)&&!this.fc&&!this.bf){this.fc=h;var d=this.ob.copy(),e=this.oa.width/c,g=this.oa.height/c;d.width=this.oa.width/b;d.height=this.oa.height/b;var i=this.zk.copy();if(isNaN(i.x))switch(this.tu){case Ic:i.x=0;break;case Oc:i.x=e-1;break;case sc:i.x=e/2;break;case mc:case Qc:i.x=e/2}if(isNaN(i.y))switch(this.tu){case Hc:i.y=0;break;
case Pc:i.y=g-1;break;case sc:i.y=g/2;break;case mc:case Qc:i.y=g/2}var j=this.position,a=new C(j.x+i.x/b-i.x/a,j.y+i.y/b-i.y/a);ji(this,a,this.yc,e,g,this.Gk);this.position=a;this.fc=p;e=this.ob;this.Ob=c;this.Vr(d,e)}yh(this);gi(this)}});v.a(A,"autoScale",A.prototype.Gx);v.defineProperty(A,{Gx:"autoScale"},s("Ck"),function(a){var b=this.Ck;b!==a&&(v.Ua(a,A,A,"autoScale"),this.Ck=a,this.d("autoScale",b,a),a!==Ah&&hi(this))});v.a(A,"initialAutoScale",A.prototype.KF);
v.defineProperty(A,{KF:"initialAutoScale"},s("Dj"),function(a){var b=this.Dj;b!==a&&(v.Ua(a,A,A,"initialAutoScale"),this.Dj=a,this.d("initialAutoScale",b,a))});v.a(A,"initialViewportSpot",A.prototype.gC);v.defineProperty(A,{gC:"initialViewportSpot"},s("Ts"),function(a){var b=this.Ts;b!==a&&(v.c(a,H,A,"initialViewportSpot"),fc(a)||v.g("initialViewportSpot must be a real Spot: "+a),this.Ts=a,this.d("initialViewportSpot",b,a))});v.a(A,"initialDocumentSpot",A.prototype.fC);
v.defineProperty(A,{fC:"initialDocumentSpot"},s("Ss"),function(a){var b=this.Ss;b!==a&&(v.c(a,H,A,"initialDocumentSpot"),fc(a)||v.g("initialViewportSpot must be a real Spot: "+a),this.Ss=a,this.d("initialDocumentSpot",b,a))});v.a(A,"minScale",A.prototype.Xi);v.defineProperty(A,{Xi:"minScale"},s("nt"),function(a){v.j(a,A,"minScale");var b=this.nt;b!==a&&0<a?(this.nt=a,this.d("minScale",b,a),a>this.scale&&(this.scale=a)):v.ha(a,"> 0",A,"minScale")});v.a(A,"maxScale",A.prototype.Wi);
v.defineProperty(A,{Wi:"maxScale"},s("it"),function(a){v.j(a,A,"maxScale");var b=this.it;b!==a&&0<a?(this.it=a,this.d("maxScale",b,a),a<this.scale&&(this.scale=a)):v.ha(a,"> 0",A,"maxScale")});v.a(A,"zoomPoint",A.prototype.zk);v.defineProperty(A,{zk:"zoomPoint"},s("gu"),function(a){this.gu.u(a)||(v.c(a,C,A,"zoomPoint"),this.gu=a=a.B(),ni(this))});v.a(A,"contentAlignment",A.prototype.tu);
v.defineProperty(A,{tu:"contentAlignment"},s("Gk"),function(a){var b=this.Gk;b.u(a)||(v.c(a,H,A,"contentAlignment"),this.Gk=a=a.B(),this.d("contentAlignment",b,a),hi(this))});v.a(A,"initialContentAlignment",A.prototype.LF);v.defineProperty(A,{LF:"initialContentAlignment"},s("sm"),function(a){var b=this.sm;b.u(a)||(v.c(a,H,A,"initialContentAlignment"),this.sm=a=a.B(),this.d("initialContentAlignment",b,a))});v.a(A,"padding",A.prototype.padding);
v.defineProperty(A,{padding:"padding"},s("Jd"),function(a){"number"===typeof a?a=new Kb(a):v.c(a,Kb,A,"padding");var b=this.Jd;b.u(a)||(this.Jd=a=a.B(),ni(this),this.d("padding",b,a))});v.m(A,{ok:"nodes"},function(){return this.wt.f});v.m(A,{links:"links"},function(){return this.ct.f});v.m(A,{Yi:"parts"},function(){return this.Bb.f});v.a(A,"layout",A.prototype.vb);
v.defineProperty(A,{vb:"layout"},s("Yc"),function(a){var b=this.Yc;b!==a&&(v.c(a,Nh,A,"layout"),b!==m&&(b.b=m,b.group=m),this.Yc=a,a.b=this,a.group=m,this.ss=h,this.d("layout",b,a))});A.prototype.layoutDiagram=A.prototype.vJ=function(a){Kh(this);a&&this.ny(h);pi(this)};A.prototype.invalidateAllLayouts=A.prototype.ny=function(a){for(var b=this.gl.f;b.next();)Di(this,b.value,a);this.vb!==m&&(a?this.vb.Se=p:this.vb.r())};
function Di(a,b,c){if(b!==m){for(var d=b.Zk.f;d.next();)Di(a,d.value,c);b.vb!==m&&(c?b.vb.Se=p:b.vb.r())}}function pi(a){for(var b=a.gl.f;b.next();)Ei(a,b.value);b=a.vb;b!==m&&!b.Se&&(b.doLayout(a),b.Se=h);a.ss=p}function Ei(a,b){if(b!==m){for(var c=b.Zk.f;c.next();)Ei(a,c.value);c=b.vb;c!==m&&!c.Se&&(b.jA=!b.location.aa(),c.doLayout(b),b.r(Fi),c.Se=h,si(a,b))}}v.a(A,"isTreePathToChildren",A.prototype.rf);
v.defineProperty(A,{rf:"isTreePathToChildren"},s("$s"),function(a){var b=this.$s;if(b!==a&&(v.e(a,"boolean",A,"isTreePathToChildren"),this.$s=a,this.d("isTreePathToChildren",b,a),!this.da.cb))for(a=this.ok;a.next();)Gi(a.value)});v.a(A,"isCollapsingExpanding",A.prototype.qf);v.defineProperty(A,{qf:m},s("Vz"),ba("Vz"));function Hi(a,b){var c=a.kw.ca(b);if(c!==m)return c;c=a.kw.ca(b.toLowerCase());if(c!==m)return c;v.g("Unknown DiagramEvent name: "+b);return m}
A.prototype.addDiagramListener=A.prototype.TA=function(a,b){v.e(a,"string",A,"addDiagramListener:name");v.e(b,"function",A,"addDiagramListener:listener");var c=Hi(this,a);c!==m&&c.add(b)};A.prototype.removeDiagramListener=A.prototype.UC=function(a,b){v.e(a,"string",A,"removeDiagramListener:name");v.e(b,"function",A,"addDiagramListener:listener");var c=Hi(this,a);c!==m&&c.remove(b)};
A.prototype.raiseDiagramEvent=A.prototype.ga=function(a,b,c){t&&v.e(a,"string",A,"raiseDiagramEvent:name");var d=Hi(this,a),e=new Ce;e.b=this;var g=this.jw.ca(a),a=g!==m?g:this.jw.ca(a.toLowerCase());e.name=a;b!==f&&(e.jv=b);c!==f&&(e.Xu=c);for(b=d.f;b.next();)c=b.value,c(e);return e.cancel};function cg(a,b){for(var c=a.xl(b,function(a){return a.V},function(a){return a instanceof V},h).f;c.next();){var d=c.value;d.Xe===Qf&&d.Rb()}}
function Ii(a,b){if(b!==m&&b.canAvoid()){for(var c=b.getAvoidableRectangle(),d=a.Oc.nl,e=a.Oc.ml,g=c.x+c.width,i=c.y+c.height,j=c.x;j<g;j+=d){for(var k=c.y;k<i;k+=e)Ji(a.Oc,j,k);Ji(a.Oc,j,i)}for(k=c.y;k<i;k+=e)Ji(a.Oc,g,k);Ji(a.Oc,g,i)}}function Ki(a,b){if(a.Oc!==m&&!a.Oc.Dn&&(b===m||b.canAvoid()))a.Oc.Dn=h}
function Th(a,b,c){if(Hf!==m){c instanceof A||(c=m);var d=Of;c!==d&&(d!==m&&d.Tb.he!==m&&d.Tb.he.HB(),c!==m&&c.Tb.he!==m&&c.Tb.he.GB());Of=c;if(c===m)return h;d=c.Tb.he;d!==m&&(a!==m&&(b=c.vh(a)),c.pc.C=b,d.qF());return h}return p}
function Vh(a,b,c,d){if(Hf!==m){d===m&&(d=m);var e=Of;d!==e&&(e!==m&&e.Tb.he!==m&&e.Tb.he.HB(),d!==m&&d.Tb.he!==m&&d.Tb.he.GB());Of=d;if(d===m)return Hf.doCancel(),h;if(d!==a)return a=c,b!==m&&(a=d.vh(b)),d.pc.C=a,b=d.Tb.he,b!==m&&b.rF(),Hf!==m&&Hf.doCancel(),h}return p}v.a(A,"autoScrollRegion",A.prototype.dB);
v.defineProperty(A,{dB:"autoScrollRegion"},s("ts"),function(a){"number"===typeof a?a=new Kb(a):v.c(a,Kb,A,"autoScrollRegion");var b=this.ts;b.u(a)||(this.ts=a=a.B(),ni(this),this.d("autoScrollRegion",b,a))});
function bg(a){if(a.pg===m){a.pg={};var b;b=a.ra!==a.Tb.he?a.TD:a.UD;a.pg.isEnabled=h;var c=setInterval(function(){var b=c;a.pg!==m&&a.pg.isEnabled&&(a.pg=m,clearInterval(b),b=ag(a,a.Wv),b.hg(a.position)||(a.position=b,a.F.C=a.FD(a.Wv),a.ra.doMouseMove(),a.Fj=h,mi(a,a.Ke()),a.pi=h,a.update(),bg(a)))},b);a.pg.id=c}}function Jf(a){a.pg!==m&&(a.pg.isEnabled&&clearInterval(a.pg.id),a.pg=m)}
function ag(a,b){var c=a.position,d=a.dB;if(0>=d.top&&0>=d.left&&0>=d.right&&0>=d.bottom)return c;var e=a.ob,g=new E(0,0,e.width,e.height),e=new C(0,0);if(b.x>=g.x&&b.x<g.x+d.left){var i=Math.max(a.Yr,1),i=i|0;e.x-=i;b.x<g.x+d.left/2&&(e.x-=i);b.x<g.x+d.left/4&&(e.x-=4*i)}else b.x<=g.x+g.width&&b.x>g.x+g.width-d.right&&(i=Math.max(a.Yr,1),i|=0,e.x+=i,b.x>g.x+g.width-d.right/2&&(e.x+=i),b.x>g.x+g.width-d.right/4&&(e.x+=4*i));b.y>=g.y&&b.y<g.y+d.top?(i=Math.max(a.Zr,1),i|=0,e.y-=i,b.y<g.y+d.top/2&&
(e.y-=i),b.y<g.y+d.top/4&&(e.y-=4*i)):b.y<=g.y+g.height&&b.y>g.y+g.height-d.bottom&&(i=Math.max(a.Zr,1),i|=0,e.y+=i,b.y>g.y+g.height-d.bottom/2&&(e.y+=i),b.y>g.y+g.height-d.bottom/4&&(e.y+=4*i));e.hg(new C(0,0))||(d=a.scale,c=new C(c.x+e.x/d,c.y+e.y/d));return c}
A.prototype.makeImage=A.prototype.xJ=function(a){if(this.oa===m)return m;"object"!==typeof a&&v.g("properties argument must be an Object.");this.So=p;Xh(this);var b=document.createElement("canvas");b.width=this.oa.width;b.height=this.oa.height;var c=b.getContext("2d");yh(this);this.gg(c);Xh(this);this.So=h;c=new Image;c.src=b.toDataURL(a.type,a.details);return c};
A.prototype.makeImageData=A.prototype.yJ=function(a){if(this.oa===m)return"";"object"!==typeof a&&v.g("properties argument must be an Object.");this.So=p;Xh(this);var b=document.createElement("canvas");b.width=this.oa.width;b.height=this.oa.height;var c=b.getContext("2d");yh(this);this.gg(c);Xh(this);this.So=h;return b.toDataURL(a.type,a.details)};
A.prototype.renderJson=A.prototype.ng=function(a){this.th=new oa;this.sg=new xa;v.Na(a)&&a._tabString!==f&&(this.sg.IA=a._tabString);Li(this,this);this.th.clear();a=this.sg.toString();this.sg=m;return a};
function Li(a,b){if(v.Na(b)&&(!(b instanceof S)||b.eb()))if(!(b instanceof R)||b.visible)if(!(b instanceof gf)||b.visible){var c=a.sg;if(b instanceof C)c.add('"'+cb(b)+'"');else if(b instanceof yb)c.add('"'+zb(b)+'"');else if(b instanceof E)c.add('"'+Gb(b)+'"');else if(b instanceof Kb)c.add('"'+Ob(b)+'"');else if(b instanceof H)c.add('"'+dc(b)+'"');else{var d;b instanceof Kd?d=a.th.ca(b):b instanceof Me&&(d=a.th.ca(b));d="number"===typeof d?d:-1;-1<d?c.add('{ "class":"ref", "id":'+d+" }"):(c.Cj++,
c.add('{ "class": "'+v.Ri(b)+'"'),d=-1,b instanceof Kd?(d=a.th.count,a.th.add(b,d)):b instanceof Me&&(d=a.th.count,a.th.add(b,d)),-1<d&&c.add(', "id":'+d),b instanceof R?b.ng():Mi(a,b,Object.getPrototypeOf(b)),c.add(" }"),Ka(c))}}}function Mi(a,b,c){if(c&&c.constructor!==Object&&(Mi(a,b,Object.getPrototypeOf(c)),c.constructor&&(c=c.constructor.aH,Array.isArray(c))))for(var d=0;d<c.length;d++){var e=c[d];if("string"===typeof e){var g=v.Ya(b,e);Ni(a,e,g)}}}
function Ni(a,b,c){if(c!==f){var d=a.sg;d.add(",");La(d);d.add('"'+b+'": ');Oi(a,c)}}
function Oi(a,b){var c=a.sg;if(b===f)c.add("undefined");else if(b===m)c.add("null");else if(b===h)c.add("true");else if(b===p)c.add("false");else if("string"===typeof b)c.add(a.P.quote(b));else if("number"===typeof b)Infinity===b&&c.add("9e9999"),-Infinity===b&&c.add("-9e9999"),isNaN(b)?c.add('{"class":"NaN"}'):c.add(b.toString());else if("function"===typeof b)c.add("null");else if(v.isArray(b)){c=a.sg;c.Cj++;for(var d=v.Cb(b),e=p,g=0;g<d;g++){var i=v.qb(b,g);if("object"===typeof i){e=h;break}}c.add("[");
e&&La(c);for(g=0;g<d;g++)i=v.qb(b,g),i!==f&&(0<g&&(c.add(","),e&&La(c)),Oi(a,i));e&&c.add(" ");c.add("]");Ka(c)}else if(b instanceof na)c.add(a.P.quote(b.toString()));else if(b instanceof oa){c=a.sg;c.Cj++;c.add("{");La(c);d=b.f;for(e=h;d.next();)g=d.key,i=d.value,e?e=p:(c.add(","),La(c)),c.add('"'+g+'": '),Oi(a,i);c.add(" }");Ka(c)}else if(b instanceof y||b instanceof qa||b.f!==f){c=a.sg;c.Cj++;c.add("[");La(c);d=b.f;for(e=0;d.next();)g=d.value,g!==f&&(0<e&&(c.add(","),La(c)),Oi(a,g),e++);c.add(" ]");
Ka(c)}else v.Na(b)?Li(a,b):c.add(b.toString())}A.inherit=function(a,b){v.pa(a,b)};function Pi(a){A.call(this,a);this.lu=h;this.ck=p;this.Oa=h;this.tu=qc;this.vb=new Qi}v.H("Palette",Pi);v.pa(Pi,A);
function Ri(a){A.call(this,a);this.fc=h;this.Ai=m;var a=new S,b=new W;b.stroke="magenta";b.Qa=2;b.fill=m;b.name="BOXSHAPE";a.$n="BOXSHAPE";a.Kr="BOXSHAPE";a.add(b);this.$l=a;a=new Si;a.xf(this);this.Tb.ne.lc(0,a);var c=this;this.KC=function(){Ti(c)};this.JC=function(){c.Ai!==m&&(ni(c),yh(c))};this.Oa=h;this.Oh=this.Od=p;this.Gx=ki;this.Tb.Fl=Bf;this.fc=p}v.H("Overview",Ri);v.pa(Ri,A);
Ri.prototype.gg=function(){this.Fb===m&&v.g("No div specified");this.oa===m&&v.g("No canvas specified");if(this.pi){var a=this.Ai;if(a!==m){var b=this.Ik;b.Qv="";b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,this.oa.width,this.oa.height);var c=this.Ld;c.reset();1!==this.Ob&&c.scale(this.scale);(0!==this.position.x||0!==this.position.y)&&c.translate(-this.kb.x,-this.kb.y);b.setTransform(c.m11,c.m12,c.m21,c.m22,c.Sa,c.Ta);for(var d=this.ob,e=a.Ab.length,c=0;c<e;c++)for(var g=b,i=d,j=a.Ab.i[c].Bb,k=j.length,
l=0;l<k;l++){var n=j.i[l];n.la.Re(i)&&n.gg(g,this)}a=this.Ab.length;for(c=0;c<a;c++)this.Ab.i[c].gg(b,this);this.pi=this.vm=p}}};v.a(Ri,"observed",Ri.prototype.lG);
v.defineProperty(Ri,{lG:"observed"},s("Ai"),function(a){var b=this.Ai;a!==m&&v.c(a,A,Ri,"observed");b!==a&&!(a instanceof Ri)&&(b!==m&&(this.remove(this.dg),b.UC("ViewportBoundsChanged",this.KC),b.UC("DocumentBoundsChanged",this.JC),b.Bt.remove(this)),this.Ai=a,a!==m&&(a.TA("ViewportBoundsChanged",this.KC),a.TA("DocumentBoundsChanged",this.JC),a.Bt.add(this),this.add(this.dg),Ti(this)),ni(this),this.d("observed",b,a))});v.a(Ri,"box",Ri.prototype.dg);
v.defineProperty(Ri,{dg:"box"},s("$l"),function(a){var b=this.$l;b!==a&&(this.$l=a,this.d("box",b,a))});function Ti(a){var b=a.dg;if(b!==m){var c=a.Ai;if(c!==m){a.pi=h;var c=c.ob,d=b.Zn;d.ma=new yb(c.width,c.height);a=2/a.scale;d instanceof W&&(d.Qa=a);b.location=new C(c.x-a/2,c.y-a/2)}}}Ri.prototype.Ke=function(){var a=this.Ai;return a===m?new E(0,0,0,0):a.yc};Ri.prototype.Vr=function(a){this.fc||($h(this),yh(this),gi(this),ni(this),Ti(this),this.ga("ViewportBoundsChanged",a))};
function Si(){zf.call(this);this.name="MoveBox"}v.pa(Si,zf);Si.prototype.doStart=Si.prototype.$x=function(){this.S=this.b.Jc=h};Si.prototype.doMouseMove=Si.prototype.Zg=function(){if(this.S){var a=this.b;if(!(a===m||a.Ai===m)){var b=a.Ai,c=b.ob,d=a.F.C;b.position=new C(d.x-c.width/2,d.y-c.height/2);yf(a)}}};Si.prototype.doMouseUp=Si.prototype.Ne=function(){this.S&&this.doMouseMove();this.stopTool()};Si.prototype.doStop=Si.prototype.Oi=function(){this.S=p;var a=this.b;a.Jc=p;Ti(a)};
function Me(a){v.Mb(this);this.La=p;a===f?(this.K=Ne,this.cm="black"):"string"===typeof a?(this.K=Ne,this.cm=a):(t&&v.Ua(a,Me,Me,"constructor:type"),this.K=a,this.cm="black");a=this.K;a===We?(this.Nm=qc,this.lm=yc):this.lm=a===Xe?this.Nm=sc:this.Nm=lc;this.Ut=0;this.Ms=NaN;this.yz=this.zz=this.Kf=this.Dt=this.If=m}v.H("Brush",Me);var Ne;Me.Solid=Ne=v.l(Me,"Solid",0);var We;Me.Linear=We=v.l(Me,"Linear",1);var Xe;Me.Radial=Xe=v.l(Me,"Radial",2);var Ui;Me.Pattern=Ui=v.l(Me,"Pattern",2);
Me.prototype.copy=Me.prototype.copy=function(){var a=new Me;a.K=this.K;a.cm=this.cm;a.Nm=this.Nm;a.lm=this.lm;a.Ut=this.Ut;a.Ms=this.Ms;this.If!==m&&(a.If=this.If.copy());a.Dt=this.Dt;return a};Me.prototype.Ja=function(){this.freeze();Object.freeze(this);return this};Me.prototype.freeze=function(){this.La=h;this.If!==m&&this.If.freeze();return this};Me.prototype.qa=function(){Object.isFrozen(this)&&v.g("cannot thaw constant: "+this);this.La=p;this.If!==m&&this.If.qa();return this};
Me.prototype.toString=function(){var a="Brush(";if(this.type===Ne)a+=this.color;else if(a=this.type===We?a+"Linear ":this.type===Xe?a+"Radial ":this.type===Ui?a+"Pattern ":a+"(unknown) ",a+=this.start+" "+this.end,this.mn!==m)for(var b=this.mn.f;b.next();)a+=" "+b.key+":"+b.value;return a+")"};
Me.prototype.addColorStop=Me.prototype.addColorStop=function(a,b){v.v(this);(a===m||1<a||0>a)&&v.ha(a,"0 <= loc <= 1",Me,"addColorStop:loc");v.e(b,"string",Me,"addColorStop:color");this.If===m&&(this.If=new oa("number","string"));this.If.add(a,b);this.K===Ne&&(this.type=We);this.Kf=m};v.a(Me,"type",Me.prototype.type);
v.defineProperty(Me,{type:"type"},s("K"),function(a){v.v(this,a);v.Ua(a,Me,Me,"type");this.K=a;hc(this.start)&&(a===We?this.start=qc:a===Xe&&(this.start=sc));hc(this.end)&&(a===We?this.end=yc:a===Xe&&(this.end=sc));this.Kf=m});v.a(Me,"color",Me.prototype.color);v.defineProperty(Me,{color:"color"},s("cm"),function(a){v.v(this,a);v.e(a,"string",Me,"color");this.cm=a;this.Kf=m});v.a(Me,"start",Me.prototype.start);
v.defineProperty(Me,{start:"start"},s("Nm"),function(a){v.v(this,a);a instanceof H||v.Ac(a,"Spot",Me,"start");this.Nm=a.B();this.Kf=m});v.a(Me,"end",Me.prototype.end);v.defineProperty(Me,{end:"end"},s("lm"),function(a){v.v(this,a);a instanceof H||v.Ac(a,"Spot",Me,"end");this.lm=a.B();this.Kf=m});v.a(Me,"startRadius",Me.prototype.fo);v.defineProperty(Me,{fo:"startRadius"},s("Ut"),function(a){v.v(this,a);v.j(a,Me,"startRadius");0>a&&v.ha(a,">= zero",Me,"startRadius");this.Ut=a;this.Kf=m});
v.a(Me,"endRadius",Me.prototype.rn);v.defineProperty(Me,{rn:"endRadius"},s("Ms"),function(a){v.v(this,a);v.j(a,Me,"endRadius");0>a&&v.ha(a,">= zero",Me,"endRadius");this.Ms=a;this.Kf=m});v.a(Me,"colorStops",Me.prototype.mn);v.defineProperty(Me,{mn:"colorStops"},s("If"),function(a){v.v(this,a);t&&v.c(a,oa,Me,"colorStops");this.If=a;this.Kf=m});v.a(Me,"pattern",Me.prototype.pattern);v.defineProperty(Me,{pattern:"pattern"},s("Dt"),function(a){v.v(this,a);this.Dt=a;this.Kf=m});
Me.randomColor=function(a,b){a===f&&(a=128);t&&(v.j(a,Me,"randomColor:min"),(0>a||255<a)&&v.ha(a,"0 <= min <= 255",Me,"randomColor:min"));b===f&&(b=Math.max(a,255));t&&(v.j(b,Me,"randomColor:max"),(b<a||255<b)&&v.ha(b,"min <= max <= 255",Me,"randomColor:max"));var c=Math.abs(b-a),d=Math.floor(a+Math.random()*c).toString(16),e=Math.floor(a+Math.random()*c).toString(16),c=Math.floor(a+Math.random()*c).toString(16);2>d.length&&(d="0"+d);2>e.length&&(e="0"+e);2>c.length&&(c="0"+c);return"#"+d+e+c};
function R(){v.Mb(this);this.Rj=m;this.ub="";this.gf=this.Ug=h;this.Ef=this.Ff=m;this.kb=(new C(NaN,NaN)).freeze();this.Zd=(new yb(NaN,NaN)).freeze();this.vd=fd;this.vi=Xc;this.Ld=new ob;this.so=new ob;this.Cm=new ob;this.Ob=1;this.Ub=0;this.Lg=Sg;this.Lp=(new Kb(0)).freeze();this.Gc=(new E(NaN,NaN,NaN,NaN)).freeze();this.wb=(new E(NaN,NaN,NaN,NaN)).freeze();this.qc=(new E(0,0,NaN,NaN)).freeze();this.Ec=this.$b=this.Ok=this.um=h;this.eq=m;this.yg=lc;this.ug=10;this.tg=Vi;this.xg=0;this.ap=m;this.cp=
this.bp=p;this.dp=Infinity;this.Sg=lc;this.Og=10;this.Ng=Vi;this.Rg=0;this.Pq=m;this.Rq=this.Qq=p;this.Sq=Infinity;this.ld=m;this.ja=mc;this.sp=p;this.ro=mc;this.tq=0;this.Wj=1;this.I=0;this.tj=1;this.wq=-Infinity;this.vq=0;this.xq=Wc;this.yq=Wi;this.Fo="";this.rh=this.Mh=this.Ch=this.Tp=this.Sp=this.Dh=this.Eh=this.Fh=this.Vp=this.Up=this.qh=this.sh=this.ph=m;this.mp=p;this.Vb=this.mo=this.po=this.oo=this.no=m;this.Zl=p;this.Hk=m;this.KA=new E(NaN,NaN,NaN,NaN);this.yo=p;this.zo=m;this.Yl=p;this.$k=
m}v.H("GraphObject",R);
R.prototype.jb=function(a){a.ub=this.ub;a.Ug=this.Ug;a.gf=this.gf;a.Ff=this.Ff;a.Ef=this.Ef;a.kb.Ra(this.kb);a.Zd.Ra(this.Zd);a.vd=this.vd.B();a.vi=this.vi.B();a.Ob=this.Ob;a.Ub=this.Ub;a.Lg=this.Lg;a.Lp.Ra(this.Lp);a.Gc.Ra(this.Gc);a.wb.Ra(this.wb);a.qc.Ra(this.qc);a.eq=this.eq;a.yg=this.yg.B();a.ug=this.ug;a.tg=this.tg;a.xg=this.xg;a.ap=this.ap;a.bp=this.bp;a.cp=this.cp;a.dp=this.dp;a.Sg=this.Sg.B();a.Og=this.Og;a.Ng=this.Ng;a.Rg=this.Rg;a.Pq=this.Pq;a.Qq=this.Qq;a.Rq=this.Rq;a.Sq=this.Sq;a.ja=
this.ja.B();a.sp=this.sp;a.ro=this.ro.B();a.tq=this.tq;a.Wj=this.Wj;a.I=this.I;a.tj=this.tj;a.wq=this.wq;a.vq=this.vq;a.xq=this.xq.B();a.yq=this.yq;a.Fo=this.Fo;a.ph=this.ph;a.sh=this.sh;a.qh=this.qh;a.Up=this.Up;a.Vp=this.Vp;a.Fh=this.Fh;a.Eh=this.Eh;a.Dh=this.Dh;a.Sp=this.Sp;a.Tp=this.Tp;a.Ch=this.Ch;a.Mh=this.Mh;a.rh=this.rh;a.mp=this.mp;a.no=this.no;a.oo=this.oo;a.po=this.po;a.mo=this.mo;a.Vb=this.Vb;a.Zl=this.Zl;if(Array.isArray(this.Hk)){a.Hk=this.Hk.slice(0);for(var b=0;b<this.Hk.length;b++){var c=
this.Hk[b];a[c]=this[c]}}a.Yl=this.Yl};R.prototype.Yg=function(a){a.ld=m;a.$k=m;a.J()};R.prototype.copy=R.prototype.copy=function(){var a=new this.constructor;this.jb(a);return a};R.prototype.toString=function(){return v.Ri(Object.getPrototypeOf(this))+"#"+v.kc(this)};var Xi;R.None=Xi=v.l(R,"None",0);var Sg;R.Default=Sg=v.l(R,"Default",0);var Nd;R.Fill=Nd=v.l(R,"Fill",3);var Tg;R.Uniform=Tg=v.l(R,"Uniform",1);var Ug;R.UniformToFill=Ug=v.l(R,"UniformToFill",2);var Yi;
R.Vertical=Yi=v.l(R,"Vertical",4);var Zi;R.Horizontal=Zi=v.l(R,"Horizontal",5);R.prototype.Xd=function(a,b,c,d,e,g,i){var j=this.V;if(j!==m&&(j.Jl(a,b,c,d,e,g,i),this.Zl&&(c===this&&a===Fe)&&(a=this.vr(),a!==m)))for(c=this.Vb.f;c.next();)d=c.value,e=a.data,g=d.eo,g!==m&&(e=a.Pe(g)),e!==m&&(d.JD(this,e,b),g=d.eo,g!==m&&(e=a,""!==g&&(e=a.Pe(g)),e!==m&&(g=d.Ol,g!==m&&(i=a,""!==g&&(i=a.Pe(g)),i!==m&&d.KD(i,e,b)))))};R.prototype.d=function(a,b,c){this.Xd(Fe,a,this,b,c)};
function $i(a,b,c,d,e){var g=a.Gc,i=a.Cm;i.reset();aj(a,i,b,c,d,e);a.Cm=i;g.x=b;g.y=c;g.width=d;g.height=e;i.py()||i.ED(g)}R.prototype.OB=function(a,b){if(this.gf===p)return p;var c=this.ua,d=a.Mi(b);return sb(a.x,a.y,0,0,0,c.height)<d||sb(a.x,a.y,0,c.height,c.width,c.height)<d||sb(a.x,a.y,c.width,c.height,c.width,0)<d||sb(a.x,a.y,c.width,0,0,0)<d?h:p};
function bj(a,b,c,d){if(a instanceof w)for(var e=a.wa.length;e--;){var g=a.wa.i[e];if(g.visible){var i=g.la,j=a.la;i.x>j.width||(i.y>j.height||0>i.x+i.width||0>i.y+i.height)||(bj(g,b,c,d),i=g,b!==m&&(i=b(i)),i&&(c===m||c(i))&&d.add(g))}}}R.prototype.hi=da(h);
R.prototype.containsPoint=R.prototype.fa=function(a){t&&v.c(a,C,R,"containsPoint:p");var b=Rb(this.transform,a),c=this.la;if(!c.aa())return p;if(v.hx){var d=this.ua,e=this.yl()*(this.b!==m?this.b.scale:1),g=1/e;if(10>d.width*e&&10>d.height*e)return Nb(c.x-5*g,c.y-5*g,c.width+10*g,c.height+10*g,b.x,b.y)}return(this.Nd!==f||this instanceof W?Nb(c.x-5,c.y-5,c.width+10,c.height+10,b.x,b.y):c.fa(b))?this.zo&&!this.zo.fa(b)?p:this.Ef!==m&&c.fa(b)||this.Ff!==m&&this.qc.fa(a)?h:this.Ii(a):p};
R.prototype.Ii=function(a){var b=this.ua;return Nb(0,0,b.width,b.height,a.x,a.y)};R.prototype.containsRect=R.prototype.pl=function(a){t&&v.c(a,E,R,"containsRect:r");if(0===this.Pa)return this.la.pl(a);var b=this.ua,b=new E(0,0,b.width,b.height),c=this.transform;return b.fa(c.bi(new C(a.x,a.y)))&&b.fa(c.bi(new C(a.x,a.bottom)))&&b.fa(c.bi(new C(a.right,a.bottom)))&&b.fa(c.bi(new C(a.right,a.y)))};
R.prototype.containedInRect=R.prototype.Ux=function(a,b){t&&v.c(a,E,R,"containedInRect:r");if(b===f)return a.pl(this.la);var c=this.ua;return!a.fa(b.zb(new C(0,0)))||!a.fa(b.zb(new C(0,c.height)))||!a.fa(b.zb(new C(c.width,c.height)))||!a.fa(b.zb(new C(c.width,0)))?p:h};
R.prototype.intersectsRect=R.prototype.Re=function(a,b){t&&v.c(a,E,R,"intersectsRect:r");if(b===f&&(b=this.transform,0===this.Pa))return a.Re(this.la);var c=this.ua,d=b,e=new C(0,0),g=new C(0,c.height),i=new C(c.width,c.height),j=new C(c.width,0);if(a.fa(d.zb(e))||a.fa(d.zb(g))||a.fa(d.zb(i))||a.fa(d.zb(j)))return h;c=new E(0,0,c.width,c.height);return c.fa(d.bi(new C(a.x,a.y)))||c.fa(d.bi(new C(a.x,a.bottom)))||c.fa(d.bi(new C(a.right,a.bottom)))||c.fa(d.bi(new C(a.right,a.y)))||Bd(a,e,g)||Bd(a,
g,i)||Bd(a,i,j)||Bd(a,j,e)?h:p};R.prototype.getDocumentPoint=R.prototype.xb=function(a){hc(a)&&v.g("Spot must be real");var b=this.ua,a=new C(a.x*b.width+a.offsetX,a.y*b.height+a.offsetY);this.fe.zb(a);return a};R.prototype.getDocumentAngle=R.prototype.zn=function(){var a=this.fe;return Math.atan2(a.m12,a.m11)*(180/Math.PI)};R.prototype.getDocumentScale=R.prototype.yl=function(){var a=this.Ob;return this.Y!==m?a*this.Y.yl():a};R.prototype.getLocalPoint=R.prototype.UB=function(a){return this.fe.bi(a.copy())};
R.prototype.getNearestIntersectionPoint=R.prototype.Ju=function(a,b,c){var d=this.transform.copy();d.Lu();if(this.Ph!==m)return xd(this.la,a,b,c);if(!(this instanceof w)||this instanceof w&&this.background!==m){var e=Rb(d,a),b=Rb(d,b),a=new C,b=xd(new E(0,0,this.ua.width,this.ua.height),e,b,a),a=Rb(this.transform,a);c.x=a.x;c.y=a.y;return b}if(this instanceof w&&(this.Ph===m||this.Ph===f)){e=this.wa.i;a=Rb(d,a);d=Rb(d,b);c.set(d);for(var g=(d.x-a.x)*(d.x-a.x)+(d.y-a.y)*(d.y-a.y),b=p,i=e.length,j=
new C,k=0;k<i;k++){var l=e[k];l.visible&&l.Ju(a,d,j)&&(b=h,l=(a.x-j.x)*(a.x-j.x)+(a.y-j.y)*(a.y-j.y),l<g&&(g=l,c.set(j)))}c.transform(this.transform);return b}v.g("Unknown GraphObject case");return p};
function ph(a,b,c,d,e){if(a.$b!==p){var g=a.margin,i=g.top+g.bottom,b=Math.max(b-(g.right+g.left),0),c=Math.max(c-i,0),g=a.ma,i=0;a.Qa&&(i=a.Qa);var b=isFinite(g.width)?g.width+i:b,c=isFinite(g.height)?g.height+i:c,g=d,i=e,j=a instanceof w;switch(cj(a)){case Xi:i=g=0;j&&(c=b=Infinity);break;case Nd:isFinite(b)&&b>d&&(g=b);isFinite(c)&&c>e&&(i=c);break;case Zi:isFinite(b)&&b>d&&(g=b);i=0;j&&(c=Infinity);break;case Yi:isFinite(c)&&c>e&&(i=c),g=0,j&&(b=Infinity)}var j=a.Dd,k=a.Wd;g>j.width&&k.width<
j.width&&(g=j.width);i>j.height&&k.height<j.height&&(i=j.height);d=Math.max(g/a.scale,k.width);e=Math.max(i/a.scale,k.height);j.width<d&&(d=Math.min(k.width,d));j.height<e&&(e=Math.min(k.height,e));b=Math.min(j.width,b);c=Math.min(j.height,c);b=Math.max(d,b);c=Math.max(e,c);g=a.Pa;if(90===g||270===g)g=b,b=c,c=g,g=d,d=e,e=g;a.Gc.qa();a.Lr(b,c,d,e);a.Gc.freeze();a.Gc.aa()||v.g("Non-real measuredBounds has been set");a.$b=p}}fa=R.prototype;
fa.vc=function(a,b,c,d,e){dj(this);var g=this.KA;g.set(this.wb);this.wb.qa();if(this.Ec===p){var i=this.wb;i.x=a;i.y=b;i.width=c;i.height=d}else this.Gi(a,b,c,d);this.wb.freeze();this.zo=e===f?m:e;e!==f?this.yo=h:this.Y&&(c=this.Y.qc,d=this.na,this.Ph!==m&&(d=this.wb),e=b+d.height,i=a+d.width,this.yo=!(0<=a&&i<=c.width&&0<=b&&e<=c.height),this instanceof ra&&(this.ht>d.height&&(this.yo=h),this.Bm.ei>d.width&&(this.yo=h)));this.wb.aa()||v.g("Non-real actualBounds has been set");ej(this,g,this.wb)};
fa.Gi=aa();function fj(a,b,c,d,e){var g=a.la;g.x=b;g.y=c;g.width=d;g.height=e;if(!a.ma.aa()){var g=a.Gc,c=a.margin,b=c.right+c.left,i=c.top+c.bottom,c=g.width+b,g=g.height+i,d=d+b,e=e+i,b=cj(a);c===d&&g===e&&(b=Xi);switch(b){case Xi:if(c>d||g>e)a.$b=h,ph(a,c>d?d:c,g>e?e:g);break;case Nd:a.$b=h;ph(a,d,e,0,0);break;case Zi:a.$b=h;ph(a,d,g,0,0);break;case Yi:a.$b=h,ph(a,c,e,0,0)}}}
function ej(a,b,c){a.Ec=p;var d=a.V;if(d!==m){var e=d.b;if(e!==m)if(gj(d),a instanceof S){d=p;if(e.Fj===p){var g=e.yc,i=e.padding,e=g.x+i.left,j=g.y+i.top,k=g.width-2*i.right,g=g.height-2*i.bottom;b.aa()&&(b.x>e&&b.y>j&&b.right<k&&b.bottom<g&&c.x>e&&c.y>j&&c.right<k&&c.bottom<g)&&(d=h)}(a.xt===h||!b.u(c))&&yi(a,d)}else if(hj(a,d),ij(a),b=a.V,b!==m&&(b.Zj===a||b.el===a||b.fl===a))b.xt=h}}function hj(a,b){a.oe!==m&&(b.xt=h);if(a instanceof w)for(var c=a.wa,d=c.length,e=0;e<d;e++)hj(c.i[e],b)}
fa.gg=function(a,b){if(this.Ug)if(this instanceof w&&(this.type===jj||this.type===kj)){var c=this.wb;0===c.width||(0===c.height||isNaN(c.x)||isNaN(c.y))||(this.Ef!==m&&(lj(this,a,this.Ef,h,h),a.fillRect(c.x,c.y,c.width,c.height)),this.Ff!==m&&(lj(this,a,this.Ff,h),a.fillRect(c.x,c.y,c.width,c.height)),this.qn(a,b))}else{var d=p;if(this instanceof S){d=h;if(!this.eb())return;if(this.Qf){var e=this.Mm;a.shadowOffsetX=e.x*b.scale;a.shadowOffsetY=e.y*b.scale;a.shadowColor=this.Lm;a.shadowBlur=this.Km}}var g=
p;this.V&&(g=this.V.Dl);c=this.wb;if(!(0===c.width||0===c.height||isNaN(c.x)||isNaN(c.y))){var e=this.transform,i=this.Y,j=this.so;j.reset();i!==m&&(i.hi()?j.multiply(i.fe):i.Y!==m&&j.multiply(i.Y.fe));j.multiply(this.Ld);if(j=this.yo){t&&t.tF&&t.trace("clip"+this.toString());var k=i.hi()?i.ua:i.la;if(this.zo)var l=this.zo,n=Math.max(l.x,Math.max(c.x,k.x)),r=Math.max(l.y,Math.max(c.y,k.y)),q=Math.abs(n-Math.min(l.right,Math.min(c.right,k.right))),l=Math.abs(r-Math.min(l.bottom,Math.min(c.bottom,k.bottom)));
else n=Math.max(c.x,k.x),r=Math.max(c.y,k.y),q=Math.min(c.right,k.right)-n,l=Math.min(c.bottom,k.bottom)-r;if(n>c.width+c.x||c.x>k.width+k.x||r>c.height+c.y||c.y>k.height+k.y)return;a.save();a.beginPath();a.rect(n,r,q,l);a.clip()}this.Ef!==m&&(lj(this,a,this.Ef,h,h),a.fillRect(c.x,c.y,c.width,c.height));e.py()||a.transform(e.m11,e.m12,e.m21,e.m22,e.Sa,e.Ta);this.Ff!==m&&(r=this.ua,k=c=0,n=r.width,r=r.height,q=0,this instanceof W&&(r=this.xa.lb,c=r.x,k=r.y,n=r.width,r=r.height,q=this.Lh),lj(this,a,
this.Ff,h),a.fillRect(c-q/2,k-q/2,n+q,r+q));if(g&&(this.Ff!==m||this.Ef!==m||i!==m&&i.Yl||i!==m&&i.type===Rh&&i.Mq!==this)){this.Yl=h;var u=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=0}else this.Yl=p;this.qn(a,b);g&&this.Yl===h&&(a.shadowOffsetX=u[0],a.shadowOffsetY=u[1],a.shadowBlur=u[2]);d&&g&&(a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0);j?(a.restore(),Xh(b,a)):e.py()||(d=1/(e.m11*e.m22-e.m12*e.m21),a.transform(e.m22*d,-e.m12*d,-e.m21*
d,e.m11*d,d*(e.m21*e.Ta-e.m22*e.Sa),d*(e.m12*e.Sa-e.m11*e.Ta)))}}};fa.qn=aa();fa.ng=function(){var a=this.b;if(a!==m){Ni(a,"naturalBounds",this.ua);Ni(a,"actualBounds",this.la);0!==this.Pa&&Ni(a,"angle",this.Pa);1!==this.scale&&Ni(a,"scale",this.scale);var b=this.fe;Ni(a,"allTransforms",[b.m11,b.m12,b.m21,b.m22,b.Sa,b.Ta]);this.background!==m&&Ni(a,"background",this.background);this.Ph!==m&&Ni(a,"areaBackground",this.Ph)}};
function lj(a,b,c,d,e){if(c!==m)if("string"===typeof c)d?b.Ul!==c&&(b.fillStyle=c,b.Ul=c):b.Vl!==c&&(b.strokeStyle=c,b.Vl=c);else if(c.type===Ne)c=c.color,d?b.Ul!==c&&(b.fillStyle=c,b.Ul=c):b.Vl!==c&&(b.strokeStyle=c,b.Vl=c);else{var g,i=a.ua,j=i.width,i=i.height;if(c.Kf&&c.type===Ui||c.zz==j&&c.yz==i)g=c.Kf;else{var k,l,n,r=n=0;e&&(a=a.la,j=a.width,i=a.height,n=a.x,r=a.y);c.start instanceof C?(a=c.start.x,e=c.start.y):c.start instanceof H?(a=c.start.x*j,e=c.start.y*i):(a=sc.x*j,e=sc.y*i);c.end instanceof
C?(k=c.end.x,l=c.end.y):c.end instanceof H?(k=c.end.x*j,l=c.end.y*i):c.type===We?(k=yc.x*j,l=yc.y*i):(k=sc.x*j,l=sc.y*i);a+=n;k+=n;e+=r;l+=r;c.type===We?g=b.createLinearGradient(a,e,k,l):c.type===Xe?(n=isNaN(c.rn)?Math.max(j,i)/2:c.rn,isNaN(c.fo)?(g=0,n=Math.max(j,i)/2):g=c.fo,g=b.createRadialGradient(a,e,g,k,l,n)):c.type===Ui?g=b.createPattern(c.pattern,"repeat"):v.Ac(c.type,"Brush type");if(c.type!==Ui&&(n=c.mn))for(n=n.f;n.next();)g.addColorStop(n.key,n.value);c.Kf=g;c.zz=j;c.yz=i}d?b.Ul!==g&&
(b.fillStyle=g,b.Ul=g):b.Vl!==g&&(b.strokeStyle=g,b.Vl=g)}}R.prototype.isContainedBy=R.prototype.ci=function(a){if(a instanceof w)a:{if(!(this===a||a===m))for(var b=this.Y;b!==m;){if(b===a){a=h;break a}b=b.Y}a=p}else a=p;return a};R.prototype.isVisibleObject=R.prototype.mk=function(){if(!this.visible)return p;var a=this.Y;return a!==m?a.mk():h};
function mj(a){if(a.um===h){var b=a.Ld;b.reset();if(!a.wb.aa()||!a.Gc.aa()){a.um=p;return}b.translate(a.wb.x,a.wb.y);b.translate(-a.na.x,-a.na.y);var c=a.ua;aj(a,b,c.x,c.y,c.width,c.height);a.um=p;a.Ok=h}a.Ok===h&&(a.Y===m?(a.so.set(a.Ld),a.Ok=p):a.Y.fe!==m&&(b=a.so,b.reset(),b.multiply(a.Y.so),b.multiply(a.Ld),a.Ok=p))}
function aj(a,b,c,d,e,g){1!==a.scale&&b.scale(a.scale);if(0!==a.Pa){var i=sc;a.sf&&fc(a.sf)&&(i=a.sf);var j=new C;if(a instanceof S&&a.yb!==a){c=a.yb;d=c.ua;j.Ml(d.x,d.y,d.width,d.height,i);c.Cm.zb(j);j.offset(-c.na.x,-c.na.y);for(i=c.Y;i!==m&&i!==a;)i.Cm.zb(j),j.offset(-i.na.x,-i.na.y),i=i.Y}else j.Ml(c,d,e,g,i);b.rotate(a.Pa,j.x,j.y)}}
R.prototype.J=function(){if(this.$b!==h){this.Ec=this.$b=h;if(this.Y!==m)this.Y.$b=p,this.Y.J();else{var a=this.b;a!==m&&(a.zg.add(this),this instanceof U&&!a.da.cb&&this.of(),yf(a))}if(this instanceof w)for(var a=this.K===Rh,b=this.wa.i,c=b.length,d=0;d<c;d++){var e=b[d];(a||!e.ma.aa()||cj(e)!==Xi)&&e.J()}ij(this)}};function nj(a){if(a.$b===p&&(a.$b=h,a.Ec=h,a instanceof w))for(var a=a.wa.i,b=a.length,c=0;c<b;c++)nj(a[c])}
function oj(a){if(a.Ec===p){if(a.Y!==m)oj(a.Y);else{var b=a.b;b!==m&&(b.zg.add(a),a instanceof U&&a.of(),yf(b))}a.Ec=h}}function dj(a){if(a.um===p&&(a.um=h,a.Ok=h,a instanceof w))for(a=a.elements;a.next();)pj(a.value)}function pj(a){a.Ok=h;if(a instanceof w)for(a=a.elements;a.next();)pj(a.value)}function ij(a){if(a.Y!==m)ij(a.Y);else{var b=a.b;b!==m&&a.wb.aa()&&yh(b,a.wb)}}
function cj(a){var b=a.kh,c=a.Y;if(c&&c.K===qj)return rj(a,c.pd(a.Sb),c.pd(a.hc));if(c&&c.K===Rh&&c.Mq===a)return Nd;if(b===Sg){if(c){if(c.Mq===a)return Nd;a=c.Xx;return a===Sg?Xi:a}return Xi}return b}function rj(a,b,c){var d=a.kh;if(d!==Sg)return d;var e=d=f;switch(b.kh){case Yi:e=h;break;case Nd:e=h}switch(c.kh){case Zi:d=h;break;case Nd:d=h}a=a.Y.Xx;d=d===f&&(a===Zi||a===Nd)?h:p;e=e===f&&(a===Yi||a===Nd)?h:p;return d===h&&e===h?Nd:d===h?Zi:e===h?Yi:Xi}v.a(R,"segmentOrientation",R.prototype.$r);
v.defineProperty(R,{$r:"segmentOrientation"},s("yq"),function(a){var b=this.yq;b!==a&&(t&&v.Ua(a,V,R,"segmentOrientation"),this.yq=a,this.J(),this.d("segmentOrientation",b,a))});v.a(R,"segmentIndex",R.prototype.jh);v.defineProperty(R,{jh:"segmentIndex"},s("wq"),function(a){t&&v.e(a,"number",R,"segmentIndex");var a=Math.round(a),b=this.wq;b!==a&&(this.wq=a,this.J(),this.d("segmentIndex",b,a))});v.a(R,"segmentFraction",R.prototype.Ry);
v.defineProperty(R,{Ry:"segmentFraction"},s("vq"),function(a){t&&v.e(a,"number",R,"segmentFraction");isNaN(a)?a=0:0>a?a=0:1<a&&(a=1);var b=this.vq;b!==a&&(this.vq=a,this.J(),this.d("segmentFraction",b,a))});v.a(R,"segmentOffset",R.prototype.Sy);v.defineProperty(R,{Sy:"segmentOffset"},s("xq"),function(a){var b=this.xq;b.u(a)||(t&&v.c(a,C,R,"segmentOffset"),this.xq=a=a.B(),this.J(),this.d("segmentOffset",b,a))});v.a(R,"stretch",R.prototype.kh);
v.defineProperty(R,{kh:"stretch"},s("Lg"),function(a){var b=this.Lg;b!==a&&(t&&v.Ua(a,R,R,"stretch"),this.Lg=a,this.J(),this.d("stretch",b,a))});v.a(R,"name",R.prototype.name);v.defineProperty(R,{name:"name"},s("ub"),function(a){var b=this.ub;b!==a&&(t&&v.e(a,"string",R,"name"),this.ub=a,this.d("name",b,a))});v.a(R,"visible",R.prototype.visible);
v.defineProperty(R,{visible:"visible"},s("Ug"),function(a){var b=this.Ug;b!==a&&(t&&v.e(a,"boolean",R,"visible"),this.Ug=a,this.d("visible",b,a),b=this.Y,b!==m?b.J():this instanceof S&&(this.J(),gj(this),a?(this.r(sj),this.ii()):(this.r(uj),this.Wg())),ij(this),Dj(this))});v.a(R,"areaBackground",R.prototype.Ph);
v.defineProperty(R,{Ph:"areaBackground"},s("Ef"),function(a){var b=this.Ef;if(b!==a&&(a===m||"string"===typeof a||a instanceof Me))a instanceof Me&&a.freeze(),this.Ef=a,ij(this),this.d("areaBackground",b,a)});v.a(R,"background",R.prototype.background);v.defineProperty(R,{background:"background"},s("Ff"),function(a){var b=this.Ff;if(b!==a&&(a===m||"string"===typeof a||a instanceof Me))a instanceof Me&&a.freeze(),this.Ff=a,ij(this),this.d("background",b,a)});
v.m(R,{V:"part"},function(){if(this instanceof S)return this;if(this.$k)return this.$k;var a;for(a=this.Y;a;){if(a instanceof S)return this.$k=a;a=a.Y}return m});R.prototype.sk=ba("Rj");v.m(R,{Y:"panel"},s("Rj"));v.m(R,{ta:"layer"},function(){var a=this.V;return a!==m?a.ta:m});v.m(R,{b:"diagram"},function(){var a=this.V;return a!==m?a.b:m},{configurable:h});v.a(R,"position",R.prototype.position);
v.defineProperty(R,{position:"position"},s("kb"),function(a){var b=this.kb;if(!b.u(a)){t&&v.c(a,C,R,"position");if(this instanceof S){if(!a.aa())return;var c=this.ti,d=this.dt,e=c.copy();c.Kd(a.x+d.x,a.y+d.y);c.u(e)||this.d("location",e,c);if(this.Ec===p){this.kb=a=a.B();Gj(this);dj(this);this.d("position",b,a);return}}this.kb=a=a.B();oj(this);dj(this);this.d("position",b,a)}});v.m(R,{la:"actualBounds"},s("wb"));v.a(R,"scale",R.prototype.scale);
v.defineProperty(R,{scale:"scale"},s("Ob"),function(a){var b=this.Ob;b!==a&&(t&&v.j(a,R,"scale"),0>=a&&v.g("GraphObject.scale must be greater than zero"),this.Ob=a,dj(this),this.J(),this.d("scale",b,a))});v.a(R,"angle",R.prototype.Pa);v.defineProperty(R,{Pa:"angle"},s("Ub"),function(a){var b=this.Ub;b!==a&&(t&&v.j(a,R,"angle"),this.Ub=a,this.J(),dj(this),this.d("angle",b,a))});v.a(R,"desiredSize",R.prototype.ma);
v.defineProperty(R,{ma:"desiredSize"},s("Zd"),function(a){var b=this.Zd;b.u(a)||(t&&v.c(a,yb,R,"desiredSize"),this.Zd=a=a.B(),this.J(),this instanceof W&&this.pf(),this.d("desiredSize",b,a))});v.a(R,"width",R.prototype.width);v.defineProperty(R,{width:"width"},function(){return this.Zd.width},function(a){if(this.Zd.width!==a){t&&v.e(a,"number",R,"width");var b=this.Zd;this.Zd=a=(new yb(a,this.Zd.height)).freeze();this.J();this instanceof W&&this.pf();this.d("desiredSize",b,a)}});v.a(R,"height",R.prototype.height);
v.defineProperty(R,{height:"height"},function(){return this.Zd.height},function(a){if(this.Zd.height!==a){t&&v.e(a,"number",R,"height");var b=this.Zd;this.Zd=a=(new yb(this.Zd.width,a)).freeze();this.J();this instanceof W&&this.pf();this.d("desiredSize",b,a)}});v.a(R,"minSize",R.prototype.Wd);
v.defineProperty(R,{Wd:"minSize"},s("vd"),function(a){var b=this.vd;b.u(a)||(t&&v.c(a,yb,R,"minSize"),a=a.copy(),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),a.freeze(),this.vd=a,this.J(),this.d("minSize",b,a))});v.a(R,"maxSize",R.prototype.Dd);v.defineProperty(R,{Dd:"maxSize"},s("vi"),function(a){var b=this.vi;b.u(a)||(t&&v.c(a,yb,R,"maxSize"),a=a.copy(),isNaN(a.width)&&(a.width=Infinity),isNaN(a.height)&&(a.height=Infinity),a.freeze(),this.vi=a,this.J(),this.d("maxSize",b,a))});
v.m(R,{na:"measuredBounds"},s("Gc"));v.m(R,{ua:"naturalBounds"},s("qc"),{configurable:h});v.a(R,"margin",R.prototype.margin);v.defineProperty(R,{margin:"margin"},s("Lp"),function(a){"number"===typeof a?a=new Kb(a):t&&v.c(a,Kb,R,"margin");var b=this.Lp;b.u(a)||(this.Lp=a=a.B(),this.J(),this.d("margin",b,a))});v.m(R,{transform:m},function(){this.um===h&&mj(this);return this.Ld});v.m(R,{fe:m},function(){this.Ok===h&&mj(this);return this.so});v.a(R,"alignment",R.prototype.pb);
v.defineProperty(R,{pb:"alignment"},s("ja"),function(a){var b=this.ja;b.u(a)||(t?v.c(a,H,R,"alignment"):hc(a)&&!ic(a)&&v.g("alignment must be a real Spot or Spot.Default"),this.ja=a=a.B(),oj(this),this.d("alignment",b,a))});v.a(R,"column",R.prototype.hc);v.defineProperty(R,{hc:"column"},s("I"),function(a){t&&v.j(a,R,"column");var a=Math.round(a),b=this.I;b!==a&&(0>a&&v.ha(a,">= 0",R,"column"),this.I=a,this.J(),this.d("column",b,a))});v.a(R,"columnSpan",R.prototype.lB);
v.defineProperty(R,{lB:"columnSpan"},s("tj"),function(a){t&&v.j(a,R,"columnSpan");var a=Math.round(a),b=this.tj;b!==a&&(1>a&&v.ha(a,">= 1",R,"columnSpan"),this.tj=a,this.J(),this.d("columnSpan",b,a))});v.a(R,"row",R.prototype.Sb);v.defineProperty(R,{Sb:"row"},s("tq"),function(a){t&&v.j(a,R,"row");var a=Math.round(a),b=this.tq;b!==a&&(0>a&&v.ha(a,">= 0",R,"row"),this.tq=a,this.J(),this.d("row",b,a))});v.a(R,"rowSpan",R.prototype.rowSpan);
v.defineProperty(R,{rowSpan:"rowSpan"},s("Wj"),function(a){t&&v.j(a,R,"rowSpan");var a=Math.round(a),b=this.Wj;b!==a&&(1>a&&v.ha(a,">= 1",R,"rowSpan"),this.Wj=a,this.J(),this.d("rowSpan",b,a))});v.a(R,"isPanelMain",R.prototype.Ui);v.defineProperty(R,{Ui:"isPanelMain"},s("sp"),function(a){var b=this.sp;b!==a&&(t&&v.e(a,"boolean",R,"isPanelMain"),this.sp=a,this.J(),this.d("isPanelMain",b,a))});v.a(R,"alignmentFocus",R.prototype.Ei);
v.defineProperty(R,{Ei:"alignmentFocus"},s("ro"),function(a){var b=this.ro;b.u(a)||(t?v.c(a,H,R,"alignmentFocus"):hc(a)&&!ic(a)&&v.g("alignmentFocus must be a real Spot or Spot.Default"),this.ro=a=a.B(),this.J(),this.d("alignmentFocus",b,a))});v.a(R,"portId",R.prototype.oe);
v.defineProperty(R,{oe:"portId"},s("eq"),function(a){var b=this.eq;if(b!==a){t&&a!==m&&v.e(a,"string",R,"portId");var c=this.V;c!==m&&!(c instanceof U)&&(v.g("portID being set on a Link: "+a),c=m);b!==m&&c&&Hj(c,this);this.eq=a;a!==m&&c&&(c.rc===m&&Ij(c),Jj(c,this));this.d("portId",b,a)}});function Kj(a){var b={value:m};Lj(a,b);return b.value}function Lj(a,b){var c=a.Y;return c===m||!Lj(c,b)&&a.visible?(b.value=a,p):h}function Dj(a){var b=a.V;b instanceof U&&(a=a.b)&&!a.da.cb&&b.of()}
v.a(R,"toSpot",R.prototype.Za);v.defineProperty(R,{Za:"toSpot"},s("Sg"),function(a){var b=this.Sg;b.u(a)||(t&&v.c(a,H,R,"toSpot"),this.Sg=a=a.B(),this.d("toSpot",b,a),Dj(this))});v.a(R,"toEndSegmentLength",R.prototype.uk);v.defineProperty(R,{uk:"toEndSegmentLength"},s("Og"),function(a){var b=this.Og;b!==a&&(t&&v.e(a,"number",R,"toEndSegmentLength"),0>a&&v.ha(a,">= 0",R,"toEndSegmentLength"),this.Og=a,this.d("toEndSegmentLength",b,a),Dj(this))});v.a(R,"toEndSegmentDirection",R.prototype.gs);
v.defineProperty(R,{gs:"toEndSegmentDirection"},s("Ng"),function(a){var b=this.Ng;b!==a&&(t&&v.Ua(a,U,R,"toEndSegmentDirection"),this.Ng=a,this.d("toEndSegmentDirection",b,a),Dj(this))});v.a(R,"toShortLength",R.prototype.hs);v.defineProperty(R,{hs:"toShortLength"},s("Rg"),function(a){var b=this.Rg;b!==a&&(t&&v.e(a,"number",R,"toShortLength"),this.Rg=a,this.d("toShortLength",b,a),Dj(this))});v.a(R,"toLinkable",R.prototype.ez);
v.defineProperty(R,{ez:"toLinkable"},s("Pq"),function(a){var b=this.Pq;b!==a&&(t&&a!==m&&v.e(a,"boolean",R,"toLinkable"),this.Pq=a,this.d("toLinkable",b,a))});v.a(R,"toLinkableDuplicates",R.prototype.wD);v.defineProperty(R,{wD:"toLinkableDuplicates"},s("Qq"),function(a){var b=this.Qq;b!==a&&(t&&v.e(a,"boolean",R,"toLinkableDuplicates"),this.Qq=a,this.d("toLinkableDuplicates",b,a))});v.a(R,"toLinkableSelfNode",R.prototype.xD);
v.defineProperty(R,{xD:"toLinkableSelfNode"},s("Rq"),function(a){var b=this.Rq;b!==a&&(t&&v.e(a,"boolean",R,"toLinkableSelfNode"),this.Rq=a,this.d("toLinkableSelfNode",b,a))});v.a(R,"toMaxLinks",R.prototype.yD);v.defineProperty(R,{yD:"toMaxLinks"},s("Sq"),function(a){var b=this.Sq;b!==a&&(t&&v.j(a,R,"toMaxLinks"),0>a&&v.ha(a,">= 0",R,"toMaxLinks"),this.Sq=a,this.d("toMaxLinks",b,a))});v.a(R,"fromSpot",R.prototype.Xa);
v.defineProperty(R,{Xa:"fromSpot"},s("yg"),function(a){var b=this.yg;b.u(a)||(t&&v.c(a,H,R,"fromSpot"),this.yg=a=a.B(),this.d("fromSpot",b,a),Dj(this))});v.a(R,"fromEndSegmentLength",R.prototype.jk);v.defineProperty(R,{jk:"fromEndSegmentLength"},s("ug"),function(a){var b=this.ug;b!==a&&(t&&v.e(a,"number",R,"fromEndSegmentLength"),0>a&&v.ha(a,">= 0",R,"fromEndSegmentLength"),this.ug=a,this.d("fromEndSegmentLength",b,a),Dj(this))});v.a(R,"fromEndSegmentDirection",R.prototype.xr);
v.defineProperty(R,{xr:"fromEndSegmentDirection"},s("tg"),function(a){var b=this.tg;b!==a&&(t&&v.Ua(a,U,R,"fromEndSegmentDirection"),this.tg=a,this.d("fromEndSegmentDirection",b,a),Dj(this))});v.a(R,"fromShortLength",R.prototype.yr);v.defineProperty(R,{yr:"fromShortLength"},s("xg"),function(a){var b=this.xg;b!==a&&(t&&v.e(a,"number",R,"fromShortLength"),this.xg=a,this.d("fromShortLength",b,a),Dj(this))});v.a(R,"fromLinkable",R.prototype.fy);
v.defineProperty(R,{fy:"fromLinkable"},s("ap"),function(a){var b=this.ap;b!==a&&(t&&a!==m&&v.e(a,"boolean",R,"fromLinkable"),this.ap=a,this.d("fromLinkable",b,a))});v.a(R,"fromLinkableDuplicates",R.prototype.PB);v.defineProperty(R,{PB:"fromLinkableDuplicates"},s("bp"),function(a){var b=this.bp;b!==a&&(t&&v.e(a,"boolean",R,"fromLinkableDuplicates"),this.bp=a,this.d("fromLinkableDuplicates",b,a))});v.a(R,"fromLinkableSelfNode",R.prototype.QB);
v.defineProperty(R,{QB:"fromLinkableSelfNode"},s("cp"),function(a){var b=this.cp;b!==a&&(t&&v.e(a,"boolean",R,"fromLinkableSelfNode"),this.cp=a,this.d("fromLinkableSelfNode",b,a))});v.a(R,"fromMaxLinks",R.prototype.RB);v.defineProperty(R,{RB:"fromMaxLinks"},s("dp"),function(a){var b=this.dp;b!==a&&(t&&v.j(a,R,"fromMaxLinks"),0>a&&v.ha(a,">= 0",R,"fromMaxLinks"),this.dp=a,this.d("fromMaxLinks",b,a))});v.a(R,"cursor",R.prototype.cursor);
v.defineProperty(R,{cursor:"cursor"},s("Fo"),function(a){var b=this.Fo;b!==a&&(v.e(a,"string",R,"cursor"),this.Fo=a,this.d("cursor",b,a))});v.a(R,"click",R.prototype.click);v.defineProperty(R,{click:"click"},s("ph"),function(a){var b=this.ph;b!==a&&(a!==m&&v.e(a,"function",R,"click"),this.ph=a,this.d("click",b,a))});v.a(R,"doubleClick",R.prototype.ul);
v.defineProperty(R,{ul:"doubleClick"},s("sh"),function(a){var b=this.sh;b!==a&&(a!==m&&v.e(a,"function",R,"doubleClick"),this.sh=a,this.d("doubleClick",b,a))});v.a(R,"contextClick",R.prototype.mr);v.defineProperty(R,{mr:"contextClick"},s("qh"),function(a){var b=this.qh;b!==a&&(a!==m&&v.e(a,"function",R,"contextClick"),this.qh=a,this.d("contextClick",b,a))});v.a(R,"mouseEnter",R.prototype.Ey);
v.defineProperty(R,{Ey:"mouseEnter"},s("Up"),function(a){var b=this.Up;b!==a&&(a!==m&&v.e(a,"function",R,"mouseEnter"),this.Up=a,this.d("mouseEnter",b,a))});v.a(R,"mouseLeave",R.prototype.Fy);v.defineProperty(R,{Fy:"mouseLeave"},s("Vp"),function(a){var b=this.Vp;b!==a&&(a!==m&&v.e(a,"function",R,"mouseLeave"),this.Vp=a,this.d("mouseLeave",b,a))});v.a(R,"mouseOver",R.prototype.Rr);
v.defineProperty(R,{Rr:"mouseOver"},s("Fh"),function(a){var b=this.Fh;b!==a&&(a!==m&&v.e(a,"function",R,"mouseOver"),this.Fh=a,this.d("mouseOver",b,a))});v.a(R,"mouseHover",R.prototype.Qr);v.defineProperty(R,{Qr:"mouseHover"},s("Eh"),function(a){var b=this.Eh;b!==a&&(a!==m&&v.e(a,"function",R,"mouseHover"),this.Eh=a,this.d("mouseHover",b,a))});v.a(R,"mouseHold",R.prototype.Pr);
v.defineProperty(R,{Pr:"mouseHold"},s("Dh"),function(a){var b=this.Dh;b!==a&&(a!==m&&v.e(a,"function",R,"mouseHold"),this.Dh=a,this.d("mouseHold",b,a))});v.a(R,"mouseDragEnter",R.prototype.EC);v.defineProperty(R,{EC:"mouseDragEnter"},s("Sp"),function(a){var b=this.Sp;b!==a&&(a!==m&&v.e(a,"function",R,"mouseDragEnter"),this.Sp=a,this.d("mouseDragEnter",b,a))});v.a(R,"mouseDragLeave",R.prototype.Dy);
v.defineProperty(R,{Dy:"mouseDragLeave"},s("Tp"),function(a){var b=this.Tp;b!==a&&(a!==m&&v.e(a,"function",R,"mouseDragLeave"),this.Tp=a,this.d("mouseDragLeave",b,a))});v.a(R,"mouseDrop",R.prototype.Nr);v.defineProperty(R,{Nr:"mouseDrop"},s("Ch"),function(a){var b=this.Ch;b!==a&&(a!==m&&v.e(a,"function",R,"mouseDrop"),this.Ch=a,this.d("mouseDrop",b,a))});v.a(R,"actionDown",R.prototype.yx);
v.defineProperty(R,{yx:"actionDown"},s("no"),function(a){var b=this.no;b!==a&&(a!==m&&v.e(a,"function",R,"actionDown"),this.no=a,this.d("actionDown",b,a))});v.a(R,"actionUp",R.prototype.Ax);v.defineProperty(R,{Ax:"actionUp"},s("po"),function(a){var b=this.po;b!==a&&(a!==m&&v.e(a,"function",R,"actionUp"),this.po=a,this.d("actionUp",b,a))});v.a(R,"actionMove",R.prototype.zx);
v.defineProperty(R,{zx:"actionMove"},s("oo"),function(a){var b=this.oo;b!==a&&(a!==m&&v.e(a,"function",R,"actionMove"),this.oo=a,this.d("actionMove",b,a))});v.a(R,"actionCancel",R.prototype.xx);v.defineProperty(R,{xx:"actionCancel"},s("mo"),function(a){var b=this.mo;b!==a&&(a!==m&&v.e(a,"function",R,"actionCancel"),this.mo=a,this.d("actionCancel",b,a))});v.a(R,"toolTip",R.prototype.is);
v.defineProperty(R,{is:"toolTip"},s("Mh"),function(a){var b=this.Mh;b!==a&&(a!==m&&v.c(a,mf,R,"toolTip"),this.Mh=a,this.d("toolTip",b,a))});v.a(R,"contextMenu",R.prototype.contextMenu);v.defineProperty(R,{contextMenu:"contextMenu"},s("rh"),function(a){var b=this.rh;b!==a&&(a!==m&&v.c(a,mf,R,"contextMenu"),this.rh=a,this.d("contextMenu",b,a))});v.a(R,"isActionable",R.prototype.Mu);
v.defineProperty(R,{Mu:"isActionable"},s("mp"),function(a){var b=this.mp;b!==a&&(v.e(a,"boolean",R,"isActionable"),this.mp=a,this.d("isActionable",b,a))});v.a(R,"pickable",R.prototype.MC);v.defineProperty(R,{MC:"pickable"},s("gf"),function(a){var b=this.gf;b!==a&&(v.e(a,"boolean",R,"pickable"),this.gf=a,this.d("pickable",b,a))});
R.prototype.bind=R.prototype.bind=function(a){a.jf=this;var b=this.vr();b!==m&&Mj(b)&&v.g("Cannot add a Binding to a template that has already been copied: "+a);this.Vb===m&&(this.Vb=new y(bf));this.Vb.add(a)};R.prototype.findTemplateBinder=R.prototype.vr=function(){for(var a=this instanceof w?this:this.Y;a!==m;){if(a.Dk!==m&&a instanceof w)return a;a=a.Y}return m};var Nj;
R.make=Nj=function(a,b){var c=m,d=m;if("function"===typeof a)d=a;else if("string"===typeof a){var e=Oj.ca(a);"function"===typeof e?c=e():d=ha[a]}c===m&&(d===f&&(c=window.$,c!==f&&c.noop!==f&&v.g("GraphObject.make failed to complete. Is it conflicting with another $ var? (such as jQuery)"),v.g("GraphObject.make failed to complete, it may be conflicting with another var.")),(d===m||!d.constructor)&&v.g("GraphObject.make requires a class function or class name, not: "+a),c=new d);e=1;c instanceof A&&
1<arguments.length&&(d=arguments[1],"string"===typeof d||d instanceof HTMLDivElement?(c.Xh=m,Ph(c,d),e++):v.g("Unknown argument to Diagram constructor: "+d));for(;e<arguments.length;e++)if(d=arguments[e],"string"===typeof d)if(c instanceof ra)c.text=d;else if(c instanceof W)c.Wa=d;else if(c instanceof Pj)c.source=d;else if(c instanceof w){var g=v.wl(w,d);g!==m?c.type=g:v.g("Unknown Panel type as an argument to GraphObject.make: "+d)}else c instanceof Me?(g=v.wl(Me,d),g!==m?c.type=g:v.g("Unknown Brush type as an argument to GraphObject.make: "+
d)):c instanceof Kd?(g=v.wl(Kd,d),g!==m?c.type=g:v.g("Unknown Geometry type as an argument to GraphObject.make: "+d)):c instanceof Ae?(g=v.wl(Ae,d),g!==m?c.type=g:v.g("Unknown PathSegment type as an argument to GraphObject.make: "+d)):v.g("Unable to use a string as an argument to GraphObject.make: "+d);else if(d instanceof R)c instanceof w||v.g("A GraphObject can only be added to a Panel, not to: "+c),c.add(d);else if(d instanceof Qj)c instanceof w||v.g("A RowColumnDefinition can only be added to a Panel, not to: "+
c),g=d.Qu?c.Td(d.index):c.pd(d.index),v.c(d,Qj,Qj,"copyFrom:pd"),d.Qu?g.height=d.height:g.width=d.width,g.tf=d.tf,g.Ed=d.Ed,g.pb=d.pb,g.cs=d.cs,g.Vb=d.Vb;else if(d instanceof na)c instanceof V&&d.Qd===V?d===Qf||d===xh?c.Xe=d:d===Rj||d===Sj||d===Tj?c.Le=d:d===Uj||d===Vj||d===Wj?c.ju=d:d===Xj||d===Wi||v.g("Unknown Link enum value for a Link property: "+d):c instanceof w&&d.Qd===w?c.type=d:c instanceof ra&&d.Qd===ra?c.kz=d:c instanceof R&&d.Qd===V?0===d.name.indexOf("Orient")?c.$r=d:v.g("Unknown Link enum value for GraphObject.segmentOrientation property: "+
d):c instanceof R&&d.Qd===R?c.kh=d:c instanceof A&&d.Qd===A?c.Gx=d:c instanceof Me&&d.Qd===Me?c.type=d:c instanceof Kd&&d.Qd===Kd?c.type=d:c instanceof Ae&&d.Qd===Ae?c.type=d:c instanceof bf&&d.Qd===bf?c.mode=d:c instanceof De&&d.Qd===De?c.Rc=d:c instanceof X&&d.Qd===X?0===d.name.indexOf("Alignment")?c.pb=d:0===d.name.indexOf("Arrangement")?c.Pd=d:0===d.name.indexOf("Compaction")?c.su=d:0===d.name.indexOf("Path")?c.path=d:0===d.name.indexOf("Sorting")?c.yf=d:0===d.name.indexOf("Style")?c.HD=d:v.g("Unknown enum value: "+
d):c instanceof Y&&d.Qd===Y?0===d.name.indexOf("Aggressive")?c.YA=d:0===d.name.indexOf("Cycle")?c.tB=d:0===d.name.indexOf("Init")?c.hC=d:0===d.name.indexOf("Layer")?c.pC=d:v.g("Unknown enum value: "+d):c instanceof Qi&&d.Qd===Qi?d===Yj||d===Zj||d===$j||d===ak?c.yf=d:d===bk||d===ck?c.Pd=d:d===dk||d===ek?c.pb=d:v.g("Unknown enum value: "+d):c instanceof fk&&d.Qd===fk?d===gk||d===hk||d===ik||d===jk||d===kk?c.yf=d:d===lk||d===mk||d===nk||d===ok?c.direction=d:d===pk||d===qk||d===rk||d===sk?c.Pd=d:d===
tk||d===uk?c.Ur=d:v.g("Unknown enum value: "+d):v.g("No property to set for this enum value: "+d);else if(d instanceof bf)c instanceof R||c instanceof Qj?c.bind(d):v.g("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+c);else if(d instanceof Md)c instanceof Kd?c.Ib.add(d):v.g("A PathFigure can only be added to a Geometry, not to: "+c);else if(d instanceof Ae)c instanceof Md?c.gb.add(d):v.g("A PathSegment can only be added to a PathFigure, not to: "+c);else if(v.Na(d))if(d instanceof
Object&&d.constructor!==Object&&v.g("Can only get property values from a plain Object, not a: "+d),c instanceof Me){var g={},i;for(i in d){var j=parseFloat(i);isNaN(j)?g[i]=d[i]:c.addColorStop(j,d[i])}v.Vy(c,g)}else c instanceof Qj?(d.row!==f?(g=d.row,(g===f||g===m||Infinity===g||isNaN(g)||0>g)&&v.g("Must specify non-negative integer row for RowColumnDefinition "+d),c.Rk=h,c.W=g):d.column!==f?(g=d.column,(g===f||g===m||Infinity===g||isNaN(g)||0>g)&&v.g("Must specify non-negative integer column for RowColumnDefinition "+
d),c.Rk=p,c.W=g):v.g("Must specify row or column value in a RowColumnDefinition "+d),g=v.dF(d,"row","column"),v.Vy(c,g)):v.Vy(c,d);else v.g('Unknown initializer "'+d+'" for object being constructed by GraphObject.make: '+c);return c};var Oj;R.Builders=Oj=new oa("string","function");
Oj.add("Button",function(){var a=new Me(We);a.addColorStop(0,"white");a.addColorStop(1,"lightgray");var b=new Me(We);b.addColorStop(0,"white");b.addColorStop(1,"dodgerblue");var c=Nj(w,Rh,{Mu:h},Nj(W,{name:"ButtonBorder",Wa:"RoundedRectangle",fill:a,stroke:"gray"}));c.Ey=function(a,c){var g=c.Z(0),i=c._buttonFillOver;i===f&&(i=b);c._buttonFillNormal=g.fill;g.fill=i;i=c._buttonStrokeOver;i===f&&(i="blue");c._buttonStrokeNormal=g.stroke;g.stroke=i};c.Fy=function(b,c){var g=c.Z(0),i=c._buttonFillNormal;
i===f&&(i=a);g.fill=i;i=c._buttonStrokeNormal;i===f&&(i="gray");g.stroke=i};return c});
Oj.add("TreeExpanderButton",function(){var a=Nj("Button",Nj(W,{name:"ButtonIcon",Wa:"MinusLine",ma:new yb(6,6)},(new bf("figure","isTreeExpanded",function(a,c){var d=m,e=c.Y;e&&(d=a?e._treeExpandedFigure:e._treeCollapsedFigure);d||(d=a?"MinusLine":"PlusLine");return d})).Ly("")),{visible:p},(new bf("visible","isTreeLeaf",function(a){return!a})).Ly(""));a.click=function(a,c){var d=c.V;if(d instanceof U){var e=d.b;e===m||e.Oa||(a.zd=h,d.Vd?e.yd.lr(d):e.yd.rr(d))}};return a});
Oj.add("SubGraphExpanderButton",function(){var a=Nj("Button",Nj(W,{name:"ButtonIcon",Wa:"MinusLine",ma:new yb(6,6)},(new bf("figure","isSubGraphExpanded",function(a,c){var d=m,e=c.Y;e&&(d=a?e._subGraphExpandedFigure:e._subGraphCollapsedFigure);d||(d=a?"MinusLine":"PlusLine");return d})).Ly("")));a.click=function(a,c){var d=c.V;if(d instanceof nf){var e=d.b;e===m||e.Oa||(a.zd=h,d.je?e.yd.kr(d):e.yd.qr(d))}};return a});
Oj.add("ContextMenuButton",function(){var a=Nj("Button");a.kh=Zi;var b=a.Pe("ButtonBorder");b instanceof W&&(b.Wa="Rectangle",b.n=new H(0,0,2,2),b.o=new H(1,1,-2,-2));return a});
function w(a){R.call(this);a===f?0===arguments.length?this.K=Xg:v.g("invalid argument to Panel constructor: undefined"):(v.Ua(a,w,w,"type"),this.K=a);this.wa=new y(R);this.Jd=(new Kb).freeze();this.Io=mc;this.Nb=Sg;this.Ag=p;this.K===Zh&&(this.Ag=h);this.Ee=[];this.ve=[];this.Ao=this.uq=vk;this.Am=this.Vm=0;this.Wm=Tg;this.hp=(new yb(10,10)).freeze();this.ip=(new C(0,0)).freeze();this.Dk=this.fm=m;this.Ew="";this.Rf=this.Ij=m;this.wm="category";this.cf=m;this.Ak=new E(NaN,NaN,NaN,NaN);this.kE=new E(0,
0,0,0);this.bH=new yb(0,0);this.Mq=m}v.H("Panel",w);v.pa(w,R);
w.prototype.jb=function(a){R.prototype.jb.call(this,a);a.K=this.K;a.Jd.Ra(this.Jd);a.Io=this.Io.B();a.Nb=this.Nb;if(0<this.Ee.length){for(var b=[],c=this.Ee,d=c.length,e=0;e<d;e++)if(c[e]!==f){var g=c[e].copy();g.sk(a);b[e]=g}a.Ee=b}if(0<this.ve.length){b=[];c=this.ve;d=c.length;for(e=0;e<d;e++)c[e]!==f&&(g=c[e].copy(),g.sk(a),b[e]=g);a.ve=b}a.uq=this.uq;a.Ao=this.Ao;a.Vm=this.Vm;a.Am=this.Am;a.Wm=this.Wm;a.hp.Ra(this.hp);a.ip.Ra(this.ip);a.Ag=this.Ag;a.fm=this.fm;a.Dk=this.Dk;a.Ew=this.Ew;a.Ij=this.Ij;
a.Rf=this.Rf;a.wm=this.wm;this._buttonFillNormal&&(a._buttonFillNormal=this._buttonFillNormal);this._buttonFillOver&&(a._buttonFillOver=this._buttonFillOver);this._buttonStrokeNormal&&(a._buttonStrokeNormal=this._buttonStrokeNormal);this._buttonStrokeOver&&(a._buttonStrokeOver=this._buttonStrokeOver);this._treeExpandedFigure&&(a._treeExpandedFigure=this._treeExpandedFigure);this._treeCollapsedFigure&&(a._treeCollapsedFigure=this._treeCollapsedFigure);this._subGraphExpandedFigure&&(a._subGraphExpandedFigure=
this._subGraphExpandedFigure);this._subGraphCollapsedFigure&&(a._subGraphCollapsedFigure=this._subGraphCollapsedFigure)};w.prototype.Yg=function(a){R.prototype.Yg.call(this,a);a.wa=this.wa;for(var b=a.wa.f;b.next();)b.value.Rj=a};
w.prototype.copy=w.prototype.copy=function(){var a=R.prototype.copy.call(this);if(a instanceof w){var b=this.wa;if(0<b.length)for(var c=b.length,d=0;d<c;d++){var e=b.i[d].copy(),g=a;e.sk(g);e.$k=m;var i=g.wa,j=i.count;i.lc(j,e);i=g.V;if(i!==m){var k=g.b;k!==m&&k.da.cb||i.Xd(Ge,"elements",g,m,e,m,j)}}return a}return m};w.prototype.toString=function(){return"Panel("+this.type+")#"+v.kc(this)};var Xg;w.Position=Xg=v.l(w,"Position",0);w.Horizontal=v.l(w,"Horizontal",1);var Qh;
w.Vertical=Qh=v.l(w,"Vertical",2);var Qg;w.Spot=Qg=v.l(w,"Spot",3);var Rh;w.Auto=Rh=v.l(w,"Auto",4);var qj;w.Table=qj=v.l(w,"Table",5);w.Viewbox=v.l(w,"Viewbox",6);var jj;w.TableRow=jj=v.l(w,"TableRow",7);var kj;w.TableColumn=kj=v.l(w,"TableColumn",8);var yg;w.Link=yg=v.l(w,"Link",9);var Zh;w.Grid=Zh=v.l(w,"Grid",10);v.m(w,{elements:"elements"},function(){return this.wa.f});v.m(w,{ua:"naturalBounds"},s("qc"));v.a(w,"padding",w.prototype.padding);
v.defineProperty(w,{padding:"padding"},s("Jd"),function(a){"number"===typeof a?a=new Kb(a):v.c(a,Kb,w,"padding");var b=this.Jd;b.u(a)||(this.Jd=a=a.B(),this.J(),this.d("padding",b,a))});v.a(w,"type",w.prototype.type);v.defineProperty(w,{type:"type"},s("K"),function(a){var b=this.K;b!==a&&(t&&v.Ua(a,w,w,"type"),(b===jj||b===kj)&&v.g("Cannot change Panel.type when it is already a TableRow or a TableColumn: "+a),this.K=a,this.K===Zh&&(this.Ag=h),this.J(),this.d("type",b,a))});
v.a(w,"defaultAlignment",w.prototype.Ki);v.defineProperty(w,{Ki:"defaultAlignment"},s("Io"),function(a){var b=this.Io;b.u(a)||(t&&v.c(a,H,w,"defaultAlignment"),this.Io=a=a.B(),this.J(),this.d("defaultAlignment",b,a))});v.a(w,"defaultStretch",w.prototype.Xx);v.defineProperty(w,{Xx:"defaultStretch"},s("Nb"),function(a){var b=this.Nb;b!==a&&(v.Ua(a,R,w,"defaultStretch"),this.Nb=a,this.J(),this.d("defaultStretch",b,a))});v.a(w,"viewboxStretch",w.prototype.jz);
v.defineProperty(w,{jz:"viewboxStretch"},s("Wm"),function(a){var b=this.Wm;b!==a&&(v.Ua(a,R,w,"viewboxStretch"),this.Wm=a,this.d("viewboxStretch",b,a))});v.a(w,"gridCellSize",w.prototype.Br);v.defineProperty(w,{Br:"gridCellSize"},s("hp"),function(a){var b=this.hp;b.u(a)||(v.c(a,yb,w,"gridCellSize"),(!a.aa()||0===a.width||0===a.height)&&v.g("Invalid Panel.gridCellSize: "+a),this.hp=a.B(),this.b!==m&&this===this.b.Ku&&ri(this.b),ij(this),this.d("gridCellSize",b,a))});v.a(w,"gridOrigin",w.prototype.iy);
v.defineProperty(w,{iy:"gridOrigin"},s("ip"),function(a){var b=this.ip;b.u(a)||(v.c(a,C,w,"gridOrigin"),a.aa()||v.g("Invalid Panel.gridOrigin: "+a),this.ip=a.B(),ij(this),this.d("gridOrigin",b,a))});fa=w.prototype;
fa.qn=function(a,b){if(this.K===Zh){var c=this.yl()*b.scale;0>=c&&(c=1);var d=this.Br,e=d.width,d=d.height,g=this.ua,i=g.width,g=g.height,j=Math.ceil(i/e),k=Math.ceil(g/d),l=this.iy;a.save();a.beginPath();a.rect(0,0,i,g);a.clip();for(var n=[],r=this.wa.i,q=this.wa.length,u=0;u<q;u++){var x=[];n.push(x);var z=r[u];if(z.visible)for(var z="LineV"===z.Wa,D=u+1;D<q;D++){var F=r[D];F.visible&&"LineV"===F.Wa===z&&(F=F.$h,2<=F&&x.push(F))}}r=this.wa.length;for(q=0;q<r;q++)if(z=this.wa.i[q],z.visible){u=n[q];
x=z.$h;if("LineV"===z.Wa){a.lineWidth=z.Qa;lj(this,a,z.stroke,p);a.beginPath();for(D=z=Math.floor(-l.x/e);D<=z+j&&!(F=D*e+l.x,0<=F&&(F<i&&wk(D,x,u))&&(a.moveTo(F,0),a.lineTo(F,g),2>e*x*c));D++);}else{a.lineWidth=z.Qa;lj(this,a,z.stroke,p);a.beginPath();for(D=z=Math.floor(-l.y/d);D<=z+k&&!(F=D*d+l.y,0<=F&&(F<=g&&wk(D,x,u))&&(a.moveTo(0,F),a.lineTo(i,F),2>d*x*c));D++);}a.stroke()}a.restore();Xh(b,a)}else{c=this.wa.length;for(e=0;e<c;e++)this.wa.i[e].gg(a,b)}};
fa.ng=function(){R.prototype.ng.call(this);var a=this.b;a!==m&&(Ni(a,"type",this.type),this.jz!==Tg&&Ni(a,"viewboxStretch",this.jz),Ni(a,"elements",this.elements))};function wk(a,b,c){if(0!==a%b)return p;for(var b=c.length,d=0;d<b;d++)if(0===a%c[d])return p;return h}
fa.Lr=function(a,b,c,d){var e=this.Ak;e.width=0;e.height=0;var g=this.ma,i=this.Wd;c===f&&(c=i.width,d=i.height);var c=Math.max(c/this.scale,i.width),d=Math.max(d/this.scale,i.height),j=this.Dd;isNaN(g.width)||(a=Math.min(g.width,j.width));isNaN(g.height)||(b=Math.min(g.height,j.height));var a=Math.max(c,a),b=Math.max(d,b),k=this.padding,a=Math.max(a-k.left-k.right,0),b=Math.max(b-k.top-k.bottom,0),l=this.wa,n=l.length;if(0===n){var r=this.qc;Ab(r,!isNaN(g.width)?a:0,!isNaN(g.height)?b:0);$i(this,
0,0,r.width,r.height)}else{var q=this.K.ub;switch(q){case "Position":var u=a,x=b,z=c,D=d;e.x=0;e.y=0;e.width=0;for(var F=e.height=0;F<n;F++){var G=l.i[F];if(G.visible||G===this.yb){var I=G.margin,M=I.right+I.left,T=I.top+I.bottom;ph(G,u,x,z,D);var pa=G.na,ea=Math.max(pa.width+M,0),Aa=Math.max(pa.height+T,0),ta=G.position.x,va=G.position.y;isFinite(ta)||(ta=0);isFinite(va)||(va=0);Db(e,ta,va,ea,Aa)}}break;case "Vertical":for(var Ia=a,jb=c,hb=d,ub=[],kb=0;kb<n;kb++){var Wa=l.i[kb];if(Wa.visible||Wa===
this.yb){var rb=cj(Wa);if(rb!==Xi&&rb!==Yi)ub.push(Wa);else{var bb=Wa.margin,Bc=bb.right+bb.left,Sc=bb.top+bb.bottom;ph(Wa,Ia,Infinity,jb,hb);var eb=Wa.na,$c=Math.max(eb.width+Bc,0),Pd=Math.max(eb.height+Sc,0);e.width=Math.max(e.width,$c);e.height+=Pd}}}var Tc=ub.length;if(0!==Tc){this.ma.width?Ia=Math.min(this.ma.width,this.Dd.width):0!==e.width&&(Ia=Math.min(e.width,this.Dd.width));for(kb=0;kb<Tc;kb++)if(Wa=ub[kb],Wa.visible||Wa===this.yb)bb=Wa.margin,Bc=bb.right+bb.left,Sc=bb.top+bb.bottom,ph(Wa,
Ia,Infinity,jb,hb),eb=Wa.na,$c=Math.max(eb.width+Bc,0),Pd=Math.max(eb.height+Sc,0),e.width=Math.max(e.width,$c),e.height+=Pd}break;case "Horizontal":for(var Jc=b,md=c,Hd=d,jc=[],Pb=0;Pb<n;Pb++){var Xb=l.i[Pb];if(Xb.visible||Xb===this.yb){var Oe=cj(Xb);if(Oe!==Xi&&Oe!==Zi)jc.push(Xb);else{var Uc=Xb.margin,ad=Uc.right+Uc.left,yd=Uc.top+Uc.bottom;ph(Xb,Infinity,Jc,md,Hd);var zd=Xb.na,ee=Math.max(zd.width+ad,0),Qd=Math.max(zd.height+yd,0);e.width+=ee;e.height=Math.max(e.height,Qd)}}}var tc=jc.length;
if(0!==tc){this.ma.height?Jc=Math.min(this.ma.height,this.Dd.height):0!==e.height&&(Jc=Math.min(e.height,this.Dd.height));for(Pb=0;Pb<tc;Pb++)if(Xb=jc[Pb],Xb.visible||Xb===this.yb)Uc=Xb.margin,ad=Uc.right+Uc.left,yd=Uc.top+Uc.bottom,ph(Xb,Infinity,Jc,md,Hd),zd=Xb.na,ee=Math.max(zd.width+ad,0),Qd=Math.max(zd.height+yd,0),e.width+=ee,e.height=Math.max(e.height,Qd)}break;case "Spot":a:{var nd=a,od=b,Tb=c,Ub=d,Vb=xk(this,l,n),fb=Vb.margin,kc,Kc,Eb=fb.right+fb.left,Bb=fb.top+fb.bottom;ph(Vb,nd,od,Tb,Ub);
var vb=Vb.na,uc=vb.width,P=vb.height,qb=Math.max(uc+Eb,0),Q=Math.max(P+Bb,0);e.x=-fb.left;e.y=-fb.top;e.width=qb;e.height=Q;for(var ca=0;ca<n;ca++){var ec=l.i[ca];if(ec!==Vb&&(ec.visible||ec===this.yb)){fb=ec.margin;kc=fb.right+fb.left;Kc=fb.top+fb.bottom;ph(ec,nd,od,0,0);var vb=ec.na,qb=Math.max(vb.width+kc,0),Q=Math.max(vb.height+Kc,0),$b=ec.pb;ic($b)&&($b=this.Ki);fc($b)||($b=sc);var la=ec.Ei;ic(la)&&(la=sc);Db(e,$b.x*uc+$b.offsetX-(la.x*vb.width-la.offsetX)-fb.left,$b.y*P+$b.offsetY-(la.y*vb.height-
la.offsetY)-fb.top,qb,Q)}}var ga=Vb.kh;ga===Sg&&(ga=cj(Vb));switch(ga){case Xi:break a;case Nd:if(!isFinite(nd)&&!isFinite(od))break a;break;case Zi:if(!isFinite(nd))break a;break;case Yi:if(!isFinite(od))break a}vb=Vb.na;uc=vb.width;P=vb.height;qb=Math.max(uc+Eb,0);Q=Math.max(P+Bb,0);fb=Vb.margin;e.x=-fb.left;e.y=-fb.top;e.width=qb;e.height=Q;for(ca=0;ca<n;ca++)if(ec=l.i[ca],ec!==Vb&&(ec.visible||ec===this.yb))fb=ec.margin,kc=fb.right+fb.left,Kc=fb.top+fb.bottom,vb=ec.na,qb=Math.max(vb.width+kc,
0),Q=Math.max(vb.height+Kc,0),$b=ec.pb,ic($b)&&($b=this.Ki),fc($b)||($b=sc),la=ec.Ei,ic(la)&&(la=sc),Db(e,$b.x*uc+$b.offsetX-(la.x*vb.width-la.offsetX)-fb.left,$b.y*P+$b.offsetY-(la.y*vb.height-la.offsetY)-fb.top,qb,Q)}break;case "Auto":var wb=a,Za=b,xb=c,pd=d,Jb=xk(this,l,n),ac=Jb.margin,Rd=ac.right+ac.left,Sd=ac.top+ac.bottom;ph(Jb,wb,Za,xb,pd);var qd=Jb.na,Lc=Math.max(qd.width+Rd,0),Mc=Math.max(qd.height+Sd,0),fe=(new C).Ml(0,0,Lc,Mc,yk(Jb)),Id=(new C).Ml(0,0,Lc,Mc,zk(Jb)),bd=new E(fe,Id),Wb=wb,
nc=Za;isFinite(wb)&&(Wb=bd.width);isFinite(Za)&&(nc=bd.height);for(var ge=new yb(0,0),cd=0;cd<n;cd++){var Jd=l.i[cd];if(Jd!==Jb&&(Jd.visible||Jd===this.yb)){var ac=Jd.margin,lb=ac.right+ac.left,nb=ac.top+ac.bottom;ph(Jd,Wb,nc,xb,pd);qd=Jd.na;Lc=Math.max(qd.width+lb,0);Mc=Math.max(qd.height+nb,0);ge=new yb(Math.max(Lc,ge.width),Math.max(Mc,ge.height))}}if(1===n)e.width=Lc,e.height=Mc;else{var Cc=yk(Jb),Ba=zk(Jb),Xa,Ca;Ba.x!==Cc.x&&Ba.y!==Cc.y&&(Xa=ge.width/Math.abs(Ba.x-Cc.x),Ca=ge.height/Math.abs(Ba.y-
Cc.y));var Ua=0;Jb instanceof W&&(Ua=Jb.Qa*Jb.scale);Xa+=Math.abs(Cc.offsetX)+Math.abs(Ba.offsetX)+Ua;Ca+=Math.abs(Cc.offsetY)+Math.abs(Ba.offsetY)+Ua;var db=Jb.kh;db===Sg&&(db=cj(Jb));switch(db){case Xi:pd=xb=0;break;case Nd:isFinite(wb)&&(Xa=wb);isFinite(Za)&&(Ca=Za);break;case Zi:isFinite(wb)&&(Xa=wb);pd=0;break;case Yi:xb=0,isFinite(Za)&&(Ca=Za)}Jb instanceof W&&(Jb.Hg?Jb.uj=m:Jb.xa=m);nj(Jb);ph(Jb,Xa,Ca,xb,pd);e.width=Jb.na.width+Rd;e.height=Jb.na.height+Sd}break;case "Table":for(var Qb=a,Dc=
b,Oa=n,ka=c,Ta=d,qf=[],re=[],Ga=0;Ga<Oa;Ga++){var za=l.i[Ga];if(za instanceof w&&(za.type===jj||za.type===kj)){re.push(za);for(var Td=za.wa,Rf=Td.length,Hb=0;Hb<Rf;Hb++){var Eg=Td.i[Hb];za.type===jj?Eg.Sb=za.Sb:za.type===kj&&(Eg.hc=za.hc);qf.push(Eg)}}else qf.push(za)}for(var Oa=qf.length,Nc=[],Ga=0;Ga<Oa;Ga++)za=qf[Ga],za.$b=h,za.Ec=h,Nc[za.Sb]||(Nc[za.Sb]=[]),Nc[za.Sb][za.hc]||(Nc[za.Sb][za.hc]=[]),Nc[za.Sb][za.hc].push(za);for(var se=[],he=[],Fg=[],rf={count:0},Ud={count:0},Pe=Qb,Qe=Dc,Da,te,rh=
Nc.length,Ga=0;Ga<rh;Ga++)if(Nc[Ga]){var sh=Nc[Ga].length,Fb=this.Td(Ga);Ak(Fb,0);for(Hb=0;Hb<sh;Hb++)if(Nc[Ga][Hb]){var Mb=this.pd(Hb);se[Hb]===f&&(Ak(Mb,0),se[Hb]=h);for(var tj=Nc[Ga][Hb],jl=tj.length,Wd=0;Wd<jl;Wd++)if(za=tj[Wd],za.visible||za===this.yb)if(1<za.Wj||1<za.tj)he.push(za);else{var ue=rj(za,Fb,Mb);if(ue!==Xi&&!za.ma.aa())rf[Hb]===f&&(rf[Hb]=-1,rf.count++),Ud[Ga]===f&&(Ud[Ga]=-1,Ud.count++),Fg.push(za),ph(za,Infinity,Infinity,ka,Ta);else{var ie=isFinite(Mb.width)?Mb.width:Qb,Ad=isFinite(Fb.height)?
Fb.height:Dc,bc=new yb(Math.max(Mb.tf,Math.min(ie,Mb.Ed)),Math.max(Fb.tf,Math.min(Ad,Fb.Ed))),vc=za.margin,sf=vc.right+vc.left,tf=vc.top+vc.bottom;ph(za,Infinity,Infinity,ka,Ta);var Re=za.na,Vc=Math.max(Re.width+sf,0),Se=Math.max(Re.height+tf,0);Da=this.Td(Ga);te=Math.max(Se-Da.Ia,0);te>Qe&&(te=Qe);Ak(Da,Da.Ia+te);Qe=Math.max(Qe-te,0);Da=this.pd(Hb);te=Math.max(Vc-Da.Ia,0);te>Pe&&(te=Pe);Ak(Da,Da.Ia+te);Pe=Math.max(Pe-te,0)}}}}for(var je=0,dd=0,Oa=this.qu,Ga=0;Ga<Oa;Ga++)this.ve[Ga]!==f&&(je+=this.pd(Ga).Ia);
Oa=this.bv;for(Ga=0;Ga<Oa;Ga++)this.Ee[Ga]!==f&&(dd+=this.Td(Ga).Ia);Pe=Math.max(Qb-je,0);Qe=Math.max(Dc-dd,0);Oa=Fg.length;for(Ga=0;Ga<Oa;Ga++){var za=Fg[Ga],Fb=this.Td(za.Sb),Mb=this.pd(za.hc),ai=za.na,vc=za.margin,sf=vc.right+vc.left,tf=vc.top+vc.bottom;rf[za.hc]=Math.max(ai.width+sf-Mb.Md,0);Ud[za.Sb]=Math.max(ai.height+tf-Fb.Md,0)}var Gg=0,lg=0;for(Ga in Ud)"count"!==Ga&&(Gg+=Ud[Ga]);for(Ga in rf)"count"!==Ga&&(lg+=rf[Ga]);for(Ga=0;Ga<Oa;Ga++)if(za=Fg[Ga],za.visible||za===this.yb){Fb=this.Td(za.Sb);
Mb=this.pd(za.hc);ie=isFinite(Mb.width)?Mb.width:isFinite(Pe)?Mb.Md+rf[za.hc]/lg*Pe:Mb.Md||Pe;Ad=isFinite(Fb.height)?Fb.height:isFinite(Qe)?Fb.Md+Ud[za.Sb]/Gg*Qe:Fb.Md||Qe;bc=new yb(Math.max(Mb.tf,Math.min(ie,Mb.Ed)),Math.max(Fb.tf,Math.min(Ad,Fb.Ed)));ue=rj(za,Fb,Mb);switch(ue){case Zi:bc.height=Infinity;break;case Yi:bc.width=Infinity}vc=za.margin;sf=vc.right+vc.left;tf=vc.top+vc.bottom;nj(za);ph(za,bc.width,bc.height,Mb.tf,Fb.tf);Re=za.na;Vc=Math.max(Re.width+sf,0);Se=Math.max(Re.height+tf,0);
Ak(Fb,Math.max(Fb.Ia,Se));Ak(Mb,Math.max(Mb.Ia,Vc))}Oa=he.length;for(Ga=0;Ga<Oa;Ga++)if(za=he[Ga],za.visible||za===this.yb){Fb=this.Td(za.Sb);Mb=this.pd(za.hc);bc=new yb(Math.max(Mb.tf,Math.min(Qb,Mb.Ed)),Math.max(Fb.tf,Math.min(Dc,Fb.Ed)));ue=rj(za,Fb,Mb);switch(ue){case Nd:0!==Mb.Md&&(bc.width=Math.min(bc.width,Mb.Md));0!==Fb.Md&&(bc.height=Math.min(bc.height,Fb.Md));break;case Zi:0!==Mb.Md&&(bc.width=Math.min(bc.width,Mb.Md));break;case Yi:0!==Fb.Md&&(bc.height=Math.min(bc.height,Fb.Md))}isFinite(Mb.width)&&
(bc.width=Mb.width);isFinite(Fb.height)&&(bc.height=Fb.height);for(var mg=new yb(0,0),oc=1;oc<za.Wj&&!(za.Sb+oc>=this.bv);oc++)Da=this.Td(za.Sb+oc),mg.height+=Math.max(Da.tf,isNaN(Da.Fe)?Da.Ed:Math.min(Da.Fe,Da.Ed));for(oc=1;oc<za.tj&&!(za.hc+oc>=this.qu);oc++)Da=this.pd(za.hc+oc),mg.width+=Math.max(Da.tf,isNaN(Da.Fe)?Da.Ed:Math.min(Da.Fe,Da.Ed));bc.width+=mg.width;bc.height+=mg.height;vc=za.margin;sf=vc.right+vc.left;tf=vc.top+vc.bottom;ph(za,bc.width,bc.height,ka,Ta);for(var Re=za.na,Vc=Math.max(Re.width+
sf,0),Se=Math.max(Re.height+tf,0),uf=0,oc=0;oc<za.Wj;oc++)Da=this.Td(za.Sb+oc),uf+=Da.Ia||0;if(uf<Se)for(var Xd=Se-uf;0<Xd;){var ve=Da.Ia||0;isNaN(Da.height)&&Da.Ed>ve&&(Ak(Da,Math.min(Da.Ed,ve+Xd)),Da.Ia!==ve&&(Xd-=Da.Ia-ve));if(-1===Da.index-1)break;Da=this.Td(Da.index-1)}for(var Sf=0,oc=0;oc<za.tj;oc++)Da=this.pd(za.hc+oc),Sf+=Da.Ia||0;if(Sf<Vc)for(Xd=Vc-Sf;0<Xd;){ve=Da.Ia||0;isNaN(Da.width)&&Da.Ed>ve&&(Ak(Da,Math.min(Da.Ed,ve+Xd)),Da.Ia!==ve&&(Xd-=Da.Ia-ve));if(-1===Da.index-1)break;Da=this.pd(Da.index-
1)}}for(var rd=0,ke=0,ue=cj(this),ng=this.ma,Hg=this.Dd,og=dd=je=0,vf=0,Oa=this.qu,Ga=0;Ga<Oa;Ga++)this.ve[Ga]!==f&&(Da=this.pd(Ga),isFinite(Da.width)?og+=Da.width:Bk(Da)===Ck?og+=Da.Ia:je+=Da.Ia);var rd=isFinite(ng.width)?Math.min(ng.width,Hg.width):ue!==Xi&&isFinite(Qb)?Qb:je,rd=Math.max(rd,this.Wd.width),rd=Math.max(rd-og,0),Te=Math.max(rd/je,1);isFinite(Te)||(Te=1);for(Ga=0;Ga<Oa;Ga++)this.ve[Ga]!==f&&(Da=this.pd(Ga),!isFinite(Da.width)&&Bk(Da)!==Ck&&Ak(Da,Da.Ia*Te),Da.kb=e.width,e.width+=Da.Ia);
Oa=this.bv;for(Ga=0;Ga<Oa;Ga++)this.Ee[Ga]!==f&&(Da=this.Td(Ga),isFinite(Da.height)?vf+=Da.height:Bk(Da)===Ck?vf+=Da.Ia:dd+=Da.Ia);var ke=isFinite(ng.height)?Math.min(ng.height,Hg.height):ue!==Xi&&isFinite(Dc)?Dc:dd,ke=Math.max(ke,this.Wd.height),ke=Math.max(ke-vf,0),Jg=Math.max(ke/dd,1);isFinite(Jg)||(Jg=1);for(Ga=0;Ga<Oa;Ga++)this.Ee[Ga]!==f&&(Da=this.Td(Ga),!isFinite(Da.height)&&Bk(Da)!==Ck&&Ak(Da,Da.Ia*Jg),Da.kb=e.height,e.height+=Da.Ia);Oa=re.length;for(Ga=0;Ga<Oa;Ga++){var ed=re[Ga];ed.type===
jj?(ie=e.width,Da=this.Td(ed.Sb),Ad=Da.Md):(Da=this.pd(ed.hc),ie=Da.Md,Ad=e.height);ed.Gc.Kd(0,0,ie,Ad);ed.$b=p;Nc[ed.Sb]||(Nc[ed.Sb]=[]);Nc[ed.Sb][ed.hc]||(Nc[ed.Sb][ed.hc]=[]);Nc[ed.Sb][ed.hc].push(ed)}this.jE=Nc;break;case "Viewbox":var we=a,vj=b,Un=c,Vn=d;1<n&&v.g("Viewbox Panel cannot contain more than one GraphObject.");var le=l.i[0];le.Ob=1;nj(le);ph(le,Infinity,Infinity,Un,Vn);var bi=le.na,wj=le.margin,Wn=wj.right+wj.left,Xn=wj.top+wj.bottom;if(isFinite(we)||isFinite(vj)){var Mp=le.scale,
Yn=bi.width,Zn=bi.height,$n=Math.max(we-Wn,0),ao=Math.max(vj-Xn,0);le.Ob=this.Wm===Tg?le.Ob*Math.min($n/Yn,ao/Zn):le.Ob*Math.max($n/Yn,ao/Zn);Mp!==le.scale&&(le.$b=h,ph(le,Infinity,Infinity,Un,Vn))}bi=le.na;e.width=isFinite(we)?we:Math.max(bi.width+Wn,0);e.height=isFinite(vj)?vj:Math.max(bi.height+Xn,0);break;case "Link":var bo=this instanceof mf?this.bn:this;if(0===n){var xj=this.qc;Ab(xj,0,0);var Yd=this.na;Yd.Kd(0,0,0,0)}else{var yj=this.gp(),Ue=this.zj(),Ve=Ue.copy();Ve.x=0;Ve.y=0;var Kg,th=this.tw();
Kg=this.ba!==f?this.ba:th.count;for(var zj=new C(Infinity,Infinity),Lg=0;Lg<Kg;Lg++){var co=th.i[Lg];zj.x=Math.min(co.x,zj.x);zj.y=Math.min(co.y,zj.y)}this.ti=new C(Ue.x,Ue.y);this.oh.clear();yj!==m&&(Dk(yj,Ue.width,Ue.height),Yd=yj.na,Ve.ej(Yd),this.oh.add(Yd));for(var Mg=m,pg=m,Tf=m,Lg=0;Lg<n;Lg++){var wc=l.i[Lg];if(wc!==yj)if(wc.Ui&&wc instanceof W)Dk(wc,Ue.width,Ue.height),Yd=wc.na,Ve.ej(Yd),this.oh.add(Yd);else if(2>Kg)ph(wc,Infinity,Infinity),Yd=wc.na,Ve.ej(Yd),this.oh.add(Yd);else{Mg===m&&
(Mg=new ob,pg=new C,Tf=new C);var Uf=wc.jh,fo=wc.Ry,kl=wc.Ei;hc(kl)&&(kl=sc);var Aj=wc.$r,Np=wc.Sy,ci,di,Bj=0;if(Uf<-Kg||Uf>=Kg){var ho=bo.CC,Cj=bo.BC;Aj!==Wi&&(Bj=Ek(Aj,Cj),wc.Pa=Bj);ci=ho.x-Ue.x;di=ho.y-Ue.y}else{var wf,uh;if(0<=Uf)wf=th.i[Uf],uh=Uf<Kg-1?th.i[Uf+1]:wf;else{var ll=Kg+Uf;wf=th.i[ll];uh=0<ll?th.i[ll-1]:wf}Cj=0<=Uf?wf.Wh(uh):uh.Wh(wf);Aj!==Wi&&(Bj=Ek(Aj,Cj),wc.Ub=Bj);ci=wf.x+(uh.x-wf.x)*fo-Ue.x;di=wf.y+(uh.y-wf.y)*fo-Ue.y}ph(wc,Infinity,Infinity);var Yd=wc.na,xj=wc.ua,ei=0;wc instanceof
W&&(ei=wc.Qa);var io=xj.width+ei,jo=xj.height+ei;Mg.reset();Mg.translate(-Yd.x,-Yd.y);Mg.scale(wc.scale,wc.scale);Mg.rotate(wc.Pa,io/2,jo/2);var ko=new E(0,0,io,jo);pg.ao(ko,kl);Mg.zb(pg);var Op=-pg.x+ei/2,Pp=-pg.y+ei/2;Tf.set(Np);isNaN(Tf.x)&&(Tf.x=0<=Uf?pg.x+3:-(pg.x+3));isNaN(Tf.y)&&(Tf.y=-(pg.y+3));Tf.rotate(Cj);ci+=Tf.x;di+=Tf.y;var fi=ko;fi.set(Yd);fi.x=ci+Op;fi.y=di+Pp;this.oh.add(fi);Ve.ej(fi)}}if(this.df)for(var lo=this.di;lo.next();)ph(lo.value,Infinity,Infinity);this.Ak=Ve;var Ej=this.ti;
Ej&&Ej.Kd(Ej.x+Ve.x,Ej.y+Ve.y);Ab(e,Ve.width||0,Ve.height||0)}break;case "Grid":break;case "TableRow":case "TableColumn":v.g(this.toString()+" is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");break;default:v.g("Unknown panel type: "+q)}var xe=e.width,ye=e.height,Fj=this.padding,Qp=Fj.top+Fj.bottom,xe=xe+(Fj.left+Fj.right),ye=ye+Qp;isFinite(g.width)&&(xe=g.width);isFinite(g.height)&&(ye=g.height);xe=Math.min(j.width,xe);ye=Math.min(j.height,
ye);xe=Math.max(i.width,xe);ye=Math.max(i.height,ye);xe=Math.max(c,xe);ye=Math.max(d,ye);e.width=xe;e.height=ye;r=this.qc;Ab(r,xe,ye);$i(this,0,0,xe,ye)}};function xk(a,b,c){for(var d=0;d<c;d++){var e=b.i[d];if(e.Ui===h)return a.Mq=e}b=b.i[0];return a.Mq=b}
fa.Gi=function(a,b,c,d){var e=this.Ak,g=this.wa,i=g.length,j=this.kE;j.reset();if(0===i){var k=this.la;k.x=a;k.y=b;k.width=c;k.height=d}else{if(!this.ma.aa()){var l=cj(this),n=this.Gc,r=n.width,q=n.height;r===c&&q===d&&(l=Xi);switch(l){case Xi:if(r>c||q>d)this.J(),ph(this,r>c?c:r,q>d?d:q);break;case Nd:this.$b=h;ph(this,c,d,0,0);break;case Zi:this.$b=h;ph(this,c,q,0,0);break;case Yi:this.$b=h,ph(this,r,d,0,0)}}k=this.la;k.x=a;k.y=b;k.width=c;k.height=d;var u=this.K.ub;switch(u){case "Position":for(var x=
e.x+this.padding.left,z=e.y+this.padding.top,D=0;D<i;D++){var F=g.i[D],G=F.na,I=F.margin,M=F.position.x,T=F.position.y;j.x=isNaN(M)?-x:M-x;j.y=isNaN(T)?-z:T-z;j.x+=I.left;j.y+=I.top;j.width=G.width;j.height=G.height;F.visible&&F.vc(j.x,j.y,j.width,j.height)}break;case "Vertical":for(var pa=this.padding.left,ea=this.padding.top,Aa=0;Aa<i;Aa++){var ta=pa,va=g.i[Aa],Ia=va.na,jb=va.margin,hb=jb.left+jb.right,ub=Ia.width,kb=cj(va);if(isNaN(va.ma.width)&&kb===Nd||kb===Zi)ub=Math.max(e.width-hb,0);var Wa=
ub+hb,rb=va.pb;ic(rb)&&(rb=this.Ki);fc(rb)||(rb=sc);j.x=ta+rb.offsetX+jb.left+(e.width*rb.x-Wa*rb.x);j.y=ea+rb.offsetY+jb.top;j.width=ub;j.height=Ia.height;va.visible&&(va.vc(j.x,j.y,j.width,j.height),ea+=Ia.height+jb.bottom+jb.top)}break;case "Horizontal":for(var bb=this.padding.top,Bc=this.padding.left,Sc=0;Sc<i;Sc++){var eb=bb,$c=g.i[Sc],Pd=$c.na,Tc=$c.margin,Jc=Tc.top+Tc.bottom,md=Pd.height,Hd=cj($c);if(isNaN($c.ma.height)&&Hd===Nd||Hd===Yi)md=Math.max(e.height-Jc,0);var jc=md+Jc,Pb=$c.pb;ic(Pb)&&
(Pb=this.Ki);fc(Pb)||(Pb=sc);j.x=Bc+Pb.offsetX+Tc.left;j.y=eb+Pb.offsetY+Tc.top+(e.height*Pb.y-jc*Pb.y);j.width=Pd.width;j.height=md;$c.visible&&($c.vc(j.x,j.y,j.width,j.height),Bc+=Pd.width+Tc.left+Tc.right)}break;case "Spot":var Xb=xk(this,g,i),Oe=Xb.na,Uc=Oe.width,ad=Oe.height,yd=this.padding,zd=yd.left,ee=yd.top;j.x=zd-e.x;j.y=ee-e.y;Xb.vc(j.x,j.y,Uc,ad);for(var Qd=0;Qd<i;Qd++){var tc=g.i[Qd];if(tc!==Xb){var nd=tc.na,od=nd.width,Tb=nd.height,Ub=tc.pb;ic(Ub)&&(Ub=this.Ki);fc(Ub)||(Ub=sc);var Vb=
tc.Ei;ic(Vb)&&(Vb=sc);j.x=Ub.x*Uc+Ub.offsetX-(Vb.x*od-Vb.offsetX);j.y=Ub.y*ad+Ub.offsetY-(Vb.y*Tb-Vb.offsetY);j.x-=e.x;j.y-=e.y;tc.visible&&tc.vc(zd+j.x,ee+j.y,od,Tb)}}break;case "Auto":var fb=xk(this,g,i),kc=fb.na,Kc=0;fb instanceof W&&(Kc=fb.Qa);var Eb=new E(0,0,kc.width-Kc,kc.height-Kc),Bb=new E(0,0,1,1),vb=fb.margin,uc=vb.left,P=vb.top,qb=this.padding,Q=qb.left,ca=qb.top;j.x=uc;j.y=P;j.width=kc.width;j.height=kc.height;fb.vc(Q+j.x,ca+j.y,j.width,j.height);var ec=yk(fb),$b=zk(fb),la=(new C).ao(Eb,
ec),ga=(new C).ao(Eb,$b);Bb.x=la.x;Bb.y=la.y;Bb.lv(ga);Bb.x+=uc+Q+Kc/2;Bb.y+=P+ca+Kc/2;for(var wb=0;wb<i;wb++){var Za=g.i[wb];if(Za!==fb){var xb=Za.na,vb=Za.margin,pd=Math.max(xb.width+vb.right+vb.left,0),Jb=Math.max(xb.height+vb.top+vb.bottom,0),ac=Za.pb;ic(ac)&&(ac=this.Ki);fc(ac)||(ac=sc);j.x=Bb.width*ac.x+ac.offsetX-pd*ac.x+vb.left+Bb.x;j.y=Bb.height*ac.y+ac.offsetY-Jb*ac.y+vb.top+Bb.y;j.width=Bb.width;j.height=Bb.height;Za.visible&&(Nb(Bb.x,Bb.y,Bb.width,Bb.height,j.x,j.y,xb.width,xb.height)?
Za.vc(j.x,j.y,xb.width,xb.height):Za.vc(j.x,j.y,xb.width,xb.height,new E(Bb.x,Bb.y,Bb.width,Bb.height)))}}break;case "Table":for(var Rd=this.padding,Sd=Rd.left,qd=Rd.top,Lc=this.jE,Mc,fe,Id=Lc.length,bd=0,Wb=0;Wb<Id;Wb++)Lc[Wb]&&(bd=Math.max(bd,Lc[Wb].length));for(var nc=Math.min(this.Vm,Id-1);nc!==Id&&(this.Ee[nc]===f||0===this.Ee[nc].Ia);)nc++;for(var nc=Math.min(nc,Id-1),ge=-this.Ee[nc].kb,cd=Math.min(this.Am,bd-1);cd!==bd&&(this.ve[cd]===f||0===this.ve[cd].Ia);)cd++;for(var cd=Math.min(cd,bd-
1),Jd=-this.ve[cd].kb,Wb=0;Wb<Id;Wb++)if(Lc[Wb]){var bd=Lc[Wb].length,lb=this.Td(Wb);fe=lb.kb+ge+qd;for(var nb=0;nb<bd;nb++)if(Lc[Wb][nb]){var Cc=this.pd(nb);Mc=Cc.kb+Jd+Sd;for(var Ba=Lc[Wb][nb],Xa=Ba.length,Ca=0;Ca<Xa;Ca++){var Ua=Ba[Ca],db=Ua.na;if(Ua instanceof w&&(Ua.type===jj||Ua.type===kj)){Ua.wb.qa();var Qb=Ua.wb;Qb.x=Ua.type===jj?Sd:Mc;Qb.y=Ua.type===kj?qd:fe;Qb.width=db.width;Qb.height=db.height;Ua.wb.freeze();Ua.Ec=p}else{for(var Dc=new yb(0,0),Oa=1;Oa<Ua.rowSpan&&!(Wb+Oa>=this.bv);Oa++){var ka=
this.Td(Wb+Oa);Dc.height+=ka.Ia}for(Oa=1;Oa<Ua.lB&&!(nb+Oa>=this.qu);Oa++){var Ta=this.pd(nb+Oa);Dc.width+=Ta.Ia}var qf=Cc.Ia+Dc.width,re=lb.Ia+Dc.height;j.x=Mc;j.y=fe;j.width=qf;j.height=re;var Ga=Mc,za=fe,Td=qf,Rf=re,Hb=Ua.pb.copy();if(ic(Hb)){Hb.Ra(this.Ki);fc(Hb)||Hb.Ra(sc);var Eg=Cc.pb;fc(Eg)&&(Hb.x=Eg.x,Hb.offsetX=Eg.offsetX);var Nc=lb.pb;fc(Nc)&&(Hb.y=Nc.y,Hb.offsetY=Nc.offsetY)}fc(Hb)||(Hb=sc);var se=db.width,he=db.height,Fg=Ua.Dd,rf=Ua.Wd,se=Math.min(Fg.width,se),he=Math.min(Fg.height,he),
se=Math.max(rf.width,se),he=Math.max(rf.height,he),Ud=Ua.margin,Pe=Ud.left+Ud.right,Qe=Ud.top+Ud.bottom,Da=rj(Ua,lb,Cc);if(isNaN(Ua.ma.width)&&Da===Nd||Da===Zi)se=Math.max(qf-Pe,0);if(isNaN(Ua.ma.height)&&Da===Nd||Da===Yi)he=Math.max(re-Qe,0);var te=he+Qe;j.x+=j.width*Hb.x-(se+Pe)*Hb.x+Hb.offsetX+Ud.left;j.y+=j.height*Hb.y-te*Hb.y+Hb.offsetY+Ud.top;Ua.visible&&(Nb(Ga,za,Td,Rf,j.x,j.y,se,he)?Ua.vc(j.x,j.y,se,he):Ua.vc(j.x,j.y,se,he,new E(Ga,za,Td,Rf)))}}}}for(Wb=0;Wb<i;Wb++)if(Ua=g.i[Wb],Ua instanceof
w&&(Ua.type===jj||Ua.type===kj))Qb=Ua.wb,Ua.qc.qa(),Ua.qc.bo(0,0,Qb.width,Qb.height),Ua.qc.freeze();break;case "Viewbox":var rh=g.i[0],sh=rh.na,Fb=rh.margin,Mb=Fb.top+Fb.bottom,tj=Math.max(sh.width+(Fb.right+Fb.left),0),jl=Math.max(sh.height+Mb,0),Wd=rh.pb;ic(Wd)&&(Wd=this.Ki);fc(Wd)||(Wd=sc);j.x=e.width*Wd.x-tj*Wd.x+Wd.offsetX;j.y=e.height*Wd.y-jl*Wd.y+Wd.offsetY;j.width=sh.width;j.height=sh.height;rh.vc(j.x,j.y,j.width,j.height);break;case "Link":var ue=this.gp(),ie=0;if(ue!==m&&ie<this.oh.count){var Ad=
this.oh.i[ie];ie++;ue.vc(Ad.x-this.Ak.x,Ad.y-this.Ak.y,Ad.width,Ad.height)}for(var bc=0;bc<i;bc++){var vc=g.i[bc];vc!==ue&&ie<this.oh.count&&(Ad=this.oh.i[ie],ie++,vc.vc(Ad.x-this.Ak.x,Ad.y-this.Ak.y,Ad.width,Ad.height))}var sf=this.tw(),tf=sf.count;if(2<=tf&&this.df)for(var Re=this.di;Re.next();){var Vc=Re.value,Se=tf,je=sf,dd=Vc.jh,ai=Vc.Ry,Gg=Vc.Ei;hc(Gg)&&(Gg=sc);var lg=Vc.$r,mg=Vc.Sy,oc=f,uf=f,Xd=0;if(dd<-Se||dd>=Se){var ve=this.CC,Sf=this.BC;lg!==Wi&&(Xd=Ek(lg,Sf),Vc.Pa=Xd);oc=ve.x;uf=ve.y}else{var rd=
f,ke=f;if(0<=dd)rd=je.i[dd],ke=dd<Se-1?je.i[dd+1]:rd;else var ng=Se+dd,rd=je.i[ng],ke=0<ng?je.i[ng-1]:rd;Sf=0<=dd?rd.Wh(ke):ke.Wh(rd);lg!==Wi&&(Xd=Ek(lg,Sf),Vc.Pa=Xd);oc=rd.x+(ke.x-rd.x)*ai;uf=rd.y+(ke.y-rd.y)*ai}var Hg=new ob;Hg.scale(Vc.scale,Vc.scale);Hg.rotate(Vc.Pa,0,0);var og=Vc.ua,vf=new E(0,0,og.width,og.height),Te=new C;Te.ao(vf,Gg);Hg.zb(Te);var Jg=-Te.x,ed=-Te.y,we=mg.copy();isNaN(we.x)&&(we.x=0<=dd?Te.x+3:-(Te.x+3));isNaN(we.y)&&(we.y=-(Te.y+3));we.rotate(Sf);oc+=we.x;uf+=we.y;Hg.ED(vf);
Jg+=vf.x;ed+=vf.y;Vc.position=new C(oc+Jg,uf+ed)}break;case "Grid":break;case "TableRow":case "TableColumn":v.g(this.toString()+" is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");break;default:v.g("Unknown panel type: "+u)}}};
fa.Ii=function(a){var b=this.ua;if(Nb(0,0,b.width,b.height,a.x,a.y)){for(var c=this.wa.length,b=new C;c--;){var d=this.wa.i[0];if(d.visible||d===this.yb)if(pb(b.set(a),d.transform),d.fa(b))return h}return this.Ff===m&&this.Ef===m?p:h}return p};function Fk(a,b,c){c(a,b);if(b instanceof w)for(b=b.elements;b.next();)Fk(a,b.value,c)}function wi(a,b,c){c(b);for(b=b.elements;b.next();){var d=b.value;d instanceof w&&wi(a,d,c)}}
function Gk(a,b,c){if(c(b))return b;if(b instanceof w)for(b=b.elements;b.next();){var d=Gk(a,b.value,c);if(d!==m)return b.Mf(),d}return m}w.prototype.findObject=w.prototype.Pe=function(a){if(this.name===a)return this;for(var b=this.elements;b.next();){var c=b.value;if(c.name===a)return c;if(c instanceof w&&!c.RF()&&(c=c.Pe(a),c!==m))return c}return m};R.prototype.findObjectByPred=w.prototype.NB=function(a){return a(this)?this:Hk(this,a)};
function Hk(a,b){for(var c=a.elements;c.next();){var d=c.value;if(b(d))return d;if(d instanceof w&&(d=Hk(d,b),d!==m))return d}return m}fa=w.prototype;fa.hi=function(){return!(this.type===jj||this.type===kj)};
fa.dd=function(a,b,c){if(this.gf===p)return m;b===f&&(b=m);c===f&&(c=m);if(this.Ec)return m;var d=this.ua,e=1/this.yl(),g=this.hi()?a:pb((new C).set(a),this.transform);if(Nb(-(5*e),-(5*e),d.width+10*e,d.height+10*e,g.x,g.y)){if(!this.Ag)for(var i=this.wa.length,e=new C;i--;){var j=this.wa.i[i];if(j.visible||j===this.yb){j.hi()?pb(e.set(a),j.transform):e.set(a);var k=m;j instanceof w?k=j.dd(e,b,c):j.gf===h&&j.fa(e)&&(k=j);if(k!==m&&(b!==m&&(k=b(k)),k&&(c===m||c(k))))return k}}return this.background===
m&&this.Ph===m?m:Nb(0,0,d.width,d.height,g.x,g.y)?this:m}return m};
fa.wn=function(a,b,c,d){if(this.gf===p)return p;b===f&&(b=m);c===f&&(c=m);!(d instanceof y)&&!(d instanceof qa)&&(d=new y(R));var e=this.ua,g=this.hi()?a:pb((new C).set(a),this.transform);if(Nb(0,0,e.width,e.height,g.x,g.y)){if(!this.Ag){g=this.wa.length;for(e=new C;g--;){var i=this.wa.i[g];if(i.visible||i===this.yb)if(i.hi()?pb(e.set(a),i.transform):e.set(a),(i instanceof w?i.wn(e,b,c,d):i.fa(e))&&i.gf!==p)b!==m&&(i=b(i)),i&&(c===m||c(i))&&d.add(i)}}return this.background!==m||this.Ph!==m}return p};
fa.xl=function(a,b,c,d,e,g){if(this.gf===p)return p;g===f&&(g=new ob);b===f&&(b=m);c===f&&(c=m);g.multiply(this.transform);if(this.Ux(a,g))return bj(this,b,c,e),h;if(this.Re(a,g)){if(!this.Ag)for(var i=this.wa.length;i--;){var j=this.wa.i[i];if(j.visible||j===this.yb){var k=j.la,l=this.la;if(!(k.x>l.width||k.y>l.height||0>k.x+k.width||0>k.y+k.height)){if(j instanceof w)k=j.xl(a,b,c,d,e,g.copy());else{var k=j,l=a,n=d,r=g.copy();k.gf===p?k=p:(r===f&&(r=new ob),r.multiply(k.transform),k=n?k.Re(l,r):
k.Ux(l,r))}k&&(b!==m&&(j=b(j)),j&&(c===m||c(j))&&e.add(j))}}}return d}return p};
fa.xn=function(a,b,c,d,e){if(this.gf===p)return p;c===f&&(c=m);d===f&&(d=m);var g=this.ua,i=this.hi()?a:pb((new C).set(a),this.transform),j=this.hi()?b:pb((new C).set(b),this.transform),j=i.Mi(j);if(0<i.x&&i.x<g.width&&0<i.y&&i.y<g.height||sb(i.x,i.y,0,0,0,g.height)<j||sb(i.x,i.y,0,g.height,g.width,g.height)<j||sb(i.x,i.y,g.width,g.height,g.width,0)<j||sb(i.x,i.y,g.width,0,0,0)<j){if(!this.Ag){g=new C;i=new C;for(j=this.wa.length;j--;){var k=this.wa.i[j];if(k.visible||k===this.yb){var l=k.la,n=this.la;
if(!(l.x>n.width||l.y>n.height||0>l.x+l.width||0>l.y+l.height))if(l=k.transform,k.hi()?(pb(g.set(a),l),pb(i.set(b),l)):(g.set(a),i.set(b)),k instanceof w?k.xn(g,i,c,d,e):k.OB(g,i))c!==m&&(k=c(k)),k&&(d===m||d(k))&&e.add(k)}}}return h}return p};function yk(a){var b=a.n;if(b===f||b===mc)b=m;b===m&&a instanceof W&&(a=a.xa,a!==m&&(b=a.n));b===m&&(b=pc);return b}function zk(a){var b=a.o;if(b===f||b===mc)b=m;b===m&&a instanceof W&&(a=a.xa,a!==m&&(b=a.o));b===m&&(b=zc);return b}
w.prototype.add=w.prototype.add=function(a){v.c(a,R,w,"add:element");this.lc(this.wa.count,a)};w.prototype.elt=w.prototype.Z=function(a){return this.wa.Z(a)};
w.prototype.insertAt=w.prototype.lc=function(a,b){b instanceof S&&v.g("Cannot add a Part to a Panel: "+b);if(this===b||this.ci(b))this===b&&v.g("Cannot make a Panel contain itself: "+this.toString()),v.g("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+b.toString());var c=b.Y;c!==m&&c!==this&&v.g("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+b.toString()+", already contained by "+c.toString()+", cannot be shared by this Panel: "+
this.toString());this.K===Zh&&!(b instanceof W)&&v.g("Can only add Shapes to a Grid Panel, not: "+b);b.sk(this);b.$k=m;if(this.vy!==m){var d=b.data;d!==m&&"object"===typeof d&&(this.cf===m&&(this.cf=new oa(Object,w)),this.cf.add(d,b))}var e=this.wa,d=-1;if(c===this){for(var g=-1,i=e.count,j=0;j<i;j++)if(e.i[j]===b){g=j;break}if(-1!==g){if(g===a||g+1>=e.count&&a>=e.count)return;e.pe(g);d=g}else v.g("element "+b.toString()+" has panel "+c.toString()+" but is not contained by it.")}a>e.count&&(a=e.count);
e.lc(a,b);this.J();b.J();c=this.V;c!==m&&(e=this.b,e!==m&&e.da.cb||(-1!==d&&c.Xd(He,"elements",this,b,m,d,m),c.Xd(Ge,"elements",this,m,b,m,a)))};w.prototype.remove=w.prototype.remove=function(a){v.c(a,R,w,"remove:element");for(var b=this.wa,c=b.count,d=-1,e=0;e<c;e++)if(b.i[e]===a){d=e;break}-1!==d&&this.Ad(d)};w.prototype.removeAt=w.prototype.pe=function(a){t&&v.j(a,w,"removeAt:idx");0<=a&&this.Ad(a)};
w.prototype.Ad=function(a){var b=this.wa,c=b.Z(a);c.$k=m;c.sk(m);if(this.cf!==m){var d=c.data;"object"===typeof d&&this.cf.remove(d)}b.pe(a);this.$b=p;this.J();b=this.V;b!==m&&(d=this.b,d!==m&&d.da.cb||b.Xd(He,"elements",this,c,m,a,m))};v.m(w,{bv:"rowCount"},function(){return this.Ee.length});
w.prototype.getRowDefinition=w.prototype.Td=function(a){t&&v.j(a,w,"getRowDefinition:idx");0>a&&v.ha(a,">= 0",w,"getRowDefinition:idx");var a=Math.round(a),b=this.Ee;if(b[a]===f){var c=new Qj;c.sk(this);c.Rk=h;c.W=a;b[a]=c}return b[a]};w.prototype.removeRowDefinition=w.prototype.cK=function(a){t&&v.j(a,w,"removeRowDefinition:idx");0>a&&v.ha(a,">= 0",w,"removeRowDefinition:idx");var a=Math.round(a),b=this.Ee;b[a]&&(b[a]=f)};v.m(w,{qu:"columnCount"},function(){return this.ve.length});
w.prototype.getColumnDefinition=w.prototype.pd=function(a){t&&v.j(a,w,"getColumnDefinition:idx");0>a&&v.ha(a,">= 0",w,"getColumnDefinition:idx");var a=Math.round(a),b=this.ve;if(b[a]===f){var c=new Qj;c.sk(this);c.Rk=h;c.W=a;b[a]=c}return b[a]};w.prototype.removeColumnDefinition=w.prototype.aK=function(a){t&&v.j(a,w,"removeColumnDefinition:idx");0>a&&v.ha(a,">= 0",w,"removeColumnDefinition:idx");var a=Math.round(a),b=this.ve;b[a]&&(b[a]=f)};v.a(w,"rowSizing",w.prototype.gD);
v.defineProperty(w,{gD:"rowSizing"},s("uq"),function(a){var b=this.uq;b!==a&&(a!==vk&&a!==Ck&&v.g("rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.uq=a,this.J(),this.d("rowSizing",b,a))});v.a(w,"columnSizing",w.prototype.kB);
v.defineProperty(w,{kB:"columnSizing"},s("Ao"),function(a){var b=this.Ao;b!==a&&(a!==vk&&a!==Ck&&v.g("columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.Ao=a,this.J(),this.d("columnSizing",b,a))});v.a(w,"topIndex",w.prototype.TG);v.defineProperty(w,{TG:"topIndex"},s("Vm"),function(a){var b=this.Vm;b!==a&&((!isFinite(a)||0>a)&&v.g("topIndex must be greater than zero and a real number. Was "+a),this.Vm=a,oj(this),this.d("topIndex",b,a))});
v.a(w,"leftIndex",w.prototype.ZF);v.defineProperty(w,{ZF:"leftIndex"},s("Am"),function(a){var b=this.Am;b!==a&&((!isFinite(a)||0>a)&&v.g("leftIndex must be greater than zero and a real number. Was "+a),this.Am=a,oj(this),this.d("leftIndex",b,a))});v.a(w,"data",w.prototype.data);
v.defineProperty(w,{data:"data"},s("fm"),function(a){var b=this.fm;if(b!==a){var c=this instanceof S&&!(this instanceof mf);c&&v.e(a,"object",w,"data");pf(this);this.fm=a;var d=this.b;d!==m&&(c?(b!==m&&d.Lf.remove(b),a!==m&&d.Lf.add(a,this)):(c=this.Y,c!==m&&c.cf!==m&&(b!==m&&c.cf.remove(b),a!==m&&c.cf.add(a,this))));this.d("data",b,a);d!==m&&d.da.cb||a!==m&&this.nc()}});function Mj(a){a=a.Dk;return a!==m&&a.La}
function pf(a){var b=a.Dk;if(b===m)a.data!==m&&v.g("Template cannot have .data be non-null: "+a),a.Dk=b=new y(bf);else if(b.La)return;var c=new y(R);Fk(a,a,function(a,d){var e=d.Vb;if(e!==m){d.Zl=p;for(var g=e.f;g.next();){e=g.value;e.mode===df&&(d.Zl=h);var i=e.eo;if(i!==m){var q=a;""!==i&&(q=a.Pe(i));q!==m&&(c.add(q),q.Iq===f&&(q.Iq=new y(bf)),q.Iq.add(e))}b.add(e)}}if(d instanceof w){if(0<d.Ee.length){g=d.Ee;i=g.length;for(q=0;q<i;q++){var u=g[q];if(u!==f&&u.Vb!==m)for(var x=u.Vb.f;x.next();)e=
x.value,e.jf=u,e.jx=2,e.Yt=u.index,b.add(e)}}if(0<d.ve.length){g=d.ve;i=g.length;for(q=0;q<i;q++)if(u=g[q],u!==f&&u.Vb!==m)for(x=u.Vb.f;x.next();)e=x.value,e.jf=u,e.jx=1,e.Yt=u.index,b.add(e)}}});for(var d=c.f;d.next();){var e=d.value;if(e.Iq!==f){e.Zl=h;for(var g=e.Iq.f;g.next();){var i=g.value;e.Vb===m&&(e.Vb=new y(bf));e.Vb.add(i)}}delete e.Iq}for(d=b.f;d.next();)e=d.value,g=e.jf,g!==m&&(e.jf=m,g===a?e.Ol="":(g instanceof Qj&&(g=g.Y),e.Ol=""!==g.name?g.name:g.name="_"+v.kc(g)));b.freeze()}
w.prototype.updateTargetBindings=w.prototype.nc=function(a){var b=this.Dk;if(b!==m){a===f&&(a="");for(b=b.f;b.next();){var c=b.value,d=c.Yy;if(!(""!==a&&d!==a)&&(d=c.cz,!(c.nB===m&&""===d))){var d=this.data,e=c.eo;e!==m&&(d=this.Pe(e));if(d===m)t&&v.trace("Binding error: missing GraphObject named "+e+" in "+this.toString());else{var e=this,g=c.Ol;if(""!==g){if(e=this.Pe(g),e===m)continue}else c.jf!==m&&(e=c.jf);g=c.jx;if(0!==g){if(!(e instanceof w))continue;1===g?e=e.pd(c.Yt):2===g&&(e=e.Td(c.Yt))}e!==
f&&c.KD(e,d)}}}}};v.a(w,"itemArray",w.prototype.vy);v.defineProperty(w,{vy:"itemArray"},s("Ij"),function(a){var b=this.Ij;if(b!==a){t&&(a!==m&&!v.isArray(a))&&v.g("Panel.itemArray must be an Array-like object or null, not: "+a);var c=this.b;c!==m&&b!==m&&zi(c,this);this.Ij=a;c!==m&&a!==m&&xi(c,this);this.d("itemArray",b,a);c!==m&&c.da.cb||this.Oy()}});
w.prototype.rebuildItemElements=w.prototype.Oy=function(){for(;0<this.wa.length;)this.Ad(0);var a=this.vy;if(a!==m)for(var b=v.Cb(a),c=0;c<b;c++)Ih(this,v.qb(a,c))};
function Ih(a,b,c){if(!(b===f||b===m)){var d=a.getCategoryForItemData(b),e=a.nC,g=m;e!==m&&(g=e.ca(d));g===m&&(v.qE===f&&(v.qE=h,v.trace('No item template Panel found for category "'+d+'" on '+a),v.trace("  Using default item template.")),g=a.b.YD);g instanceof w&&(pf(g),e=g.copy(),"object"===typeof b&&(a.cf===m&&(a.cf=new oa(Object,w)),a.cf.add(b,e)),"number"===typeof c?(a.lc(c,e),Ik(e,c),Jh(a,c)):(a.add(e),Ik(e,a.wa.count-1)),e.Ew=d,e.data=b)}}
function Jh(a,b){for(var c=a.wa,d=b+1;d<c.length;){var e=c.Z(d);e instanceof w&&Ik(e,d);d++}}function Ik(a,b){a.type===jj?a.Sb=b:a.type===kj&&(a.hc=b)}w.prototype.isItemPanel=w.prototype.RF=function(){return this.Ij!==m||this.Rf!==m};v.a(w,"itemTemplate",w.prototype.VF);
v.defineProperty(w,{VF:"itemTemplate"},function(){return this.Rf===m?m:this.Rf.ca("")},function(a){this.Rf===m&&(this.Rf=new oa("string",w));var b=this.Rf.ca("");b!==a&&(v.c(a,w,w,"itemTemplate"),a instanceof S&&v.g("itemTemplate must not be a Part: "+a),this.Rf.add("",a),this.d("itemTemplate",b,a),a=this.b,a!==m&&a.da.cb||this.Oy())});v.a(w,"itemTemplateMap",w.prototype.nC);
v.defineProperty(w,{nC:"itemTemplateMap"},s("Rf"),function(a){var b=this.Rf;if(b!==a){v.c(a,oa,w,"itemTemplateMap");for(var c=a.f;c.next();){var d=c.value;d instanceof S&&v.g("Template in itemTemplateMap must not be a Part: "+d)}this.Rf=a;this.d("itemTemplateMap",b,a);a=this.b;a!==m&&a.da.cb||this.Oy()}});v.a(w,"itemCategoryProperty",w.prototype.UF);
v.defineProperty(w,{UF:"itemCategoryProperty"},s("wm"),function(a){var b=this.wm;b!==a&&("string"!==typeof a&&"function"!==typeof a&&v.Ac(a,"string or function",w,"itemCategoryProperty"),this.wm=a,this.d("itemCategoryProperty",b,a))});
w.prototype.getCategoryForItemData=w.prototype.SI=function(a){if(a===m)return"";var b=this.wm;if("function"===typeof b)b=b(a);else if("string"===typeof b&&"object"===typeof a){if(""===b)return"";b=v.Ya(a,b)}else return"";if(b===f)return"";if("string"===typeof b)return b;t&&v.trace("Panel.getCategoryForItemData found a non-string category for "+a+": "+b);return""};v.a(w,"isAtomic",w.prototype.OF);
v.defineProperty(w,{OF:"isAtomic"},s("Ag"),function(a){var b=this.Ag;b!==a&&(v.e(a,"boolean",w,"isAtomic"),this.Ag=a,this.d("isAtomic",b,a))});function Qj(){v.Mb(this);this.Rj=m;this.Rk=h;this.W=0;this.Fe=NaN;this.Xk=0;this.Wk=Infinity;this.ja=mc;this.kb=this.Ia=0;this.Vb=m;this.Fq=Jk;this.Lg=Sg}v.H("RowColumnDefinition",Qj);
Qj.prototype.copy=function(){var a=new Qj;a.Rk=this.Rk;a.W=this.W;a.Fe=this.Fe;a.Xk=this.Xk;a.Wk=this.Wk;a.ja=this.ja;a.Ia=this.Ia;a.kb=this.kb;a.Lg=this.Lg;a.Fq=this.Fq;a.Vb=this.Vb;return a};var Jk;Qj.Default=Jk=v.l(Qj,"Default",0);var Ck;Qj.None=Ck=v.l(Qj,"None",1);var vk;Qj.ProportionalExtra=vk=v.l(Qj,"ProportionalExtra",2);Qj.prototype.sk=ba("Rj");function Ak(a,b){a.Ia=isNaN(a.Fe)?Math.max(Math.min(a.Wk,b),a.Xk):Math.max(Math.min(a.Wk,a.Fe),a.Xk)}
Qj.prototype.wd=function(a,b,c,d,e){var g=this.Rj;if(g!==m){g.J();for(var i=this.Qu,j=g.wa,k=j.length,l=0;l<k;l++){var n=j.i[l];(i?n.Sb:n.hc)===this.index&&n.J()}g.Xd(Fe,a,this,b,c,d,e);if(this.Vb!==m&&(b=g.vr(),b!==m&&(b=b.data,b!==m)))for(c=this.Vb.f;c.next();)c.value.JD(this,b,a)}};v.m(Qj,{Y:"panel"},s("Rj"));v.m(Qj,{Qu:"isRow"},s("Rk"));v.m(Qj,{index:"index"},s("W"));v.a(Qj,"height",Qj.prototype.height);
v.defineProperty(Qj,{height:"height"},s("Fe"),function(a){var b=this.Fe;b!==a&&(t&&v.e(a,"number",Qj,"height"),0>a&&v.ha(a,">= 0",Qj,"height"),this.Fe=a,Ak(this,this.Ia),this.wd("size",b,a))});v.a(Qj,"width",Qj.prototype.width);v.defineProperty(Qj,{width:"width"},s("Fe"),function(a){var b=this.Fe;b!==a&&(t&&v.e(a,"number",Qj,"width"),0>a&&v.ha(a,">= 0",Qj,"width"),this.Fe=a,Ak(this,this.Ia),this.wd("size",b,a))});v.a(Qj,"minimum",Qj.prototype.tf);
v.defineProperty(Qj,{tf:"minimum"},s("Xk"),function(a){var b=this.Xk;b!==a&&(t&&v.e(a,"number",Qj,"minimum"),(0>a||!isFinite(a))&&v.ha(a,">= 0",Qj,"minimum"),this.Xk=a,Ak(this,this.Ia),this.wd("minimum",b,a))});v.a(Qj,"maximum",Qj.prototype.Ed);v.defineProperty(Qj,{Ed:"maximum"},s("Wk"),function(a){var b=this.Wk;b!==a&&(t&&v.e(a,"number",Qj,"maximum"),0>a&&v.ha(a,">= 0",Qj,"maximum"),this.Wk=a,Ak(this,this.Ia),this.wd("maximum",b,a))});v.a(Qj,"alignment",Qj.prototype.pb);
v.defineProperty(Qj,{pb:"alignment"},s("ja"),function(a){var b=this.ja;b.u(a)||(t&&v.c(a,H,Qj,"alignment"),this.ja=a.B(),this.wd("alignment",b,a))});v.a(Qj,"stretch",Qj.prototype.kh);v.defineProperty(Qj,{kh:"stretch"},s("Lg"),function(a){var b=this.Lg;b!==a&&(t&&v.Ua(a,R,Qj,"stretch"),this.Lg=a,this.wd("stretch",b,a))});v.a(Qj,"sizing",Qj.prototype.cs);v.defineProperty(Qj,{cs:"sizing"},s("Fq"),function(a){var b=this.Fq;b!==a&&(t&&v.Ua(a,Qj,Qj,"sizing"),this.Fq=a,this.wd("sizing",b,a))});
function Bk(a){if(a.cs===Jk){var b=a.Rj;return a.Qu?b.gD:b.kB}return a.cs}v.m(Qj,{Md:"actual"},s("Ia"));v.m(Qj,{position:"position"},s("kb"));Qj.prototype.bind=Qj.prototype.bind=function(a){a.jf=this;var b=this.Y;b!==m&&(b=b.vr(),b!==m&&Mj(b)&&v.g("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+a));this.Vb===m&&(this.Vb=new y(bf));this.Vb.add(a)};
function W(){R.call(this);this.xa=m;this.Yo="None";this.Hg=p;this.fp=Sg;this.uj=m;this.uc=this.Ze="black";this.Lh=1;this.Pm="butt";this.Qm="miter";this.Rm=10;this.Jh=this.Ih=mc;this.dq=this.cq=0;this.tp=h;this.lE=new E;this.nm=this.Um="None";this.lp=1}v.H("Shape",W);v.pa(W,R);
W.prototype.jb=function(a){R.prototype.jb.call(this,a);a.xa=this.xa;a.Yo=this.Yo;a.Hg=this.Hg;a.fp=this.fp;a.uj=this.uj;a.Ze=this.Ze;a.uc=this.uc;a.Lh=this.Lh;a.Pm=this.Pm;a.Qm=this.Qm;a.Rm=this.Rm;a.Ih=this.Ih.B();a.Jh=this.Jh.B();a.cq=this.cq;a.dq=this.dq;a.tp=this.tp;a.Um=this.Um;a.nm=this.nm;a.lp=this.lp};W.prototype.toString=function(){return"Shape("+("None"!==this.Wa?this.Wa:"None"!==this.Rl?this.Rl:this.Iu)+")#"+v.kc(this)};
W.prototype.qn=function(a){if(!(this.uc===m&&this.Ze===m)){this.Ze!==m&&lj(this,a,this.Ze,h);this.uc!==m&&lj(this,a,this.uc,p);a.lineWidth=this.Lh;a.lineJoin=this.Qm;a.lineCap=this.Pm;a.miterLimit=this.Rm;var b=p;this.V&&(b=this.V.Dl);var c=h;this.uc!==m&&this.Ze===m&&(c=p);var d=this.xa;if(d!==m)if(d.K===Od)a.beginPath(),a.moveTo(d.Pb,d.bc),a.lineTo(d.Dc,d.Nc),this.Ze!==m&&a.fill(),this.uc!==m&&a.stroke();else if(d.K===Vd){var e=d.Pb,g=d.bc,i=d.Dc,d=d.Nc,j=Math.min(e,i),k=Math.min(g,d),e=Math.abs(i-
e),g=Math.abs(d-g);this.Ze!==m&&a.fillRect(j,k,e,g);if(this.uc!==m){if(c&&b){var l=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=0}a.strokeRect(j,k,e,g);c&&b&&(a.shadowOffsetX=l[0],a.shadowOffsetY=l[1],a.shadowBlur=l[2])}}else if(d.K===Zd)e=d.Pb,g=d.bc,i=d.Dc,d=d.Nc,j=Math.abs(i-e)/2,k=Math.abs(d-g)/2,e=Math.min(e,i)+j,g=Math.min(g,d)+k,a.beginPath(),a.moveTo(e,g-k),a.bezierCurveTo(e+Rc*j,g-k,e+j,g-Rc*k,e+j,g),a.bezierCurveTo(e+j,g+Rc*k,e+Rc*j,g+k,
e,g+k),a.bezierCurveTo(e-Rc*j,g+k,e-j,g+Rc*k,e-j,g),a.bezierCurveTo(e-j,g-Rc*k,e-Rc*j,g-k,e,g-k),a.closePath(),this.Ze!==m&&a.fill(),this.uc!==m&&(c&&b&&(l=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),a.stroke(),c&&b&&(a.shadowOffsetX=l[0],a.shadowOffsetY=l[1],a.shadowBlur=l[2]));else if(d.K===Ld){g=d.Lk;d=g.length;for(e=0;e<d;e++){c=g.i[e];a.beginPath();a.moveTo(c.Ba,c.Ca);i=c.gb.i;j=i.length;for(k=0;k<j;k++){var n=i[k];switch(n.K){case de:a.moveTo(n.N,
n.O);break;case ae:a.lineTo(n.N,n.O);break;case me:a.bezierCurveTo(n.Sj,n.Tj,n.al,n.bl,n.cl,n.dl);break;case ne:a.quadraticCurveTo(n.Sj,n.Tj,n.cl,n.dl);break;case oe:var r=Math.PI/180;a.arc(n.am,n.bm,n.Il,n.fi*r,(n.fi+n.cj)*r,0>n.cj?h:p);break;default:v.g("Segment not of valid type")}n.ri&&a.closePath()}c.np===h&&this.Ze!==m?(a.fill(),c=h):c=c.Qf?p:h;this.uc!==m&&(c&&b&&(l=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),a.stroke(),c&&b&&(a.shadowOffsetX=
l[0],a.shadowOffsetY=l[1],a.shadowBlur=l[2]))}}}};W.prototype.ng=function(){R.prototype.ng.call(this);var a=this.b;a!==m&&(Ni(a,"fill",this.fill),Ni(a,"geometry",this.zr),this.yn!==Sg&&Ni(a,"geometryStretch",this.yn),Ni(a,"stroke",this.stroke),"butt"!==this.$y&&Ni(a,"strokeCap",this.$y),"miter"!==this.az&&Ni(a,"strokeJoin",this.az),10!==this.bz&&Ni(a,"strokeMiterLimit",this.bz),Ni(a,"strokeWidth",this.Qa))};
W.prototype.getDocumentPoint=W.prototype.xb=function(a){hc(a)&&v.g("Spot must be real");var b=this.ua,c=this.Qa,a=new C(a.x*(b.width+c)-c/2+b.x+a.offsetX,a.y*(b.height+c)-c/2+b.y+a.offsetY);this.fe.zb(a);return a};
W.prototype.Ii=function(a,b){var c=this.xa;if(c===m||this.fill===m&&this.stroke===m)return p;var d=c.lb,e=this.Qa/2;c.type===Od&&!b&&(e+=2);var g=this.lE;g.set(d);g.nf(e+2,e+2);if(!g.fa(a))return p;d=e+1E-4;if(c.type===Od){if(this.stroke===m)return p;d=(c.N-c.Ba)*(a.x-c.Ba)+(c.O-c.Ca)*(a.y-c.Ca);return 0>(c.Ba-c.N)*(a.x-c.N)+(c.Ca-c.O)*(a.y-c.O)||0>d?p:hd(c.Ba,c.Ca,c.N,c.O,e,a.x,a.y)}if(c.type===Vd){var i=c.Ba,j=c.Ca,k=c.N,l=c.O,c=Math.min(i,k),n=Math.min(j,l),i=Math.abs(k-i),j=Math.abs(l-j);g.x=
c;g.y=n;g.width=i;g.height=j;if(this.fill===m){g.nf(-d,-d);if(g.fa(a))return p;g.nf(d,d)}this.stroke!==m&&g.nf(e,e);return g.fa(a)}if(c.type===Zd){i=c.Ba;j=c.Ca;k=c.N;l=c.O;c=Math.min(i,k);n=Math.min(j,l);i=Math.abs(k-i);j=Math.abs(l-j);g=i/2;j/=2;c=a.x-(c+g);n=a.y-(n+j);if(this.fill===m){g-=d;j-=d;if(0>=g||0>=j||1>=c*c/(g*g)+n*n/(j*j))return p;g+=d;j+=d}this.stroke!==m&&(g+=e,j+=e);return 0>=g||0>=j?p:1>=c*c/(g*g)+n*n/(j*j)}if(c.type===Ld)return this.fill===m?ze(c,a.x,a.y,e):c.fa(a,e,1<this.Qa,b);
v.g("Unknown Geometry type");return p};
W.prototype.Lr=function(a,b,c,d){var e=this.ma,g=this.Lh,a=Math.max(a,0),b=Math.max(b,0),i;this.Hg?i=this.xa.lb:(Kk[this.Wa]===f&&v.g("Unsupported Figure:"+this.Wa),i=Kk[this.Wa].lb);var j=i.width,k=i.height,l=i.width;i=i.height;switch(cj(this)){case Xi:d=c=0;break;case Nd:l=Math.max(a-g,0);i=Math.max(b-g,0);break;case Zi:l=Math.max(a-g,0);d=0;break;case Yi:c=0,i=Math.max(b-g,0)}isFinite(e.width)&&(l=e.width);isFinite(e.height)&&(i=e.height);var e=this.Dd,n=this.Wd,c=Math.max(c/this.scale,n.width)-
g,d=Math.max(d/this.scale,n.height)-g,l=Math.min(e.width,l);i=Math.min(e.height,i);l=isFinite(l)?Math.max(c,l):Math.max(j,c);i=isFinite(i)?Math.max(d,i):Math.max(k,d);c=this.yn;c=this.Hg?c===Sg?Nd:c:c===Sg?Kk[this.Wa].Nb:c;switch(c){case Xi:break;case Nd:j=l;k=i;break;case Tg:l=Math.min(l/j,i/k);isFinite(l)||(l=1);j*=l;k*=l;break;default:v.g(c+"is not a valid geometryStretch.")}if(this.Hg){d=this.zr;i=j;c=k;l=d.copy();d=d.lb;i/=d.width;c/=d.height;isFinite(i)||(i=1);isFinite(c)||(c=1);if(!(1===i&&
1===c)){switch(l.type){case Od:case Vd:case Zd:l.Pb*=i;l.bc*=c;l.Dc*=i;l.Nc*=c;break;case Ld:d=l.Ib;e=d.length;for(n=0;n<e;n++){var r=d.i[n];r.Ba*=i;r.Ca*=c;for(var r=r.gb,q=r.length,u=0;u<q;u++){var x=r.i[u];switch(x.type){case ae:case de:x.N*=i;x.O*=c;break;case me:x.Sj*=i;x.Tj*=c;x.al*=i;x.bl*=c;x.Dc*=i;x.Nc*=c;break;case ne:x.zc*=i;x.qd*=c;x.N*=i;x.O*=c;break;case oe:x.za*=i;x.Aa*=c;x.Il*=i;x.Wn!==f&&(x.Wn*=c);break;default:v.g("Unknown Segment type: "+x.type)}}}}l.Ha=h}this.xa=l}else if(this.xa===
m||this.xa.Vs!==a||this.xa.Us!==b)l=j,i=k,d=this.ma,c=d.width,d=d.height,l!==f&&(!isNaN(l)&&isFinite(l))&&(c=l),i!==f&&(!isNaN(i)&&isFinite(i))&&(d=i),isFinite(c)||(c=100),isFinite(d)||(d=100),e=f,"None"!==this.Rl?e=Lk(this.Rl):"None"!==this.Iu?e=Lk(this.Iu):(n=Mk[this.Wa],"string"===typeof n&&(n=Mk[n]),n===f&&v.g("Unknown Shape.figure: "+this.Wa),e=n(this,c,d),e.vd=new yb(c,d)),e===f&&(n=Mk.Rectangle)&&(e=n(this,c,d)),e.Vs=l,e.Us=i,this.xa=e;i=this.xa.lb;$i(this,i.x-g/2,i.y-g/2,0===a&&0===j?0:i.width+
g,0===b&&0===k?0:i.height+g)};function Dk(a,b,c){if(a.$b!==p){a.Gc.qa();var d=a.Lh*a.Ob;$i(a,-(d/2),-(d/2),b+d,c+d);b=a.Gc;c=a.Dd;d=a.Wd;b.width=Math.min(c.width,b.width);b.height=Math.min(c.height,b.height);b.width=Math.max(d.width,b.width);b.height=Math.max(d.height,b.height);a.Gc.freeze();a.Gc.aa()||v.g("Non-real measuredBounds has been set");a.$b=p}}W.prototype.Gi=function(a,b,c,d){fj(this,a,b,c,d)};
W.prototype.Ju=function(a,b,c){var d=this.transform.copy();d.Lu();var e=Rb(d,a),g=Rb(d,b),i=this.Qa/2,d=this.xa;d===m&&(ph(this,Infinity,Infinity),d=this.xa);var j=d.lb,k=p;if(d.type===Od)if(1.5>=this.Qa)k=vd(d.Pb,d.bc,d.Dc,d.Nc,e.x,e.y,g.x,g.y,c);else{d.Pb===d.Dc?(a=i,k=0):(a=(d.Nc-d.bc)/(d.Dc-d.Pb),k=i/Math.sqrt(1+a*a),a*=k);i=[];b=new C;vd(d.Pb+a,d.bc+k,d.Dc+a,d.Nc+k,e.x,e.y,g.x,g.y,b)&&i.push(b);b=new C;vd(d.Pb-a,d.bc-k,d.Dc-a,d.Nc-k,e.x,e.y,g.x,g.y,b)&&i.push(b);b=new C;vd(d.Pb+a,d.bc+k,d.Pb-
a,d.bc-k,e.x,e.y,g.x,g.y,b)&&i.push(b);b=new C;vd(d.Dc+a,d.Nc+k,d.Dc-a,d.Nc-k,e.x,e.y,g.x,g.y,b)&&i.push(b);if(0===i.length)return p;k=h;g=Infinity;for(j=0;j<i.length;j++){var d=i[j],l=(d.x-e.x)*(d.x-e.x)+(d.y-e.y)*(d.y-e.y);l<g&&(g=l,c.x=d.x,c.y=d.y)}}else if(d.type===Vd)k=xd(j.copy().nf(i,i),e,g,c);else if(d.type===Zd)a:if(d=j.copy().nf(i,i),0===d.width)k=vd(d.x,d.y,d.x,d.y+d.height,e.x,e.y,g.x,g.y,c);else if(0===d.height)k=vd(d.x,d.y,d.x+d.width,d.y,e.x,e.y,g.x,g.y,c);else{var a=d.width/2,n=d.height/
2,k=d.x+a,d=d.y+n,b=9999;e.x!==g.x&&(b=(e.y-g.y)/(e.x-g.x));if(9999>Math.abs(b)){g=e.y-d-b*(e.x-k);if(0>a*a*b*b+n*n-g*g){c.x=NaN;c.y=NaN;k=p;break a}j=Math.sqrt(a*a*b*b+n*n-g*g);i=(-(a*a*b*g)+a*n*j)/(n*n+a*a*b*b)+k;n=(-(a*a*b*g)-a*n*j)/(n*n+a*a*b*b)+k;a=b*(i-k)+g+d;d=b*(n-k)+g+d;k=Math.abs((e.x-i)*(e.x-i))+Math.abs((e.y-a)*(e.y-a));b=Math.abs((e.x-n)*(e.x-n))+Math.abs((e.y-d)*(e.y-d));k<b?(c.x=i,c.y=a):(c.x=n,c.y=d)}else{i=n*n;k=e.x-k;k=i-i/(a*a)*k*k;if(0>k){c.x=NaN;c.y=NaN;k=p;break a}j=Math.sqrt(k);
a=d+j;d-=j;k=Math.abs(a-e.y);b=Math.abs(d-e.y);k<b?(c.x=e.x,c.y=a):(c.x=e.x,c.y=d)}k=h}else if(d.type===Ld){var r,q,u,x=e.x,z=e.y,D=g.x,F=g.y,G=new C,g=e.Mi(g);c.x=D;c.y=F;for(j=0;j<d.Ib.count;j++){q=d.Ib.i[j];var I=q.gb;r=q.Ba;q=q.Ca;for(var M=r,T=q,pa,ea,Aa=0;Aa<I.count;Aa++){pa=I.i[Aa];ea=pa.type;l=pa.N;u=pa.O;var ta=p;switch(ea){case de:M=l;T=u;break;case ae:ta=Nk(r,q,l,u,x,z,D,F,G);break;case me:ta=pa.zc;ea=pa.qd;var va=pa.pk,Ia=pa.qk,ta=sd(r,q,ta,ea,va,Ia,l,u,x,z,D,F,0.5,G);break;case ne:ta=
(r+2*pa.zc)/3;ea=(q+2*pa.qd)/3;va=(2*pa.zc+l)/3;Ia=(2*pa.zc+l)/3;ta=sd(r,q,ta,ea,va,Ia,l,u,x,z,D,F,0.5,G);break;case oe:u=pe(pa);ea=u.length;for(j=0;j<ea;j++)n=u[j],0===j&&Nk(r,q,n.Sl,n.Tl,x,z,D,F,G)&&(l=Ok(e,G,g,c),l<g&&(g=l,k=h)),sd(n.Sl,n.Tl,n.rv,n.tv,n.sv,n.uv,n.xk,n.yk,x,z,D,F,0.5,G)&&(l=Ok(e,G,g,c),l<g&&(g=l,k=h));l=n.xk;u=n.yk;break;default:v.g("Unknown Segment type: "+pa.type)}r=l;q=u;ta&&(l=Ok(e,G,g,c),l<g&&(g=l,k=h));pa.Nu&&(l=M,u=T,Nk(r,q,l,u,x,z,D,F,G)&&(l=Ok(e,G,g,c),l<g&&(g=l,k=h)))}}e=
b.x-a.x;d=b.y-a.y;a=Math.sqrt(e*e+d*d);c.x-=e/a*i;c.y-=d/a*i}else v.g("Invalid Geometry type");if(!k)return p;b=Rb(this.transform,c);c.x=b.x;c.y=b.y;return h};function Ok(a,b,c,d){a=a.Mi(b);return a<c?(d.x=b.x,d.y=b.y,a):c}
function Nk(a,b,c,d,e,g,i,j,k){var l=p,n=(e-i)*(b-d)-(g-j)*(a-c);if(0===n)return p;k.x=((e*j-g*i)*(a-c)-(e-i)*(a*d-b*c))/n;k.y=((e*j-g*i)*(b-d)-(g-j)*(a*d-b*c))/n;if((a>c?a-c:c-a)<(b>d?b-d:d-b)){if(e=b<d?b:d,a=b<d?d:b,(k.y>e||gb(k.y,e))&&(k.y<a||gb(k.y,a)))l=h}else if(e=a<c?a:c,a=a<c?c:a,(k.x>e||gb(k.x,e))&&(k.x<a||gb(k.x,a)))l=h;return l}
W.prototype.containedInRect=W.prototype.Ux=function(a,b){if(b===f)return a.pl(this.la);var c=this.xa;c===m&&(ph(this,Infinity,Infinity),c=this.xa);var c=c.lb,d=this.Qa/2;return!a.fa(b.zb(new C(c.x-d,c.y-d)))||!a.fa(b.zb(new C(c.x-d,c.bottom+d)))||!a.fa(b.zb(new C(c.right+d,c.bottom+d)))||!a.fa(b.zb(new C(c.right+d,c.y-d)))?p:h};
W.prototype.intersectsRect=W.prototype.Re=function(a){function b(a,b){i.x=a*c.m11+b*c.m21+c.Sa;i.y=a*c.m12+b*c.m22+c.Ta}if(a.pl(this.la))return h;var c=this.transform.copy();c.Lu();var d=a.left,e=a.right,g=a.top,a=a.bottom,i=new C;b(d,g);if(this.Ii(i,h))return h;b(e,g);if(this.Ii(i,h))return h;b(d,a);if(this.Ii(i,h))return h;b(e,a);if(this.Ii(i,h))return h;var j=new C,k=new C;j.x=e;j.y=g;i.x=d;i.y=g;if(Pk(this,i,j,k))return h;i.x=e;i.y=a;if(Pk(this,i,j,k))return h;j.x=d;j.y=a;if(Pk(this,i,j,k))return h;
i.x=d;i.y=g;return Pk(this,i,j,k)?h:p};function Pk(a,b,c,d){if(!a.Ju(b,c,d))return p;var a=b.x,b=b.y,e=c.x,g=c.y,c=d.x,d=d.y;if(a===e){var i;b<g?(i=b,a=g):(i=g,a=b);return d>=i&&d<=a}a<e?(i=a,a=e):i=e;return c>=i&&c<=a}
W.prototype.OB=function(a,b){if(this.fill!==m&&this.Ii(a,h))return h;var c=a.Mi(b),d=c;1.5<this.Qa&&(c=this.Qa/2+Math.sqrt(c),c*=c);var e=this.xa;e===m&&(ph(this,Infinity,Infinity),e=this.xa);var g=e.Pb,i=e.bc,j=e.Dc,k=e.Nc;if(e.type===Od){var e=sb(a.x,a.y,g,i,j,k),l=(g-j)*(a.x-j)+(i-k)*(a.y-k);if(e<=(0<=(j-g)*(a.x-g)+(k-i)*(a.y-i)&&0<=l?c:d))return h}else if(e.type===Vd){if(sb(a.x,a.y,g,i,g,k)<=c||sb(a.x,a.y,g,i,j,i)<=c||sb(a.x,a.y,j,i,j,k)<=c||sb(a.x,a.y,g,k,j,k)<=c)return h}else if(e.type===Zd){var e=
a.x-(g+j)/2,d=a.y-(i+k)/2,l=Math.abs(j-g)/2,n=Math.abs(k-i)/2;if(0===l||0===n)return e=sb(a.x,a.y,g,i,j,k),e<=c?h:p;g=new C(Infinity,Infinity);wd(e,d,0,0,-l,-n,l,n,g);wd(e,d,0,n,-l,-n,l,n,g);wd(e,d,0,-n,-l,-n,l,n,g);wd(e,d,0,l,-l,-n,l,n,g);wd(e,d,0,-l,-l,-n,l,n,g);wd(e,d,l/2,n/2,-l,-n,l,n,g);wd(e,d,-l/2,n/2,-l,-n,l,n,g);wd(e,d,l/2,-n/2,-l,-n,l,n,g);wd(e,d,-l/2,-n/2,-l,-n,l,n,g);if((g.x-e)*(g.x-e)+(g.y-d)*(g.y-d)<c)return h}else if(e.type===Ld){k=e.lb;g=k.x;i=k.y;j=k.x+k.width;k=k.y+k.height;if(a.x>
j&&a.x<g&&a.y>k&&a.y<i&&sb(a.x,a.y,g,i,g,k)>c&&sb(a.x,a.y,g,i,j,i)>c&&sb(a.x,a.y,j,k,g,k)>c&&sb(a.x,a.y,j,k,j,i)>c)return p;c=Math.sqrt(c);if(this.fill===m?ze(e,a.x,a.y,c):e.fa(a,c,h))return h}return p};v.a(W,"geometry",W.prototype.zr);v.defineProperty(W,{zr:"geometry"},function(){return this.uj?this.uj:this.xa},function(a){var b=this.xa;b!==a&&(a!==m?(t&&v.c(a,Kd,W,"geometry"),this.uj=this.xa=a.freeze()):this.uj=this.xa=m,this.Hg=h,this.J(),this.d("geometry",b,a))});
W.prototype.pf=function(){this.Hg?this.uj=m:this.xa=m;this.J()};v.a(W,"fill",W.prototype.fill);v.defineProperty(W,{fill:"fill"},s("Ze"),function(a){var b=this.Ze;if(b!==a&&(a===m||"string"===typeof a||a instanceof Me))a instanceof Me&&a.freeze(),this.Ze=a,ij(this),this.d("fill",b,a)});v.a(W,"stroke",W.prototype.stroke);
v.defineProperty(W,{stroke:"stroke"},s("uc"),function(a){var b=this.uc;if(b!==a&&(a===m||"string"===typeof a||a instanceof Me))a instanceof Me&&a.freeze(),this.uc=a,ij(this),this.d("stroke",b,a)});v.a(W,"strokeWidth",W.prototype.Qa);v.defineProperty(W,{Qa:"strokeWidth"},s("Lh"),function(a){var b=this.Lh;b!==a&&(t&&v.j(a,W,"strokeWidth"),0<=a&&(this.Lh=a,this.J(),this.d("strokeWidth",b,a)))});v.a(W,"strokeCap",W.prototype.$y);
v.defineProperty(W,{$y:"strokeCap"},s("Pm"),function(a){var b=this.Pm;b!==a&&("string"===typeof a&&("butt"===a||"round"===a||"square"===a)?(this.Pm=a,ij(this),this.d("strokeCap",b,a)):v.ha(a,'"butt", "round", or "square"',W,"strokeCap"))});v.a(W,"strokeJoin",W.prototype.az);
v.defineProperty(W,{az:"strokeJoin"},s("Qm"),function(a){var b=this.Qm;b!==a&&("string"===typeof a&&("miter"===a||"bevel"===a||"round"===a)?(this.Qm=a,ij(this),this.d("strokeJoin",b,a)):v.ha(a,'"miter", "bevel", or "round"',W,"strokeJoin"))});v.a(W,"strokeMiterLimit",W.prototype.bz);v.defineProperty(W,{bz:"strokeMiterLimit"},s("Rm"),function(a){var b=this.Rm;b!==a&&(t&&v.j(a,W,"strokeMiterLimit"),0<a&&(this.Rm=a,ij(this),this.d("strokeMiterLimit",b,a)))});v.a(W,"figure",W.prototype.Wa);
v.defineProperty(W,{Wa:"figure"},s("Yo"),function(a){var b=this.Yo;if(b!==a){t&&v.e(a,"string",W,"figure");var c=Mk[a];"function"===typeof c?c=a:(c=Mk[a.toLowerCase()])||v.g("Unknown Shape.figure: "+a);b!==c&&(this.Yo=c,this.Hg=p,this.pf(),this.d("figure",b,c))}});v.a(W,"toArrow",W.prototype.Rl);
v.defineProperty(W,{Rl:"toArrow"},s("Um"),function(a){var b=this.Um;a===h?a="Standard":a===p&&(a="None");if(b!==a){t&&v.e(a,"string",W,"toArrow");var c=Lk(a);c instanceof Kd?c=a:(c=Lk(a.toLowerCase()))||v.g("Unknown Shape.toArrow: "+a);b!==c&&(this.Um=c,this.Hg=p,this.pf(),Qk(this,c),this.d("toArrow",b,c))}});v.a(W,"fromArrow",W.prototype.Iu);
v.defineProperty(W,{Iu:"fromArrow"},s("nm"),function(a){var b=this.nm;a===h?a="Standard":a===p&&(a="None");if(b!==a){t&&v.e(a,"string",W,"fromArrow");var c=Lk(a);c instanceof Kd?c=a:(c=Lk(a.toLowerCase()))||v.g("Unknown Shape.fromArrow: "+a);b!==c&&(this.nm=c,this.Hg=p,this.pf(),Qk(this,c),this.d("fromArrow",b,c))}});
function Qk(a,b){var c=a.b;if(!(c!==m&&c.da.cb)){a.$r=Rk;c=Fc;switch(b){case "halfarrowtop":c=zc;break;case "halftriangletop":c=zc;break;case "openrighttriangletop":c=zc;break;case "opentriangletop":c=zc}"None"!==a.Um?(a.jh=-1,a.Ei=c):"None"!==a.nm&&(a.jh=0,a.Ei=new H(1-c.x,c.y))}}v.defineProperty(W,{n:"spot1"},s("Ih"),function(a){v.c(a,H,W,"spot1");var b=this.Ih;b.u(a)||(this.Ih=a=a.B(),this.J(),this.d("spot1",b,a))});
v.defineProperty(W,{o:"spot2"},s("Jh"),function(a){v.c(a,H,W,"spot2");var b=this.Jh;b.u(a)||(this.Jh=a=a.B(),this.J(),this.d("spot2",b,a))});v.defineProperty(W,{Kb:"parameter1"},s("cq"),function(a){var b=this.cq;b!==a&&(this.cq=a,this.J(),this.d("parameter1",b,a))});v.defineProperty(W,{Wr:"parameter2"},s("dq"),function(a){var b=this.dq;b!==a&&(this.dq=a,this.J(),this.d("parameter2",b,a))});
v.m(W,{ua:"naturalBounds"},function(){if(this.xa!==m)return this.qc.Ra(this.xa.lb),this.qc;var a=this.ma;return new E(0,0,a.width,a.height)});v.a(W,"isRectangular",W.prototype.TF);v.defineProperty(W,{TF:"isRectangular"},s("tp"),function(a){var b=this.tp;b!==a&&(t&&v.e(a,"boolean",W,"isRectangular"),this.tp=a,this.J(),this.d("isRectangular",b,a))});v.a(W,"geometryStretch",W.prototype.yn);
v.defineProperty(W,{yn:"geometryStretch"},s("fp"),function(a){var b=this.fp;b!==a&&(v.Ua(a,R,W,"geometryStretch"),this.fp=a,this.d("geometryStretch",b,a))});v.a(W,"interval",W.prototype.$h);v.defineProperty(W,{$h:"interval"},s("lp"),function(a){var b=this.lp;t&&v.j(a,W,"interval");a=Math.floor(a);b!==a&&0<=a&&(this.lp=a,this.J(),this.d("interval",b,a))});
function ra(){R.call(this);this.md="";this.uc="black";this.oi="13px sans-serif";this.Ge="start";this.qp=h;this.at=p;this.il=Sk;this.ht=this.Vk=0;this.yj=this.Iw=this.Jw=m;this.Bm={};this.Wo=p;this.$d=this.Di=this.Oq=m}v.H("TextBlock",ra);v.pa(ra,R);
ra.prototype.jb=function(a){R.prototype.jb.call(this,a);a.md=this.md;a.uc=this.uc;a.oi=this.oi;a.Ge=this.Ge;a.qp=this.qp;a.at=this.at;a.il=this.il;a.Vk=this.Vk;a.ht=this.ht;a.Jw=this.Jw;a.Iw=this.Iw;a.yj=this.yj;a.Bm=this.Bm;a.Wo=this.Wo;a.Oq=this.Oq;a.Di=this.Di;a.$d=this.$d};ra.prototype.toString=function(){return 22<this.md.length?'TextBlock("'+this.md.substring(0,20)+'"...)':'TextBlock("'+this.md+'")'};var Tk;ra.None=Tk=v.l(ra,"None",0);var Uk;ra.WrapFit=Uk=v.l(ra,"WrapFit",1);var Sk;
ra.WrapDesiredSize=Sk=v.l(ra,"WrapDesiredSize",2);ra.prototype.J=function(){R.prototype.J.call(this);this.yj=this.Iw=this.Jw=m};v.a(ra,"font",ra.prototype.font);v.defineProperty(ra,{font:"font"},s("oi"),function(a){var b=this.oi;b!==a&&(t&&v.e(a,"string",ra,"font"),this.oi=a,this.J(),this.d("font",b,a))});v.a(ra,"text",ra.prototype.text);v.defineProperty(ra,{text:"text"},s("md"),function(a){var b=this.md,a=a!==m&&a!==f?a.toString():"";b!==a&&(this.md=a,this.J(),this.d("text",b,a))});
v.a(ra,"textAlign",ra.prototype.textAlign);v.defineProperty(ra,{textAlign:"textAlign"},s("Ge"),function(a){var b=this.Ge;b!==a&&(t&&v.e(a,"string",ra,"textAlign"),"start"===a||"end"===a||"left"===a||"right"===a||"center"===a?(this.Ge=a,ij(this),this.d("textAlign",b,a)):v.ha(a,'"start", "end", "left", "right", or "center"',ra,"textAlign"))});
v.m(ra,{ua:"naturalBounds"},function(){if(!this.qc.aa()){var a=Vk(this,this.md,this.font,{},999999).width,b=Wk(this,a,{}),c=this.ma;isNaN(c.width)||(a=c.width);isNaN(c.height)||(b=c.height);Ab(this.qc,a,b)}return this.qc});v.a(ra,"isMultiline",ra.prototype.Pu);v.defineProperty(ra,{Pu:"isMultiline"},s("qp"),function(a){var b=this.qp;b!==a&&(t&&v.e(a,"boolean",ra,"isMultiline"),this.qp=a,this.J(),this.d("isMultiline",b,a))});v.a(ra,"wrap",ra.prototype.kz);
v.defineProperty(ra,{kz:"wrap"},s("il"),function(a){var b=this.il;b!==a&&(t&&v.Ua(a,ra,ra,"wrap"),this.il=a,this.J(),this.d("wrap",b,a))});v.a(ra,"stroke",ra.prototype.stroke);v.defineProperty(ra,{stroke:"stroke"},s("uc"),function(a){var b=this.uc;if(b!==a&&(a===m||"string"===typeof a||a instanceof Me))a instanceof Me&&a.freeze(),this.uc=a,ij(this),this.d("stroke",b,a)});v.m(ra,{wJ:"lineCount"},s("Vk"));v.a(ra,"editable",ra.prototype.Au);
v.defineProperty(ra,{Au:"editable"},s("Wo"),function(a){var b=this.Wo;b!==a&&(t&&v.e(a,"boolean",ra,"editable"),this.Wo=a,this.d("editable",b,a))});v.a(ra,"textEditor",ra.prototype.dz);v.defineProperty(ra,{dz:"textEditor"},s("Oq"),function(a){var b=this.Oq;b!==a&&(a instanceof HTMLElement||v.g("textEditor must be an HTMLElement"),this.Oq=a,this.d("textEditor",b,a))});v.a(ra,"errorFunction",ra.prototype.pr);
v.defineProperty(ra,{pr:"errorFunction"},s("$d"),function(a){var b=this.$d;b!==a&&(a!==m&&v.e(a,"function",ra,"errorFunction"),this.$d=a,this.d("errorFunction",b,a))});
ra.prototype.qn=function(a,b){if(this.uc!==m&&0!==this.md.length){var c=this.oi;if(c!==m){var d=this.ua.width,e=qh(this,c);a.Qv!==c&&(a.font=c,a.Qv=c);a.textAlign=this.Ge;lj(this,a,this.uc,h);this.at&&(lj(this,a,this.uc,p),a.lineWidth=0.05*e);var c=this.Bm,g=0,i=p,j=this.fe.zb(new C(0,0)),k=this.fe.zb(new C(0,e)),j=j.Mi(k),k=b.scale;3>j*k*k&&(i=h);j=c.Qh.length;for(k=0;k<j;k++){var l=c.Qh[k],n=c.ll[k];l>d&&(l=d);var r=a,q=g,u=e,x=i,z=0;"start"===this.Ge||"left"===this.Ge?z=0:"end"===this.Ge||"right"===
this.Ge?z=d:"center"===this.Ge?z=d/2:v.g("textAlign must be start, end, left, right, or center");x?r.fillRect(0+z-l/2,q+0.25*u,l,1):(r.fillText(n,0+z,q+u-0.25*u),this.at&&("end"===this.Ge||"right"===this.Ge?z-=l:"center"===this.Ge&&(z-=l/2),r.moveTo(0+z,q+u-0.2*u),r.lineTo(0+z+l,q+u-0.2*u),r.stroke()));g+=e}}}};
ra.prototype.Lr=function(a,b,c,d){var e={},g=0,i=0;if(isNaN(this.ma.width)){g=this.md;if(0===g.length)g=0;else if(this.Pu){for(var j=i=0,k=p,l={nh:0};!k;){var n=Xk(g,j,l);-1===n&&(n=g.length,k=h);j=Yk(g.substr(j,n-j).replace(/^\s+|\s+$/g,""),this.oi);j>i&&(i=j);j=l.nh}g=i}else i=Xk(g,0,{}),0<=i&&(g=g.substr(0,i)),g=j=Yk(g,this.oi);g=Math.min(g,a/this.scale)}else g=this.ma.width;this.Y&&(g=Math.min(g,this.Y.Dd.width),g=Math.max(g,this.Y.Wd.width));i=Wk(this,g,e);i=isNaN(this.ma.height)?Math.min(i,
b/this.scale):this.ma.height;if(this.kz===Uk||isNaN(this.ma.width))g=e.ei;g=Math.max(c,g);i=Math.max(d,i);Ab(this.qc,g,i);$i(this,0,0,g,i);this.Bm=e};ra.prototype.Gi=function(a,b,c,d){fj(this,a,b,c,d)};
function Vk(a,b,c,d,e){b=b.replace(/^\s+|\s+$/g,"");d.ei===f&&(d.ei=0);d.Qh===f&&(d.Qh=[]);d.ll===f&&(d.ll=[]);var g=0,i;if(a.il===Tk)return d.nh=1,d.ei=Yk(b,c),d.Qh.push(d.ei),d.ll.push(b),new yb(d.ei,qh(a,c));a.yj===m&&(a.yj=qh(a,c));var a=a.yj,j=b,k=0;0===j.length&&(k=1,d.Qh.push(0),d.ll.push(j));for(;0<j.length;){for(var l=Zk(j),j=j.substr(l.length);Yk(l,c)>e;){var n=1,b=Yk(l.substr(0,n),c);for(i=0;b<=e;)n++,i=b,b=Yk(l.substr(0,n),c);1===n?(d.Qh[k]=b,g=Math.max(g,b)):(d.Qh[k]=i,g=Math.max(g,i));
n--;1>n&&(n=1);d.ll[k]=l.substr(0,n);k++;l=l.substr(n)}i=Zk(j);for(b=Yk(l+i,c);0<i.length&&b<=e;)l+=i,j=j.substr(i.length),i=Zk(j),b=Yk((l+i).replace(/^\s+|\s+$/g,""),c);l=l.replace(/^\s+|\s+$/g,"");""!==l&&(0===i.length?(d.Qh.push(b),g=Math.max(g,b)):(i=Yk(l,c),d.Qh.push(i),g=Math.max(g,i)),d.ll.push(l),k++)}d.nh=k;d.ei=Math.max(d.ei,g);return new yb(d.ei,a*d.nh)}function Zk(a){for(var b=a.length,c=0;c<b&&" "!==a.charAt(c);)c++;for(;c<b&&" "===a.charAt(c);)c++;return c>=b?a:a.substr(0,c)}
function Yk(a,b){v.Rt!==b&&(v.Qt.font=b,v.Rt=b);return v.Qt.measureText(a).width}function qh(a,b){if(a.yj!==m)return a.yj;v.Rt!==b&&(v.Qt.font=b,v.Rt=b);var c=0;v.sw[b]!==f&&5E3>v.Pz?c=v.sw[b]:(c=1.3*v.Qt.measureText("M").width,v.sw[b]=c,v.Pz++);return c}function Xk(a,b,c){c.nh===f&&(c.nh=0);var d=a.indexOf("\r",b);-1===d&&(d=a.indexOf("\n",b));0<=d&&(c.nh="\r"===a[d]&&d+1<a.length&&"\n"===a[d+1]?d+2:d+1);return d}
function Wk(a,b,c){var d=a.md,e=a.oi,g=qh(a,e);if(0===d.length)return c.ei=0,a.Vk=1,g;if(!a.Pu){var i=Xk(d,0,{});0<=i&&(d=d.substr(0,i))}for(var j=i=0,k=0,l=-1,n={nh:0},r=p;!r;)l=Xk(d,k,n),-1===l&&(l=d.length,r=h),k<=l&&(k=d.substr(k,l-k),a.il!==Tk?(c.nh=0,k=Vk(a,k,e,c,b),i+=k.height,j+=c.nh):(Vk(a,k,e,c,Infinity),i+=g,j++)),k=n.nh;a.Vk=j;return a.ht=i}
ra.prototype.ng=function(){R.prototype.ng.call(this);var a=this.b;if(a!==m){var b=this.Bm;b!==m&&(Ni(a,"sizeArray",b.Qh),Ni(a,"textArray",b.ll),Ni(a,"font",this.font),Ni(a,"stroke",this.stroke),Ni(a,"textAlign",this.textAlign))}};v.a(ra,"textValidation",ra.prototype.fs);v.defineProperty(ra,{fs:"textValidation"},s("Di"),function(a){var b=this.Di;b!==a&&(a!==m&&v.e(a,"function",ra,"textValidation"),this.Di=a,this.d("textValidation",b,a))});
function Pj(){R.call(this);this.Nf=m;this.Hq="";this.Ci=(new E(NaN,NaN,NaN,NaN)).freeze();this.rm=Nd;this.Tm=this.$d=m;this.Nj=p}v.H("Picture",Pj);v.pa(Pj,R);Pj.prototype.jb=function(a){R.prototype.jb.call(this,a);a.Nf=this.Nf;a.Hq=this.Hq;a.Ci.Ra(this.Ci);a.rm=this.rm;a.$d=this.$d};Pj.prototype.toString=function(){return"Picture("+this.source+")#"+v.kc(this)};v.a(Pj,"element",Pj.prototype.element);
v.defineProperty(Pj,{element:"element"},s("Nf"),function(a){var b=this.Nf;if(b!==a){a instanceof HTMLImageElement||(a instanceof HTMLVideoElement||a instanceof HTMLCanvasElement)||v.g("Picture.element must be an instance of Image, Canvas, or Video.");var c=this;a.onerror=function(a){c.$d!==m&&c.$d(c,a)};this.Nf=a;this.d("element",b,a);a.complete===h||a.complete===f?(this.Nj=h,this.ma.aa()||(this.$b=p,this.J())):(v.sx.push(this),v.Et===m&&(v.Et=setInterval(function(){for(var a=[],b=v.sx,c=b.length,
i=0;i<c;i++){var j=b[i];$k(j)||a.push(j)}0===a.length&&(clearInterval(v.Et),v.Et=m);v.sx=a},600)))}});function $k(a){var b=a.Nf;if(!b)return h;if(!b.complete)return p;if(a.Nj===h)return h;a.Nj=h;if(a.b)a.ma.aa()||(a.$b=p,a.J(),a.b.ai()),yh(a.b);else{var a=v.Iz,c=a.length;if(0===c)for(var c=document.getElementsByTagName("canvas"),d=c.length,b=0;b<d;b++){var e=c[b];e.parentElement&&e.parentElement.L&&a.push(e.parentElement.L)}c=a.length;for(b=0;b<c;b++)yh(a[b])}return h}
function al(a){var b=document.createElement("canvas").getContext("2d");b.drawImage(a.Nf,0,0);try{b.getImageData(0,0,1,1),a.Tm=p}catch(c){a.Tm=h}}v.a(Pj,"source",Pj.prototype.source);v.defineProperty(Pj,{source:"source"},s("Hq"),function(a){var b=this.Hq;if(b!==a)if(v.e(a,"string",Pj,"source"),this.Hq=a,this.d("source",b,a),b=v.cE,b[a]!==f)this.element=b[a];else{var c=new Image;c.src=a;this.element=b[a]=c}});v.a(Pj,"sourceRect",Pj.prototype.zf);
v.defineProperty(Pj,{zf:"sourceRect"},s("Ci"),function(a){var b=this.Ci;b.u(a)||(v.c(a,E,Pj,"sourceRect"),this.Ci=a=a.B(),this.d("sourceRect",b,a))});v.a(Pj,"imageStretch",Pj.prototype.eC);v.defineProperty(Pj,{eC:"imageStretch"},s("rm"),function(a){var b=this.rm;b!==a&&(v.Ua(a,R,Pj,"imageStretch"),this.rm=a,this.d("imageStretch",b,a))});v.a(Pj,"errorFunction",Pj.prototype.pr);
v.defineProperty(Pj,{pr:"errorFunction"},s("$d"),function(a){var b=this.$d;if(b!==a){a!==m&&v.e(a,"function",Pj,"errorFunction");this.$d=a;if(this.Nf){var c=this;this.Nf.onerror=function(a){c.$d!==m&&c.$d(c,a)}}this.d("errorFunction",b,a)}});
Pj.prototype.qn=function(a,b){if(!b.So&&(this.Tm===m&&al(this),this.Tm))return;var c=this.Nf;if(c!==m){var d=c.src;(d===m||""===d)&&v.g("Element has no source attribute: "+c);var d=this.ua,e=0,g=0,i=c.naturalWidth,j=c.naturalHeight;if(!(0===i||0===j)){i===f&&c.videoWidth&&(i=c.videoWidth||d.width);j===f&&c.videoHeight&&(j=c.videoHeight||d.height);this.zf.aa()&&(e=this.Ci.x,g=this.Ci.y,i=this.Ci.width,j=this.Ci.height);var k=i,l=j,n=this.rm;switch(n){case Xi:if(this.zf.aa())break;e+=Math.max((k-d.width)/
2,0);g+=Math.max((l-d.height)/2,0);i=Math.min(d.width,k);j=Math.min(d.height,l);break;case Nd:k=d.width;l=d.height;break;case Tg:case Ug:n===Tg?(n=Math.min(d.height/l,d.width/k),k*=n,l*=n):n===Ug&&(n=Math.max(d.height/l,d.width/k),k*=n,l*=n,e+=(k-d.width)/2,g+=(l-d.height)/2,i*=1/(k/d.width),j*=1/(l/d.height),k=d.width,l=d.height)}a.drawImage(c,e,g,i,j,Math.max((d.width-k)/2,0),Math.max((d.height-l)/2,0),Math.min(d.width,k),Math.min(d.height,l))}}};v.m(Pj,{ua:"naturalBounds"},s("qc"));
Pj.prototype.Lr=function(a,b,c,d){var e=this.ma,g=cj(this),i=this.Nf;!this.Nj&&(i&&i.complete)&&(this.Nj=h);i===m&&(b=a=0);g!==Nd&&g!==Zi?isFinite(e.width)?a=e.width:i!==m&&this.Nj!==p&&(a=this.zf.aa()?this.zf.width:i.naturalWidth):(isFinite(a)||(a=this.zf.aa()?this.zf.width:i.naturalWidth),c=0);g!==Nd&&g!==Yi?isFinite(e.height)?b=e.height:i!==m&&this.Nj!==p&&(b=this.zf.aa()?this.zf.height:i.naturalHeight):(isFinite(b)||(b=this.zf.aa()?this.zf.height:i.naturalHeight),d=0);e=this.Dd;g=this.Wd;c=Math.max(c/
this.scale,g.width);d=Math.max(d/this.scale,g.height);a=Math.min(e.width,a);b=Math.min(e.height,b);a=Math.max(c,a);b=Math.max(d,b);i!==m&&!i.complete&&(isFinite(a)||(a=0),isFinite(b)||(b=0));Ab(this.qc,a,b);$i(this,0,0,a,b)};Pj.prototype.Gi=function(a,b,c,d){fj(this,a,b,c,d)};
Pj.prototype.ng=function(){R.prototype.ng.call(this);var a=this.b;if(a!==m){Ni(a,"source",this.source);Ni(a,"imageStretch",this.eC);this.zf.aa()&&Ni(a,"sourceRect",this.zf);var b,c;this instanceof Pj&&this.element!==m&&(c=a.th.ca(v.kc(this.element)));b="number"===typeof c?c:-1;if(-1<b)a=a.sg,a.add(","),La(a),a.add('"base64": { "class":"ref", "id":'+b+" }");else{c=this.Nf;b=c.naturalWidth;var d=c.naturalHeight;this.Tm===m&&al(this);if(!(this.Nj===p||this.Tm===h||0===b||0===d)){b===f&&c.videoWidth&&
(b=c.videoWidth);d===f&&c.videoHeight&&(d=c.videoHeight);var e=document.createElement("canvas");e.width=b;e.height=d;e.getContext("2d").drawImage(c,0,0);c=e.toDataURL();b=-1;this instanceof Pj&&this.element!==m&&(v.Cn(this.element),b=a.th.count,a.th.add(v.kc(this.element),b));-1<b?(a=a.sg,a.add(","),La(a),a.add('"base64": { "id":'+b+', "value":"'+c+'" }')):Ni(a,"base64",c)}}}};function J(){this.k=new Kd;this.ec=m}
function K(a,b,c,d,e){a.k===m&&v.g("StreamGeometryContext has been closed");e!==f&&e===h?(a.ec===m&&v.g("Need to call beginFigure first"),d=new Ae(de),d.N=b,d.O=c,a.ec.gb.add(d)):(a.ec=new Md,a.ec.Ba=b,a.ec.Ca=c,a.ec.Fr=d,a.k.Ib.add(a.ec))}function N(a){a.k===m&&v.g("StreamGeometryContext has been closed");a.ec===m&&v.g("Need to call beginFigure first");var b=a.ec.gb.length;0<b&&a.ec.gb.i[b-1].close()}
function bl(a){a.k===m&&v.g("StreamGeometryContext has been closed");a.ec===m&&v.g("Need to call beginFigure first");a.ec.Dl=p}J.prototype.moveTo=function(a,b,c){this.k===m&&v.g("StreamGeometryContext has been closed");this.ec===m&&v.g("Need to call beginFigure first");var d=new Ae(de);d.N=a;d.O=b;c&&d.close();this.ec.gb.add(d)};
J.prototype.lineTo=function(a,b,c){this.k===m&&v.g("StreamGeometryContext has been closed");this.ec===m&&v.g("Need to call beginFigure first");var d=new Ae(ae);d.N=a;d.O=b;c&&d.close();this.ec.gb.add(d)};function L(a,b,c,d,e,g,i,j){a.k===m&&v.g("StreamGeometryContext has been closed");a.ec===m&&v.g("Need to call beginFigure first");var k=new Ae(me);k.zc=b;k.qd=c;k.pk=d;k.qk=e;k.N=g;k.O=i;j&&k.close();a.ec.gb.add(k)}
function ce(a,b,c,d,e){a.k===m&&v.g("StreamGeometryContext has been closed");a.ec===m&&v.g("Need to call beginFigure first");var g=new Ae(ne);g.zc=b;g.qd=c;g.N=d;g.O=e;a.ec.gb.add(g)}J.prototype.arcTo=function(a,b,c,d,e,g,i){this.k===m&&v.g("StreamGeometryContext has been closed");this.ec===m&&v.g("Need to call beginFigure first");var j=new Ae(oe);j.fi=a;j.cj=b;j.za=c;j.Aa=d;j.Il=e;g&&(j.Wn=g);i&&j.close();this.ec.gb.add(j)};
function cl(a,b,c,d,e,g,i,j,k,l,n,r,q,u){var x=1-k,a=a*x+c*k,b=b*x+d*k,c=c*x+e*k,d=d*x+g*k,e=e*x+i*k,g=g*x+j*k,j=a*x+c*k,i=b*x+d*k,c=c*x+e*k,d=d*x+g*k;l.x=a;l.y=b;n.x=j;n.y=i;r.x=j*x+c*k;r.y=i*x+d*k;q.x=c;q.y=d;u.x=e;u.y=g}function dl(a){var a=el(a),b=[];b[0]=a[0];for(var c=1,d=1;c<a.length;c+=2,d+=3)b[d]=a[c],b[d+1]=a[c],b[d+2]=a[c+1];return b}
function el(a){for(var b=fl(a),c=[],d=Math.floor(b.length/2),e=b.length-1,a=0===a%2?2:1,g=0;g<e;g++){var i=b[g],j=b[g+1],k=b[(d+g-1)%e],l=b[(d+g+a)%e];c[2*g]=i;c[2*g+1]=gl(i.x,i.y,k.x,k.y,j.x,j.y,l.x,l.y)}c[c.length]=c[0];return c}function gl(a,b,c,d,e,g,i,j){c=a-c;i=e-i;0===c||0===i?0===c?(i=(g-j)/i,j=a,e=i*j+(g-i*e)):(d=(b-d)/c,j=e,e=d*j+(b-d*a)):(d=(b-d)/c,i=(g-j)/i,a=b-d*a,j=(g-i*e-a)/(d-i),e=d*j+a);return new C(j,e)}
function fl(a){for(var b=[],c=1.5*Math.PI,d=0,e=0;e<a;e++)d=2*Math.PI/a*e+c,b[e]=new C(0.5+0.5*Math.cos(d),0.5+0.5*Math.sin(d));b.push(b[0]);return b}
var Mk={None:"Rectangle",Rectangle:function(a,b,c){a=new Kd;a.type=Vd;a.Ba=0;a.Ca=0;a.N=b;a.O=c;return a},Circle:function(a,b,c){a=new Kd;a.Nb=Tg;a.type=Zd;a.Ba=0;a.Ca=0;a.N=b;a.O=c;a.n=new H(0.156,0.156);a.o=new H(0.844,0.844);return a},Connector:"Ellipse",Ellipse:function(a,b,c){a=new Kd;a.type=Zd;a.Ba=0;a.Ca=0;a.N=b;a.O=c;a.n=new H(0.156,0.156);a.o=new H(0.844,0.844);return a},TriangleRight:function(a,b,c){var a=new Kd,d=new Md,e=new Ae;e.N=b;e.O=0.5*c;d.gb.add(e);b=new Ae;b.N=0;b.O=c;d.gb.add(b.close());
a.Ib.add(d);a.n=new H(0,0.25);a.o=new H(0.5,0.75);return a},TriangleDown:function(a,b,c){var a=new Kd,d=new Md,e=new Ae;e.N=b;e.O=0;d.gb.add(e);e=new Ae;e.N=0.5*b;e.O=c;d.gb.add(e.close());a.Ib.add(d);a.n=new H(0.25,0);a.o=new H(0.75,0.5);return a},TriangleLeft:function(a,b,c){var a=new Kd,d=new Md;d.Ba=b;d.Ca=c;var e=new Ae;e.N=0;e.O=0.5*c;d.gb.add(e);c=new Ae;c.N=b;c.O=0;d.gb.add(c.close());a.Ib.add(d);a.n=new H(0.5,0.25);a.o=new H(1,0.75);return a},TriangleUp:function(a,b,c){var a=new Kd,d=new Md;
d.Ba=b;d.Ca=c;var e=new Ae;e.N=0;e.O=c;d.gb.add(e);c=new Ae;c.N=0.5*b;c.O=0;d.gb.add(c.close());a.Ib.add(d);a.n=new H(0.25,0.5);a.o=new H(0.75,1);return a},Line1:function(a,b,c){a=new Kd;a.type=Od;a.Ba=0;a.Ca=0;a.N=b;a.O=c;return a},Line2:function(a,b,c){a=new Kd;a.type=Od;a.Ba=b;a.Ca=0;a.N=0;a.O=c;return a},MinusLine:"LineH",LineH:function(a,b,c){a=new Kd;a.type=Od;a.Ba=0;a.Ca=c/2;a.N=b;a.O=c/2;return a},LineV:function(a,b,c){a=new Kd;a.type=Od;a.Ba=b/2;a.Ca=0;a.N=b/2;a.O=c;return a},Curve1:function(a,
b,c){a=new J;K(a,0,0,p);L(a,Rc*b,0,1*b,(1-Rc)*c,b,c);return a.k},Curve2:function(a,b,c){a=new J;K(a,0,0,p);L(a,0,Rc*c,(1-Rc)*b,c,b,c);return a.k},Curve3:function(a,b,c){a=new J;K(a,1*b,0,p);L(a,1*b,Rc*c,Rc*b,1*c,0,1*c);return a.k},Curve4:function(a,b,c){a=new J;K(a,1*b,0,p);L(a,(1-Rc)*b,0,0,(1-Rc)*c,0,1*c);return a.k},Alternative:"Triangle",Merge:"Triangle",Triangle:function(a,b,c){a=new J;K(a,0.5*b,0*c,h);a.lineTo(0*b,1*c);a.lineTo(1*b,1*c,h);b=a.k;b.n=new H(0.25,0.5);b.o=new H(0.75,1);return b},
Decision:"Diamond",Diamond:function(a,b,c){a=new J;K(a,0.5*b,0,h);a.lineTo(0,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0.5*c,h);b=a.k;b.n=new H(0.25,0.25);b.o=new H(0.75,0.75);return b},Pentagon:function(a,b,c){var a=fl(5),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;5>e;e++)d.lineTo(a[e].x*b,a[e].y*c);N(d);b=d.k;b.n=new H(0.2,0.22);b.o=new H(0.8,0.9);return b},DataTransmission:"Hexagon",Hexagon:function(a,b,c){var a=fl(6),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;6>e;e++)d.lineTo(a[e].x*b,a[e].y*
c);N(d);b=d.k;b.n=new H(0.07,0.25);b.o=new H(0.93,0.75);return b},Heptagon:function(a,b,c){var a=fl(7),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;7>e;e++)d.lineTo(a[e].x*b,a[e].y*c);N(d);b=d.k;b.n=new H(0.2,0.15);b.o=new H(0.8,0.85);return b},Octagon:function(a,b,c){var a=fl(8),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;8>e;e++)d.lineTo(a[e].x*b,a[e].y*c);N(d);b=d.k;b.n=new H(0.15,0.15);b.o=new H(0.85,0.85);return b},Nonagon:function(a,b,c){var a=fl(9),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=
1;9>e;e++)d.lineTo(a[e].x*b,a[e].y*c);N(d);b=d.k;b.n=new H(0.17,0.13);b.o=new H(0.82,0.82);return b},Decagon:function(a,b,c){var a=fl(10),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;10>e;e++)d.lineTo(a[e].x*b,a[e].y*c);N(d);b=d.k;b.n=new H(0.16,0.16);b.o=new H(0.84,0.84);return b},Dodecagon:function(a,b,c){var a=fl(12),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;12>e;e++)d.lineTo(a[e].x*b,a[e].y*c);N(d);b=d.k;b.n=new H(0.16,0.16);b.o=new H(0.84,0.84);return b},FivePointedStar:function(a,b,c){var a=
el(5),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;10>e;e++)d.lineTo(a[e].x*b,a[e].y*c);N(d);b=d.k;b.n=new H(0.312,0.383);b.o=new H(0.693,0.765);return b},SixPointedStar:function(a,b,c){var a=el(6),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;12>e;e++)d.lineTo(a[e].x*b,a[e].y*c);N(d);b=d.k;b.n=new H(0.17,0.251);b.o=new H(0.833,0.755);return b},SevenPointedStar:function(a,b,c){var a=el(7),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;14>e;e++)d.lineTo(a[e].x*b,a[e].y*c);N(d);b=d.k;b.n=new H(0.363,0.361);
b.o=new H(0.641,0.709);return b},EightPointedStar:function(a,b,c){var a=el(8),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;16>e;e++)d.lineTo(a[e].x*b,a[e].y*c);N(d);b=d.k;b.n=new H(0.252,0.255);b.o=new H(0.75,0.75);return b},NinePointedStar:function(a,b,c){var a=el(9),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;18>e;e++)d.lineTo(a[e].x*b,a[e].y*c);N(d);b=d.k;b.n=new H(0.355,0.361);b.o=new H(0.645,0.651);return b},TenPointedStar:function(a,b,c){var a=el(10),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=
1;20>e;e++)d.lineTo(a[e].x*b,a[e].y*c);N(d);b=d.k;b.n=new H(0.281,0.261);b.o=new H(0.723,0.748);return b},FivePointedBurst:function(a,b,c){var a=dl(5),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e+=3)L(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);N(d);b=d.k;b.n=new H(0.312,0.383);b.o=new H(0.693,0.765);return b},SixPointedBurst:function(a,b,c){var a=dl(6),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e+=3)L(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*
b,a[e+2].y*c);N(d);b=d.k;b.n=new H(0.17,0.251);b.o=new H(0.833,0.755);return b},SevenPointedBurst:function(a,b,c){var a=dl(7),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e+=3)L(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);N(d);b=d.k;b.n=new H(0.363,0.361);b.o=new H(0.641,0.709);return b},EightPointedBurst:function(a,b,c){var a=dl(8),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e+=3)L(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);N(d);b=
d.k;b.n=new H(0.252,0.255);b.o=new H(0.75,0.75);return b},NinePointedBurst:function(a,b,c){var a=dl(9),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e+=3)L(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);N(d);b=d.k;b.n=new H(0.355,0.361);b.o=new H(0.645,0.651);return b},TenPointedBurst:function(a,b,c){var a=dl(10),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e+=3)L(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);N(d);b=d.k;b.n=new H(0.281,0.261);
b.o=new H(0.723,0.748);return b},Cloud:function(a,b,c){a=new J;K(a,0.08034461*b,0.1944299*c,h);L(a,-0.09239631*b,0.07836421*c,0.1406031*b,-0.0542823*c,0.2008615*b,0.05349299*c);L(a,0.2450511*b,-0.00697547*c,0.3776197*b,-0.01112067*c,0.4338609*b,0.074219*c);L(a,0.4539471*b,0,0.6066018*b,-0.02526587*c,0.6558228*b,0.07004196*c);L(a,0.6914277*b,-0.01904177*c,0.8921095*b,-0.01220843*c,0.8921095*b,0.08370865*c);L(a,1.036446*b,0.04105738*c,1.020377*b,0.3022052*c,0.9147671*b,0.3194596*c);L(a,1.04448*b,0.360238*
c,0.992256*b,0.5219009*c,0.9082935*b,0.562044*c);L(a,1.032337*b,0.5771781*c,1.018411*b,0.8120651*c,0.9212406*b,0.8217117*c);L(a,1.028411*b,0.9571472*c,0.8556702*b,1.052487*c,0.7592566*b,0.9156953*c);L(a,0.7431877*b,1.009325*c,0.5624123*b,1.021761*c,0.5101666*b,0.9310455*c);L(a,0.4820677*b,1.031761*c,0.3030112*b,1.002796*c,0.2609328*b,0.9344623*c);L(a,0.2329994*b,1.01518*c,0.03213784*b,1.01518*c,0.08034461*b,0.870098*c);L(a,-0.02812061*b,0.9032597*c,-0.01205169*b,0.6835638*c,0.06829292*b,0.6545475*
c);L(a,-0.01812061*b,0.6089503*c,-0.00606892*b,0.4555777*c,0.06427569*b,0.4265613*c);L(a,-0.01606892*b,0.3892545*c,-0.01205169*b,0.1944299*c,0.08034461*b,0.1944299*c);N(a);b=a.k;b.n=new H(0.1,0.1);b.o=new H(0.9,0.9);return b},Gate:"Crescent",Crescent:function(a,b,c){a=new J;K(a,0,0,h);L(a,1*b,0,1*b,1*c,0,1*c);L(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);N(a);b=a.k;b.n=new H(0.511,0.19);b.o=new H(0.776,0.76);return b},FramedRectangle:function(a,b,c){var d=new J,e=a?a.Kb:0,a=a?a.Wr:0;0===e&&(e=0.1);0===a&&(a=
0.1);K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c,h);K(d,e*b,a*c,p,h);d.lineTo(e*b,(1-a)*c);d.lineTo((1-e)*b,(1-a)*c);d.lineTo((1-e)*b,a*c,h);b=d.k;b.n=new H(e,a);b.o=new H(1-e,1-a);return b},Delay:"HalfEllipse",HalfEllipse:function(a,b,c){a=new J;K(a,0,0,h);L(a,Rc*b,0,1*b,(0.5-Rc/2)*c,1*b,0.5*c);L(a,1*b,(0.5+Rc/2)*c,Rc*b,1*c,0,1*c);N(a);b=a.k;b.n=new H(0,0.2);b.o=new H(0.75,0.8);return b},Heart:function(a,b,c){a=new J;K(a,0.5*b,1*c,h);L(a,0.1*b,0.8*c,0,0.5*c,0*b,0.3*c);L(a,0*b,0,0.45*
b,0,0.5*b,0.3*c);L(a,0.55*b,0,1*b,0,1*b,0.3*c);L(a,b,0.5*c,0.9*b,0.8*c,0.5*b,1*c);N(a);b=a.k;b.n=new H(0.15,0.29);b.o=new H(0.86,0.68);return b},Spade:function(a,b,c){a=new J;K(a,0.5*b,0,h);a.lineTo(0.51*b,0.01*c);L(a,0.6*b,0.2*c,b,0.25*c,b,0.5*c);L(a,b,0.8*c,0.6*b,0.8*c,0.55*b,0.7*c);L(a,0.5*b,0.75*c,0.55*b,0.95*c,0.75*b,c);a.lineTo(0.25*b,c);L(a,0.45*b,0.95*c,0.5*b,0.75*c,0.45*b,0.7*c);L(a,0.4*b,0.8*c,0,0.8*c,0,0.5*c);L(a,0,0.25*c,0.4*b,0.2*c,0.49*b,0.01*c);N(a);b=a.k;b.n=new H(0.19,0.26);b.o=new H(0.8,
0.68);return b},Club:function(a,b,c){a=new J;K(a,0.4*b,0.6*c,h);L(a,0.5*b,0.75*c,0.45*b,0.95*c,0.15*b,1*c);a.lineTo(0.85*b,c);L(a,0.55*b,0.95*c,0.5*b,0.75*c,0.6*b,0.6*c);var d=0.2,e=0.3,g=0,i=d*(4*(Math.SQRT2-1)/3);L(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);L(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);L(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e+0.05)*b,(0.5-i+g-0.02)*c,
0.65*b,0.36771243*c);d=0.2;e=0;g=-0.3;i=d*(4*(Math.SQRT2-1)/3);L(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);L(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,0.35*b,0.36771243*c);d=0.2;e=-0.3;g=0;i=d*(4*(Math.SQRT2-1)/3);L(a,(0.5+d+e-0.05)*b,(0.5-i+g-0.02)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5-i+e)*
b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);L(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,0.4*b,0.6*c);N(a);b=a.k;b.n=new H(0.06,0.39);b.o=new H(0.93,0.58);return b},YinYang:function(a,b,c){var a=0.5,d=new J,a=0.5;K(d,0.5*b,0,h);d.arcTo(270,180,0.5*b,0.5*b,0.5*b);L(d,1*b,a*c,0,a*c,a*b,0,h);var a=0.1,e=0.25;K(d,(0.5+a)*b,e*c,h,h);d.arcTo(0,-360,0.5*b,c*e,a*b);N(d);K(d,0.5*b,0,p);d.arcTo(270,-180,0.5*b,
0.5*b,0.5*b);bl(d);e=0.75;K(d,(0.5+a)*b,e*c,h);d.arcTo(0,360,0.5*b,c*e,a*b);N(d);b=d.k;b.Nb=Tg;return b},Peace:function(a,b,c){var a=new J,d=0.5*(4*(Math.SQRT2-1)/3);K(a,b,0.5*c,h);L(a,b,(0.5-d)*c,(0.5+d)*b,0,0.5*b,0);L(a,(0.5-d)*b,0,0,(0.5-d)*c,0,0.5*c);L(a,0,(0.5+d)*c,(0.5-d)*b,c,0.5*b,c);L(a,(0.5+d)*b,c,b,(0.5+d)*c,b,0.5*c);d=0.4*(4*(Math.SQRT2-1)/3);K(a,0.5*b,0.1*c,h,h);L(a,(0.5+d)*b,0.1*c,0.9*b,(0.5-d)*c,0.9*b,0.5*c);L(a,0.9*b,(0.5+d)*c,(0.5+d)*b,0.9*c,0.5*b,0.9*c);L(a,(0.5-d)*b,0.9*c,0.1*b,
(0.5+d)*c,0.1*b,0.5*c);L(a,0.1*b,(0.5-d)*c,(0.5-d)*b,0.1*c,0.5*b,0.1*c);var d=0.07,e=0,g=-0.707*0.11,i=d*(4*(Math.SQRT2-1)/3);K(a,(0.5+d+e)*b,(0.5+g)*c,h);L(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);L(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);d=0.07;e=-0.707*0.11;g=0.707*0.11;i=d*(4*(Math.SQRT2-
1)/3);K(a,(0.5+d+e)*b,(0.5+g)*c,h);L(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);L(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);d=0.07;e=0.707*0.11;g=0.707*0.11;i=d*(4*(Math.SQRT2-1)/3);K(a,(0.5+d+e)*b,(0.5+g)*c,h);L(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,
(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);L(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);b=a.k;b.n=new H(0.146,0.146);b.o=new H(0.853,0.853);b.Nb=Tg;return b},NotAllowed:function(a,b,c){var a=0.5*Rc,d=0.5,e=new J;K(e,0.5*b,(0.5-d)*c,h);L(e,(0.5-a)*b,(0.5-d)*c,(0.5-d)*b,(0.5-a)*c,(0.5-d)*b,0.5*c);L(e,(0.5-d)*b,(0.5+a)*c,(0.5-a)*b,(0.5+d)*c,0.5*b,(0.5+d)*c);L(e,(0.5+a)*
b,(0.5+d)*c,(0.5+d)*b,(0.5+a)*c,(0.5+d)*b,0.5*c);L(e,(0.5+d)*b,(0.5-a)*c,(0.5+a)*b,(0.5-d)*c,0.5*b,(0.5-d)*c);var d=0.4,a=0.4*Rc,g=new C(0,0),i=new C(0,0),j=new C(0,0),k=new C(0,0);cl(0.5,0.5-d,0.5+a,0.5-d,0.5+d,0.5-a,0.5+d,0.5,0.42,g,i,j,k,k);var l=new C(0,0),n=new C(0,0),r=new C(0,0);cl(0.5,0.5-d,0.5+a,0.5-d,0.5+d,0.5-a,0.5+d,0.5,0.58,k,k,r,l,n);var q=new C(0,0),u=new C(0,0),x=new C(0,0);cl(0.5,0.5+d,0.5-a,0.5+d,0.5-d,0.5+a,0.5-d,0.5,0.42,q,u,x,k,k);var z=new C(0,0),D=new C(0,0),F=new C(0,0);cl(0.5,
0.5+d,0.5-a,0.5+d,0.5-d,0.5+a,0.5-d,0.5,0.58,k,k,F,z,D);K(e,F.x*b,F.y*c,h,h);L(e,z.x*b,z.y*c,D.x*b,D.y*c,(0.5-d)*b,0.5*c);L(e,(0.5-d)*b,(0.5-a)*c,(0.5-a)*b,(0.5-d)*c,0.5*b,(0.5-d)*c);L(e,g.x*b,g.y*c,i.x*b,i.y*c,j.x*b,j.y*c);e.lineTo(F.x*b,F.y*c);N(e);K(e,x.x*b,x.y*c,h,h);e.lineTo(r.x*b,r.y*c);L(e,l.x*b,l.y*c,n.x*b,n.y*c,(0.5+d)*b,0.5*c);L(e,(0.5+d)*b,(0.5+a)*c,(0.5+a)*b,(0.5+d)*c,0.5*b,(0.5+d)*c);L(e,q.x*b,q.y*c,u.x*b,u.y*c,x.x*b,x.y*c);N(e);e.k.Nb=Tg;return e.k},Fragile:function(a,b,c){a=new J;K(a,
0,0,h);a.lineTo(0.25*b,0);a.lineTo(0.2*b,0.15*c);a.lineTo(0.3*b,0.25*c);a.lineTo(0.29*b,0.33*c);a.lineTo(0.35*b,0.25*c);a.lineTo(0.3*b,0.15*c);a.lineTo(0.4*b,0);a.lineTo(1*b,0);L(a,1*b,0.25*c,0.75*b,0.5*c,0.55*b,0.5*c);a.lineTo(0.55*b,0.9*c);a.lineTo(0.7*b,0.9*c);a.lineTo(0.7*b,1*c);a.lineTo(0.3*b,1*c);a.lineTo(0.3*b,0.9*c);a.lineTo(0.45*b,0.9*c);a.lineTo(0.45*b,0.5*c);L(a,0.25*b,0.5*c,0,0.25*c,0,0);N(a);b=a.k;b.n=new H(0.25,0);b.o=new H(0.75,0.4);return b},HourGlass:function(a,b,c){a=new J;K(a,0.65*
b,0.5*c,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0.35*b,0.5*c);a.lineTo(0,0);a.lineTo(1*b,0);N(a);return a.k},Lightning:function(a,b,c){a=new J;K(a,0*b,0.55*c,h);a.lineTo(0.75*b,0);a.lineTo(0.25*b,0.45*c);a.lineTo(0.9*b,0.48*c);a.lineTo(0.4*b,1*c);a.lineTo(0.65*b,0.55*c);N(a);return a.k},Parallelogram1:function(a,b,c){a=a?a.Kb:0;0===a&&(a=0.1);var d=new J;K(d,a*b,0,h);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);N(d);b=d.k;b.n=new H(a,0);b.o=new H(1-a,1);return b},Input:"Output",Output:function(a,
b,c){a=new J;K(a,0,1*c,h);a.lineTo(0.1*b,0);a.lineTo(1*b,0);a.lineTo(0.9*b,1*c);N(a);b=a.k;b.n=new H(0.1,0);b.o=new H(0.9,1);return b},Parallelogram2:function(a,b,c){a=a?a.Kb:0;0===a&&(a=0.25);var d=new J;K(d,a*b,0,h);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);N(d);b=d.k;b.n=new H(a,0);b.o=new H(1-a,1);return b},ThickCross:function(a,b,c){a=a?a.Kb:0;0===a&&(a=0.25);var d=new J;K(d,(0.5-a/2)*b,0,h);d.lineTo((0.5+a/2)*b,0);d.lineTo((0.5+a/2)*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5-a/2)*c);d.lineTo(1*
b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,1*c);d.lineTo((0.5-a/2)*b,1*c);d.lineTo((0.5-a/2)*b,(0.5+a/2)*c);d.lineTo(0,(0.5+a/2)*c);d.lineTo(0,(0.5-a/2)*c);d.lineTo((0.5-a/2)*b,(0.5-a/2)*c);N(d);b=d.k;b.n=new H(0.5-a/2,0.5-a/2);b.o=new H(0.5+a/2,0.5+a/2);return b},ThickX:function(a,b,c){var a=0.25/Math.SQRT2,d=new J;K(d,0.3*b,0,h);d.lineTo(0.5*b,0.2*c);d.lineTo(0.7*b,0);d.lineTo(1*b,0.3*c);d.lineTo(0.8*b,0.5*c);d.lineTo(1*b,0.7*c);d.lineTo(0.7*b,1*c);d.lineTo(0.5*b,0.8*
c);d.lineTo(0.3*b,1*c);d.lineTo(0,0.7*c);d.lineTo(0.2*b,0.5*c);d.lineTo(0,0.3*c);N(d);b=d.k;b.n=new H(0.5-a,0.5-a);b.o=new H(0.5+a,0.5+a);return b},ThinCross:function(a,b,c){a=a?a.Kb:0;0===a&&(a=0.1);var d=new J;K(d,(0.5-a/2)*b,0,h);d.lineTo((0.5+a/2)*b,0);d.lineTo((0.5+a/2)*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,1*c);d.lineTo((0.5-a/2)*b,1*c);d.lineTo((0.5-a/2)*b,(0.5+a/2)*c);d.lineTo(0,(0.5+a/2)*c);d.lineTo(0,(0.5-
a/2)*c);d.lineTo((0.5-a/2)*b,(0.5-a/2)*c);N(d);return d.k},ThinX:function(a,b,c){a=new J;K(a,0.1*b,0,h);a.lineTo(0.5*b,0.4*c);a.lineTo(0.9*b,0);a.lineTo(1*b,0.1*c);a.lineTo(0.6*b,0.5*c);a.lineTo(1*b,0.9*c);a.lineTo(0.9*b,1*c);a.lineTo(0.5*b,0.6*c);a.lineTo(0.1*b,1*c);a.lineTo(0,0.9*c);a.lineTo(0.4*b,0.5*c);a.lineTo(0,0.1*c);N(a);return a.k},RightTriangle:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);N(a);b=a.k;b.n=new H(0,0.5);b.o=new H(0.5,1);return b},RoundedIBeam:function(a,
b,c){a=new J;K(a,0,0,h);a.lineTo(1*b,0);L(a,0.5*b,0.25*c,0.5*b,0.75*c,1*b,1*c);a.lineTo(0,1*c);L(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);N(a);return a.k},RoundedRectangle:function(a,b,c){var d=a?a.Kb:0;0>=d&&(d=5);var d=Math.min(d,b/3),d=Math.min(d,c/3),a=d*Rc,e=new J;K(e,d,0,h);e.lineTo(b-d,0);L(e,b-a,0,b,a,b,d);e.lineTo(b,c-d);L(e,b,c-a,b-a,c,b-d,c);e.lineTo(d,c);L(e,a,c,0,c-a,0,c-d);e.lineTo(0,d);L(e,0,a,a,0,d,0);N(e);b=e.k;1<a?(b.n=new H(0,0,a,a),b.o=new H(1,1,-a,-a)):(b.n=pc,b.o=zc);return b},Border:function(a,
b,c){a=a?a.Kb:0;0>=a&&(a=5);var a=Math.min(a,b/3),a=Math.min(a,c/3),d=new J;K(d,a,0,h);d.lineTo(b-a,0);L(d,b-0,0,b,0,b,a);d.lineTo(b,c-a);L(d,b,c-0,b-0,c,b-a,c);d.lineTo(a,c);L(d,0,c,0,c-0,0,c-a);d.lineTo(0,a);L(d,0,0,0,0,a,0);N(d);b=d.k;b.n=pc;b.o=zc;return b},SquareIBeam:function(a,b,c){a=a?a.Kb:0;0===a&&(a=0.2);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,a*c);d.lineTo((0.5+a/2)*b,a*c);d.lineTo((0.5+a/2)*b,(1-a)*c);d.lineTo(1*b,(1-a)*c);d.lineTo(1*b,1*c);d.lineTo(0,1*c);d.lineTo(0,(1-a)*
c);d.lineTo((0.5-a/2)*b,(1-a)*c);d.lineTo((0.5-a/2)*b,a*c);d.lineTo(0,a*c);N(d);return d.k},Trapezoid:function(a,b,c){a=a?a.Kb:0;0===a&&(a=0.2);var d=new J;K(d,a*b,0,h);d.lineTo((1-a)*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);N(d);b=d.k;b.n=new H(a,0);b.o=new H(1-a,1);return b},ManualLoop:"ManualOperation",ManualOperation:function(a,b,c){var a=a?a.Kb:0,d=new J;K(d,a,0,h);d.lineTo(0,0);d.lineTo(1*b,0);d.lineTo(0.9*b,1*c);d.lineTo(0.1*b,1*c);N(d);b=d.k;b.n=new H(0.1,0);b.o=new H(0.9,1);return b},GenderMale:function(a,
b,c){var a=new J,d=0.4*Rc,e=0.4,g=new C(0,0),i=new C(0,0),j=new C(0,0),k=new C(0,0);K(a,(0.5-e)*b,0.5*c,h);L(a,(0.5-e)*b,(0.5-d)*c,(0.5-d)*b,(0.5-e)*c,0.5*b,(0.5-e)*c);cl(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+e,0.5,0.44,j,k,i,g,g);L(a,j.x*b,j.y*c,k.x*b,k.y*c,i.x*b,i.y*c);var l=new C(i.x,i.y);cl(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+e,0.5,0.56,g,g,i,j,k);g=new C(i.x,i.y);a.lineTo((0.1*l.x+0.855)*b,0.1*l.y*c);a.lineTo(0.85*b,0.1*l.y*c);a.lineTo(0.85*b,0);a.lineTo(1*b,0);a.lineTo(1*b,0.15*c);a.lineTo((0.1*
g.x+0.9)*b,0.15*c);a.lineTo((0.1*g.x+0.9)*b,(0.1*g.y+0.05*0.9)*c);a.lineTo(g.x*b,g.y*c);L(a,j.x*b,j.y*c,k.x*b,k.y*c,(0.5+e)*b,0.5*c);L(a,(0.5+e)*b,(0.5+d)*c,(0.5+d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);L(a,(0.5-d)*b,(0.5+e)*c,(0.5-e)*b,(0.5+d)*c,(0.5-e)*b,0.5*c);e=0.35;d=0.35*Rc;K(a,0.5*b,(0.5-e)*c,h,h);L(a,(0.5-d)*b,(0.5-e)*c,(0.5-e)*b,(0.5-d)*c,(0.5-e)*b,0.5*c);L(a,(0.5-e)*b,(0.5+d)*c,(0.5-d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);L(a,(0.5+d)*b,(0.5+e)*c,(0.5+e)*b,(0.5+d)*c,(0.5+e)*b,0.5*c);L(a,(0.5+e)*b,(0.5-d)*
c,(0.5+d)*b,(0.5-e)*c,0.5*b,(0.5-e)*c);K(a,(0.5-e)*b,0.5*c,h);b=a.k;b.n=new H(0.202,0.257);b.o=new H(0.692,0.839);b.Nb=Tg;return b},GenderFemale:function(a,b,c){var a=new J,d=0.375,e=0,g=-0.125,i=d*(4*(Math.SQRT2-1)/3);K(a,(0.525+e)*b,(0.5+d+g)*c,h);L(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);L(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5+i+g)*
c,(0.5-i+e)*b,(0.5+d+g)*c,(0.475+e)*b,(0.5+d+g)*c);a.lineTo(0.475*b,0.85*c);a.lineTo(0.425*b,0.85*c);a.lineTo(0.425*b,0.9*c);a.lineTo(0.475*b,0.9*c);a.lineTo(0.475*b,1*c);a.lineTo(0.525*b,1*c);a.lineTo(0.525*b,0.9*c);a.lineTo(0.575*b,0.9*c);a.lineTo(0.575*b,0.85*c);a.lineTo(0.525*b,0.85*c);N(a);d=0.325;e=0;g=-0.125;i=d*(4*(Math.SQRT2-1)/3);K(a,(0.5+d+e)*b,(0.5+g)*c,h,h);L(a,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);L(a,(0.5-i+e)*b,(0.5+d+g)*c,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-
d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+d+e)*b,(0.5+g)*c);K(a,(0.525+e)*b,(0.5+d+g)*c,h);b=a.k;b.n=new H(0.232,0.136);b.o=new H(0.782,0.611);b.Nb=Tg;return b},PlusLine:function(a,b,c){a=new J;K(a,0,0.5*c,p);a.lineTo(1*b,0.5*c);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);return a.k},XLine:function(a,b,c){a=new J;K(a,0,1*c,p);a.lineTo(1*b,0);a.moveTo(0,0);a.lineTo(1*b,1*c);return a.k},AsteriskLine:function(a,
b,c){var a=new J,d=0.2/Math.SQRT2;K(a,d*b,(1-d)*c,p);a.lineTo((1-d)*b,d*c);a.moveTo(d*b,d*c);a.lineTo((1-d)*b,(1-d)*c);a.moveTo(0*b,0.5*c);a.lineTo(1*b,0.5*c);a.moveTo(0.5*b,0*c);a.lineTo(0.5*b,1*c);return a.k},CircleLine:function(a,b,c){var a=0.5*Rc,d=new J;K(d,1*b,0.5*c,p);L(d,1*b,(0.5+a)*c,(0.5+a)*b,1*c,0.5*b,1*c);L(d,(0.5-a)*b,1*c,0,(0.5+a)*c,0,0.5*c);L(d,0,(0.5-a)*c,(0.5-a)*b,0,0.5*b,0);L(d,(0.5+a)*b,0,1*b,(0.5-a)*c,1*b,0.5*c);b=d.k;b.n=new H(0.146,0.146);b.o=new H(0.853,0.853);b.Nb=Tg;return b},
Pie:function(a,b,c){var a=new J,d=0.5*(4*(Math.SQRT2-1)/3);K(a,(0.5*Math.SQRT2/2+0.5)*b,(0.5-0.5*Math.SQRT2/2)*c,h);L(a,0.7*b,0*c,0.5*b,0*c,0.5*b,0*c);L(a,(0.5-d+0)*b,0*c,0*b,(0.5-d+0)*c,0*b,0.5*c);L(a,0*b,(0.5+d+0)*c,(0.5-d+0)*b,1*c,0.5*b,1*c);L(a,(0.5+d+0)*b,1*c,1*b,(0.5+d+0)*c,1*b,0.5*c);a.lineTo(0.5*b,0.5*c);N(a);return a.k},PiePiece:function(a,b,c){var a=0.5*(Rc/Math.SQRT2),d=Math.SQRT2/2,e=1-Math.SQRT2/2,g=new J;K(g,b,c,h);L(g,b,(1-a)*c,(d+a)*b,(e+a)*c,d*b,e*c);g.lineTo(0,c);N(g);return g.k},
StopSign:function(a,b,c){var d=1/(Math.SQRT2+2),e=new J;K(e,d*b,0,h);e.lineTo((1-d)*b,0);e.lineTo(1*b,d*c);e.lineTo(1*b,(1-d)*c);e.lineTo((1-d)*b,1*c);e.lineTo(d*b,1*c);e.lineTo(0,(1-d)*c);e.lineTo(0,d*c);N(e);b=e.k;a&&ic(a.n)&&(a.n=new H(d/2,d/2));a&&ic(a.o)&&(a.o=new H(1-d/2,1-d/2));return b},LogicImplies:function(a,b,c){a=a?a.Kb:0;0===a&&(a=0.2);var d=new J;K(d,(1-a)*b,0*c,p);d.lineTo(1*b,0.5*c);d.lineTo((1-a)*b,c);d.moveTo(0,0.5*c);d.lineTo(b,0.5*c);b=d.k;b.n=new H(0,0);b.o=new H(0.8,0.5);return b},
LogicIff:function(a,b,c){a=a?a.Kb:0;0===a&&(a=0.2);var d=new J;K(d,(1-a)*b,0*c,p);d.lineTo(1*b,0.5*c);d.lineTo((1-a)*b,c);d.moveTo(0,0.5*c);d.lineTo(b,0.5*c);d.moveTo(a*b,0);d.lineTo(0,0.5*c);d.lineTo(a*b,c);b=d.k;b.n=new H(0.2,0);b.o=new H(0.8,0.5);return b},LogicNot:function(a,b,c){a=new J;K(a,0,0,p);a.lineTo(1*b,0);a.lineTo(1*b,1*c);return a.k},LogicAnd:function(a,b,c){a=new J;K(a,0,1*c,p);a.lineTo(0.5*b,0);a.lineTo(1*b,1*c);b=a.k;b.n=new H(0.25,0.5);b.o=new H(0.75,1);return b},LogicOr:function(a,
b,c){a=new J;K(a,0,0,p);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0);b=a.k;b.n=new H(0.219,0);b.o=new H(0.78,0.409);return b},LogicXor:function(a,b,c){a=new J;K(a,0.5*b,0,p);a.lineTo(0.5*b,1*c);a.moveTo(0,0.5*c);a.lineTo(1*b,0.5*c);var d=0.5*Rc;L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);L(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);b=a.k;b.Nb=Tg;return b},LogicTruth:function(a,b,c){a=new J;K(a,0,0,p);a.lineTo(1*b,0);a.moveTo(0.5*b,0);a.lineTo(0.5*
b,1*c);return a.k},LogicFalsity:function(a,b,c){a=new J;K(a,0,1*c,p);a.lineTo(1*b,1*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*b,0);return a.k},LogicThereExists:function(a,b,c){a=new J;K(a,0,0,p);a.lineTo(1*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0,0.5*c);a.moveTo(1*b,0.5*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);return a.k},LogicForAll:function(a,b,c){a=new J;K(a,0,0,p);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0);a.moveTo(0.25*b,0.5*c);a.lineTo(0.75*b,0.5*c);b=a.k;b.n=new H(0.25,0);b.o=new H(0.75,0.5);return b},LogicIsDefinedAs:function(a,
b,c){a=new J;K(a,0,0,p);a.lineTo(b,0);a.moveTo(0,0.5*c);a.lineTo(b,0.5*c);a.moveTo(0,c);a.lineTo(b,c);b=a.k;b.n=new H(0.01,0.01);b.o=new H(0.99,0.49);return b},LogicIntersect:function(a,b,c){var a=0.5*Rc,d=new J;K(d,0,1*c,p);d.lineTo(0,0.5*c);L(d,0,(0.5-a)*c,(0.5-a)*b,0,0.5*b,0);L(d,(0.5+a)*b,0,1*b,(0.5-a)*c,1*b,0.5*c);d.lineTo(1*b,1*c);b=d.k;b.n=new H(0,0.5);b.o=new H(1,1);return b},LogicUnion:function(a,b,c){var a=0.5*Rc,d=new J;K(d,1*b,0,p);d.lineTo(1*b,0.5*c);L(d,1*b,(0.5+a)*c,(0.5+a)*b,1*c,0.5*
b,1*c);L(d,(0.5-a)*b,1*c,0,(0.5+a)*c,0,0.5*c);d.lineTo(0,0);b=d.k;b.n=new H(0,0);b.o=new H(1,0.5);return b},Arrow:function(a,b,c){var d=a?a.Kb:0,a=a?a.Wr:0;0===d&&(d=0.3);0===a&&(a=0.3);var e=new J;K(e,0,(0.5-a/2)*c,h);e.lineTo((1-d)*b,(0.5-a/2)*c);e.lineTo((1-d)*b,0);e.lineTo(1*b,0.5*c);e.lineTo((1-d)*b,1*c);e.lineTo((1-d)*b,(0.5+a/2)*c);e.lineTo(0,(0.5+a/2)*c);N(e);b=e.k;b.n=new H(0,0.5-a/2);d=gl(0,0.5+a/2,1,0.5+a/2,1-d,1,1,0.5);b.o=new H(d.x,d.y);return b},ISOProcess:"Chevron",Chevron:function(a,
b,c){a=new J;K(a,0,0,h);a.lineTo(0.5*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,1*c);a.lineTo(0.5*b,0.5*c);N(a);return a.k},DoubleArrow:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(0.3*b,0.214*c);a.lineTo(0.3*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.3*b,1*c);a.lineTo(0.3*b,0.786*c);a.lineTo(0,1*c);N(a);K(a,0.3*b,0.214*c,p);a.lineTo(0.3*b,0.786*c);bl(a);return a.k},DoubleEndArrow:function(a,b,c){a=new J;K(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0.3*b,0.7*c);a.lineTo(0.3*
b,1*c);a.lineTo(0,0.5*c);a.lineTo(0.3*b,0);a.lineTo(0.3*b,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);N(a);b=a.k;c=gl(0,0.5,0.3,0,0,0.3,0.3,0.3);b.n=new H(c.x,c.y);c=gl(0.7,1,1,0.5,0.7,0.7,1,0.7);b.o=new H(c.x,c.y);return b},IBeamArrow:function(a,b,c){a=new J;K(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0.2*b,0.7*c);a.lineTo(0.2*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.2*b,0);a.lineTo(0.2*b,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);N(a);b=a.k;b.n=new H(0,0.3);
c=gl(0.7,1,1,0.5,0.7,0.7,1,0.7);b.o=new H(c.x,c.y);return b},Pointer:function(a,b,c){a=new J;K(a,1*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0.2*b,0.5*c);a.lineTo(0,0);N(a);b=a.k;b.n=new H(0.2,0.35);c=gl(0.2,0.65,1,0.65,0,1,1,0.5);b.o=new H(c.x,c.y);return b},RoundedPointer:function(a,b,c){a=new J;K(a,1*b,0.5*c,h);a.lineTo(0,1*c);L(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);N(a);b=a.k;b.n=new H(0.4,0.35);c=gl(0.2,0.65,1,0.65,0,1,1,0.5);b.o=new H(c.x,c.y);return b},SplitEndArrow:function(a,b,c){a=new J;K(a,1*b,0.5*
c,h);a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0,0.7*c);a.lineTo(0.2*b,0.5*c);a.lineTo(0,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);N(a);b=a.k;b.n=new H(0.2,0.3);c=gl(0.7,1,1,0.5,0.7,0.7,1,0.7);b.o=new H(c.x,c.y);return b},MessageToUser:"SquareArrow",SquareArrow:function(a,b,c){a=new J;K(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.7*b,0);N(a);b=a.k;b.n=new H(0,0);b.o=new H(0.7,1);return b},Cone1:function(a,b,c){var a=0.5*Rc,d=0.1*Rc,e=new J;K(e,0,0.9*c,
h);e.lineTo(0.5*b,0);e.lineTo(1*b,0.9*c);L(e,1*b,(0.9+d)*c,(0.5+a)*b,1*c,0.5*b,1*c);L(e,(0.5-a)*b,1*c,0,(0.9+d)*c,0,0.9*c);N(e);b=e.k;b.n=new H(0.25,0.5);b.o=new H(0.75,0.97);return b},Cone2:function(a,b,c){a=new J;K(a,0,0.9*c,h);L(a,(1-0.85/0.9)*b,1*c,0.85/0.9*b,1*c,1*b,0.9*c);a.lineTo(0.5*b,0);a.lineTo(0,0.9*c);N(a);K(a,0,0.9*c,p);L(a,(1-0.85/0.9)*b,0.8*c,0.85/0.9*b,0.8*c,1*b,0.9*c);bl(a);b=a.k;b.n=new H(0.25,0.5);b.o=new H(0.75,0.82);return b},Cube1:function(a,b,c){a=new J;K(a,0.5*b,1*c,h);a.lineTo(1*
b,0.85*c);a.lineTo(1*b,0.15*c);a.lineTo(0.5*b,0*c);a.lineTo(0*b,0.15*c);a.lineTo(0*b,0.85*c);N(a);K(a,0.5*b,1*c,p);a.lineTo(0.5*b,0.3*c);a.lineTo(0,0.15*c);a.moveTo(0.5*b,0.3*c);a.lineTo(1*b,0.15*c);bl(a);b=a.k;b.n=new H(0,0.3);b.o=new H(0.5,0.85);return b},Cube2:function(a,b,c){a=new J;K(a,0,0.3*c,h);a.lineTo(0*b,1*c);a.lineTo(0.7*b,c);a.lineTo(1*b,0.7*c);a.lineTo(1*b,0*c);a.lineTo(0.3*b,0*c);N(a);K(a,0,0.3*c,p);a.lineTo(0.7*b,0.3*c);a.lineTo(1*b,0*c);a.moveTo(0.7*b,0.3*c);a.lineTo(0.7*b,1*c);bl(a);
b=a.k;b.n=new H(0,0.3);b.o=new H(0.7,1);return b},MagneticData:"Cylinder1",Cylinder1:function(a,b,c){var a=0.5*Rc,d=0.1*Rc,e=new J;K(e,0,0.1*c,h);L(e,0,(0.1-d)*c,(0.5-a)*b,0,0.5*b,0);L(e,(0.5+a)*b,0,1*b,(0.1-d)*c,1*b,0.1*c);e.lineTo(b,0.9*c);L(e,1*b,(0.9+d)*c,(0.5+a)*b,1*c,0.5*b,1*c);L(e,(0.5-a)*b,1*c,0,(0.9+d)*c,0,0.9*c);e.lineTo(0,0.1*c);K(e,0,0.1*c,p);L(e,0,(0.1+d)*c,(0.5-a)*b,0.2*c,0.5*b,0.2*c);L(e,(0.5+a)*b,0.2*c,1*b,(0.1+d)*c,1*b,0.1*c);bl(e);b=e.k;b.n=new H(0,0.2);b.o=new H(1,0.9);return b},
Cylinder2:function(a,b,c){var a=0.5*Rc,d=0.1*Rc,e=new J;K(e,0,0.9*c,h);e.lineTo(0,0.1*c);L(e,0,(0.1-d)*c,(0.5-a)*b,0,0.5*b,0);L(e,(0.5+a)*b,0,1*b,(0.1-d)*c,1*b,0.1*c);e.lineTo(1*b,0.9*c);L(e,1*b,(0.9+d)*c,(0.5+a)*b,1*c,0.5*b,1*c);L(e,(0.5-a)*b,1*c,0,(0.9+d)*c,0,0.9*c);K(e,0,0.9*c,p);L(e,0,(0.9-d)*c,(0.5-a)*b,0.8*c,0.5*b,0.8*c);L(e,(0.5+a)*b,0.8*c,1*b,(0.9-d)*c,1*b,0.9*c);bl(e);b=e.k;b.n=new H(0,0.1);b.o=new H(1,0.8);return b},Cylinder3:function(a,b,c){var a=0.1*Rc,d=0.5*Rc,e=new J;K(e,0.1*b,0,h);
e.lineTo(0.9*b,0);L(e,(0.9+a)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);L(e,1*b,(0.5+d)*c,(0.9+a)*b,1*c,0.9*b,1*c);e.lineTo(0.1*b,1*c);L(e,(0.1-a)*b,1*c,0,(0.5+d)*c,0,0.5*c);L(e,0,(0.5-d)*c,(0.1-a)*b,0,0.1*b,0);K(e,0.1*b,0,p);L(e,(0.1+a)*b,0,0.2*b,(0.5-d)*c,0.2*b,0.5*c);L(e,0.2*b,(0.5+d)*c,(0.1+a)*b,1*c,0.1*b,1*c);bl(e);b=e.k;b.n=new H(0.2,0);b.o=new H(0.9,1);return b},DirectData:"Cylinder4",Cylinder4:function(a,b,c){var a=0.1*Rc,d=0.5*Rc,e=new J;K(e,0.9*b,0,h);L(e,(0.9+a)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);L(e,1*b,
(0.5+d)*c,(0.9+a)*b,1*c,0.9*b,1*c);e.lineTo(0.1*b,1*c);L(e,(0.1-a)*b,1*c,0,(0.5+d)*c,0,0.5*c);L(e,0,(0.5-d)*c,(0.1-a)*b,0,0.1*b,0);e.lineTo(0.9*b,0);K(e,0.9*b,0,p);L(e,(0.9-a)*b,0,0.8*b,(0.5-d)*c,0.8*b,0.5*c);L(e,0.8*b,(0.5+d)*c,(0.9-a)*b,1*c,0.9*b,1*c);bl(e);b=e.k;b.n=new H(0.1,0);b.o=new H(0.8,1);return b},Prism1:function(a,b,c){a=new J;K(a,0.25*b,0.25*c,h);a.lineTo(0.75*b,0);a.lineTo(b,0.5*c);a.lineTo(0.5*b,c);a.lineTo(0,c);N(a);K(a,0.25*b,0.25*c,p);a.lineTo(0.5*b,c);bl(a);b=a.k;b.n=new H(0.408,
0.172);b.o=new H(0.833,0.662);return b},Prism2:function(a,b,c){a=new J;K(a,0,0.25*c,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(0.75*b,0.75*c);a.lineTo(0,1*c);N(a);K(a,0,c,p);a.lineTo(0.25*b,0.5*c);a.lineTo(b,0.25*c);a.moveTo(0,0.25*c);a.lineTo(0.25*b,0.5*c);bl(a);b=a.k;b.n=new H(0.25,0.5);b.o=new H(0.75,0.75);return b},Pyramid1:function(a,b,c){a=new J;K(a,0.5*b,0,h);a.lineTo(b,0.75*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.75*c);N(a);K(a,0.5*b,0,p);a.lineTo(0.5*b,1*c);bl(a);b=a.k;b.n=new H(0.25,
0.367);b.o=new H(0.75,0.875);return b},Pyramid2:function(a,b,c){a=new J;K(a,0.5*b,0,h);a.lineTo(b,0.85*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.85*c);N(a);K(a,0.5*b,0,p);a.lineTo(0.5*b,0.7*c);a.lineTo(0,0.85*c);a.moveTo(0.5*b,0.7*c);a.lineTo(1*b,0.85*c);bl(a);b=a.k;b.n=new H(0.25,0.367);b.o=new H(0.75,0.875);return b},Actor:function(a,b,c){var d=0.2*Rc,e=0.1*Rc,a=0.5,g=0.1,i=new J;K(i,a*b,(g+0.1)*c,h);L(i,(a-d)*b,(g+0.1)*c,(a-0.2)*b,(g+e)*c,(a-0.2)*b,g*c);L(i,(a-0.2)*b,(g-e)*c,(a-d)*b,(g-0.1)*c,a*b,(g-
0.1)*c);L(i,(a+d)*b,(g-0.1)*c,(a+0.2)*b,(g-e)*c,(a+0.2)*b,g*c);L(i,(a+0.2)*b,(g+e)*c,(a+d)*b,(g+0.1)*c,a*b,(g+0.1)*c);d=0.05;e=Rc*d;K(i,0.5*b,0.2*c,h);i.lineTo(0.95*b,0.2*c);a=0.95;g=0.25;L(i,(a+e)*b,(g-d)*c,(a+d)*b,(g-e)*c,(a+d)*b,g*c);i.lineTo(1*b,0.6*c);i.lineTo(0.85*b,0.6*c);i.lineTo(0.85*b,0.35*c);d=0.025;e=Rc*d;a=0.825;g=0.35;L(i,(a+d)*b,(g-e)*c,(a+e)*b,(g-d)*c,a*b,(g-d)*c);L(i,(a-e)*b,(g-d)*c,(a-d)*b,(g-e)*c,(a-d)*b,g*c);i.lineTo(0.8*b,1*c);i.lineTo(0.55*b,1*c);i.lineTo(0.55*b,0.7*c);d=0.05;
e=Rc*d;a=0.5;g=0.7;L(i,(a+d)*b,(g-e)*c,(a+e)*b,(g-d)*c,a*b,(g-d)*c);L(i,(a-e)*b,(g-d)*c,(a-d)*b,(g-e)*c,(a-d)*b,g*c);i.lineTo(0.45*b,1*c);i.lineTo(0.2*b,1*c);i.lineTo(0.2*b,0.35*c);d=0.025;e=Rc*d;a=0.175;g=0.35;L(i,(a+d)*b,(g-e)*c,(a+e)*b,(g-d)*c,a*b,(g-d)*c);L(i,(a-e)*b,(g-d)*c,(a-d)*b,(g-e)*c,(a-d)*b,g*c);i.lineTo(0.15*b,0.6*c);i.lineTo(0*b,0.6*c);i.lineTo(0*b,0.25*c);d=0.05;e=Rc*d;a=0.05;g=0.25;L(i,(a-d)*b,(g-e)*c,(a-e)*b,(g-d)*c,a*b,(g-d)*c);i.lineTo(0.5*b,0.2*c);b=i.k;b.n=new H(0.2,0.2);b.o=
new H(0.8,0.65);return b},Card:function(a,b,c){a=new J;K(a,1*b,0*c,h);a.lineTo(1*b,1*c);a.lineTo(0*b,1*c);a.lineTo(0*b,0.2*c);a.lineTo(0.2*b,0*c);N(a);b=a.k;b.n=new H(0,0.2);b.o=new H(1,1);return b},Collate:function(a,b,c){a=new J;K(a,0.5*b,0.5*c,h);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(0.5*b,0.5*c);K(a,0.5*b,0.5*c,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0.5*b,0.5*c);b=a.k;b.n=new H(0.25,0);b.o=new H(0.75,0.25);return b},CreateRequest:function(a,b,c){a=a?a.Kb:0;0===a&&(a=0.1);var d=new J;K(d,
0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);N(d);K(d,0,a*c,p);d.lineTo(1*b,a*c);d.moveTo(0,(1-a)*c);d.lineTo(1*b,(1-a)*c);bl(d);b=d.k;b.n=new H(0,a);b.o=new H(1,1-a);return b},Database:function(a,b,c){var a=new J,d=0.5*Rc,e=0.1*Rc;K(a,1*b,0.1*c,h);a.lineTo(1*b,0.9*c);L(a,1*b,(0.9+e)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0,(0.9+e)*c,0,0.9*c);a.lineTo(0,0.1*c);L(a,0,(0.1-e)*c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.1-e)*c,1*b,0.1*c);K(a,1*b,0.1*c,p);L(a,1*b,(0.1+e)*c,(0.5+d)*
b,0.2*c,0.5*b,0.2*c);L(a,(0.5-d)*b,0.2*c,0,(0.1+e)*c,0,0.1*c);a.moveTo(1*b,0.2*c);L(a,1*b,(0.2+e)*c,(0.5+d)*b,0.3*c,0.5*b,0.3*c);L(a,(0.5-d)*b,0.3*c,0,(0.2+e)*c,0,0.2*c);a.moveTo(1*b,0.3*c);L(a,1*b,(0.3+e)*c,(0.5+d)*b,0.4*c,0.5*b,0.4*c);L(a,(0.5-d)*b,0.4*c,0,(0.3+e)*c,0,0.3*c);bl(a);b=a.k;b.n=new H(0,0.4);b.o=new H(1,0.9);return b},StoredData:"DataStorage",DataStorage:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(0.75*b,0);L(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0,1*c);L(a,0.25*b,0.9*c,0.25*b,0.1*c,
0,0);N(a);b=a.k;b.n=new H(0.226,0);b.o=new H(0.81,1);return b},DiskStorage:function(a,b,c){var a=new J,d=0.5*Rc,e=0.1*Rc;K(a,1*b,0.1*c,h);a.lineTo(1*b,0.9*c);L(a,1*b,(0.9+e)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0,(0.9+e)*c,0,0.9*c);a.lineTo(0,0.1*c);L(a,0,(0.1-e)*c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.1-e)*c,1*b,0.1*c);K(a,1*b,0.1*c,p);L(a,1*b,(0.1+e)*c,(0.5+d)*b,0.2*c,0.5*b,0.2*c);L(a,(0.5-d)*b,0.2*c,0,(0.1+e)*c,0,0.1*c);a.moveTo(1*b,0.2*c);L(a,1*b,(0.2+e)*c,(0.5+d)*b,0.3*c,0.5*b,
0.3*c);L(a,(0.5-d)*b,0.3*c,0,(0.2+e)*c,0,0.2*c);bl(a);b=a.k;b.n=new H(0,0.3);b.o=new H(1,0.9);return b},Display:function(a,b,c){a=new J;K(a,0.25*b,0,h);a.lineTo(0.75*b,0);L(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*b,1*c);a.lineTo(0,0.5*c);N(a);b=a.k;b.n=new H(0.25,0);b.o=new H(0.75,1);return b},DividedEvent:function(a,b,c){a=a?a.Kb:0;0===a?a=0.2:0.15>a&&(a=0.15);var d=new J,e=0.2*Rc;K(d,0,0.2*c,h);L(d,0,(0.2-e)*c,(0.2-e)*b,0,0.2*b,0);d.lineTo(0.8*b,0);L(d,(0.8+e)*b,0,1*b,(0.2-e)*c,1*b,0.2*c);d.lineTo(1*
b,0.8*c);L(d,1*b,(0.8+e)*c,(0.8+e)*b,1*c,0.8*b,1*c);d.lineTo(0.2*b,1*c);L(d,(0.2-e)*b,1*c,0,(0.8+e)*c,0,0.8*c);d.lineTo(0,0.2*c);K(d,0,a*c,p);d.lineTo(1*b,a*c);bl(d);b=d.k;b.n=new H(0,a);b.o=new H(1,1-a);return b},DividedProcess:function(a,b,c){a=a?a.Kb:0;0.1>a&&(a=0.1);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);N(d);K(d,0,a*c,p);d.lineTo(1*b,a*c);bl(d);b=d.k;b.n=new H(0,a);b.o=new H(1,1);return b},Document:function(a,b,c){c/=0.8;a=new J;K(a,0,0.7*c,h);a.lineTo(0,0);
a.lineTo(1*b,0);a.lineTo(1*b,0.7*c);L(a,0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);N(a);b=a.k;b.n=new H(0,0);b.o=new H(1,0.6);return b},ExternalOrganization:function(a,b,c){a=a?a.Kb:0;0.2>a&&(a=0.2);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);N(d);K(d,a*b,0,p);d.lineTo(0,a*c);d.moveTo(1*b,a*c);d.lineTo((1-a)*b,0);d.moveTo(0,(1-a)*c);d.lineTo(a*b,1*c);d.moveTo((1-a)*b,1*c);d.lineTo(1*b,(1-a)*c);bl(d);b=d.k;b.n=new H(a/2,a/2);b.o=new H(1-a/2,1-a/2);return b},ExternalProcess:function(a,
b,c){a=new J;K(a,0.5*b,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.5*c);N(a);K(a,0.1*b,0.4*c,p);a.lineTo(0.1*b,0.6*c);a.moveTo(0.9*b,0.6*c);a.lineTo(0.9*b,0.4*c);a.moveTo(0.6*b,0.1*c);a.lineTo(0.4*b,0.1*c);a.moveTo(0.4*b,0.9*c);a.lineTo(0.6*b,0.9*c);bl(a);b=a.k;b.n=new H(0.25,0.25);b.o=new H(0.75,0.75);return b},File:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);N(a);K(a,0.75*b,0,p);a.lineTo(0.75*b,0.25*c);a.lineTo(1*b,0.25*
c);bl(a);b=a.k;b.n=new H(0,0.25);b.o=new H(1,1);return b},Interrupt:function(a,b,c){a=new J;K(a,1*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(1*b,0.5*c);K(a,1*b,0.5*c,p);a.lineTo(1*b,1*c);K(a,1*b,0.5*c,p);a.lineTo(1*b,0);b=a.k;b.n=new H(0,0.25);b.o=new H(0.5,0.75);return b},InternalStorage:function(a,b,c){var d=a?a.Kb:0,a=a?a.Wr:0;0===d&&(d=0.1);0===a&&(a=0.1);var e=new J;K(e,0,0,h);e.lineTo(1*b,0);e.lineTo(1*b,1*c);e.lineTo(0,1*c);N(e);K(e,d*b,0,p);e.lineTo(d*b,1*c);e.moveTo(0,a*c);e.lineTo(1*
b,a*c);bl(e);b=e.k;b.n=new H(d,a);b.o=new H(1,1);return b},Junction:function(a,b,c){var a=new J,d=1/Math.SQRT2,e=(1-1/Math.SQRT2)/2,g=0.5*Rc;K(a,1*b,0.5*c,h);L(a,1*b,(0.5+g)*c,(0.5+g)*b,1*c,0.5*b,1*c);L(a,(0.5-g)*b,1*c,0,(0.5+g)*c,0,0.5*c);L(a,0,(0.5-g)*c,(0.5-g)*b,0,0.5*b,0);L(a,(0.5+g)*b,0,1*b,(0.5-g)*c,1*b,0.5*c);K(a,(e+d)*b,(e+d)*c,p);a.lineTo(e*b,e*c);a.moveTo(e*b,(e+d)*c);a.lineTo((e+d)*b,e*c);bl(a);b=a.k;b.Nb=Tg;return b},LinedDocument:function(a,b,c){c/=0.8;a=new J;K(a,0,0.7*c,h);a.lineTo(0,
0);a.lineTo(1*b,0);a.lineTo(1*b,0.7*c);L(a,0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);N(a);K(a,0.1*b,0,p);a.lineTo(0.1*b,0.75*c);bl(a);b=a.k;b.n=new H(0.1,0);b.o=new H(1,0.6);return b},LoopLimit:function(a,b,c){a=new J;K(a,0,1*c,h);a.lineTo(0,0.25*c);a.lineTo(0.25*b,0);a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(1*b,1*c);N(a);b=a.k;b.n=new H(0,0.25);b.o=new H(1,1);return b},SequentialData:"MagneticTape",MagneticTape:function(a,b,c){var a=new J,d=0.5*Rc;K(a,0.5*b,1*c,h);L(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*
c);L(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);L(a,1*b,(0.5+d)*c,(0.5+d)*b,0.9*c,0.6*b,0.9*c);a.lineTo(1*b,0.9*c);a.lineTo(1*b,1*c);a.lineTo(0.5*b,1*c);b=a.k;b.n=new H(0.15,0.15);b.o=new H(0.85,0.8);return b},ManualInput:function(a,b,c){a=new J;K(a,1*b,0,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.25*c);N(a);b=a.k;b.n=new H(0,0.25);b.o=new H(1,1);return b},MessageFromUser:function(a,b,c){a=a?a.Kb:0;0===a&&(a=0.7);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(a*
b,0.5*c);d.lineTo(1*b,1*c);d.lineTo(0,1*c);N(d);b=d.k;b.n=new H(0,0);b.o=new H(a,1);return b},MicroformProcessing:function(a,b,c){a=a?a.Kb:0;0===a&&(a=0.25);var d=new J;K(d,0,0,h);d.lineTo(0.5*b,a*c);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0.5*b,(1-a)*c);d.lineTo(0,1*c);N(d);b=d.k;b.n=new H(0,a);b.o=new H(1,1-a);return b},MicroformRecording:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(0.75*b,0.25*c);a.lineTo(1*b,0.15*c);a.lineTo(1*b,0.85*c);a.lineTo(0.75*b,0.75*c);a.lineTo(0,1*c);N(a);b=a.k;b.n=
new H(0,0.25);b.o=new H(1,0.75);return b},MultiDocument:function(a,b,c){c/=0.8;a=new J;K(a,b,0,h);a.lineTo(b,0.5*c);L(a,0.96*b,0.47*c,0.93*b,0.45*c,0.9*b,0.44*c);a.lineTo(0.9*b,0.6*c);L(a,0.86*b,0.57*c,0.83*b,0.55*c,0.8*b,0.54*c);a.lineTo(0.8*b,0.7*c);L(a,0.4*b,0.4*c,0.4*b,1*c,0,0.7*c);a.lineTo(0,0.2*c);a.lineTo(0.1*b,0.2*c);a.lineTo(0.1*b,0.1*c);a.lineTo(0.2*b,0.1*c);a.lineTo(0.2*b,0);N(a);K(a,0.1*b,0.2*c,p);a.lineTo(0.8*b,0.2*c);a.lineTo(0.8*b,0.54*c);a.moveTo(0.2*b,0.1*c);a.lineTo(0.9*b,0.1*c);
a.lineTo(0.9*b,0.44*c);bl(a);b=a.k;b.n=new H(0,0.25);b.o=new H(0.8,0.77);return b},MultiProcess:function(a,b,c){a=new J;K(a,0.1*b,0.1*c,h);a.lineTo(0.2*b,0.1*c);a.lineTo(0.2*b,0);a.lineTo(1*b,0);a.lineTo(1*b,0.8*c);a.lineTo(0.9*b,0.8*c);a.lineTo(0.9*b,0.9*c);a.lineTo(0.8*b,0.9*c);a.lineTo(0.8*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.2*c);a.lineTo(0.1*b,0.2*c);N(a);K(a,0.2*b,0.1*c,p);a.lineTo(0.9*b,0.1*c);a.lineTo(0.9*b,0.8*c);a.moveTo(0.1*b,0.2*c);a.lineTo(0.8*b,0.2*c);a.lineTo(0.8*b,0.9*c);bl(a);b=a.k;
b.n=new H(0,0.2);b.o=new H(0.8,1);return b},OfflineStorage:function(a,b,c){a=a?a.Kb:0;0===a&&(a=0.1);var d=1-a,e=new J;K(e,0,0,h);e.lineTo(1*b,0);e.lineTo(0.5*b,1*c);N(e);K(e,0.5*a*b,a*c,p);e.lineTo((1-0.5*a)*b,a*c);bl(e);b=e.k;b.n=new H(d/4+0.5*a,a);b.o=new H(3*d/4+0.5*a,a+0.5*d);return b},OffPageConnector:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.75*b,1*c);a.lineTo(0,1*c);N(a);b=a.k;b.n=new H(0,0);b.o=new H(0.75,1);return b},Or:function(a,b,c){var a=new J,
d=0.5*Rc;K(a,1*b,0.5*c,h);L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);L(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);K(a,1*b,0.5*c,p);a.lineTo(0,0.5*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*b,0);bl(a);b=a.k;b.Nb=Tg;return b},PaperTape:function(a,b,c){c/=0.8;a=new J;K(a,0,0.7*c,h);a.lineTo(0,0.3*c);L(a,0.5*b,0.6*c,0.5*b,0,1*b,0.3);a.lineTo(1*b,0.7*c);L(a,0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);N(a);b=a.k;b.n=new H(0,0.49);b.o=new H(1,0.75);return b},
PrimitiveFromCall:function(a,b,c){var d=a?a.Kb:0,a=a?a.Wr:0;0===d&&(d=0.1);0===a&&(a=0.3);var e=new J;K(e,0,0,h);e.lineTo(1*b,0);e.lineTo((1-a)*b,0.5*c);e.lineTo(1*b,1*c);e.lineTo(0,1*c);N(e);b=e.k;b.n=new H(d,0);b.o=new H(1-a,1);return b},PrimitiveToCall:function(a,b,c){var d=a?a.Kb:0,a=a?a.Wr:0;0===d&&(d=0.1);0===a&&(a=0.3);var e=new J;K(e,0,0,h);e.lineTo((1-a)*b,0);e.lineTo(1*b,0.5*c);e.lineTo((1-a)*b,1*c);e.lineTo(0,1*c);N(e);b=e.k;b.n=new H(d,0);b.o=new H(1-a,1);return b},Subroutine:"Procedure",
Procedure:function(a,b,c){a=a?a.Kb:0;0===a&&(a=0.1);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);N(d);K(d,(1-a)*b,0,p);d.lineTo((1-a)*b,1*c);d.moveTo(a*b,0);d.lineTo(a*b,1*c);bl(d);b=d.k;b.n=new H(a,0);b.o=new H(1-a,1);return b},Process:function(a,b,c){a=a?a.Kb:0;0===a&&(a=0.1);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);N(d);K(d,a*b,0,p);d.lineTo(a*b,1*c);bl(d);b=d.k;b.n=new H(a,0);b.o=new H(1,1);return b},Sort:function(a,b,c){a=new J;K(a,
0.5*b,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.5*c);N(a);K(a,0,0.5*c,p);a.lineTo(1*b,0.5*c);bl(a);b=a.k;b.n=new H(0.25,0.25);b.o=new H(0.75,0.5);return b},Start:function(a,b,c){a=new J;K(a,0.25*b,0,h);a.lineTo(0.75*b,0);L(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*b,1*c);L(a,0,1*c,0,0,0.25*b,0);K(a,0.25*b,0,p);a.lineTo(0.25*b,1*c);a.moveTo(0.75*b,0);a.lineTo(0.75*b,1*c);bl(a);b=a.k;b.n=new H(0.25,0);b.o=new H(0.75,1);return b},Terminator:function(a,b,c){a=new J;K(a,0.25*b,0,h);a.lineTo(0.75*
b,0);L(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*b,1*c);L(a,0,1*c,0,0,0.25*b,0);b=a.k;b.n=new H(0.23,0);b.o=new H(0.77,1);return b},TransmittalTape:function(a,b,c){a=a?a.Kb:0;0===a&&(a=0.1);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0.75*b,(1-a)*c);d.lineTo(0,(1-a)*c);N(d);b=d.k;b.n=new H(0,0);b.o=new H(1,1-a);return b},AndGate:function(a,b,c){var a=new J,d=0.5*Rc;K(a,0,0,h);a.lineTo(0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);
a.lineTo(0,1*c);N(a);b=a.k;b.n=new H(0,0);b.o=new H(0.55,1);return b},Buffer:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0,1*c);N(a);b=a.k;b.n=new H(0,0.25);b.o=new H(0.5,0.75);return b},Clock:function(a,b,c){var a=new J,d=0.5*Rc;K(a,1*b,0.5*c,h);L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);L(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);K(a,1*b,0.5*c,p);a.lineTo(1*b,0.5*c);K(a,0.8*b,0.75*c,p);a.lineTo(0.8*b,0.25*
c);a.lineTo(0.6*b,0.25*c);a.lineTo(0.6*b,0.75*c);a.lineTo(0.4*b,0.75*c);a.lineTo(0.4*b,0.25*c);a.lineTo(0.2*b,0.25*c);a.lineTo(0.2*b,0.75*c);bl(a);b=a.k;b.Nb=Tg;return b},Ground:function(a,b,c){a=new J;K(a,0.5*b,0,p);a.lineTo(0.5*b,0.4*c);a.moveTo(0.2*b,0.6*c);a.lineTo(0.8*b,0.6*c);a.moveTo(0.3*b,0.8*c);a.lineTo(0.7*b,0.8*c);a.moveTo(0.4*b,1*c);a.lineTo(0.6*b,1*c);return a.k},Inverter:function(a,b,c){var a=new J,d=0.1*Rc;K(a,0.8*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.8*b,0.5*c);K(a,1*
b,0.5*c,h);L(a,1*b,(0.5+d)*c,(0.9+d)*b,0.6*c,0.9*b,0.6*c);L(a,(0.9-d)*b,0.6*c,0.8*b,(0.5+d)*c,0.8*b,0.5*c);L(a,0.8*b,(0.5-d)*c,(0.9-d)*b,0.4*c,0.9*b,0.4*c);L(a,(0.9+d)*b,0.4*c,1*b,(0.5-d)*c,1*b,0.5*c);b=a.k;b.n=new H(0,0.25);b.o=new H(0.4,0.75);return b},NandGate:function(a,b,c){var a=new J,d=0.5*Rc,e=0.4*Rc,g=0.1*Rc;K(a,0.8*b,0.5*c,h);L(a,0.8*b,(0.5+e)*c,(0.4+d)*b,1*c,0.4*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.4*b,0);L(a,(0.4+d)*b,0,0.8*b,(0.5-e)*c,0.8*b,0.5*c);K(a,1*b,0.5*c,h);L(a,1*b,
(0.5+g)*c,(0.9+g)*b,0.6*c,0.9*b,0.6*c);L(a,(0.9-g)*b,0.6*c,0.8*b,(0.5+g)*c,0.8*b,0.5*c);L(a,0.8*b,(0.5-g)*c,(0.9-g)*b,0.4*c,0.9*b,0.4*c);L(a,(0.9+g)*b,0.4*c,1*b,(0.5-g)*c,1*b,0.5*c);b=a.k;b.n=new H(0,0.05);b.o=new H(0.55,0.95);return b},NorGate:function(a,b,c){var a=new J,d=0.5,e=Rc*d,g=0,i=0.5;K(a,0.8*b,0.5*c,h);L(a,0.7*b,(i+e)*c,(g+e)*b,(i+d)*c,0,1*c);L(a,0.25*b,0.75*c,0.25*b,0.25*c,0,0);L(a,(g+e)*b,(i-d)*c,0.7*b,(i-e)*c,0.8*b,0.5*c);d=0.1;e=0.1*Rc;g=0.9;i=0.5;K(a,(g-d)*b,i*c,h);L(a,(g-d)*b,(i-
e)*c,(g-e)*b,(i-d)*c,g*b,(i-d)*c);L(a,(g+e)*b,(i-d)*c,(g+d)*b,(i-e)*c,(g+d)*b,i*c);L(a,(g+d)*b,(i+e)*c,(g+e)*b,(i+d)*c,g*b,(i+d)*c);L(a,(g-e)*b,(i+d)*c,(g-d)*b,(i+e)*c,(g-d)*b,i*c);b=a.k;b.n=new H(0.2,0.25);b.o=new H(0.6,0.75);return b},OrGate:function(a,b,c){var a=new J,d=0.5*Rc;K(a,0,0,h);L(a,(0+d+d)*b,0*c,0.8*b,(0.5-d)*c,1*b,0.5*c);L(a,0.8*b,(0.5+d)*c,(0+d+d)*b,1*c,0,1*c);L(a,0.25*b,0.75*c,0.25*b,0.25*c,0,0);N(a);b=a.k;b.n=new H(0.2,0.25);b.o=new H(0.75,0.75);return b},XnorGate:function(a,b,c){var a=
new J,d=0.5,e=Rc*d,g=0.2,i=0.5;K(a,0.1*b,0,p);L(a,0.35*b,0.25*c,0.35*b,0.75*c,0.1*b,1*c);K(a,0.8*b,0.5*c,h);L(a,0.7*b,(i+e)*c,(g+e)*b,(i+d)*c,0.2*b,1*c);L(a,0.45*b,0.75*c,0.45*b,0.25*c,0.2*b,0);L(a,(g+e)*b,(i-d)*c,0.7*b,(i-e)*c,0.8*b,0.5*c);d=0.1;e=0.1*Rc;g=0.9;i=0.5;K(a,(g-d)*b,i*c,h);L(a,(g-d)*b,(i-e)*c,(g-e)*b,(i-d)*c,g*b,(i-d)*c);L(a,(g+e)*b,(i-d)*c,(g+d)*b,(i-e)*c,(g+d)*b,i*c);L(a,(g+d)*b,(i+e)*c,(g+e)*b,(i+d)*c,g*b,(i+d)*c);L(a,(g-e)*b,(i+d)*c,(g-d)*b,(i+e)*c,(g-d)*b,i*c);b=a.k;b.n=new H(0.4,
0.25);b.o=new H(0.65,0.75);return b},XorGate:function(a,b,c){var a=new J,d=0.5*Rc;K(a,0.1*b,0,p);L(a,0.35*b,0.25*c,0.35*b,0.75*c,0.1*b,1*c);K(a,0.2*b,0,h);L(a,(0.2+d)*b,0*c,0.9*b,(0.5-d)*c,1*b,0.5*c);L(a,0.9*b,(0.5+d)*c,(0.2+d)*b,1*c,0.2*b,1*c);L(a,0.45*b,0.75*c,0.45*b,0.25*c,0.2*b,0);N(a);b=a.k;b.n=new H(0.4,0.25);b.o=new H(0.8,0.75);return b},Capacitor:function(a,b,c){a=new J;K(a,0,0,p);a.lineTo(0,1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);return a.k},Resistor:function(a,b,c){a=new J;K(a,0,0.5*c,p);
a.lineTo(0.1*b,0);a.lineTo(0.2*b,1*c);a.lineTo(0.3*b,0);a.lineTo(0.4*b,1*c);a.lineTo(0.5*b,0);a.lineTo(0.6*b,1*c);a.lineTo(0.7*b,0.5*c);return a.k},Inductor:function(a,b,c){var a=new J,d=0.1*Rc,e=0.1,g=0.5;K(a,(e-0.5*d)*b,(g+0.1)*c,p);L(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);e=0.3;g=0.5;L(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);L(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);g=e=0.5;L(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);L(a,(e-d)*b,(g+0.1)*
c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);e=0.7;g=0.5;L(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);L(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);e=0.9;g=0.5;L(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,(e+0.5*d)*b,(g+0.1)*c);return a.k},ACvoltageSource:function(a,b,c){var a=new J,d=0.5*Rc;K(a,0*b,0.5*c,p);L(a,0*b,(0.5-d)*c,(0.5-d)*b,0*c,0.5*b,0*c);L(a,(0.5+d)*b,0*c,1*b,(0.5-d)*c,1*b,0.5*c);L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0*b,(0.5+d)*c,0*b,0.5*c);a.moveTo(0.1*
b,0.5*c);L(a,0.5*b,0*c,0.5*b,1*c,0.9*b,0.5*c);b=a.k;b.Nb=Tg;return b},DCvoltageSource:function(a,b,c){a=new J;K(a,0,0.75*c,p);a.lineTo(0,0.25*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);return a.k},Diode:function(a,b,c){a=new J;K(a,1*b,0,p);a.lineTo(1*b,0.5*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(1*b,0.5*c);a.lineTo(1*b,1*c);b=a.k;b.n=new H(0,0.25);b.o=new H(0.5,0.75);return b},Wifi:function(a,b,c){var d=b,e=c,b=0.38*b,c=0.6*c,a=new J,g=0.8*Rc,i=0.8,j=0,k=0.5,d=(d-b)/2,e=(e-c)/2;K(a,j*b+d,(k+i)*c+e,h);
L(a,(j-g)*b+d,(k+i)*c+e,(j-i)*b+d,(k+g)*c+e,(j-i)*b+d,k*c+e);L(a,(j-i)*b+d,(k-g)*c+e,(j-g)*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);L(a,j*b+d,(k-i)*c+e,(j-i+0.5*g)*b+d,(k-g)*c+e,(j-i+0.5*g)*b+d,k*c+e);L(a,(j-i+0.5*g)*b+d,(k+g)*c+e,j*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);N(a);g=0.4*Rc;i=0.4;j=0.2;k=0.5;K(a,j*b+d,(k+i)*c+e,h);L(a,(j-g)*b+d,(k+i)*c+e,(j-i)*b+d,(k+g)*c+e,(j-i)*b+d,k*c+e);L(a,(j-i)*b+d,(k-g)*c+e,(j-g)*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);L(a,j*b+d,(k-i)*c+e,(j-i+0.5*g)*b+d,(k-g)*c+e,(j-i+0.5*g)*b+d,k*c+e);L(a,
(j-i+0.5*g)*b+d,(k+g)*c+e,j*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);N(a);g=0.2*Rc;i=0.2;k=j=0.5;K(a,(j-i)*b+d,k*c+e,h);L(a,(j-i)*b+d,(k-g)*c+e,(j-g)*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);L(a,(j+g)*b+d,(k-i)*c+e,(j+i)*b+d,(k-g)*c+e,(j+i)*b+d,k*c+e);L(a,(j+i)*b+d,(k+g)*c+e,(j+g)*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);L(a,(j-g)*b+d,(k+i)*c+e,(j-i)*b+d,(k+g)*c+e,(j-i)*b+d,k*c+e);g=0.4*Rc;i=0.4;j=0.8;k=0.5;K(a,j*b+d,(k-i)*c+e,h);L(a,(j+g)*b+d,(k-i)*c+e,(j+i)*b+d,(k-g)*c+e,(j+i)*b+d,k*c+e);L(a,(j+i)*b+d,(k+g)*c+e,(j+g)*b+d,(k+
i)*c+e,j*b+d,(k+i)*c+e);L(a,j*b+d,(k+i)*c+e,(j+i-0.5*g)*b+d,(k+g)*c+e,(j+i-0.5*g)*b+d,k*c+e);L(a,(j+i-0.5*g)*b+d,(k-g)*c+e,j*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);N(a);g=0.8*Rc;i=0.8;j=1;k=0.5;K(a,j*b+d,(k-i)*c+e,h);L(a,(j+g)*b+d,(k-i)*c+e,(j+i)*b+d,(k-g)*c+e,(j+i)*b+d,k*c+e);L(a,(j+i)*b+d,(k+g)*c+e,(j+g)*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);L(a,j*b+d,(k+i)*c+e,(j+i-0.5*g)*b+d,(k+g)*c+e,(j+i-0.5*g)*b+d,k*c+e);L(a,(j+i-0.5*g)*b+d,(k-g)*c+e,j*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);N(a);return a.k},Email:function(a,b,c){a=
new J;K(a,0,0,h);a.lineTo(1*b,0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);N(a);K(a,0,0,p);a.lineTo(0.5*b,0.6*c);a.lineTo(1*b,0);a.moveTo(0,1*c);a.lineTo(0.45*b,0.54*c);a.moveTo(1*b,1*c);a.lineTo(0.55*b,0.54*c);bl(a);return a.k},Ethernet:function(a,b,c){a=new J;K(a,0.35*b,0,h);a.lineTo(0.65*b,0);a.lineTo(0.65*b,0.4*c);a.lineTo(0.35*b,0.4*c);a.lineTo(0.35*b,0);N(a);K(a,0.1*b,1*c,h,h);a.lineTo(0.4*b,1*c);a.lineTo(0.4*b,0.6*c);a.lineTo(0.1*b,0.6*c);a.lineTo(0.1*b,1*c);N(a);K(a,0.6*b,1*c,h,h);a.lineTo(0.9*
b,1*c);a.lineTo(0.9*b,0.6*c);a.lineTo(0.6*b,0.6*c);a.lineTo(0.6*b,1*c);N(a);K(a,0,0.5*c,p);a.lineTo(1*b,0.5*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.5*b,0.4*c);a.moveTo(0.75*b,0.5*c);a.lineTo(0.75*b,0.6*c);a.moveTo(0.25*b,0.5*c);a.lineTo(0.25*b,0.6*c);bl(a);return a.k},Power:function(a,b,c){var a=new J,d=0.4*Rc,e=0.4,g=new C(0,0),i=new C(0,0),j=new C(0,0),k=new C(0,0);new C(0,0);cl(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+e,0.5,0.5,g,g,i,j,k);new C(i.x,i.y);K(a,i.x*b,i.y*c,h);L(a,j.x*b,j.y*c,k.x*b,k.y*c,
(0.5+e)*b,0.5*c);L(a,(0.5+e)*b,(0.5+d)*c,(0.5+d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);L(a,(0.5-d)*b,(0.5+e)*c,(0.5-e)*b,(0.5+d)*c,(0.5-e)*b,0.5*c);cl(0.5-e,0.5,0.5-e,0.5-d,0.5-d,0.5-e,0.5,0.5-e,0.5,j,k,i,g,g);L(a,j.x*b,j.y*c,k.x*b,k.y*c,i.x*b,i.y*c);d=0.3*Rc;e=0.3;cl(0.5-e,0.5,0.5-e,0.5-d,0.5-d,0.5-e,0.5,0.5-e,0.5,j,k,i,g,g);a.lineTo(i.x*b,i.y*c);L(a,k.x*b,k.y*c,j.x*b,j.y*c,(0.5-e)*b,0.5*c);L(a,(0.5-e)*b,(0.5+d)*c,(0.5-d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);L(a,(0.5+d)*b,(0.5+e)*c,(0.5+e)*b,(0.5+d)*c,(0.5+e)*b,
0.5*c);cl(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+e,0.5,0.5,g,g,i,j,k);L(a,k.x*b,k.y*c,j.x*b,j.y*c,i.x*b,i.y*c);N(a);K(a,0.45*b,0,h);a.lineTo(0.45*b,0.5*c);a.lineTo(0.55*b,0.5*c);a.lineTo(0.55*b,0);N(a);b=a.k;b.n=new H(0.25,0.55);b.o=new H(0.75,0.8);return b},Fallout:function(a,b,c){var a=new J,d=0.5*Rc;K(a,0*b,0.5*c,h);L(a,0*b,(0.5-d)*c,(0.5-d)*b,0*c,0.5*b,0*c);L(a,(0.5+d)*b,0*c,1*b,(0.5-d)*c,1*b,0.5*c);L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0*b,(0.5+d)*c,0*b,0.5*c);var e=d=0;
K(a,(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);d=0.4;e=0;N(a);K(a,(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);d=0.2;e=-0.3;N(a);K(a,(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);N(a);b=a.k;b.Nb=Tg;return b},IrritationHazard:function(a,b,c){a=new J;K(a,0.2*b,0*c,h);a.lineTo(0.5*b,0.3*c);a.lineTo(0.8*
b,0*c);a.lineTo(1*b,0.2*c);a.lineTo(0.7*b,0.5*c);a.lineTo(1*b,0.8*c);a.lineTo(0.8*b,1*c);a.lineTo(0.5*b,0.7*c);a.lineTo(0.2*b,1*c);a.lineTo(0*b,0.8*c);a.lineTo(0.3*b,0.5*c);a.lineTo(0*b,0.2*c);N(a);b=a.k;b.n=new H(0.3,0.3);b.o=new H(0.7,0.7);return b},ElectricalHazard:function(a,b,c){a=new J;K(a,0.37,0*c,h);a.lineTo(0.5*b,0.11*c);a.lineTo(0.77*b,0.04*c);a.lineTo(0.33*b,0.49*c);a.lineTo(1*b,0.37*c);a.lineTo(0.63*b,0.86*c);a.lineTo(0.77*b,0.91*c);a.lineTo(0.34*b,1*c);a.lineTo(0.34*b,0.78*c);a.lineTo(0.44*
b,0.8*c);a.lineTo(0.65*b,0.56*c);a.lineTo(0*b,0.68*c);N(a);return a.k},FireHazard:function(a,b,c){a=new J;K(a,0.1*b,1*c,h);L(a,-0.25*b,0.63*c,0.45*b,0.44*c,0.29*b,0*c);L(a,0.48*b,0.17*c,0.54*b,0.35*c,0.51*b,0.42*c);L(a,0.59*b,0.29*c,0.58*b,0.28*c,0.59*b,0.18*c);L(a,0.8*b,0.34*c,0.88*b,0.43*c,0.75*b,0.6*c);L(a,0.87*b,0.48*c,0.88*b,0.43*c,0.88*b,0.31*c);L(a,1.17*b,0.76*c,0.82*b,0.8*c,0.9*b,1*c);N(a);b=a.k;b.n=new H(0.05,0.645);b.o=new H(0.884,0.908);return b},BpmnActivityLoop:function(a,b,c){var a=
new J,d=0.5*(4*(Math.SQRT2-1)/3);K(a,(0.5*Math.SQRT2/2+0.5)*b,(1-(0.5-0.5*Math.SQRT2/2))*c,p);L(a,1*b,0.7*c,1*b,0.5*c,1*b,0.5*c);L(a,1*b,(0.5-d+0)*c,(0.5+d+0)*b,0*c,0.5*b,0*c);L(a,(0.5-d+0)*b,0*c,0*b,(0.5-d+0)*c,0*b,0.5*c);L(a,0*b,(0.5+d+0)*c,(0.5-d+0)*b,1*c,0.35*b,0.98*c);a.moveTo(0.35*b,0.8*c);a.lineTo(0.35*b,1*c);a.lineTo(0.15*b,1*c);return a.k},BpmnActivityParallel:function(a,b,c){a=new J;K(a,0,0,p);a.lineTo(0,1*c);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);return a.k},
BpmnActivitySequential:function(a,b,c){a=new J;K(a,0,0,p);a.lineTo(1*b,0);a.moveTo(0,0.5*c);a.lineTo(1*b,0.5*c);a.moveTo(0,1*c);a.lineTo(1*b,1*c);return a.k},BpmnActivityAdHoc:function(a,b,c){a=new J;K(a,0,0,p);K(a,1*b,1*c,p);K(a,0,0.5*c,p);L(a,0.2*b,0.35*c,0.3*b,0.35*c,0.5*b,0.5*c);L(a,0.7*b,0.65*c,0.8*b,0.65*c,1*b,0.5*c);return a.k},BpmnActivityCompensation:function(a,b,c){a=new J;K(a,0,0.5*c,h);a.lineTo(0.5*b,0);a.lineTo(0.5*b,0.5*c);a.lineTo(1*b,1*c);a.lineTo(1*b,0);a.lineTo(0.5*b,0.5*c);a.lineTo(0.5*
b,1*c);N(a);return a.k},BpmnTaskMessage:function(a,b,c){a=new J;K(a,0,0.2*c,h);a.lineTo(1*b,0.2*c);a.lineTo(1*b,0.8*c);a.lineTo(0,0.8*c);a.lineTo(0,0.8*c);N(a);K(a,0,0.2*c,p);a.lineTo(0.5*b,0.5*c);a.lineTo(1*b,0.2*c);bl(a);return a.k},BpmnTaskScript:function(a,b,c){a=new J;K(a,0.7*b,1*c,h);a.lineTo(0.3*b,1*c);L(a,0.6*b,0.5*c,0,0.5*c,0.3*b,0);a.lineTo(0.7*b,0);L(a,0.4*b,0.5*c,1*b,0.5*c,0.7*b,1*c);N(a);K(a,0.45*b,0.73*c,p);a.lineTo(0.7*b,0.73*c);a.moveTo(0.38*b,0.5*c);a.lineTo(0.63*b,0.5*c);a.moveTo(0.31*
b,0.27*c);a.lineTo(0.56*b,0.27*c);bl(a);return a.k},BpmnTaskUser:function(a,b,c){a=new J;K(a,0,0,p);K(a,0.335*b,(1-0.555)*c,h);a.lineTo(0.335*b,0.595*c);a.lineTo(0.665*b,0.595*c);a.lineTo(0.665*b,(1-0.555)*c);L(a,0.88*b,0.46*c,0.98*b,0.54*c,1*b,0.68*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.68*c);L(a,0.02*b,0.54*c,0.12*b,0.46*c,0.335*b,(1-0.555)*c);a.lineTo(0.365*b,0.405*c);var d=0.5-0.285,e=Math.PI/4,g=4*(1-Math.cos(e))/(3*Math.sin(e)),e=g*d,g=g*d;L(a,(0.5-(e+d)/2)*b,(d+(d+g)/2)*c,(0.5-d)*
b,(d+g)*c,(0.5-d)*b,d*c);L(a,(0.5-d)*b,(d-g)*c,(0.5-e)*b,(d-d)*c,0.5*b,(d-d)*c);L(a,(0.5+e)*b,(d-d)*c,(0.5+d)*b,(d-g)*c,(0.5+d)*b,d*c);L(a,(0.5+d)*b,(d+g)*c,(0.5+(e+d)/2)*b,(d+(d+g)/2)*c,0.635*b,0.405*c);a.lineTo(0.635*b,0.405*c);a.lineTo(0.665*b,(1-0.555)*c);a.lineTo(0.665*b,0.595*c);a.lineTo(0.335*b,0.595*c);K(a,0.2*b,1*c,p);a.lineTo(0.2*b,0.8*c);K(a,0.8*b,1*c,p);a.lineTo(0.8*b,0.8*c);return a.k},BpmnEventConditional:function(a,b,c){a=new J;K(a,0.1*b,0,h);a.lineTo(0.9*b,0);a.lineTo(0.9*b,1*c);a.lineTo(0.1*
b,1*c);N(a);K(a,0.2*b,0.2*c,p);a.lineTo(0.8*b,0.2*c);a.moveTo(0.2*b,0.4*c);a.lineTo(0.8*b,0.4*c);a.moveTo(0.2*b,0.6*c);a.lineTo(0.8*b,0.6*c);a.moveTo(0.2*b,0.8*c);a.lineTo(0.8*b,0.8*c);bl(a);return a.k},BpmnEventError:function(a,b,c){a=new J;K(a,0,1*c,h);a.lineTo(0.33*b,0);a.lineTo(0.66*b,0.5*c);a.lineTo(1*b,0);a.lineTo(0.66*b,1*c);a.lineTo(0.33*b,0.5*c);N(a);return a.k},BpmnEventEscalation:function(a,b,c){a=new J;K(a,0,0,p);K(a,1*b,1*c,p);K(a,0.1*b,1*c,h);a.lineTo(0.5*b,0);a.lineTo(0.9*b,1*c);a.lineTo(0.5*
b,0.5*c);N(a);return a.k},BpmnEventTimer:function(a,b,c){var a=new J,d=0.5*Rc;K(a,1*b,0.5*c,h);L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);L(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);K(a,0.5*b,0,p);a.lineTo(0.5*b,0.15*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*b,0.85*c);a.moveTo(0,0.5*c);a.lineTo(0.15*b,0.5*c);a.moveTo(1*b,0.5*c);a.lineTo(0.85*b,0.5*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.58*b,0.1*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.78*
b,0.54*c);bl(a);b=a.k;b.Nb=Tg;return b}},hl;for(hl in Mk)Mk[hl.toLowerCase()]=hl;
var il={None:"",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",OpenTriangle:"m 0,0 l 8,4 -8,4",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",Line:"m 0,0 l 0,8",
DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",
BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 12,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -4 0 4 z",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",
HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",
ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 -8,-4 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 -8,0 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",Fork:"m 0,4 l 8,0 m -6,0 l 6,-4 m -6,4 l 6,4",CircleFork:"F1 m 6,3 b 0 360 -3 0 3 m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",
LineFork:"m 0,0 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",CircleLine:"F1 m 8 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",CircleLineFork:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m 4 -4 l 0 8",OpenTriangleTop:"m 0,0 l 8,4 -8,0 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4 -8,0",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",
OpenTriangleLine:"m 0,0 8,4 -8,4 m 8.5,0 l 0,-8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z",ForwardSlash:"m 0,8 l 5,-8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",BackSlash:"m 0,0 l 5,8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",
BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3"},Kk,ml={},nl;for(nl in Mk){var ol=Mk[nl];"string"===typeof ol&&(ol=Mk[ol]);"string"===typeof ol&&(ol=Mk[ol]);ol&&(ml[nl]=ol(m,100,100));ml[nl].Ke()}Kk=ml;var pl={};function Lk(a){if(il){for(var b in il){var c=be(il[b],p);pl[b]=c;pl[b.toLowerCase()]=b}il=f}return pl[a]}W.FigureGenerators=Mk;W.ArrowheadGeometries=pl;
function S(a){0===arguments.length?w.call(this):w.call(this,a);this.ym=this.sj="";this.Ap=m;this.fq=this.Wp=this.jp=this.Nq=this.Qo=this.Do=h;this.qq=this.lq=this.kq=p;this.Jm=h;this.Dq="";this.Aq=h;this.Zj=this.rq=this.mq=this.Bq=m;this.Ys=p;this.og=this.Cq=m;this.oq="";this.el=m;this.nq=(new yb(NaN,NaN)).freeze();this.sq="";this.fl=m;this.md="";this.op=h;this.s=this.Co=this.vj=m;this.ti=(new C(NaN,NaN)).freeze();this.dt=new C(NaN,NaN);this.Jp="";this.ui=m;this.Kp=pc;this.Rp=Yc;this.Mp=Zc;this.Ro=
m;this.pp=h;this.Bp=ql;this.Qf=p;this.Mm=(new C(6,6)).freeze();this.Lm="gray";this.Km=4;this.eE=-1;this.qi=h;this.xt=this.af=p}v.H("Part",S);v.pa(S,w);
S.prototype.jb=function(a){w.prototype.jb.call(this,a);a.sj=this.sj;a.ym=this.ym;a.Ap=this.Ap;a.Do=this.Do;a.Qo=this.Qo;a.Nq=this.Nq;a.jp=this.jp;a.Wp=this.Wp;a.fq=this.fq;a.kq=this.kq;a.lq=this.lq;a.qq=this.qq;a.Jm=this.Jm;a.Dq=this.Dq;a.Aq=this.Aq;a.Bq=this.Bq;a.mq=this.mq;a.rq=this.rq;a.Ys=p;a.Cq=this.Cq;a.og=m;a.oq=this.oq;a.nq.Ra(this.nq);a.sq=this.sq;a.md=this.md;a.op=this.op;a.Co=this.Co;a.ti.Ra(this.ti);a.Jp=this.Jp;a.Kp=this.Kp.B();a.Rp=this.Rp.B();a.Mp=this.Mp.B();a.Ro=this.Ro;a.pp=this.pp;
a.Bp=this.Bp;a.Qf=this.Qf;a.Mm.Ra(this.Mm);a.Lm=this.Lm;a.Km=this.Km};S.prototype.Yg=function(a){w.prototype.Yg.call(this,a);gj(a);a.Zj=m;a.el=m;a.fl=m;a.ui=m};S.prototype.toString=function(){var a=v.Ri(Object.getPrototypeOf(this))+"#"+v.kc(this);this.data&&(a+="("+Ie(this.data)+")");return a};
S.prototype.dumpReferences=S.prototype.KB=function(){v.trace("References for "+this);this.ta&&v.trace("  "+this.ta.toString()+' LayerName: "'+this.Cd+'"');this.Zn!==this&&v.trace("  SelectionObject: "+this.Zn.toString()+' SelectionObjectName: "'+this.$n+'"');this.yb!==this&&v.trace("  LocationObject: "+this.yb.toString()+' LocationObjectName: "'+this.Kr+'"');if(this.og){for(var a="",b=this.og.f;b.next();)a+=b.key+" ";v.trace("  Adornments: "+a)}this.Va&&v.trace("  ContainingGroup: "+this.Va.toString());
if(this instanceof U){if(this.rc)for(b=this.rc.f;b.next(););if(0<this.le.count){a="";for(b=this.le;b.next();)a+=b.value.toString()+", ";v.trace("  Links: "+a)}this.ke&&v.trace("  LabeledLink: "+this.ke.toString());if(this instanceof nf){v.trace("  Placeholder: "+this.placeholder);a="";for(b=this.mc;b.next();)a+=b.value.toString()+", ";v.trace("  Members: "+a);a="";for(b=this.Zk.f;b.next();)a+=b.value.toString()+", ";v.trace("  NestedGroups: "+a);v.trace("  Layout: "+this.vb)}}else if(this instanceof
V){v.trace("  Path: "+this.path);v.trace("  From: "+this.ea+" "+this.Ic+' "'+this.dh+'"');v.trace("  To: "+this.ia+" "+this.rd+' "'+this.gi+'"');a="";for(b=this.di;b.next();)a+=b.value.toString()+", ";v.trace("  LabelNodes: "+a)}};S.LayoutNone=0;var vi;S.LayoutAdded=vi=1;var Ai;S.LayoutRemoved=Ai=2;var sj;S.LayoutShown=sj=4;var uj;S.LayoutHidden=uj=8;S.LayoutNodeSized=16;var Fi;S.LayoutGroupLayout=Fi=32;var ql;S.LayoutStandard=ql=vi|Ai|sj|uj|16|Fi;
S.prototype.ng=function(){w.prototype.ng.call(this);var a=this.b;a!==m&&this.Dl&&(Ni(a,"shadowOffset",this.oD),Ni(a,"shadowColor",this.shadowColor),Ni(a,"shadowBlur",this.shadowBlur))};S.prototype.Jl=function(a,b,c,d,e,g,i){var j=this.b;j!==m&&(a===Ge&&"elements"===b?e instanceof w&&wi(e,e,function(a){xi(j,a)}):a===He&&"elements"===b&&e instanceof w&&wi(e,e,function(a){zi(j,a)}),j.Xd(a,b,c,d,e,g,i))};
S.prototype.updateTargetBindings=S.prototype.nc=function(a){w.prototype.nc.call(this,a);if(this.data!==m)for(a=this.elements;a.next();){var b=a.value;b instanceof w&&wi(b,b,function(a){a.data!==m&&a.nc()})}};v.m(S,{yE:"adornments"},function(){return this.og===m?m:this.og.f});S.prototype.findAdornment=S.prototype.sn=function(a){t&&v.e(a,"string",S,"findAdornment:category");var b=this.og;return b===m?m:b.ca(a)};
S.prototype.addAdornment=S.prototype.Ym=function(a,b){if(b!==m){t&&(v.e(a,"string",S,"addAdornment:category"),v.c(b,mf,S,"addAdornment:ad"));var c=m,d=this.og;d!==m&&(c=d.ca(a));if(c!==b){if(c!==m){var e=c.ta;e!==m&&e.Ad(-1,c)}d===m&&(this.og=d=new oa("string",mf));d.add(a,b);c=this.b;c!==m&&(d=c.tn("Adornment"),d===m&&(d=c.tn("")),d!==m&&(d.kk(99999999,b),b.data=this.data))}}};
S.prototype.removeAdornment=S.prototype.Ll=function(a){t&&v.e(a,"string",S,"removeAdornment:category");var b=this.og;if(b!==m){var c=b.ca(a);if(c!==m){var d=c.ta;d!==m&&d.Ad(-1,c)}b.remove(a);0===b.count&&(this.og=m)}};S.prototype.clearAdornments=S.prototype.Wg=function(){var a=this.og;if(a!==m){for(var b=[],a=a.f;a.next();)b.push(a.key);for(var a=b.length,c=0;c<a;c++)this.Ll(b[c])}};
S.prototype.updateAdornments=S.prototype.ii=function(){a:{var a=this.b;if(a!==m){var b=m;if(this.Ga&&this.jD){var c=this.Zn;if(c!==m&&this.eb()&&c.mk()&&c.la.aa()){b=this.sn("Selection");if(b===m){b=this.kD;b===m&&(this instanceof V?b=a.uC:this instanceof S&&(b=this instanceof nf?a.YB:a.IC));if(!(b instanceof mf))break a;pf(b);b=b.copy();if(!(b instanceof mf))break a;b.nd="Selection";b.Nd=c}if(b!==m){a=b.placeholder;if(a!==m){var d=c.yl(),e=0;c instanceof W&&(e=c.Qa);a.ma=new yb((c.ua.width+e)*d,
(c.ua.height+e)*d)}else this instanceof V&&(a=b.wa,a=xk(b,a,a.length),d=this.path,a instanceof W&&d===c&&(d=c.xa,ti(this),d=c.xa,a.zr=d,0===a.Qa&&(a.Qa=c.Qa)));b.Pa=c.zn();b.type!==yg&&(b.location=c.xb(pc))}}this.Ym("Selection",b)}else this.Ll("Selection")}}c=this.b;if(c!==m){c=c.Tb.ne.i;b=c.length;for(a=0;a<b;a++)d=c[a],d.isEnabled&&d.updateAdornments(this)}};v.m(S,{ta:"layer"},s("s"));v.m(S,{b:"diagram"},function(){var a=this.s;return a!==m?a.b:m});v.a(S,"layerName",S.prototype.Cd);
v.defineProperty(S,{Cd:"layerName"},s("ym"),function(a){var b=this.ym;if(b!==a&&(v.e(a,"string",S,"layerName"),this.ym=a,this.d("layerName",b,a),b=this.ta,b!==m&&b.name!==a)){var c=b.b;if(c!==m&&(a=c.tn(a),a!==m&&a!==b)){var d=b.Ad(-1,this,h);0<=d&&c.Xd(He,"parts",b,this,m,d,h);d=a.kk(99999999,this,h);0<=d&&c.Xd(Ge,"parts",a,m,this,h,d);d=this.Hr;if(d!==m){var e=c.ya;c.ya=h;d(this,b,a);c.ya=e}}}});v.a(S,"layerChanged",S.prototype.Hr);
v.defineProperty(S,{Hr:"layerChanged"},s("Ap"),function(a){var b=this.Ap;b!==a&&(a!==m&&v.e(a,"function",S,"layerChanged"),this.Ap=a,this.d("layerChanged",b,a))});v.a(S,"location",S.prototype.location);v.defineProperty(S,{location:"location"},s("ti"),function(a){var b=this.ti;if(!b.u(a)){t&&v.c(a,C,S,"location");this.ti=a=a.B();if(this.Ec===p){var c=this.kb,d=this.dt,e=c.copy();c.Kd(a.x-d.x,a.y-d.y);c.u(e)||this.d("position",e,c);Gj(this)}this.d("location",b,a)}});
function Gj(a){if(a.qi===p){var b=a.b;b!==m&&(b.zg.add(a),a instanceof U&&!b.da.cb&&a.of(),yf(b));a.qi=h}}function rl(a){if(a.qi!==p){var b=a.kb,c=a.wb,d=c.copy();c.qa();c.x=b.x;c.y=b.y;c.freeze();ej(a,d,c);a.qi=p}}v.m(S,{yb:"locationObject"},function(){if(this.ui===m){var a=this.Kr;a!==f&&a!==m&&""!==a?(a=this.Pe(a),this.ui=a!==m?a:this):this.ui=this}return this.ui.visible?this.ui:this});v.a(S,"minLocation",S.prototype.DC);
v.defineProperty(S,{DC:"minLocation"},s("Rp"),function(a){var b=this.Rp;b.u(a)||(t&&v.c(a,C,S,"minLocation"),this.Rp=a=a.B(),this.d("minLocation",b,a))});v.a(S,"maxLocation",S.prototype.xC);v.defineProperty(S,{xC:"maxLocation"},s("Mp"),function(a){var b=this.Mp;b.u(a)||(t&&v.c(a,C,S,"maxLocation"),this.Mp=a=a.B(),this.d("maxLocation",b,a))});v.a(S,"locationObjectName",S.prototype.Kr);
v.defineProperty(S,{Kr:"locationObjectName"},s("Jp"),function(a){var b=this.Jp;b!==a&&(t&&v.e(a,"string",S,"locationObjectName"),this.Jp=a,this.ui=m,oj(this),this.d("locationObjectName",b,a))});v.a(S,"locationSpot",S.prototype.sf);v.defineProperty(S,{sf:"locationSpot"},s("Kp"),function(a){var b=this.Kp;b.u(a)||(t&&(v.c(a,H,S,"locationSpot"),fc(a)||v.g("Part.locationSpot must be a specific Spot value, not: "+a)),this.Kp=a=a.B(),oj(this),this.d("locationSpot",b,a))});
S.prototype.move=S.prototype.move=function(a){this.position=a;this.Ec===p&&rl(this)};
S.prototype.isVisible=S.prototype.eb=function(){if(!this.Ug)return p;var a=this.ta;if(a!==m&&!a.visible)return p;var b=this.Va;if(b!==m&&!b.je)return p;if(this instanceof U){if(a!==m)if(a.b.rf)for(a=this.Oe();a.next();){if(b=a.value,b=b.ea,b!==m&&!b.Vd)return p}else for(a=this.sr();a.next();)if(b=a.value,b=b.ia,b!==m&&!b.Vd)return p;a=this.ke;if(a!==m&&!a.eb())return p}else if(this instanceof V){b=this.ea;if(b!==m&&sl(b)===m)return p;b=this.ia;if(b!==m&&sl(b)===m)return p}return h};
function tl(a,b,c){hc(c)&&(c=sc);var d=b.ua;if(b===m||b===a)return new C(d.width*c.x+c.offsetX,d.height*c.y+c.offsetY);c=new C(d.width*c.x+c.offsetX,d.height*c.y+c.offsetY);b.transform.zb(c);for(b=b.Y;b!==m&&b!==a;)b.transform.zb(c),b=b.Y;a.Cm.zb(c);c.offset(-a.Gc.x,-a.Gc.y);return c}S.prototype.ensureBounds=S.prototype.Zh=function(){ph(this,Infinity,Infinity);this.vc()};
S.prototype.vc=function(){dj(this);if(this.Ec===p)rl(this);else{this instanceof mf&&(this.K!==yg&&this.ab!==m)&&(this.ui=this.ab);var a=this.KA;a.set(this.wb);mj(this);this.wb.qa();var b=this.af;this.Gi(0,0,this.Gc.width,this.Gc.height);var c=NaN,d=NaN,e=this.sf,g=this.yb;hc(e)&&v.g("Spot must be real: "+e.toString());var i=g.ua,j=this.dt;j.Ml(0,0,i.width,i.height,e);if(g!==this){g.transform.zb(j);g.Qa&&(e=g.Lh/2,j.offset(-e,-e));for(g=g.Y;g!==m&&g!==this;)g.transform.zb(j),g=g.Y}this.Cm.zb(j);j.offset(-this.Gc.x,
-this.Gc.y);j=this.dt;g=this.position;e=this.location;e.aa()?(c=e.x-j.x,d=e.y-j.y,g.copy(),g.Kd(c,d)):g.aa()&&(c=g.x,d=g.y,e.copy(),e.Kd(c+j.x,d+j.y));j=this.wb;j.x=c;j.y=d;j.freeze();dj(this);ej(this,a,j);a.u(j)?this.af=b:(this instanceof U||this.constructor===S)&&(!ib(a.width,j.width)||!ib(a.height,j.height))&&this.r(16);this.qi=p}};
function yi(a,b){a.xt=p;var c=a.b;if(c!==m){a.updateAdornments();var d=a.yE;if(d!==m){dj(a);for(mj(a);d.next();)ph(d.value,Infinity,Infinity),d.value.vc()}a instanceof U&&Ki(c,a);!a.ta.Sc&&!b&&ni(c);var d=a.wb,e=c.ob;e.aa()?a.af?d.Re(e)||(a.af=p,yh(c)):d.Re(e)&&(a.af=h):c.vm=h;a.wb.aa()&&yh(c,a.wb)}}S.prototype.lk=da(h);v.a(S,"isInDocumentBounds",S.prototype.Ou);
v.defineProperty(S,{Ou:"isInDocumentBounds"},s("op"),function(a){var b=this.op;b!==a&&(t&&v.e(a,"boolean",S,"isInDocumentBounds"),this.op=a,this.d("isInDocumentBounds",b,a))});v.a(S,"category",S.prototype.nd);
v.defineProperty(S,{nd:"category"},s("sj"),function(a){var b=this.sj;if(b!==a){v.e(a,"string",S,"category");this.sj=a;this.d("category",b,a);var b=this.b,c=this.data;if(b!==m&&c!==m){var d=b.P;this instanceof V?(d instanceof O&&d.mD(c,a),b=b.findTemplateForLinkData(c,a),b instanceof V&&(pf(b),b=b.copy(),b instanceof V&&ul(this,b,a))):this instanceof mf||(d!==m&&d.Uy(c,a),b=b.findTemplateForNodeData(c,a),b instanceof S&&(pf(b),b=b.copy(),b instanceof S&&ul(this,b,a)))}}});
function ul(a,b,c){a.Wg();var d=a.data,e=a.Cd,g=a.Ga;b.Yg(a);b.jb(a);a.sj=c;a.J();ij(a);b=a.b;c=h;b!==m&&(c=b.nb,b.nb=h);a.fm=d;d!==m&&a.nc();b!==m&&(b.nb=c);d=a.Cd;d!==e&&(a.ym=e,a.Cd=d);a.Ga=g}S.prototype.canCopy=S.prototype.nH=function(){if(!this.rB)return p;var a=this.ta;if(a===m)return h;if(!a.Oh)return p;a=a.b;return a===m?h:!a.Oh?p:h};S.prototype.canDelete=S.prototype.rH=function(){if(!this.BB)return p;var a=this.ta;if(a===m)return h;if(!a.bk)return p;a=a.b;return a===m?h:!a.bk?p:h};
S.prototype.canEdit=S.prototype.tH=function(){if(!this.uD)return p;var a=this.ta;if(a===m)return h;if(!a.jn)return p;a=a.b;return a===m?h:!a.jn?p:h};S.prototype.canGroup=S.prototype.xH=function(){if(!this.ZB)return p;var a=this.ta;if(a===m)return h;if(!a.cn)return p;a=a.b;return a===m?h:!a.cn?p:h};S.prototype.canMove=S.prototype.AH=function(){if(!this.GC)return p;var a=this.ta;if(a===m)return h;if(!a.ck)return p;a=a.b;return a===m?h:!a.ck?p:h};
S.prototype.canPrint=S.prototype.XE=function(){if(!this.OC)return p;var a=this.ta;if(a===m)return h;if(!a.en)return p;a=a.b;return a===m?h:!a.en?p:h};S.prototype.canReshape=S.prototype.FH=function(){if(!this.XC)return p;var a=this.ta;if(a===m)return h;if(!a.fn)return p;a=a.b;return a===m?h:!a.fn?p:h};S.prototype.canResize=S.prototype.GH=function(){if(!this.YC)return p;var a=this.ta;if(a===m)return h;if(!a.gn)return p;a=a.b;return a===m?h:!a.gn?p:h};
S.prototype.canRotate=S.prototype.HH=function(){if(!this.cD)return p;var a=this.ta;if(a===m)return h;if(!a.hn)return p;a=a.b;return a===m?h:!a.hn?p:h};S.prototype.canSelect=S.prototype.Jx=function(){if(!this.rk)return p;var a=this.ta;if(a===m)return h;if(!a.Od)return p;a=a.b;return a===m?h:!a.Od?p:h};v.a(S,"copyable",S.prototype.rB);v.defineProperty(S,{rB:"copyable"},s("Do"),function(a){var b=this.Do;b!==a&&(t&&v.e(a,"boolean",S,"copyable"),this.Do=a,this.d("copyable",b,a))});v.a(S,"deletable",S.prototype.BB);
v.defineProperty(S,{BB:"deletable"},s("Qo"),function(a){var b=this.Qo;b!==a&&(t&&v.e(a,"boolean",S,"deletable"),this.Qo=a,this.d("deletable",b,a))});v.a(S,"textEditable",S.prototype.uD);v.defineProperty(S,{uD:"textEditable"},s("Nq"),function(a){var b=this.Nq;b!==a&&(t&&v.e(a,"boolean",S,"textEditable"),this.Nq=a,this.d("textEditable",b,a),this.updateAdornments())});v.a(S,"groupable",S.prototype.ZB);
v.defineProperty(S,{ZB:"groupable"},s("jp"),function(a){var b=this.jp;b!==a&&(t&&v.e(a,"boolean",S,"groupable"),this.jp=a,this.d("groupable",b,a))});v.a(S,"movable",S.prototype.GC);v.defineProperty(S,{GC:"movable"},s("Wp"),function(a){var b=this.Wp;b!==a&&(t&&v.e(a,"boolean",S,"movable"),this.Wp=a,this.d("movable",b,a))});v.a(S,"printable",S.prototype.OC);
v.defineProperty(S,{OC:"printable"},s("fq"),function(a){var b=this.fq;b!==a&&(t&&v.e(a,"boolean",S,"printable"),this.fq=a,this.d("printable",b,a))});v.a(S,"reshapable",S.prototype.XC);v.defineProperty(S,{XC:"reshapable"},s("kq"),function(a){var b=this.kq;b!==a&&(t&&v.e(a,"boolean",S,"reshapable"),this.kq=a,this.d("reshapable",b,a),this.updateAdornments())});v.a(S,"resizable",S.prototype.YC);
v.defineProperty(S,{YC:"resizable"},s("lq"),function(a){var b=this.lq;b!==a&&(t&&v.e(a,"boolean",S,"resizable"),this.lq=a,this.d("resizable",b,a),this.updateAdornments())});v.a(S,"rotatable",S.prototype.cD);v.defineProperty(S,{cD:"rotatable"},s("qq"),function(a){var b=this.qq;b!==a&&(t&&v.e(a,"boolean",S,"rotatable"),this.qq=a,this.d("rotatable",b,a),this.updateAdornments())});v.a(S,"selectable",S.prototype.rk);
v.defineProperty(S,{rk:"selectable"},s("Jm"),function(a){var b=this.Jm;b!==a&&(t&&v.e(a,"boolean",S,"selectable"),this.Jm=a,this.d("selectable",b,a),this.updateAdornments())});v.a(S,"selectionObjectName",S.prototype.$n);v.defineProperty(S,{$n:"selectionObjectName"},s("Dq"),function(a){var b=this.Dq;b!==a&&(t&&v.e(a,"string",S,"selectionObjectName"),this.Dq=a,this.Zj=m,this.d("selectionObjectName",b,a))});v.a(S,"selectionAdorned",S.prototype.jD);
v.defineProperty(S,{jD:"selectionAdorned"},s("Aq"),function(a){var b=this.Aq;b!==a&&(t&&v.e(a,"boolean",S,"selectionAdorned"),this.Aq=a,this.d("selectionAdorned",b,a),this.updateAdornments())});v.a(S,"selectionAdornmentTemplate",S.prototype.kD);v.defineProperty(S,{kD:"selectionAdornmentTemplate"},s("Bq"),function(a){var b=this.Bq;b!==a&&(t&&v.c(a,mf,S,"selectionAdornmentTemplate"),this instanceof V&&(a.type=yg),this.Bq=a,this.d("selectionAdornmentTemplate",b,a))});
v.m(S,{Zn:"selectionObject"},function(){if(this.Zj===m){var a=this.$n;a!==m&&""!==a?(a=this.Pe(a),this.Zj=a!==m?a:this):this instanceof V?(a=this.path,this.Zj=a!==m?a:this):this.Zj=this}return this.Zj});v.a(S,"isSelected",S.prototype.Ga);
v.defineProperty(S,{Ga:"isSelected"},s("Ys"),function(a){var b=this.Ys;if(b!==a){t&&v.e(a,"boolean",S,"isSelected");var c=this.b;if(!a||this.Jx()&&!(c!==m&&c.selection.count>=c.yC)){this.Ys=a;var d=p;if(c!==m){d=c.nb;c.nb=h;var e=c.selection;e.qa();a?e.add(this):e.remove(this);e.freeze()}this.d("isSelected",b,a);this.updateAdornments();a=this.lD;a!==m&&a(this);c!==m&&(yf(c),c.nb=d)}}});v.a(S,"selectionChanged",S.prototype.lD);
v.defineProperty(S,{lD:"selectionChanged"},s("Cq"),function(a){var b=this.Cq;b!==a&&(a!==m&&v.e(a,"function",S,"selectionChanged"),this.Cq=a,this.d("selectionChanged",b,a))});v.a(S,"resizeAdornmentTemplate",S.prototype.ZC);v.defineProperty(S,{ZC:"resizeAdornmentTemplate"},s("mq"),function(a){var b=this.mq;b!==a&&(t&&v.c(a,mf,S,"resizeAdornmentTemplate"),this.mq=a,this.d("resizeAdornmentTemplate",b,a))});v.a(S,"resizeObjectName",S.prototype.aD);
v.defineProperty(S,{aD:"resizeObjectName"},s("oq"),function(a){var b=this.oq;b!==a&&(t&&v.e(a,"string",S,"resizeObjectName"),this.oq=a,this.el=m,this.d("resizeObjectName",b,a))});v.m(S,{yG:"resizeObject"},function(){if(this.el===m){var a=this.aD;a!==m&&""!==a?(a=this.Pe(a),this.el=a!==m?a:this):this.el=this}return this.el});v.a(S,"resizeCellSize",S.prototype.$C);
v.defineProperty(S,{$C:"resizeCellSize"},s("nq"),function(a){var b=this.nq;b.u(a)||(t&&v.c(a,yb,S,"resizeCellSize"),this.nq=a=a.B(),this.d("resizeCellSize",b,a))});v.a(S,"rotateAdornmentTemplate",S.prototype.dD);v.defineProperty(S,{dD:"rotateAdornmentTemplate"},s("rq"),function(a){var b=this.rq;b!==a&&(t&&v.c(a,mf,S,"rotateAdornmentTemplate"),this.rq=a,this.d("rotateAdornmentTemplate",b,a))});v.a(S,"rotateObjectName",S.prototype.eD);
v.defineProperty(S,{eD:"rotateObjectName"},s("sq"),function(a){var b=this.sq;b!==a&&(t&&v.e(a,"string",S,"rotateObjectName"),this.sq=a,this.fl=m,this.d("rotateObjectName",b,a))});v.m(S,{CG:"rotateObject"},function(){if(this.fl===m){var a=this.eD;a!==m&&""!==a?(a=this.Pe(a),this.fl=a!==m?a:this):this.fl=this}return this.fl});v.a(S,"text",S.prototype.text);v.defineProperty(S,{text:"text"},s("md"),function(a){var b=this.md;b!==a&&(t&&v.e(a,"string",S,"text"),this.md=a,this.d("text",b,a))});
v.a(S,"containingGroup",S.prototype.Va);
v.defineProperty(S,{Va:"containingGroup"},s("vj"),function(a){if(this instanceof U||this.constructor===S){var b=this.vj;if(b!==a){t&&a!==m&&v.c(a,nf,S,"containingGroup");if(a!==m&&(this===a||a.Cl(this)))this===a&&v.g("Cannot make a Group a member of itself: "+this.toString()),v.g("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+a.toString());this.r(Ai);var c=this.b;b!==m?vl(b,this):this instanceof nf&&c!==m&&c.gl.remove(this);this.vj=a;a!==m?wl(a,this):this instanceof
nf&&c!==m&&c.gl.add(this);this.r(vi);if(c!==m){var d=this.data,e=c.P;d!==m&&e instanceof O&&e.Wy(d,e.cc(a!==m?a.data:m))}d=this.Vx;d!==m&&(e=h,c!==m&&(e=c.ya,c.ya=h),d(this,b,a),c!==m&&(c.ya=e));if(this instanceof nf){c=new qa(S);lf(c,this,h,p);for(c=c.f;c.next();)if(d=c.value,d instanceof U)for(d=d.le;d.next();)e=d.value,Ci(e)}if(this instanceof U)for(d=this.le;d.next();)e=d.value,Ci(e);this.d("containingGroup",b,a);a!==m&&a.hv()}}else v.g("cannot set the Part.containingGroup of a Link or Adornment")});
function xl(a,b){var c=a.vj;if(c!==b){c!==m&&vl(c,a);a.vj=b;b!==m&&wl(b,a);var d=a.Vx;if(d!==m){var e=h,g=a.b;g!==m&&(e=g.ya,g.ya=h);d(a,c,b);g!==m&&(g.ya=e)}}}function gj(a){a=a.Va;a!==m&&(a.J(),a.ab!==m&&a.ab.J(),a.of())}S.prototype.Dr=function(){var a=this.vj;a!==m&&wl(a,this)};S.prototype.Er=function(){var a=this.vj;a!==m&&vl(a,this)};S.prototype.tl=function(){var a=this.data;if(a!==m){var b=this.b;b!==m&&(b=b.P,b!==m&&b.VC(a))}};v.a(S,"containingGroupChanged",S.prototype.Vx);
v.defineProperty(S,{Vx:"containingGroupChanged"},s("Co"),function(a){var b=this.Co;b!==a&&(a!==m&&v.e(a,"function",S,"containingGroupChanged"),this.Co=a,this.d("containingGroupChanged",b,a))});v.m(S,{zK:"topLevelPart"},function(){return yl(this,this)});function yl(a,b){var c=b.Va;return c!==m?yl(a,c):b instanceof U&&(c=b.ke,c!==m)?yl(a,c):b}v.m(S,{Gr:"isTopLevel"},function(){return this.Va!==m||this instanceof U&&this.Ti?p:h});
S.prototype.isMemberOf=S.prototype.Cl=function(a){return!(a instanceof nf)?p:zl(this,this,a)};function zl(a,b,c){if(b===c||c===m)return p;var d=b.Va;return d!==m&&(d===c||zl(a,d,c))?h:b instanceof U&&(b=b.ke,b!==m)?zl(a,b,c):p}S.prototype.findCommonContainingGroup=S.prototype.vF=function(a){return Al(this,this,a)};function Al(a,b,c){if(b===m||c===m)return m;var d=b.Va;if(d===m)return m;if(b===c)return d;var e=c.Va;return e===m?m:d===e?e:zl(a,c,d)?d:zl(a,b,e)?e:Al(a,d,e)}
v.a(S,"isLayoutPositioned",S.prototype.ry);v.defineProperty(S,{ry:"isLayoutPositioned"},s("pp"),function(a){var b=this.pp;b!==a&&(t&&v.e(a,"boolean",S,"isLayoutPositioned"),this.pp=a,this.d("isLayoutPositioned",b,a),this.r(a?sj:uj))});v.a(S,"layoutConditions",S.prototype.qC);v.defineProperty(S,{qC:"layoutConditions"},s("Bp"),function(a){var b=this.Bp;b!==a&&(t&&v.e(a,"number",S,"layoutConditions"),this.Bp=a,this.d("layoutConditions",b,a))});
S.prototype.canLayout=S.prototype.ir=function(){if(!this.ry||!this.eb())return p;var a=this.ta;return a!==m&&a.Sc||this instanceof U&&this.Ti?p:h};S.prototype.invalidateLayout=S.prototype.r=function(a){a===f&&(a=16777215);var b;!this.ry||0===(a&this.qC)?b=p:(b=this.ta,b!==m&&b.Sc||this instanceof U&&this.Ti?b=p:(b=this.b,b=b!==m&&b.da.cb?p:h));if(b)if(b=this.vj,b!==m){var c=b.vb;c!==m?c.r():b.r(a)}else a=this.b,a!==m&&(c=a.vb,c!==m&&c.r())};v.a(S,"dragComputation",S.prototype.ay);
v.defineProperty(S,{ay:"dragComputation"},s("Ro"),function(a){var b=this.Ro;b!==a&&(a!==m&&v.e(a,"function",S,"dragComputation"),this.Ro=a,this.d("dragComputation",b,a))});v.a(S,"isShadowed",S.prototype.Dl);v.defineProperty(S,{Dl:"isShadowed"},s("Qf"),function(a){var b=this.Qf;b!==a&&(t&&v.e(a,"boolean",S,"isShadowed"),this.Qf=a,ij(this),this.d("isShadowed",b,a))});v.a(S,"shadowOffset",S.prototype.oD);
v.defineProperty(S,{oD:"shadowOffset"},s("Mm"),function(a){var b=this.Mm;b.u(a)||(t&&v.c(a,C,S,"shadowOffset"),this.Mm=a=a.B(),ij(this),this.d("shadowOffset",b,a))});v.a(S,"shadowColor",S.prototype.shadowColor);v.defineProperty(S,{shadowColor:"shadowColor"},s("Lm"),function(a){var b=this.Lm;b!==a&&(t&&v.e(a,"string",S,"shadowColor"),this.Lm=a,ij(this),this.d("shadowColor",b,a))});v.a(S,"shadowBlur",S.prototype.shadowBlur);
v.defineProperty(S,{shadowBlur:"shadowBlur"},s("Km"),function(a){var b=this.Km;b!==a&&(t&&v.e(a,"number",S,"shadowBlur"),this.Km=a,ij(this),this.d("shadowBlur",b,a))});function mf(a){0===arguments.length?S.call(this,Xg):S.call(this,a);this.Cd="Adornment";this.va=m;this.Jm=p;this.ti=new C(NaN,NaN);this.oh=new y(E);this.gc=m;this.Hc=(new y(C)).freeze();this.au=new C;this.ab=m}v.H("Adornment",mf);v.pa(mf,S);
mf.prototype.toString=function(){var a=this.bn;return"Adornment("+this.nd+")"+(a!==m?a.toString():"")};mf.prototype.zj=function(){return this.va&&this.va.V instanceof V?this.va.V.zj():m};mf.prototype.gp=da(m);mf.prototype.tw=function(){var a=this.bn;return a instanceof V?a.Hc:m};v.m(mf,{placeholder:"placeholder"},s("ab"));v.a(mf,"adornedObject",mf.prototype.Nd);v.defineProperty(mf,{Nd:"adornedObject"},s("va"),ba("va"));v.m(mf,{bn:"adornedPart"},function(){var a=this.va;return a!==m?a.V:m});
mf.prototype.lk=function(){var a=this.va;if(a===m)return h;a=a.V;return a===m||!a.Ec};v.m(mf,{Va:"containingGroup"},da(m));
mf.prototype.Jl=function(a,b,c,d,e,g,i){if(a===Ge&&"elements"===b)if(e instanceof Rg)this.ab===m?this.ab=e:this.ab!==e&&v.g("Cannot insert a second Placeholder into the visual tree of an Adornment.");else{if(e instanceof w){var j=Gk(e,e,function(a){return a instanceof Rg});j instanceof Rg&&(this.ab===m?this.ab=j:this.ab!==j&&v.g("Cannot insert a second Placeholder into the visual tree of an Adornment."))}}else a===He&&"elements"===b&&(d===this.ab?this.ab=m:d instanceof w&&this.ab.ci(d)&&(this.ab=
m));S.prototype.Jl.call(this,a,b,c,d,e,g,i)};mf.prototype.updateAdornments=mf.prototype.ii=aa();mf.prototype.tl=aa();function U(a){0===arguments.length?S.call(this,Xg):S.call(this,a);this.ud=new y(V);this.xm=this.Gp=this.Ep=m;this.vp=h;this.ar=p;this.Uq=m;this.wo=this.wp=h;this.xo=(new Kb(2)).freeze();this.rc=this.qg=m}v.H("Node",U);v.pa(U,S);U.prototype.jb=function(a){S.prototype.jb.call(this,a);a.Ep=this.Ep;a.Gp=this.Gp;a.vp=this.vp;a.ar=this.ar;a.Uq=this.Uq;a.wp=this.wp;a.wo=this.wo;a.xo.Ra(this.xo)};
U.prototype.Yg=function(a){S.prototype.Yg.call(this,a);a.of();a.qg=this.qg;a.rc=m};var Bl;U.DirectionDefault=Bl=v.l(U,"DirectionDefault",0);U.DirectionAbsolute=v.l(U,"DirectionAbsolute",1);var Cl;U.DirectionRotatedNode=Cl=v.l(U,"DirectionRotatedNode",2);var Vi;U.DirectionRotatedNodeOrthogonal=Vi=v.l(U,"DirectionRotatedNodeOrthogonal",3);function Dl(a,b){b!==m&&(a.qg==m&&(a.qg=new qa(El)),a.qg.add(b))}
U.prototype.Jl=function(a,b,c,d,e,g,i){a===Ge&&"elements"===b?this.rc=m:a===He&&"elements"===b&&(this.b===m?this.rc=m:d instanceof R&&Fk(this,d,function(a,b){Hj(a,b,h)}));S.prototype.Jl.call(this,a,b,c,d,e,g,i)};U.prototype.invalidateConnectedLinks=U.prototype.of=function(a){a===f&&(a=m);for(var b=this.le;b.next();){var c=b.value;if(!(a!==m&&a.contains(c))){var d=c.Ic;d!==m&&(d.ld=m);var e=c.rd;e!==m&&e!==d&&(e.ld=m);c.Rb()}}};
U.prototype.lk=function(){if(this.Ti===p)return h;var a=this.ke;return a===m?h:!a.Ec};v.a(U,"avoidable",U.prototype.Hx);v.defineProperty(U,{Hx:"avoidable"},s("wo"),function(a){var b=this.wo;if(b!==a){t&&v.e(a,"boolean",U,"avoidable");this.wo=a;var c=this.b;c!==m&&Ki(c,this);this.d("avoidable",b,a)}});v.a(U,"avoidableMargin",U.prototype.eB);
v.defineProperty(U,{eB:"avoidableMargin"},s("xo"),function(a){"number"===typeof a?a=new Kb(a):v.c(a,Kb,U,"avoidableMargin");var b=this.xo;if(!b.u(a)){this.xo=a=a.B();var c=this.b;c!==m&&Ki(c,this);this.d("avoidableMargin",b,a)}});U.prototype.canAvoid=U.prototype.kH=function(){return this.Hx&&!this.Ti};U.prototype.getAvoidableRectangle=U.prototype.RI=function(a){a===f&&(a=new E);a.set(this.la);a.er(this.eB);return a};function sl(a){for(;a!==m&&!a.eb();)a=a.Va;return a}v.m(U,{le:"linksConnected"},function(){return this.ud.f});
U.prototype.findLinksConnected=U.prototype.wF=function(a){a===f&&(a=m);if(a===m)return this.ud.f;t&&v.e(a,"string",U,"findLinksConnected:pid");var b=new Pa(this.ud),c=this;b.Yu=function(b){return b.ea===c&&b.dh===a||b.ia===c&&b.gi===a};return b};U.prototype.findLinksOutOf=U.prototype.sr=function(a){a===f&&(a=m);var b=new Pa(this.ud),c=this;b.Yu=function(b){return b.ea!==c?p:a===m?h:b.dh===a};return b};
U.prototype.findLinksInto=U.prototype.Oe=function(a){a===f&&(a=m);var b=new Pa(this.ud),c=this;b.Yu=function(b){return b.ia!==c?p:a===m?h:b.gi===a};return b};
U.prototype.findNodesConnected=U.prototype.MB=function(a){a===f&&(a=m);for(var b=m,c=m,d=this.ud.f;d.next();){var e=d.value;if(e.ea===this){if(a===m||e.dh===a)e=e.ia,b!==m?b.add(e):c!==m&&c!==e?(b=new qa(U),b.add(c),b.add(e)):c=e}else if(e.ia===this&&(a===m||e.gi===a))e=e.ea,b!==m?b.add(e):c!==m&&c!==e?(b=new qa(U),b.add(c),b.add(e)):c=e}return b!==m?b.f:c!==m?new Na(c):v.Df};
U.prototype.findNodesOutOf=U.prototype.vn=function(a){a===f&&(a=m);for(var b=m,c=m,d=this.ud.f;d.next();){var e=d.value;if(e.ea===this&&(a===m||e.dh===a))e=e.ia,b!==m?b.add(e):c!==m&&c!==e?(b=new qa(U),b.add(c),b.add(e)):c=e}return b!==m?b.f:c!==m?new Na(c):v.Df};
U.prototype.findNodesInto=U.prototype.un=function(a){a===f&&(a=m);for(var b=m,c=m,d=this.ud.f;d.next();){var e=d.value;if(e.ia===this&&(a===m||e.gi===a))e=e.ea,b!==m?b.add(e):c!==m&&c!==e?(b=new qa(U),b.add(c),b.add(e)):c=e}return b!==m?b.f:c!==m?new Na(c):v.Df};v.a(U,"linkConnected",U.prototype.rC);v.defineProperty(U,{rC:"linkConnected"},s("Ep"),function(a){var b=this.Ep;b!==a&&(a!==m&&v.e(a,"function",U,"linkConnected"),this.Ep=a,this.d("linkConnected",b,a))});v.a(U,"linkDisconnected",U.prototype.sC);
v.defineProperty(U,{sC:"linkDisconnected"},s("Gp"),function(a){var b=this.Gp;b!==a&&(a!==m&&v.e(a,"function",U,"linkDisconnected"),this.Gp=a,this.d("linkDisconnected",b,a))});function Fl(a,b,c){if(!a.ud.contains(b)){a.ud.add(b);var d=a.rC;if(d!==m){var e=h,g=a.b;g!==m&&(e=g.ya,g.ya=h);d(a,b,c);g!==m&&(g.ya=e)}a.Vi&&(c=h,g=a.b,g!==m&&(c=g.rf),c?b.ea===a&&(a.Vi=p):b.ia===a&&(a.Vi=p))}}
function Gl(a,b,c){if(a.ud.remove(b)){var d=a.sC,e=a.b;if(d!==m){var g=h;e!==m&&(g=e.ya,e.ya=h);d(a,b,c);e!==m&&(e.ya=g)}!a.Vi&&!(e!==m&&e.da.cb)&&(b=a.ud.count,0===b?a.Vi=h:1===b&&Gi(a))}}function Gi(a){if(0!==a.ud.count){var b=h,c=a.b;c!==m&&(b=c.rf);for(c=a.ud.f;c.next();){var d=c.value;if(b){if(d.ea===a){a.Vi=p;return}}else if(d.ia===a){a.Vi=p;return}}a.Vi=h}}U.prototype.Dr=function(){S.prototype.Dr.call(this);Gi(this);var a=this.xm;a!==m&&Hl(a,this)};
U.prototype.Er=function(){S.prototype.Er.call(this);var a=this.xm;a!==m&&a.df!==m&&(a.df.remove(this),a.J())};U.prototype.tl=function(){if(0<this.ud.count){var a=this.b;if(a===m)return;for(var b=this.ud.copy().f;b.next();)a.remove(b.value)}S.prototype.tl.call(this)};v.m(U,{Ti:"isLinkLabel"},function(){return this.xm!==m});v.a(U,"labeledLink",U.prototype.ke);
v.defineProperty(U,{ke:"labeledLink"},s("xm"),function(a){var b=this.xm;if(b!==a){t&&a!==m&&v.c(a,V,U,"labeledLink");var c=this.b,d=this.data;if(b!==m&&(b.df!==m&&(b.df.remove(this),b.J()),c!==m&&d!==m)){var e=b.data,g=c.P;if(e!==m&&g instanceof O){var i=g.cc(d);i!==f&&g.uG(e,i)}}this.xm=a;a!==m&&(Hl(a,this),c!==m&&d!==m&&(e=a.data,g=c.P,e!==m&&g instanceof O&&(i=g.cc(d),i!==f&&g.UA(e,i))));oj(this);this.d("labeledLink",b,a)}});
U.prototype.findPort=U.prototype.ur=function(a){t&&v.e(a,"string",U,"findPort:pid");this.rc===m&&Ij(this);if(this.rc!==m){var b=this.rc.ca(a);if(b!==m)return b}if(""!==a&&this.rc!==m&&(b=this.rc.ca(""),b!==m))return b;this.rc===m&&Ij(this);return this};v.m(U,{port:"port"},function(){return this.ur("")});v.m(U,{ports:"ports"},function(){this.rc===m&&Ij(this);return this.rc!==m?this.rc.f:v.Df});function Ij(a){a.rc!==m&&a.rc.clear();Fk(a,a,function(a,c){Jj(a,c)})}
function Jj(a,b){var c=b.oe;c!==m&&(a.rc===m&&(a.rc=new oa("string",R)),a.rc.add(c,b))}function Hj(a,b,c){var d=b.oe;if(d!==m&&(a.rc!==m&&a.rc.remove(d),b=a.b,b!==m&&c)){c=m;for(a=a.wF(d);a.next();)c===m&&(c=[]),c.push(a.value);if(c!==m)for(a=0;a<c.length;a++)b.remove(c[a])}}
U.prototype.isInTreeOf=U.prototype.oJ=function(a){if(a===m||a===this)return p;var b=h,c=this.b;c!==m&&(b=c.rf);if(b)a:{for(b=this;b!==a;){for(var c=m,d=b.Oe();d.next()&&!(c=d.value.ea,c!==b););if(c===m){a=p;break a}b=c}a=h}else a:{for(b=this;b!==a;){c=m;for(d=b.sr();d.next()&&!(c=d.value.ia,c!==b););if(c===m){a=p;break a}b=c}a=h}return a};U.prototype.findTreeParts=U.prototype.OI=function(){var a=new qa(S);lf(a,this,p,h);return a};
U.prototype.collapseTree=U.prototype.lr=function(){var a=this.b;if(a!==m&&!a.qf){a.qf=h;var b=a.rf,c=new qa(U);c.add(this);Il(this,c,b);a.qf=p}};function Il(a,b,c){a.Vd=p;for(var d=c?a.sr():a.Oe();d.next();){var e=d.value,g=e.VB(a);g!==m&&(g!==a&&!b.contains(g))&&(b.add(g),ij(e),e.Wg(),ij(g),g.Wg(),gj(g),g.r(uj),g.Vd&&(g.ov=g.Vd,Il(g,b,c)))}}U.prototype.expandTree=U.prototype.rr=function(){var a=this.b;if(a!==m&&!a.qf){a.qf=h;var b=a.rf,c=new qa(U);c.add(this);Jl(this,c,b);a.qf=p}};
function Jl(a,b,c){a.Vd=h;for(var d=c?a.sr():a.Oe();d.next();){var e=d.value,g=e.VB(a);g!==m&&(g!==a&&!b.contains(g))&&(b.add(g),ij(e),e.ii(),ij(g),g.ii(),gj(g),g.r(sj),g.ov&&(g.ov=p,Jl(g,b,c)))}}v.a(U,"isTreeExpanded",U.prototype.Vd);
v.defineProperty(U,{Vd:"isTreeExpanded"},s("vp"),function(a){var b=this.vp;if(b!==a){t&&v.e(a,"boolean",U,"isTreeExpanded");this.vp=a;var c=this.b;c!==m&&yh(c);this.d("isTreeExpanded",b,a);b=this.GD;if(b!==m){var d=h;c!==m&&(d=c.ya,c.ya=h);b(this);c!==m&&(c.ya=d)}c!==m&&c.da.cb||(a?this.rr():this.lr())}});v.a(U,"wasTreeExpanded",U.prototype.ov);
v.defineProperty(U,{ov:"wasTreeExpanded"},s("ar"),function(a){var b=this.ar;b!==a&&(t&&v.e(a,"boolean",U,"wasTreeExpanded"),this.ar=a,this.d("wasTreeExpanded",b,a))});v.a(U,"treeExpandedChanged",U.prototype.GD);v.defineProperty(U,{GD:"treeExpandedChanged"},s("Uq"),function(a){var b=this.Uq;b!==a&&(a!==m&&v.e(a,"function",U,"treeExpandedChanged"),this.Uq=a,this.d("treeExpandedChanged",b,a))});v.a(U,"isTreeLeaf",U.prototype.Vi);
v.defineProperty(U,{Vi:"isTreeLeaf"},s("wp"),function(a){var b=this.wp;b!==a&&(t&&v.e(a,"boolean",U,"isTreeLeaf"),this.wp=a,this.d("isTreeLeaf",b,a))});
function V(){S.call(this,yg);this.vg=m;this.wg="";this.ep=m;this.yg=mc;this.ug=NaN;this.tg=Bl;this.xg=NaN;this.Pg=m;this.Qg="";this.Tq=m;this.Sg=mc;this.Og=NaN;this.Ng=Bl;this.Rg=NaN;this.jq=this.iq=p;this.qo=Wi;this.Eo=0;this.Go=Wi;this.Ho=NaN;this.Bi=Xj;this.Gq=0.5;this.gc=this.df=m;this.Hc=(new y(C)).freeze();this.Zf=m;this.hl=p;this.Zw=m;this.Sm=p;this.Ek=this.uh=this.xa=m;this.Gd=0;this.oh=new y(E);this.au=new C;this.bw=p}v.H("Link",V);v.pa(V,S);
V.prototype.jb=function(a){S.prototype.jb.call(this,a);a.wg=this.wg;a.ep=this.ep;a.yg=this.yg.B();a.ug=this.ug;a.tg=this.tg;a.xg=this.xg;a.Qg=this.Qg;a.Tq=this.Tq;a.Sg=this.Sg.B();a.Og=this.Og;a.Ng=this.Ng;a.Rg=this.Rg;a.iq=this.iq;a.jq=this.jq;a.qo=this.qo;a.Eo=this.Eo;a.Go=this.Go;a.Ho=this.Ho;a.Bi=this.Bi;a.Gq=this.Gq};V.prototype.Yg=function(a){S.prototype.Yg.call(this,a);this.wg=a.wg;this.Qg=a.Qg;a.gc=m;a.Zf=m;a.Rb();a.Ek=this.Ek;a.Gd=this.Gd};var Xj;V.Normal=Xj=v.l(V,"Normal",1);var xh;
V.Orthogonal=xh=v.l(V,"Orthogonal",2);var Qf;V.AvoidsNodes=Qf=v.l(V,"AvoidsNodes",3);var Wi;V.None=Wi=v.l(V,"None",0);var Rj;V.Bezier=Rj=v.l(V,"Bezier",9);var Sj;V.JumpGap=Sj=v.l(V,"JumpGap",10);var Tj;V.JumpOver=Tj=v.l(V,"JumpOver",11);var Uj;V.End=Uj=v.l(V,"End",17);var Vj;V.Scale=Vj=v.l(V,"Scale",18);var Wj;V.Stretch=Wj=v.l(V,"Stretch",19);var Rk;V.OrientAlong=Rk=v.l(V,"OrientAlong",21);var Kl;V.OrientPlus90=Kl=v.l(V,"OrientPlus90",22);var Ll;V.OrientMinus90=Ll=v.l(V,"OrientMinus90",23);var Ml;
V.OrientOpposite=Ml=v.l(V,"OrientOpposite",24);var Nl;V.OrientUpright=Nl=v.l(V,"OrientUpright",25);var Ol;V.OrientPlus90Upright=Ol=v.l(V,"OrientPlus90Upright",26);var Pl;V.OrientMinus90Upright=Pl=v.l(V,"OrientMinus90Upright",27);var Ql;V.OrientUpright45=Ql=v.l(V,"OrientUpright45",28);V.prototype.lk=function(){var a=this.ea;if(a!==m&&(a.Ec||a.qi))return p;a=this.ia;return a!==m&&(a.Ec||a.qi)?p:h};
function Ek(a,b){var c;switch(a){default:case Wi:c=0;break;case Rk:c=b;break;case Kl:c=b+90;break;case Ll:c=b-90;break;case Ml:c=b+180;break;case Nl:c=Ed(b);90<c&&270>c&&(c-=180);break;case Ol:c=Ed(b+90);90<c&&270>c&&(c-=180);break;case Pl:c=Ed(b-90);90<c&&270>c&&(c-=180);break;case Ql:c=Ed(b);if(45<c&&135>c||225<c&&315>c)return 0;90<c&&270>c&&(c-=180)}return Ed(c)}v.a(V,"fromNode",V.prototype.ea);
v.defineProperty(V,{ea:"fromNode"},s("vg"),function(a){var b=this.vg;if(b!==a){t&&a!==m&&v.c(a,U,V,"fromNode");var c=this.Ic;b!==m&&(this.Pg!==b&&Gl(b,this,c),c!==m&&(c.ld=m),Rl(this),b.r(Ai));this.vg=a;this.uh=m;this.Rb();var d=this.b;if(d!==m){var e=this.data,g=d.P;e!==m&&g instanceof O&&g.fv(e,g.cc(a!==m?a.data:m))}e=this.Ic;g=this.gy;if(g!==m){var i=h;d!==m&&(i=d.ya,d.ya=h);g(this,c,e);d!==m&&(d.ya=i)}a!==m&&(this.Pg!==a&&Fl(a,this,e),e!==m&&(e.ld=m),Sl(this),a.r(vi));this.d("fromNode",b,a);Ci(this)}});
v.a(V,"fromPortId",V.prototype.dh);v.defineProperty(V,{dh:"fromPortId"},s("wg"),function(a){var b=this.wg;if(b!==a){t&&v.e(a,"string",V,"fromPortId");var c=this.Ic;c!==m&&(c.ld=m);Rl(this);this.wg=a;var d=this.Ic;d!==m&&(d.ld=m);var e=this.b;if(e!==m){var g=this.data,i=e.P;g!==m&&i instanceof O&&i.as(g,a)}c!==d&&(this.uh=m,this.Rb(),g=this.gy,g!==m&&(i=h,e!==m&&(i=e.ya,e.ya=h),g(this,c,d),e!==m&&(e.ya=i)));Sl(this);this.d("fromPortId",b,a)}});
v.m(V,{Ic:"fromPort"},function(){var a=this.vg;return a===m?m:a.ur(this.wg)});v.a(V,"fromPortChanged",V.prototype.gy);v.defineProperty(V,{gy:"fromPortChanged"},s("ep"),function(a){var b=this.ep;b!==a&&(a!==m&&v.e(a,"function",V,"fromPortChanged"),this.ep=a,this.d("fromPortChanged",b,a))});v.a(V,"toNode",V.prototype.ia);
v.defineProperty(V,{ia:"toNode"},s("Pg"),function(a){var b=this.Pg;if(b!==a){t&&a!==m&&v.c(a,U,V,"toNode");var c=this.rd;b!==m&&(this.vg!==b&&Gl(b,this,c),c!==m&&(c.ld=m),Rl(this),b.r(Ai));this.Pg=a;this.uh=m;this.Rb();var d=this.b;if(d!==m){var e=this.data,g=d.P;e!==m&&g instanceof O&&g.gv(e,g.cc(a!==m?a.data:m))}e=this.rd;g=this.fz;if(g!==m){var i=h;d!==m&&(i=d.ya,d.ya=h);g(this,c,e);d!==m&&(d.ya=i)}a!==m&&(this.vg!==a&&Fl(a,this,e),e!==m&&(e.ld=m),Sl(this),a.r(vi));this.d("toNode",b,a);Ci(this)}});
v.a(V,"toPortId",V.prototype.gi);v.defineProperty(V,{gi:"toPortId"},s("Qg"),function(a){var b=this.Qg;if(b!==a){t&&v.e(a,"string",V,"toPortId");var c=this.rd;c!==m&&(c.ld=m);Rl(this);this.Qg=a;var d=this.rd;d!==m&&(d.ld=m);var e=this.b;if(e!==m){var g=this.data,i=e.P;g!==m&&i instanceof O&&i.bs(g,a)}c!==d&&(this.uh=m,this.Rb(),g=this.fz,g!==m&&(i=h,e!==m&&(i=e.ya,e.ya=h),g(this,c,d),e!==m&&(e.ya=i)));Sl(this);this.d("toPortId",b,a)}});v.m(V,{rd:"toPort"},function(){var a=this.Pg;return a===m?m:a.ur(this.Qg)});
v.a(V,"toPortChanged",V.prototype.fz);v.defineProperty(V,{fz:"toPortChanged"},s("Tq"),function(a){var b=this.Tq;b!==a&&(a!==m&&v.e(a,"function",V,"toPortChanged"),this.Tq=a,this.d("toPortChanged",b,a))});v.a(V,"fromSpot",V.prototype.Xa);v.defineProperty(V,{Xa:"fromSpot"},s("yg"),function(a){var b=this.yg;b.u(a)||(t&&v.c(a,H,V,"fromSpot"),this.yg=a=a.B(),this.d("fromSpot",b,a),this.Rb())});v.a(V,"fromEndSegmentLength",V.prototype.jk);
v.defineProperty(V,{jk:"fromEndSegmentLength"},s("ug"),function(a){var b=this.ug;b!==a&&(t&&v.e(a,"number",V,"fromEndSegmentLength"),0>a&&v.ha(a,">= 0",V,"fromEndSegmentLength"),this.ug=a,this.d("fromEndSegmentLength",b,a),this.Rb())});v.a(V,"fromEndSegmentDirection",V.prototype.xr);v.defineProperty(V,{xr:"fromEndSegmentDirection"},s("tg"),function(a){var b=this.tg;b!==a&&(t&&v.Ua(a,U,V,"fromEndSegmentDirection"),this.tg=a,this.d("fromEndSegmentDirection",b,a),this.Rb())});
v.a(V,"fromShortLength",V.prototype.yr);v.defineProperty(V,{yr:"fromShortLength"},s("xg"),function(a){var b=this.xg;b!==a&&(t&&v.e(a,"number",V,"fromShortLength"),this.xg=a,this.d("fromShortLength",b,a),this.Rb())});v.a(V,"toSpot",V.prototype.Za);v.defineProperty(V,{Za:"toSpot"},s("Sg"),function(a){var b=this.Sg;b.u(a)||(t&&v.c(a,H,V,"toSpot"),this.Sg=a=a.B(),this.d("toSpot",b,a),this.Rb())});v.a(V,"toEndSegmentLength",V.prototype.uk);
v.defineProperty(V,{uk:"toEndSegmentLength"},s("Og"),function(a){var b=this.Og;b!==a&&(t&&v.e(a,"number",V,"toEndSegmentLength"),0>a&&v.ha(a,">= 0",V,"toEndSegmentLength"),this.Og=a,this.d("toEndSegmentLength",b,a),this.Rb())});v.a(V,"toEndSegmentDirection",V.prototype.gs);v.defineProperty(V,{gs:"toEndSegmentDirection"},s("Ng"),function(a){var b=this.Ng;b!==a&&(t&&v.Ua(a,U,V,"toEndSegmentDirection"),this.Ng=a,this.d("toEndSegmentDirection",b,a),this.Rb())});v.a(V,"toShortLength",V.prototype.hs);
v.defineProperty(V,{hs:"toShortLength"},s("Rg"),function(a){var b=this.Rg;b!==a&&(t&&v.e(a,"number",V,"toShortLength"),this.Rg=a,this.d("toShortLength",b,a),this.Rb())});function Ci(a){var b=a.ea,c=a.ia;b!==m&&c!==m?xl(a,b.vF(c)):xl(a,m)}V.prototype.getOtherNode=V.prototype.VB=function(a){t&&v.c(a,U,V,"getOtherNode:node");var b=this.ea;return a===b?this.ia:b};V.prototype.getOtherPort=V.prototype.TI=function(a){t&&v.c(a,R,V,"getOtherPort:port");var b=this.Ic;return a===b?this.rd:b};
v.m(V,{di:"labelNodes"},function(){return this.df===m?v.Df:this.df.f});function Hl(a,b){a.df===m&&(a.df=new qa(U));a.df.add(b);a.J()}V.prototype.Dr=function(){S.prototype.Dr.call(this);Tl(this)&&zg(this,this.la);var a=this.vg,b=this.Pg;if(a!==m){var c=this.Ic;c!==m&&(c.ld=m);Fl(a,this,c);Sl(this)}b!==m&&(c=this.rd,c!==m&&(c.ld=m),Fl(b,this,c),Sl(this))};
V.prototype.Er=function(){S.prototype.Er.call(this);Tl(this)&&zg(this,this.la);var a=this.vg,b=this.Pg;if(a!==m){var c=this.Ic;c!==m&&(c.ld=m);Gl(a,this,c);Rl(this)}b!==m&&(c=this.rd,c!==m&&(c.ld=m),Gl(b,this,c),Rl(this))};V.prototype.tl=function(){if(this.df!==m){var a=this.b;if(a===m)return;for(var b=this.df.copy().f;b.next();)a.remove(b.value)}b=this.data;b!==m&&(a=this.b,a!==m&&(a=a.P,a instanceof O&&a.vG(b)))};
V.prototype.move=V.prototype.move=function(a){var b=this.position,c=b.x;isNaN(c)&&(c=0);b=b.y;isNaN(b)&&(b=0);c=a.x-c;b=a.y-b;S.prototype.move.call(this,a);this.nk(c,b);for(a=this.di;a.next();){var d=a.value,e=d.position;d.move(new C(e.x+c,e.y+b))}};v.a(V,"relinkableFrom",V.prototype.RC);v.defineProperty(V,{RC:"relinkableFrom"},s("iq"),function(a){var b=this.iq;b!==a&&(t&&v.e(a,"boolean",V,"relinkableFrom"),this.iq=a,this.d("relinkableFrom",b,a))});v.a(V,"relinkableTo",V.prototype.SC);
v.defineProperty(V,{SC:"relinkableTo"},s("jq"),function(a){var b=this.jq;b!==a&&(t&&v.e(a,"boolean",V,"relinkableTo"),this.jq=a,this.d("relinkableTo",b,a))});V.prototype.canRelinkFrom=V.prototype.CH=function(){if(!this.RC)return p;var a=this.ta;if(a!==m&&!a.Fi)return p;a=a.b;return a!==m&&!a.Fi?p:h};V.prototype.canRelinkTo=V.prototype.DH=function(){if(!this.SC)return p;var a=this.ta;if(a!==m&&!a.Fi)return p;a=a.b;return a!==m&&!a.Fi?p:h};
v.m(V,{path:"path"},function(){var a=this.gc;if(a!==m)return a;a=this.wa;a=xk(this,a,a.length);return a instanceof W?this.gc=a:m});V.prototype.gp=s("path");V.prototype.tw=s("Hc");V.prototype.zj=function(){Ul(this);var a=this.Ke();return this.Zw=a};
V.prototype.Ke=function(){var a=Infinity,b=Infinity,c=this.ba,d;if(0===c)return new E(NaN,NaN,0,0);if(1===c)c=this.h(0),a=Math.min(c.x,a),b=Math.min(c.y,b),d=new E(c.x,c.y,0,0);else if(2===c){d=this.h(0);var e=this.h(1),a=Math.min(d.x,e.x),b=Math.min(d.y,e.y);d=new E(d,e)}else if(Vl(this)===Rj&&3<=c&&!Ng(this))if(e=this.h(0),a=e.x,b=e.y,d=new E(a,b,0,0),3===c){var c=this.h(1),a=Math.min(c.x,a),b=Math.min(c.y,b),g=this.h(2),a=Math.min(g.x,a),b=Math.min(g.y,b);jd(e.x,e.y,c.x,c.y,g.x,g.y,g.x,g.y,0.5,
d)}else for(var i,j,k=3;k<c;k+=3)i=this.h(k-2),k+3>=c&&(k=c-1),j=this.h(k-1),g=this.h(k),jd(e.x,e.y,i.x,i.y,j.x,j.y,g.x,g.y,0.5,d),a=Math.min(g.x,a),b=Math.min(g.y,b),e=g;else{d=this.h(0);e=this.h(1);a=Math.min(d.x,e.x);b=Math.min(d.y,e.y);d=new E(d,e);for(k=2;k<c;k++)e=this.h(k),a=Math.min(e.x,a),b=Math.min(e.y,b),d.lv(e)}this.au.Kd(a-d.x,b-d.y);return d};v.m(V,{CC:"midPoint"},function(){Ul(this);return Wl(this)});
function Wl(a){var b=a.ba;if(0===b)return gd;if(1===b)return a.h(0);if(2===b){var c=a.h(0),d=a.h(1);return new C((c.x+d.x)/2,(c.y+d.y)/2)}if(Vl(a)===Rj&&3<=b&&!Ng(a)){if(3===b)return a.h(1);var c=(b-1)/3|0,e=3*(c/2|0);if(1===c%2){var c=a.h(e),d=a.h(e+1),g=a.h(e+2),a=a.h(e+3),e=new C,b=d.x,i=d.y,d=g.x,j=g.y,g=(b+d)/2,k=(i+j)/2,i=((c.y+i)/2+k)/2,j=(k+(j+a.y)/2)/2;e.x=(((c.x+b)/2+g)/2+(g+(d+a.x)/2)/2)/2;e.y=(i+j)/2;return e}return a.h(e)}e=0;g=[];for(i=0;i<b-1;i++)c=a.h(i),d=a.h(i+1),gb(c.x,d.x)?(c=
d.y-c.y,0>c&&(c=-c)):gb(c.y,d.y)?(c=d.x-c.x,0>c&&(c=-c)):c=Math.sqrt(c.Mi(d)),g.push(c),e+=c;for(d=i=c=0;c<e/2&&i<b;){d=g[i];if(c+d>e/2)break;c+=d;i++}b=a.h(i);a=a.h(i+1);if(b.x===a.x)return b.y>a.y?new C(b.x,b.y-(e/2-c)):new C(b.x,b.y+(e/2-c));if(b.y===a.y)return b.x>a.x?new C(b.x-(e/2-c),b.y):new C(b.x+(e/2-c),b.y);c=(e/2-c)/d;return new C(b.x+c*(a.x-b.x),b.y+c*(a.y-b.y))}v.m(V,{BC:"midAngle"},function(){Ul(this);return Xl(this)});
function Xl(a){var b=a.ba;if(2>b)return NaN;if(Vl(a)===Rj&&4<=b&&!Ng(a)){var c=(b-1)/3|0,d=3*(c/2|0);if(1===c%2){var d=Math.floor(d),b=a.h(d),e=a.h(d+1),c=a.h(d+2),a=a.h(d+3),d=e.x,e=e.y,g=c.x,c=c.y,i=(d+g)/2,j=(e+c)/2;return tb(((b.x+d)/2+i)/2,((b.y+e)/2+j)/2,(i+(g+a.x)/2)/2,(j+(c+a.y)/2)/2)}if(0<d&&d+1<b)return b=a.h(d-1),e=a.h(d+1),b.Wh(e)}c=b/2|0;if(0===b%2)return b=a.h(c-1),e=a.h(c),b.Wh(e);b=a.h(c-1);e=a.h(c);c=a.h(c+1);a=b.Mi(e);d=e.Mi(c);return a>d?b.Wh(e):e.Wh(c)}v.a(V,"points",V.prototype.mb);
v.defineProperty(V,{mb:"points"},s("Hc"),function(a){t&&v.c(a,y,V,"points");var b=this.Hc;if(b!==a&&a!==m){for(var c=a.f;c.next();){var d=c.value;d.freeze()}a.freeze();this.Hc=a.copy();this.pf();Yl(this);for(var c=a.count,e=new y,g=0;g<c;g++)d=a.i[g],e.add(d.copy());this.d("points",b,e)}});v.m(V,{ba:"pointsCount"},function(){return this.Hc.count});V.prototype.getPoint=V.prototype.h=function(a){return this.Hc.i[a]};
V.prototype.setPoint=V.prototype.w=function(a,b){t&&(v.c(b,C,V,"setPoint"),b.aa()||v.g("Link.setPoint called with a Point that does not have real numbers: "+b.toString()));this.Zf===m&&v.g("Call Link.startRoute before modifying the points of the route.");this.Hc.ev(a,b)};
V.prototype.insertPoint=V.prototype.q=function(a,b){t&&(v.c(b,C,V,"insertPoint"),b.aa()||v.g("Link.insertPoint called with a Point that does not have real numbers: "+b.toString()));this.Zf===m&&v.g("Call Link.startRoute before modifying the points of the route.");this.Hc.lc(a,b)};
V.prototype.addPoint=V.prototype.bd=function(a){t&&(v.c(a,C,V,"addPoint"),a.aa()||v.g("Link.addPoint called with a Point that does not have real numbers: "+a.toString()));this.Zf===m&&v.g("Call Link.startRoute before modifying the points of the route.");this.Hc.add(a)};V.prototype.removePoint=V.prototype.WC=function(a){this.Zf===m&&v.g("Call Link.startRoute before modifying the points of the route.");this.Hc.pe(a)};
V.prototype.clearPoints=V.prototype.ln=function(){this.Zf===m&&v.g("Call Link.startRoute before modifying the points of the route.");this.Hc.clear()};V.prototype.movePoints=V.prototype.nk=function(a,b){for(var c=new y(C),d=this.Hc.f;d.next();){var e=d.value;c.add(new C(e.x+a,e.y+b))}this.mb=c};V.prototype.startRoute=V.prototype.tk=function(){if(this.Zf===m){for(var a=new y(C),b=this.Hc.f;b.next();)a.add(b.value.B());this.Zf=a;this.Hc.qa()}};
V.prototype.commitRoute=V.prototype.Uh=function(){if(this.Zf!==m){for(var a=this.Zf,b=Infinity,c=Infinity,d=a.count,e=0;e<d;e++)var g=a.i[e],b=Math.min(g.x,b),c=Math.min(g.y,c);for(var i=Infinity,j=Infinity,k=this.Hc,l=k.count,e=0;e<l;e++)g=k.i[e],i=Math.min(g.x,i),j=Math.min(g.y,j);if(l===d)for(e=0;e<l;e++)if(g=a.i[e],d=k.i[e],g.x-b!==d.x-i||g.y-c!==d.y-j){this.pf();break}this.Zf=m;this.Hc.freeze();Yl(this);b=new y(C);for(e=0;e<l;e++)g=k.i[e],b.add(g.copy());this.d("points",a,b)}};
V.prototype.rollbackRoute=V.prototype.zG=function(){this.Zf=m};function Yl(a){0===a.Hc.count?a.hl=p:(a.hl=h,Zl(a,p))}V.prototype.invalidateRoute=V.prototype.Rb=function(){if(!this.Sm&&(!this.b||!this.b.da.cb)&&this.eb()){this.hl=p;this.pf();var a=this.gp();a!==m&&a.J()}};
function Ul(a){if(!a.hl&&!a.bw){var b=h;try{a.bw=h;a.tk();var c=a.ea,d=m,d=c===m?m:a.Ic;if(d!==m){var e=Kj(d);if(e===c||!c.eb()){var g=sl(c);g!==m&&g!==c?(c=g,d=g.ur("")):c=g}else d=e}if(c===m||d===m||!c.location.aa())b=p;else{var i=a.ia,j=m,j=i===m?m:a.rd;if(j!==m){var k=Kj(j);if(k===i||!i.eb()){var l=sl(i);l!==m&&l!==i?(i=l,j=l.ur("")):i=l}else j=k}if(i===m||j===m||!i.location.aa())b=p;else{var n=a.ba,r=$l(a,d),q=am(a,j),u=d===j,x=Ng(a),z=a.Le===Rj;u&&!x?(z=h,a.uh=h):a.uh=p;var D=a.ju===Wi||u;if(!x&&
r===lc&&q===lc&&!u){var F=p;if(!D&&3<=n)var G=a.Sd(c,d,lc,h,p,i,j),I=a.Sd(i,j,lc,p,p,c,d),F=bm(a,0,G,n-1,I);if(!F)if(a.ln(),z){var M=c,T=d,pa=i,ea=j,Aa=a.Sd(M,T,lc,h,p,pa,ea),ta=a.Sd(pa,ea,lc,p,p,M,T),va=ta.x-Aa.x,Ia=ta.y-Aa.y,jb=cm(a),hb=0,ub=0,kb=Aa.x+va/3,Wa=Aa.y+Ia/3,rb=kb,bb=Wa;ib(Ia,0)?bb=0<va?bb-jb:bb+jb:(hb=-va/Ia,ub=Math.sqrt(jb*jb/(hb*hb+1)),0>jb&&(ub=-ub),rb=(0>Ia?-1:1)*ub+kb,bb=hb*(rb-kb)+Wa);var kb=Aa.x+2*va/3,Wa=Aa.y+2*Ia/3,Bc=kb,Sc=Wa;ib(Ia,0)?Sc=0<va?Sc-jb:Sc+jb:(Bc=(0>Ia?-1:1)*ub+
kb,Sc=hb*(Bc-kb)+Wa);a.ln();a.bd(Aa);a.bd(new C(rb,bb));a.bd(new C(Bc,Sc));a.bd(ta);a.w(0,a.Sd(M,T,lc,h,p,pa,ea));a.w(3,a.Sd(pa,ea,lc,p,p,M,T))}else{var eb=c,$c=d,Pd=i,Tc=j,Jc=a.Sd(eb,$c,lc,h,p,Pd,Tc),md=a.Sd(Pd,Tc,lc,p,p,eb,$c);if(!isNaN(a.vu)||0!==a.Gd&&!Ng(a)){var Hd=md.x-Jc.x,jc=md.y-Jc.y,Pb=cm(a),Xb=Jc.x+Hd/2,Oe=Jc.y+jc/2,Uc=Xb,ad=Oe;if(ib(jc,0))ad=0<Hd?ad-Pb:ad+Pb;else{var yd=-Hd/jc,zd=Math.sqrt(Pb*Pb/(yd*yd+1));0>Pb&&(zd=-zd);Uc=(0>jc?-1:1)*zd+Xb;ad=yd*(Uc-Xb)+Oe}a.bd(Jc);a.bd(new C(Uc,ad))}else a.bd(Jc);
a.bd(md)}}else{var ee=a.Xe===Qf;D&&(x&&ee||u)&&a.ln();var Qd=cm(a),tc=a.Sd(c,d,r,h,x,i,j),nd=0,od=0,Tb=0;if(x||r!==lc||u){var Ub=dm(a,d,r,h),Tb=em(a,c,d,tc,r,h,x,j);u&&(Tb-=x?90:30,0>Qd&&(Tb-=180));0>Tb?Tb+=360:360<=Tb&&(Tb-=360);u&&(Ub+=Math.abs(Qd));0===Tb?nd=Ub:90===Tb?od=Ub:180===Tb?nd=-Ub:270===Tb?od=-Ub:(nd=Ub*Math.cos(Tb*Math.PI/180),od=Ub*Math.sin(Tb*Math.PI/180));if(hc(r)&&u)var Vb=d.xb(sc),tc=a.hy(c,d,Vb,new C(Vb.x+1E3*nd,Vb.y+1E3*od),h)}var fb=a.Sd(i,j,q,p,x,c,d),kc=0,Kc=0,Eb=0;if(x||q!==
lc||u){var Bb=dm(a,j,q,p),Eb=em(a,i,j,fb,q,p,x,d);u&&(Eb+=x?0:30,0>Qd&&(Eb+=180));0>Eb?Eb+=360:360<=Eb&&(Eb-=360);u&&(Bb+=Math.abs(Qd));0===Eb?kc=Bb:90===Eb?Kc=Bb:180===Eb?kc=-Bb:270===Eb?Kc=-Bb:(kc=Bb*Math.cos(Eb*Math.PI/180),Kc=Bb*Math.sin(Eb*Math.PI/180));hc(q)&&u&&(Vb=j.xb(sc),fb=a.hy(i,j,Vb,new C(Vb.x+1E3*kc,Vb.y+1E3*Kc),p))}var vb=tc;if(x||r!==lc||u)vb=new C(tc.x+nd,tc.y+od);var uc=fb;if(x||q!==lc||u)uc=new C(fb.x+kc,fb.y+Kc);if(D||x||!hc(r)||!(3<n&&bm(a,0,tc,n-2,uc)))if(!D&&!x&&hc(q)&&3<n&&
bm(a,1,vb,n-1,fb))a.w(0,tc);else if(!D&&!x&&4<n&&bm(a,1,vb,n-2,uc))a.w(0,tc),a.w(n-1,fb);else if(!D&&x&&6<=n&&!ee&&bm(a,1,vb,n-2,uc))a.w(0,tc),a.w(n-1,fb);else{a.ln();a.bd(tc);(x||r!==lc||u)&&a.bd(vb);if(x)b:{var P=vb,qb=Tb,Q=uc,ca=Eb,ec=c,$b=i,qb=-45<=qb&&45>qb?0:45<=qb&&135>qb?90:135<=qb&&225>qb?180:270,ca=-45<=ca&&45>ca?0:45<=ca&&135>ca?90:135<=ca&&225>ca?180:270,la=ec.la.copy(),ga=$b.la.copy();if(la.aa()&&ga.aa()){la.nf(8,8);ga.nf(8,8);la.lv(P);ga.lv(Q);var wb=a.b;if(a.Xe===Qf&&wb!==m&&!la.fa(Q)&&
!ga.fa(P)&&ec!==$b&&!a.ta.Sc){var Za;wb.Oc===m&&(wb.Oc=new fm);var xb=m;wb.Oc.Dn||(xb=a!==m?a.Va:m);if(wb.Oc.Dn||wb.Oc.group!==xb){if(xb===m){var pd,Jb;if(wb.Fj)if(wb.wr.aa()){var ac=wb.wr.copy();ac.er(wb.padding);Jb=ac}else{for(var Rd,Sd=h,qd=wb.Ab,Lc=qd.length,Mc=0;Mc<Lc;Mc++){var fe=qd.i[Mc];if(fe.visible&&!fe.Sc)for(var Id=fe.Bb,bd=Id.length,Wb=0;Wb<bd;Wb++){var nc=Id.i[Wb];if(nc.Ou&&nc.eb()){var ge=nc.la;ge.aa()&&(Sd?(Sd=p,Rd=ge.copy()):Rd.ej(ge))}}}Sd&&(Rd=new E(0,0,0,0));Rd.er(wb.padding);
Jb=Rd}else Jb=wb.yc.copy();pd=Jb;pd.nf(100,100);gm(wb.Oc,pd);for(var cd=wb.ok;cd.next();){var Jd=cd.value,lb=Jd.ta;lb===m||(!lb.visible||lb.Sc)||Ii(wb,Jd)}}else{var nb=xb.la.copy();nb.nf(20,20);gm(wb.Oc,nb);for(var Cc=xb.mc;Cc.next();){var Ba=Cc.value;Ba instanceof U&&Ii(wb,Ba)}}wb.Oc.group=xb;wb.Oc.Dn=p}else hm(wb.Oc);Za=wb.Oc;var Xa=la.copy().ej(ga);Xa.nf(2*Za.nl,2*Za.ml);im(Za,P,qb,Q,ca,Xa);var Ca=jm(Za,Q.x,Q.y);if(!Za.abort&&Ca===km){hm(Za);var Ua=Za.pD;Xa.nf(Za.nl*Ua,Za.ml*Ua);im(Za,P,qb,Q,ca,
Xa);Ca=jm(Za,Q.x,Q.y)}!Za.abort&&Ca===km&&(hm(Za),Ua=Za.oC,Xa.nf(Za.nl*Ua,Za.ml*Ua),im(Za,P,qb,Q,ca,Xa),Ca=jm(Za,Q.x,Q.y));!Za.abort&&(Ca===km&&Za.MD)&&(hm(Za),im(Za,P,qb,Q,ca,Za.lb),Ca=jm(Za,Q.x,Q.y));if(!Za.abort&&Ca<km&&0!==jm(Za,Q.x,Q.y)){lm(a,Za,Q.x,Q.y,ca,h);var db=a.h(2);if(4>a.ba)0===qb||180===qb?(db.x=P.x,db.y=Q.y):(db.x=Q.x,db.y=P.y),a.w(2,db),a.q(3,db);else{var Qb=a.h(3);if(0===qb||180===qb)if(ib(db.x,Qb.x)){var Dc=0===qb?Math.max(db.x,P.x):Math.min(db.x,P.x);a.w(2,new C(Dc,P.y));a.w(3,
new C(Dc,Qb.y))}else ib(db.y,Qb.y)?(Math.abs(P.y-db.y)<=Za.ml/2&&(a.w(2,new C(db.x,P.y)),a.w(3,new C(Qb.x,P.y))),a.q(2,new C(db.x,P.y))):a.w(2,new C(P.x,db.y));else if(90===qb||270===qb)if(ib(db.y,Qb.y)){var Oa=90===qb?Math.max(db.y,P.y):Math.min(db.y,P.y);a.w(2,new C(P.x,Oa));a.w(3,new C(Qb.x,Oa))}else ib(db.x,Qb.x)?(Math.abs(P.x-db.x)<=Za.nl/2&&(a.w(2,new C(P.x,db.y)),a.w(3,new C(P.x,Qb.y))),a.q(2,new C(P.x,db.y))):a.w(2,new C(db.x,P.y))}break b}}var ka,Ta;if(0===qb)if(Q.x>P.x||270===ca&&Q.y<P.y&&
ga.right>P.x||90===ca&&Q.y>P.y&&ga.right>P.x)ka=new C(Q.x,P.y),Ta=new C(Q.x,(P.y+Q.y)/2),180===ca?(ka.x=mm(a,P.x,Q.x),Ta.x=ka.x,Ta.y=Q.y):270===ca&&Q.y<P.y||90===ca&&Q.y>P.y?(ka.x=P.x<ga.left?mm(a,P.x,ga.left):P.x<ga.right&&(270===ca&&P.y<ga.top||90===ca&&P.y>ga.bottom)?mm(a,P.x,Q.x):ga.right,Ta.x=ka.x,Ta.y=Q.y):0===ca&&(P.x<ga.left&&P.y>ga.top&&P.y<ga.bottom)&&(ka.x=P.x,ka.y=P.y<Q.y?Math.min(Q.y,ga.top):Math.max(Q.y,ga.bottom),Ta.y=ka.y);else{ka=new C(P.x,Q.y);Ta=new C((P.x+Q.x)/2,Q.y);if(180===
ca||90===ca&&Q.y<la.top||270===ca&&Q.y>la.bottom){if(180===ca&&(ga.fa(P)||la.fa(Q)))ka.y=mm(a,P.y,Q.y);else if(Q.y<P.y&&(180===ca||90===ca))ka.y=mm(a,la.top,Math.max(Q.y,ga.bottom));else if(Q.y>P.y&&(180===ca||270===ca))ka.y=mm(a,la.bottom,Math.min(Q.y,ga.top));Ta.x=Q.x;Ta.y=ka.y}if(ka.y>la.top&&ka.y<la.bottom)if(Q.x>=la.left&&Q.x<=P.x||P.x<=ga.right&&P.x>=Q.x){if(90===ca||270===ca)ka=new C(Math.max((P.x+Q.x)/2,P.x),P.y),Ta=new C(ka.x,Q.y)}else ka.y=270===ca||(0===ca||180===ca)&&Q.y<P.y?Math.min(Q.y,
0===ca?la.top:Math.min(la.top,ga.top)):Math.max(Q.y,0===ca?la.bottom:Math.max(la.bottom,ga.bottom)),Ta.x=Q.x,Ta.y=ka.y}else if(180===qb)if(Q.x<P.x||270===ca&&Q.y<P.y&&ga.left<P.x||90===ca&&Q.y>P.y&&ga.left<P.x)ka=new C(Q.x,P.y),Ta=new C(Q.x,(P.y+Q.y)/2),0===ca?(ka.x=mm(a,P.x,Q.x),Ta.x=ka.x,Ta.y=Q.y):270===ca&&Q.y<P.y||90===ca&&Q.y>P.y?(ka.x=P.x>ga.right?mm(a,P.x,ga.right):P.x>ga.left&&(270===ca&&P.y<ga.top||90===ca&&P.y>ga.bottom)?mm(a,P.x,Q.x):ga.left,Ta.x=ka.x,Ta.y=Q.y):180===ca&&(P.x>ga.right&&
P.y>ga.top&&P.y<ga.bottom)&&(ka.x=P.x,ka.y=P.y<Q.y?Math.min(Q.y,ga.top):Math.max(Q.y,ga.bottom),Ta.y=ka.y);else{ka=new C(P.x,Q.y);Ta=new C((P.x+Q.x)/2,Q.y);if(0===ca||90===ca&&Q.y<la.top||270===ca&&Q.y>la.bottom){if(0===ca&&(ga.fa(P)||la.fa(Q)))ka.y=mm(a,P.y,Q.y);else if(Q.y<P.y&&(0===ca||90===ca))ka.y=mm(a,la.top,Math.max(Q.y,ga.bottom));else if(Q.y>P.y&&(0===ca||270===ca))ka.y=mm(a,la.bottom,Math.min(Q.y,ga.top));Ta.x=Q.x;Ta.y=ka.y}if(ka.y>la.top&&ka.y<la.bottom)if(Q.x<=la.right&&Q.x>=P.x||P.x>=
ga.left&&P.x<=Q.x){if(90===ca||270===ca)ka=new C(Math.min((P.x+Q.x)/2,P.x),P.y),Ta=new C(ka.x,Q.y)}else ka.y=270===ca||(0===ca||180===ca)&&Q.y<P.y?Math.min(Q.y,180===ca?la.top:Math.min(la.top,ga.top)):Math.max(Q.y,180===ca?la.bottom:Math.max(la.bottom,ga.bottom)),Ta.x=Q.x,Ta.y=ka.y}else if(90===qb)if(Q.y>P.y||180===ca&&Q.x<P.x&&ga.bottom>P.y||0===ca&&Q.x>P.x&&ga.bottom>P.y)ka=new C(P.x,Q.y),Ta=new C((P.x+Q.x)/2,Q.y),270===ca?(ka.y=mm(a,P.y,Q.y),Ta.x=Q.x,Ta.y=ka.y):180===ca&&Q.x<P.x||0===ca&&Q.x>P.x?
(ka.y=P.y<ga.top?mm(a,P.y,ga.top):P.y<ga.bottom&&(180===ca&&P.x<ga.left||0===ca&&P.x>ga.right)?mm(a,P.y,Q.y):ga.bottom,Ta.x=Q.x,Ta.y=ka.y):90===ca&&(P.y<ga.top&&P.x>ga.left&&P.x<ga.right)&&(ka.x=P.x<Q.x?Math.min(Q.x,ga.left):Math.max(Q.x,ga.right),ka.y=P.y,Ta.x=ka.x);else{ka=new C(Q.x,P.y);Ta=new C(Q.x,(P.y+Q.y)/2);if(270===ca||0===ca&&Q.x<la.left||180===ca&&Q.x>la.right){if(270===ca&&(ga.fa(P)||la.fa(Q)))ka.x=mm(a,P.x,Q.x);else if(Q.x<P.x&&(270===ca||0===ca))ka.x=mm(a,la.left,Math.max(Q.x,ga.right));
else if(Q.x>P.x&&(270===ca||180===ca))ka.x=mm(a,la.right,Math.min(Q.x,ga.left));Ta.x=ka.x;Ta.y=Q.y}if(ka.x>la.left&&ka.x<la.right)if(Q.y>=la.top&&Q.y<=P.y||P.y<=ga.bottom&&P.y>=Q.y){if(0===ca||180===ca)ka=new C(P.x,Math.max((P.y+Q.y)/2,P.y)),Ta=new C(Q.x,ka.y)}else ka.x=180===ca||(90===ca||270===ca)&&Q.x<P.x?Math.min(Q.x,90===ca?la.left:Math.min(la.left,ga.left)):Math.max(Q.x,90===ca?la.right:Math.max(la.right,ga.right)),Ta.x=ka.x,Ta.y=Q.y}else if(Q.y<P.y||180===ca&&Q.x<P.x&&ga.top<P.y||0===ca&&Q.x>
P.x&&ga.top<P.y)ka=new C(P.x,Q.y),Ta=new C((P.x+Q.x)/2,Q.y),90===ca?(ka.y=mm(a,P.y,Q.y),Ta.x=Q.x,Ta.y=ka.y):180===ca&&Q.x<P.x||0===ca&&Q.x>=P.x?(ka.y=P.y>ga.bottom?mm(a,P.y,ga.bottom):P.y>ga.top&&(180===ca&&P.x<ga.left||0===ca&&P.x>ga.right)?mm(a,P.y,Q.y):ga.top,Ta.x=Q.x,Ta.y=ka.y):270===ca&&(P.y>ga.bottom&&P.x>ga.left&&P.x<ga.right)&&(ka.x=P.x<Q.x?Math.min(Q.x,ga.left):Math.max(Q.x,ga.right),ka.y=P.y,Ta.x=ka.x);else{ka=new C(Q.x,P.y);Ta=new C(Q.x,(P.y+Q.y)/2);if(90===ca||0===ca&&Q.x<la.left||180===
ca&&Q.x>la.right){if(90===ca&&(ga.fa(P)||la.fa(Q)))ka.x=mm(a,P.x,Q.x);else if(Q.x<P.x&&(90===ca||0===ca))ka.x=mm(a,la.left,Math.max(Q.x,ga.right));else if(Q.x>P.x&&(90===ca||180===ca))ka.x=mm(a,la.right,Math.min(Q.x,ga.left));Ta.x=ka.x;Ta.y=Q.y}if(ka.x>la.left&&ka.x<la.right)if(Q.y<=la.bottom&&Q.y>=P.y||P.y>=ga.top&&P.y<=Q.y){if(0===ca||180===ca)ka=new C(P.x,Math.min((P.y+Q.y)/2,P.y)),Ta=new C(Q.x,ka.y)}else ka.x=180===ca||(90===ca||270===ca)&&Q.x<P.x?Math.min(Q.x,270===ca?la.left:Math.min(la.left,
ga.left)):Math.max(Q.x,270===ca?la.right:Math.max(la.right,ga.right)),Ta.x=ka.x,Ta.y=Q.y}a.bd(ka);a.bd(Ta)}}(x||q!==lc||u)&&a.bd(uc);a.bd(fb)}}b=h}}}finally{a.bw=p,b?a.Uh():a.zG()}}}function nm(a,b){Math.abs(b.x-a.x)>Math.abs(b.y-a.y)?(b.x=b.x>=a.x?a.x+9E9:a.x-9E9,b.y=a.y):(b.y=b.y>=a.y?a.y+9E9:a.y-9E9,b.x=a.x);return b}
V.prototype.getLinkPointFromPoint=V.prototype.hy=function(a,b,c,d){if(a===m||b===m)return c;if(!a.eb()){var e=sl(a);e!==m&&e!==a&&(b=e.port)}a=b.Y===m?new ob:b.Y.fe.copy();e=a.copy();e.Lu();d=Rb(e,d);e=Rb(e,c);c=e.copy();b.Ju(d,e,c);b=Rb(a,c);c.x=b.x;c.y=b.y;return c};function om(a,b){var c=a.ld;c===m&&(c=new pm,c.port=a,c.gh=a.V,a.ld=c);return qm(c,b)}
V.prototype.getLinkPoint=V.prototype.Sd=function(a,b,c,d,e,g,i){if(fc(c))return c=b.xb(c);if(gc(c)&&(c=om(b,this),c!==m))return c=c.Ln;c=b.xb(sc);this.ba>(e?6:2)?(i=d?this.h(1):this.h(this.ba-2),e&&(i=nm(c,i.copy()))):(i=i.xb(sc),e&&(i=nm(c,i)));return this.hy(a,b,c,i,d)};
function em(a,b,c,d,e,g,i,j){a:if(fc(e))d=e.x>e.y?e.x>1-e.y?0:e.x<1-e.y?270:315:e.x<e.y?e.x>1-e.y?90:e.x<1-e.y?180:135:0.5>e.x?225:0.5<e.x?45:0;else{if(gc(e)&&(e=om(c,a),e!==m))switch(e.Fd){case v.Tc:d=270;break a;case v.Bc:d=180;break a;default:case v.Mc:d=0;break a;case v.Lc:d=90;break a}e=c.xb(sc);a.ba>(i?6:2)?(j=g?a.h(1):a.h(a.ba-2),j=i?nm(e,j.copy()):d):j=j.xb(sc);d=Math.abs(j.x-e.x)>Math.abs(j.y-e.y)?j.x>=e.x?0:180:j.y>=e.y?90:270}i=Bl;i=g?a.xr:a.gs;i===Bl&&(i=g?c.xr:c.gs);switch(i){case Cl:a=
b.Pa;d+=a;360<=d&&(d-=360);break;case Bl:case Vi:a=b.Pa;if(0===a)break;45<=a&&135>a?d+=90:135<=a&&225>a?d+=180:225<=a&&315>a&&(d+=270);360<=d&&(d-=360)}return d}function dm(a,b,c,d){if(gc(c)&&(c=om(b,a),c!==m))return c.Bu;c=NaN;c=d?a.jk:a.uk;isNaN(c)&&(c=d?b.jk:b.uk);isNaN(c)&&(c=10);return c}function $l(a,b){var c=a.Xa;ic(c)&&(b===f&&(b=a.Ic),b!==m&&(c=b.Xa));return c===mc?lc:c}function am(a,b){var c=a.Za;ic(c)&&(b===f&&(b=a.rd),b!==m&&(c=b.Za));return c===mc?lc:c}
function rm(a){var b=a.yr;isNaN(b)&&(a=a.Ic,a!==m&&(b=a.yr));return isNaN(b)?0:b}function sm(a){var b=a.hs;isNaN(b)&&(a=a.rd,a!==m&&(b=a.hs));return isNaN(b)?0:b}function Ng(a){a=a.Xe;return a===xh||a===Qf}function Vl(a){if(a.uh===m){var b=Ng(a);a.uh=a.Ic===a.rd&&!b}return a.uh?Rj:a.Le}function tm(a){if(a.Le===Rj)return 0;a=a.sB;if(isNaN(a)||0>a)a=10;return a}
function cm(a){var b=a.vu;if(isNaN(b)){var c=a.Gd;0!==c?(b=a.Ek,b=b!==m?b.aj:10,a=Math.abs(c),b=b/2+((a-1)/2|0)*b,0===a%2&&(b=-b),0>c&&(b=-b)):b=10}return b}
function bm(a,b,c,d,e){var g=a.ju;if(Ng(a)){if(g===Vj)return p;g===Wj&&(g=Uj)}switch(g){case Vj:var i=a.h(b),j=a.h(d);if(!i.u(c)||!j.u(e)){var g=i.x,i=i.y,k=j.x-g,l=j.y-i,n=Math.sqrt(k*k+l*l);if(!ib(n,0)){var r;ib(k,0)?r=0>l?-Math.PI/2:Math.PI/2:(r=Math.atan(l/Math.abs(k)),0>k&&(r=Math.PI-r));var j=c.x,q=c.y,k=e.x-j,u=e.y-q,l=Math.sqrt(k*k+u*u);ib(k,0)?u=0>u?-Math.PI/2:Math.PI/2:(u=Math.atan(u/Math.abs(k)),0>k&&(u=Math.PI-u));n=l/n;r=u-r;a.w(b,c);for(b+=1;b<d;b++)c=a.h(b),k=c.x-g,l=c.y-i,c=Math.sqrt(k*
k+l*l),ib(c,0)||(ib(k,0)?l=0>l?-Math.PI/2:Math.PI/2:(l=Math.atan(l/Math.abs(k)),0>k&&(l=Math.PI-l)),k=l+r,c*=n,a.w(b,new C(j+c*Math.cos(k),q+c*Math.sin(k))));a.w(d,e)}}return h;case Wj:i=a.h(b);q=a.h(d);if(!i.u(c)||!q.u(e)){g=i.x;i=i.y;j=q.x;q=q.y;n=(j-g)*(j-g)+(q-i)*(q-i);k=c.x;r=c.y;var l=e.x,u=e.y,x=0,z=1,x=0!==l-k?(u-r)/(l-k):9E9;0!==x&&(z=Math.sqrt(1+1/(x*x)));a.w(b,c);for(b+=1;b<d;b++){var c=a.h(b),D=c.x,F=c.y,G=0.5;0!==n&&(G=((g-D)*(g-j)+(i-F)*(i-q))/n);var I=g+G*(j-g),M=i+G*(q-i),c=Math.sqrt((D-
I)*(D-I)+(F-M)*(F-M));F<x*(D-I)+M&&(c=-c);0<x&&(c=-c);D=k+G*(l-k);G=r+G*(u-r);0!==x?(c=D+c/z,a.w(b,new C(c,G-(c-D)/x))):a.w(b,new C(D,G+c))}a.w(d,e)}return h;case Uj:return Ng(a)&&(g=a.h(b+1),i=a.h(b+2),ib(g.x,i.x)&&!ib(g.y,i.y)?a.w(b+1,new C(g.x,c.y)):ib(g.y,i.y)&&a.w(b+1,new C(c.x,g.y)),g=a.h(d-1),i=a.h(d-2),ib(g.x,i.x)&&!ib(g.y,i.y)?a.w(d-1,new C(g.x,e.y)):ib(g.y,i.y)&&a.w(d-1,new C(e.x,g.y))),a.w(b,c),a.w(d,e),h;default:return p}}
function mm(a,b,c){return!isNaN(a.vu)||0!==a.Gd&&!Ng(a)?(b+c)/2+cm(a):(b+c)/2}
function lm(a,b,c,d,e,g){var i=b.nl,j=b.ml,k=jm(b,c,d),l=c,n=d;for(0===e?l+=i:90===e?n+=j:180===e?l-=i:n-=j;k>um&&jm(b,l,n)===k-vm;)c=l,d=n,0===e?l+=i:90===e?n+=j:180===e?l-=i:n-=j,k-=vm;if(g){if(k>um)if(180===e||0===e)c=Math.floor(c/i)*i+i/2;else if(90===e||270===e)d=Math.floor(d/j)*j+j/2}else c=Math.floor(c/i)*i+i/2,d=Math.floor(d/j)*j+j/2;k>um&&(g=e,l=c,n=d,0===e?(g=90,n+=j):90===e?(g=180,l-=i):180===e?(g=270,n-=j):270===e&&(g=0,l+=i),jm(b,l,n)===k-vm?lm(a,b,l,n,g,p):(l=c,n=d,0===e?(g=270,n-=j):
90===e?(g=0,l+=i):180===e?(g=90,n+=j):270===e&&(g=180,l-=i),jm(b,l,n)===k-vm&&lm(a,b,l,n,g,p)));a.bd(new C(c,d))}V.prototype.findClosestSegment=V.prototype.EI=function(a){t&&v.c(a,C,V,"findClosestSegment:p");for(var b=a.x,a=a.y,c=this.h(0),d=this.h(1),e=sb(b,a,c.x,c.y,d.x,d.y),g=0,i=1;i<this.ba-1;i++){var c=this.h(i+1),j=sb(b,a,d.x,d.y,c.x,c.y),d=c;j<e&&(g=i,e=j)}return g};V.prototype.invalidateGeometry=V.prototype.pf=function(){this.gc=this.xa=m;this.J()};
v.m(V,{zr:"geometry"},function(){this.xa===m&&(Ul(this),this.xa=wm(this));return this.xa});function ti(a){if(a.xa===m&&a.hl!==p){a.xa=wm(a);var b=a.gp();if(b!==m){b.xa=a.xa;for(var c=a.wa,d=c.length,e=0;e<d;e++){var g=c.i[e];g!==b&&(g.Ui&&g instanceof W)&&(g.xa=a.xa)}}}}
function wm(a){var b=a.ba;if(2>b){var a=new Kd(Ld),c=new Md(0,0);a.Ib.add(c);return a}var d,e=a.h(0).copy(),g=new C(Infinity,Infinity);g.x=Math.min(e.x,g.x);g.y=Math.min(e.y,g.y);var i=Vl(a);if(i===Rj&&3<=b&&!gb(a.ds,0))if(3===b){var j=a.h(2).copy(),c=Math.min(e.x,j.x);d=Math.min(e.y,j.y)}else{if(Ng(a))for(j=0;j<b;j++)c=a.Hc.i[j],g.x=Math.min(c.x,g.x),g.y=Math.min(c.y,g.y);else for(var k,j=3;j<b;j+=3)j+3>=b&&(j=b-1),k=a.h(j),g.x=Math.min(k.x,g.x),g.y=Math.min(k.y,g.y);c=g.x;d=g.y}else{for(j=0;j<b;j++)c=
a.Hc.i[j],g.x=Math.min(c.x,g.x),g.y=Math.min(c.y,g.y);c=g.x;d=g.y}c-=a.au.x;d-=a.au.y;e.x-=c;e.y-=d;if(2===b){var l=a.h(1).copy();l.x-=c;l.y-=d;0!==rm(a)&&xm(a,e,h,g);0!==sm(a)&&xm(a,l,p,g);a=new Kd(Od);a.Ba=e.x;a.Ca=e.y;a.N=l.x;a.O=l.y;return a}l=new J;0!==rm(a)&&xm(a,e,h,g);K(l,e.x,e.y,p,p);if(i===Rj&&3<=b&&!gb(a.ds,0))if(3===b)j=a.h(1),b=j.x-c,e=j.y-d,j=a.h(2).copy(),j.x-=c,j.y-=d,0!==sm(a)&&xm(a,j,p,g),L(l,b,e,b,e,j.x,j.y);else if(Ng(a)){e=new C(c,d);i=a.h(1).copy();k=new C(c,d);for(var b=new C(c,
d),g=a.h(0),n=m,r=a.ds/3,j=1;j<a.ba-1;j++){var n=a.h(j),q=g,u=n,x=a.h(ym(a,n,j,p));if(!gb(q.x,u.x)||!gb(u.x,x.x))if(!gb(q.y,u.y)||!gb(u.y,x.y)){var z=r,D=k,F=b;isNaN(z)&&(z=a.ds/3);var G=q.x,q=q.y,I=u.x,u=u.y,M=x.x,x=x.y,T=z*zm(G,q,I,u),z=z*zm(I,u,M,x);gb(q,u)&&gb(I,M)&&(I>G?x>u?(D.x=I-T,D.y=u-T,F.x=I+z,F.y=u+z):(D.x=I-T,D.y=u+T,F.x=I+z,F.y=u-z):x>u?(D.x=I+T,D.y=u-T,F.x=I-z,F.y=u+z):(D.x=I+T,D.y=u+T,F.x=I-z,F.y=u-z));gb(G,I)&&gb(u,x)&&(u>q?(M>I?(D.x=I-T,D.y=u-T,F.x=I+z):(D.x=I+T,D.y=u-T,F.x=I-z),
F.y=u+z):(M>I?(D.x=I-T,D.y=u+T,F.x=I+z):(D.x=I+T,D.y=u+T,F.x=I-z),F.y=u-z));if(gb(G,I)&&gb(I,M)||gb(q,u)&&gb(u,x))G=0.5*(G+M),q=0.5*(q+x),D.x=G,D.y=q,F.x=G,F.y=q;1===j?(i.x=0.5*(g.x+n.x),i.y=0.5*(g.y+n.y)):2===j&&(gb(g.x,a.h(0).x)&&gb(g.y,a.h(0).y))&&(i.x=0.5*(g.x+n.x),i.y=0.5*(g.y+n.y));L(l,i.x-c,i.y-d,k.x-c,k.y-d,n.x-c,n.y-d);e.set(k);i.set(b);g=n}}j=g.x;g=g.y;a=a.h(a.ba-1);j=0.5*(j+a.x);g=0.5*(g+a.y);L(l,b.x-c,b.y-d,j-c,g-d,a.x-c,a.y-d)}else for(j=3;j<b;j+=3)g=a.h(j-2),j+3>=b&&(j=b-1),e=a.h(j-
1),k=a.h(j),j===b-1&&0!==sm(a)&&(k=k.copy(),xm(a,k,p,Wc)),L(l,g.x-c,g.y-d,e.x-c,e.y-d,k.x-c,k.y-d);else{n=a.h(0);for(j=1;j<b;){j=ym(a,n,j,1<j);r=a.h(j);if(j>=b-1){n!==r&&(0!==sm(a)&&(r=r.copy(),xm(a,r,p,Wc)),Am(a,l,-c,-d,n,r));break}j=ym(a,r,j+1,j<b-3);g=a;e=l;i=-c;k=-d;D=a.h(j);ib(n.y,r.y)&&ib(r.x,D.x)?(F=tm(g),F=Math.min(F,Math.abs(r.x-n.x)/2),F=G=Math.min(F,Math.abs(D.y-r.y)/2),ib(F,0)?(Am(g,e,i,k,n,r),n=r):(q=r.x,z=r.y,I=q,u=z,q=r.x>n.x?r.x-F:r.x+F,u=D.y>r.y?r.y+G:r.y-G,Am(g,e,i,k,n,new C(q,z)),
ce(e,r.x+i,r.y+k,I+i,u+k),n=new C(I,u))):ib(n.x,r.x)&&ib(r.y,D.y)?(F=tm(g),G=Math.min(F,Math.abs(r.y-n.y)/2),G=F=Math.min(G,Math.abs(D.x-r.x)/2),ib(F,0)?(Am(g,e,i,k,n,r),n=r):(q=r.x,u=z=r.y,z=r.y>n.y?r.y-G:r.y+G,I=D.x>r.x?r.x+F:r.x-F,Am(g,e,i,k,n,new C(q,z)),ce(e,r.x+i,r.y+k,I+i,u+k),n=new C(I,u))):(Am(g,e,i,k,n,r),n=r)}}return l.k}
function zm(a,b,c,d){a=c-a;if(isNaN(a)||Infinity===a||-Infinity===a)return NaN;0>a&&(a=-a);b=d-b;if(isNaN(b)||Infinity===b||-Infinity===b)return NaN;0>b&&(b=-b);return gb(a,0)?b:gb(b,0)?a:Math.sqrt(a*a+b*b)}
function xm(a,b,c,d){var e=a.ba;if(!(2>e))if(c){var g=a.h(1),c=g.x-d.x,d=g.y-d.y,g=zm(b.x,b.y,c,d);0!==g&&(e=2===e?0.5*g:g,a=rm(a),a>e&&(a=e),c=a*(c-b.x)/g,a=a*(d-b.y)/g,b.x+=c,b.y+=a)}else g=a.h(e-2),c=g.x-d.x,d=g.y-d.y,g=zm(b.x,b.y,c,d),0!==g&&(e=2===e?0.5*g:g,a=sm(a),a>e&&(a=e),c=a*(b.x-c)/g,a=a*(b.y-d)/g,b.x-=c,b.y-=a)}
function ym(a,b,c,d){for(var e=a.ba,g=b;gb(b.x,g.x)&&gb(b.y,g.y);){if(c>=e)return e-1;g=a.h(c++)}if(!gb(b.x,g.x)&&!gb(b.y,g.y))return c-1;for(var i=g;gb(b.x,g.x)&&gb(g.x,i.x)&&(!d||(b.y>=g.y?g.y>=i.y:g.y<=i.y))||gb(b.y,g.y)&&gb(g.y,i.y)&&(!d||(b.x>=g.x?g.x>=i.x:g.x<=i.x));){if(c>=e)return e-1;i=a.h(c++)}return c-2}
function Am(a,b,c,d,e,g){if(Tl(a)){var i=new y("number"),j;a:if(j=a.b,j===m)j=0;else{Math.min(e.x,g.x);Math.min(e.y,g.y);Math.max(e.x,g.x);Math.max(e.y,g.y);for(j=j.Jr;j.next();){var k=j.value;if(k!==m&&k.visible)for(k=k.Yi;k.next();){var l=k.value;if(l===a){0<i.length&&i.sort(function(a,b){return a-b});j=i.length;break a}if(l instanceof V&&a.eb()&&l.eb()&&Tl(l)&&a.zj().Re(l.zj())&&!Bm(a,l)){var n=l.path;if(n!==m&&n.mk())for(var n=e,r=g,q=i,u=l.ba,x=1;x<u;x++){var z=l.h(x-1),D=l.h(x),F=new C,G;b:{G=
n;var I=r,M=F;if(ib(G.x,I.x)){if(ib(z.y,D.y)&&Math.min(G.y,I.y)<=z.y&&Math.max(G.y,I.y)>=z.y&&Math.min(z.x,D.x)<=G.x&&Math.max(z.x,D.x)>=G.x){M.x=G.x;M.y=z.y;G=h;break b}}else if(ib(z.x,D.x)&&Math.min(G.x,I.x)<=z.x&&Math.max(G.x,I.x)>=z.x&&Math.min(z.y,D.y)<=G.y&&Math.max(z.y,D.y)>=G.y){M.x=z.x;M.y=G.y;G=h;break b}M.x=0;M.y=0;G=p}G&&(ib(n.y,r.y)?q.add(F.x):q.add(F.y))}}}}0<i.length&&i.sort(function(a,b){return a-b});j=i.length}n=e.x;n=e.y;if(0<j)if(ib(e.y,g.y))if(e.x<g.x)for(k=0;k<j;){q=Math.max(e.x,
Math.min(i.i[k++]-5,g.x-10));b.lineTo(q+c,g.y+d);n=q+c;for(r=Math.min(q+10,g.x);k<j;)if(l=i.i[k],l<r+10)k++,r=Math.min(l+5,g.x);else break;l=(q+r)/2+c;l=g.y-10+d;q=r+c;r=g.y+d;a.Le===Sj?K(b,q,r,p,p):L(b,n,l,q,l,q,r)}else for(k=j-1;0<=k;){q=Math.min(e.x,Math.max(i.i[k--]+5,g.x+10));b.lineTo(q+c,g.y+d);n=q+c;for(r=Math.max(q-10,g.x);0<=k;)if(l=i.i[k],l>r-10)k--,r=Math.max(l-5,g.x);else break;l=g.y-10+d;q=r+c;r=g.y+d;a.Le===Sj?K(b,q,r,p,p):L(b,n,l,q,l,q,r)}else if(ib(e.x,g.x))if(e.y<g.y)for(k=0;k<j;){q=
Math.max(e.y,Math.min(i.i[k++]-5,g.y-10));b.lineTo(g.x+c,q+d);n=q+d;for(r=Math.min(q+10,g.y);k<j;)if(l=i.i[k],l<r+10)k++,r=Math.min(l+5,g.y);else break;l=g.x-10+c;q=g.x+c;r+=d;a.Le===Sj?K(b,q,r,p,p):L(b,l,n,l,r,q,r)}else for(k=j-1;0<=k;){q=Math.min(e.y,Math.max(i.i[k--]+5,g.y+10));b.lineTo(g.x+c,q+d);n=q+d;for(r=Math.max(q-10,g.y);0<=k;)if(l=i.i[k],l>r-10)k--,r=Math.max(l-5,g.y);else break;l=g.x-10+c;q=g.x+c;r+=d;a.Le===Sj?K(b,q,r,p,p):L(b,l,n,l,r,q,r)}}b.lineTo(g.x+c,g.y+d)}
v.m(V,{Fu:"firstPickIndex"},function(){return 2>=this.ba?0:Ng(this)||$l(this)!==lc?1:0});v.m(V,{wy:"lastPickIndex"},function(){var a=this.ba;return 0===a?0:2>=a?a-1:Ng(this)||am(this)!==lc?a-2:a-1});function Tl(a){a=a.Le;return a===Tj||a===Sj}function Zl(a,b){if(b||Tl(a)){var c=a.b;c!==m&&(!c.im.contains(a)&&a.Zw!==m)&&c.im.add(a,a.Zw)}}
function zg(a,b){var c=a.ta;if(!(c===m||!c.visible||c.Sc)){var d=c.b;if(d!==m)for(var e=p,d=d.Jr;d.next();){var g=d.value;if(g.visible)if(g===c)for(var e=h,i=p,g=g.Yi;g.next();){var j=g.value;j instanceof V&&(j===a?i=h:i&&Cm(a,j,b))}else if(e)for(g=g.Yi;g.next();)j=g.value,j instanceof V&&Cm(a,j,b)}}}function Cm(a,b,c){if(b!==m&&Tl(b)&&b.xa!==m&&(a.zj().Re(b.zj())||c.Re(b.zj())))Bm(a,b)||b.pf()}
function Bm(a,b){var c=a.ba,d=b.ba;if(0<c&&0<d){var e=a.h(0),g=b.h(0);if(e.hg(g))return h;c=a.h(c-1);d=b.h(d-1);if(c.hg(d)||e.hg(d)||c.hg(g))return h}else if(a.ea===b.ea||a.ia===b.ia)return h;return p}v.a(V,"adjusting",V.prototype.ju);v.defineProperty(V,{ju:"adjusting"},s("qo"),function(a){var b=this.qo;b!==a&&(t&&v.Ua(a,V,V,"adjusting"),this.qo=a,this.d("adjusting",b,a))});v.a(V,"corner",V.prototype.sB);
v.defineProperty(V,{sB:"corner"},s("Eo"),function(a){var b=this.Eo;b!==a&&(t&&v.e(a,"number",V,"corner"),this.Eo=a,this.pf(),this.d("corner",b,a))});v.a(V,"curve",V.prototype.Le);v.defineProperty(V,{Le:"curve"},s("Go"),function(a){var b=this.Go;b!==a&&(t&&v.Ua(a,V,V,"curve"),this.Go=a,this.Rb(),Zl(this,b===Sj||b===Tj||a===Sj||a===Tj),this.d("curve",b,a))});v.a(V,"curviness",V.prototype.vu);
v.defineProperty(V,{vu:"curviness"},s("Ho"),function(a){var b=this.Ho;b!==a&&(t&&v.e(a,"number",V,"curviness"),this.Ho=a,this.Rb(),this.d("curviness",b,a))});v.a(V,"routing",V.prototype.Xe);v.defineProperty(V,{Xe:"routing"},s("Bi"),function(a){var b=this.Bi;b!==a&&(t&&v.Ua(a,V,V,"routing"),this.Bi=a,this.uh=m,this.Rb(),Zl(this,b===xh||b===Qf||a===xh||a===Qf),this.d("routing",b,a))});v.a(V,"smoothness",V.prototype.ds);
v.defineProperty(V,{ds:"smoothness"},s("Gq"),function(a){var b=this.Gq;b!==a&&(t&&v.e(a,"number",V,"smoothness"),this.Gq=a,this.pf(),this.d("smoothness",b,a))});
function Sl(a){var b=a.vg;if(b!==m){var c=a.Pg;if(c!==m){var d=a.wg,a=a.Qg,e;a:{if(!(c===m||b.qg===m))for(e=b.qg.f;e.next();){var g=e.value;if(g.Sn===b&&g.Tr===c&&g.Vu===d&&g.Wu===a||g.Sn===c&&g.Tr===b&&g.Vu===a&&g.Wu===d){e=g;break a}}e=m}for(var i=g=m,j=b.ud.i,k=j.length,l=0;l<k;l++){var n=j[l];if(n.vg===b&&n.wg===d&&n.Pg===c&&n.Qg===a||n.vg===c&&n.wg===a&&n.Pg===b&&n.Qg===d)i===m?i=n:(g===m&&(g=new y(V),g.add(i)),g.add(n))}if(g!==m){e===m&&(e=new El,e.Sn=b,e.Vu=d,e.Tr=c,e.Wu=a,Dl(b,e),Dl(c,e));
e.links=g;for(l=0;l<g.count;l++)if(n=g.i[l],0===n.Gd){b=1;for(c=0;c<g.count;c++)Math.abs(g.i[c].Gd)===b&&(b++,c=-1);n.Ek=e;n.Gd=n.ea===e.Sn?b:-b;n.Rb()}}}}}
function Rl(a){var b=a.Ek;if(b!==m){var c=a.Gd;a.Ek=m;a.Gd=0;a.Rb();b.links.remove(a);if(2>b.links.count)1===b.links.count&&(c=b.links.i[0],c.Ek=m,c.Gd=0,c.Rb()),c=b.Sn,b!==m&&c.qg!==m&&c.qg.remove(b),c=b.Tr,b!==m&&c.qg!==m&&c.qg.remove(b);else{c=Math.abs(c);a=0===c%2;for(b=b.links.f;b.next();){var d=b.value,e=Math.abs(d.Gd),g=0===e%2;e>c&&a===g&&(d.Gd=0<d.Gd?d.Gd-2:d.Gd+2,d.Rb())}}}}function El(){v.Mb(this);this.links=this.Wu=this.Tr=this.Vu=this.Sn=m;this.aj=10}
v.od(El,{Sn:h,Vu:h,Tr:h,Wu:h,links:h,aj:h});function fm(){v.Mb(this);this.group=m;this.Dn=h;this.abort=p;this.Fg=this.Eg=1;this.lt=this.kt=-1;this.Id=this.Hd=8;this.Db=m;this.MD=p;this.pD=22;this.oC=111}v.od(fm,{group:h,Dn:h,abort:h,MD:h,pD:h,oC:h});var um=1,vm=1,km=999999999,Dm=km;
function gm(a,b){if(!(0>=b.width||0>=b.height)){var c=b.y,d=b.x+b.width,e=b.y+b.height;a.Eg=Math.floor((b.x-a.Hd)/a.Hd)*a.Hd;a.Fg=Math.floor((c-a.Id)/a.Id)*a.Id;a.kt=Math.ceil((d+2*a.Hd)/a.Hd)*a.Hd;a.lt=Math.ceil((e+2*a.Id)/a.Id)*a.Id;c=1+(Math.ceil((a.kt-a.Eg)/a.Hd)|0);d=1+(Math.ceil((a.lt-a.Fg)/a.Id)|0);if(a.Db===m||a.Xq<c-1||a.Yq<d-1){for(var e=[],g=0;g<=c;g++){for(var i=[],j=0;j<=d;j++)i[j]=0;e[g]=i}a.Db=e;a.Xq=c-1;a.Yq=d-1}if(a.Db!==m)for(c=0;c<=a.Xq;c++)for(d=0;d<=a.Yq;d++)a.Db[c][d]=Dm}}
v.m(fm,{lb:m},function(){return new E(this.Eg,this.Fg,this.kt-this.Eg,this.lt-this.Fg)});v.a(fm,"cellWidth",fm.prototype.nl);v.defineProperty(fm,{nl:m},s("Hd"),function(a){0<a&&a!==this.Hd&&(this.Hd=a,gm(this,this.lb))});v.a(fm,"cellHeight",fm.prototype.ml);v.defineProperty(fm,{ml:m},s("Id"),function(a){0<a&&a!==this.Id&&(this.Id=a,gm(this,this.lb))});function Em(a,b,c){return a.Eg<=b&&b<=a.kt&&a.Fg<=c&&c<=a.lt}
function jm(a,b,c){if(!Em(a,b,c))return 0;b-=a.Eg;b/=a.Hd;c-=a.Fg;c/=a.Id;return a.Db[b|0][c|0]}function Ji(a,b,c){Em(a,b,c)&&(b-=a.Eg,b/=a.Hd,c-=a.Fg,c/=a.Id,a.Db[b|0][c|0]=0)}function hm(a){if(a.Db!==m)for(var b=0;b<=a.Xq;b++)for(var c=0;c<=a.Yq;c++)a.Db[b][c]>=um&&(a.Db[b][c]|=km)}
function Fm(a,b,c,d,e,g,i,j,k){if(!(b<g||b>i||c<j||c>k)){var l,n;l=b|0;n=c|0;var r=a.Db[l][n];if(r>=um&&r<km){e?n+=d:l+=d;for(r+=vm;g<=l&&(l<=i&&j<=n&&n<=k)&&!(r>=a.Db[l][n]);)a.Db[l][n]=r,r+=vm,e?n+=d:l+=d}l=e?n:l;if(e)if(0<d)for(c+=d;c<l;c+=d)Fm(a,b,c,1,!e,g,i,j,k),Fm(a,b,c,-1,!e,g,i,j,k);else for(c+=d;c>l;c+=d)Fm(a,b,c,1,!e,g,i,j,k),Fm(a,b,c,-1,!e,g,i,j,k);else if(0<d)for(b+=d;b<l;b+=d)Fm(a,b,c,1,!e,g,i,j,k),Fm(a,b,c,-1,!e,g,i,j,k);else for(b+=d;b>l;b+=d)Fm(a,b,c,1,!e,g,i,j,k),Fm(a,b,c,-1,!e,g,
i,j,k)}}function Gm(a,b,c,d,e,g,i,j,k,l,n){for(var r=b|0,q=c|0,u=a.Db[r][q];0===u&&r>j&&r<k&&q>l&&q<n;)if(i?q+=g:r+=g,u=a.Db[r][q],1>=Math.abs(r-d)&&1>=Math.abs(q-e))return a.abort=h,0;r=b|0;q=c|0;u=a.Db[r][q];b=um;for(a.Db[r][q]=b;0===u&&r>j&&r<k&&q>l&&q<n;)i?q+=g:r+=g,u=a.Db[r][q],a.Db[r][q]=b,b+=vm;return i?q:r}
function im(a,b,c,d,e,g){if(a.Db!==m){a.abort=p;var i=b.x,j=b.y;if(Em(a,i,j)){var i=i-a.Eg,i=i/a.Hd,j=j-a.Fg,j=j/a.Id,k=d.x,l=d.y;if(Em(a,k,l))if(k-=a.Eg,k/=a.Hd,l-=a.Fg,l/=a.Id,1>=Math.abs(i-k)&&1>=Math.abs(j-l))a.abort=h;else{var n=g.x,b=g.y,d=g.x+g.width,r=g.y+g.height,n=n-a.Eg,n=n/a.Hd,b=b-a.Fg,b=b/a.Id,d=d-a.Eg,d=d/a.Hd,r=r-a.Fg,r=r/a.Id,g=Math.max(0,Math.min(a.Xq,n|0)),d=Math.min(a.Xq,Math.max(0,d|0)),b=Math.max(0,Math.min(a.Yq,b|0)),r=Math.min(a.Yq,Math.max(0,r|0)),i=i|0,j=j|0,k=k|0,l=l|0,
n=i,q=j,u=0===c||90===c?1:-1;(c=90===c||270===c)?q=Gm(a,i,j,k,l,u,c,g,d,b,r):n=Gm(a,i,j,k,l,u,c,g,d,b,r);if(!a.abort){a:{for(var c=0===e||90===e?1:-1,e=90===e||270===e,u=k|0,x=l|0,z=a.Db[u][x];0===z&&u>g&&u<d&&x>b&&x<r;)if(e?x+=c:u+=c,z=a.Db[u][x],1>=Math.abs(u-i)&&1>=Math.abs(x-j)){a.abort=h;break a}u=k|0;x=l|0;z=a.Db[u][x];for(a.Db[u][x]=Dm;0===z&&u>g&&u<d&&x>b&&x<r;)e?x+=c:u+=c,z=a.Db[u][x],a.Db[u][x]=Dm}a.abort||(Fm(a,n,q,1,p,g,d,b,r),Fm(a,n,q,-1,p,g,d,b,r),Fm(a,n,q,1,h,g,d,b,r),Fm(a,n,q,-1,h,
g,d,b,r))}}}}}function pm(){v.Mb(this);this.uf=this.port=this.gh=m;this.Sr=p}v.od(pm,{gh:h,port:h,uf:h,Sr:h});pm.prototype.toString=function(){for(var a=this.uf,b=this.gh.toString()+" "+a.length.toString()+":",c=0;c<a.length;c++){var d=a[c];d!==m&&(b+="\n  "+d.toString())}return b};
function Hm(a,b,c,d){b=b.offsetY;switch(b){case v.Lc:return 90;case v.Bc:return 180;case v.Tc:return 270;case v.Mc:return 0}switch(b){case v.Lc|v.Tc:return 180<c?270:90;case v.Bc|v.Mc:return 90<c&&270>=c?180:0}a=180*Math.atan2(a.height,a.width)/Math.PI;switch(b){case v.Bc|v.Tc:return c>a&&c<=180+a?180:270;case v.Tc|v.Mc:return c>180-a&&c<=360-a?270:0;case v.Mc|v.Lc:return c>a&&c<=180+a?90:0;case v.Lc|v.Bc:return c>180-a&&c<=360-a?180:90;case v.Bc|v.Tc|v.Mc:return 90<c&&c<=180+a?180:c>180+a&&c<=360-
a?270:0;case v.Tc|v.Mc|v.Lc:return 180<c&&c<=360-a?270:c>a&&180>=c?90:0;case v.Mc|v.Lc|v.Bc:return c>a&&c<=180-a?90:c>180-a&&270>=c?180:0;case v.Lc|v.Bc|v.Tc:return c>180-a&&c<=180+a?180:c>180+a?270:90}d&&b!==(v.Bc|v.Tc|v.Mc|v.Lc)&&(c-=15,0>c&&(c+=360));return c>a&&c<180-a?90:c>=180-a&&c<=180+a?180:c>180+a&&c<360-a?270:0}
function qm(a,b){var c=a.uf;if(c===m){if(!a.Sr){c=a.Sr;a.Sr=h;var d=a.gh.le;a.uf=[];for(var e=0,g=new E(a.port.xb(pc),a.port.xb(zc)),d=d.f;d.next();){var i=d.value;if(i.eb()){var j=lc,j=i.Ic===a.port?$l(i,a.port):am(i,a.port);if(gc(j)){var k;k=i.Ic===a.port?i.rd:i.Ic;if(k!==m&&k.V!==m){var l=k.xb(sc);k=k.ld;k=k!==m?qm(k,i):m;k!==m&&(l=k.Ln);k=g.ou.Wh(l);var j=Hm(g,j,k,Ng(i)),n;0===j?(n=v.Mc,180<k&&(k-=360)):n=90===j?v.Lc:180===j?v.Bc:v.Tc;(j=a.uf[e])?(j.link=i,j.Pa=k,j.Fd=n):(j=new Im(i,k,n),a.uf[e]=
j);j.Uu.set(l);e++}}}}a.uf.sort(pm.prototype.iG);g=a.uf.length;d=-1;for(e=i=0;e<g;e++)j=a.uf[e],j!==m&&(j.Fd!==d&&(d=j.Fd,i=0),j.Al=i,i++);d=-1;i=0;for(e=g-1;0<=e;e--)j=a.uf[e],j!==m&&(j.Fd!==d&&(d=j.Fd,i=j.Al+1),j.nr=i);e=a.uf;for(g=0;g<e.length;g++)if(d=e[g],d!==m){l=d;j=a.port;i=d=f;switch(l.Fd){case v.Lc:d=j.xb(zc);i=j.xb(xc);break;case v.Bc:d=j.xb(xc);i=j.xb(pc);break;case v.Tc:d=j.xb(pc);i=j.xb(rc);break;default:case v.Mc:d=j.xb(rc),i=j.xb(zc)}j=i.y-d.y;k=(l.Al+1)/(l.nr+1);l=l.Ln;l.x=d.x+(i.x-
d.x)*k;l.y=d.y+j*k}e=a.uf;for(g=0;g<e.length;g++)if(i=e[g],i!==m){d=i;k=i;n=k.link;i=dm(n,a.port,lc,n.Ic===a.port);l=k.Al;if(!(0>l)&&(j=k.nr,!(1>=j)&&Ng(n))){n=k.Uu;var r=k.Ln;if(k.Fd===v.Bc||k.Fd===v.Lc)l=j-1-l;i=((k=k.Fd===v.Bc||k.Fd===v.Mc)?n.y<r.y:n.x<r.x)?i+8*l:(k?n.y===r.y:n.x===r.x)?i:i+8*(j-1-l)}d.Bu=i}a.Sr=c}c=a.uf}for(e=0;e<c.length;e++)if(g=c[e],g!==m&&g.link===b)return g;return m}
pm.prototype.iG=function(a,b){return a===b?0:a===m?-1:b===m?1:a.Fd<b.Fd?-1:a.Fd>b.Fd?1:a.Pa<b.Pa?-1:a.Pa>b.Pa?1:0};function Im(a,b,c){this.link=a;this.Pa=b;this.Fd=c;this.Uu=new C;this.Al=this.nr=this.Al=0;this.Ln=new C;this.Bu=0}v.od(Im,{link:h,Pa:h,Fd:h,Uu:h,Al:h,nr:h,Ln:h,Bu:h});Im.prototype.toString=function(){return this.link.toString()+" "+this.Pa.toString()+" "+this.Fd.toString()+":"+this.Al.toString()+"/"+this.nr.toString()+" "+this.Ln.toString()+" "+this.Bu.toString()+" "+this.Uu.toString()};
function nf(a){0===arguments.length?U.call(this,Xg):U.call(this,a);this.Op=new qa(S);this.Zk=new qa(nf);this.Oj=this.Pp=this.Np=m;this.Vq=p;this.up=h;this.$q=p;this.ab=this.Lq=m;this.Bo=p;this.Yc=new Nh;this.Yc.group=this}v.H("Group",nf);v.pa(nf,U);fa=nf.prototype;
fa.jb=function(a){U.prototype.jb.call(this,a);a.Np=this.Np;a.Pp=this.Pp;a.Oj=this.Oj;a.Vq=this.Vq;a.up=this.up;a.$q=this.$q;a.Lq=this.Lq;var b=Gk(a,a,function(a){return a instanceof Rg});a.ab=b instanceof Rg?b:m;a.Bo=this.Bo;this.Yc!==m?(a.Yc=this.Yc.copy(),a instanceof nf&&(a.Yc.group=a)):(a.Yc!==m&&(a.Yc.group=m),a.Yc=m)};
fa.Yg=function(a){U.prototype.Yg.call(this,a);for(var b=a.Eu(),a=a.mc;a.next();){var c=a.value;c.J();c.r(uj);c.Wg();c instanceof nf&&(c.nv=c.je,Jm(c,b));if(c instanceof U)c.of(b);else if(c instanceof V)for(c=c.di;c.next();)c.value.of(b)}};
fa.Jl=function(a,b,c,d,e,g,i){if(a===Ge&&"elements"===b)if(e instanceof Rg)this.ab===m?this.ab=e:this.ab!==e&&v.g("Cannot insert a second Placeholder into the visual tree of a Group.");else{if(e instanceof w){var j=Gk(e,e,function(a){return a instanceof Rg});j instanceof Rg&&(this.ab===m?this.ab=j:this.ab!==j&&v.g("Cannot insert a second Placeholder into the visual tree of a Group."))}}else a===He&&"elements"===b&&(d===this.ab?this.ab=m:d instanceof w&&this.ab.ci(d)&&(this.ab=m));U.prototype.Jl.call(this,
a,b,c,d,e,g,i)};fa.Gi=function(a,b,c,d){this.ui=this.ab;w.prototype.Gi.call(this,a,b,c,d);this.ab!==m&&(a=this.ab.Im,this.location=new C(a.x,a.y))};fa.lk=function(){if(!U.prototype.lk.call(this))return p;for(var a=this.mc;a.next();){var b=a.value;if(b instanceof U){if(b.eb()&&b.Ec)return p}else if(b instanceof V&&b.eb()&&b.Ec&&b.ea!==this&&b.ia!==this)return p}return h};v.m(nf,{placeholder:"placeholder"},s("ab"));v.a(nf,"computesBoundsAfterDrag",nf.prototype.Tx);
v.defineProperty(nf,{Tx:"computesBoundsAfterDrag"},s("Bo"),function(a){var b=this.Bo;b!==a&&(v.e(a,"boolean",nf,"computesBoundsAfterDrag"),this.Bo=a,this.d("computesBoundsAfterDrag",b,a))});v.m(nf,{mc:"memberParts"},function(){return this.Op.f});function wl(a,b){if(a.Op.add(b)){b instanceof nf&&a.Zk.add(b);var c=a.zC;if(c!==m){var d=h,e=a.b;e!==m&&(d=e.ya,e.ya=h);c(a,b);e!==m&&(e.ya=d)}}c=a.ab;c===m&&(c=a);c.J()}
function vl(a,b){if(a.Op.remove(b)){b instanceof nf&&a.Zk.remove(b);var c=a.AC;if(c!==m){var d=h,e=a.b;e!==m&&(d=e.ya,e.ya=h);c(a,b);e!==m&&(e.ya=d)}}c=a.ab;c===m&&(c=a);c.J()}nf.prototype.tl=function(){if(0<this.Op.count){var a=this.b;if(a===m)return;for(var b=this.Op.copy().f;b.next();)a.remove(b.value)}U.prototype.tl.call(this)};nf.prototype.hv=function(){var a=this.ta;a!==m&&a.hv(this)};v.a(nf,"layout",nf.prototype.vb);
v.defineProperty(nf,{vb:"layout"},s("Yc"),function(a){var b=this.Yc;b!==a&&(a!==m&&v.c(a,Nh,nf,"layout"),b!==m&&(b.b=m,b.group=m),this.Yc=a,a!==m&&(a.b=this.b,a.group=this),this.d("layout",b,a))});v.a(nf,"memberAdded",nf.prototype.zC);v.defineProperty(nf,{zC:"memberAdded"},s("Np"),function(a){var b=this.Np;b!==a&&(a!==m&&v.e(a,"function",nf,"memberAdded"),this.Np=a,this.d("memberAdded",b,a))});v.a(nf,"memberRemoved",nf.prototype.AC);
v.defineProperty(nf,{AC:"memberRemoved"},s("Pp"),function(a){var b=this.Pp;b!==a&&(a!==m&&v.e(a,"function",nf,"memberRemoved"),this.Pp=a,this.d("memberRemoved",b,a))});v.a(nf,"memberValidation",nf.prototype.Mr);v.defineProperty(nf,{Mr:"memberValidation"},s("Oj"),function(a){var b=this.Oj;b!==a&&(a!==m&&v.e(a,"function",nf,"memberValidation"),this.Oj=a,this.d("memberValidation",b,a))});
nf.prototype.canAddMembers=nf.prototype.jH=function(a){var b=this.b;if(b===m)return p;b=b.yd;for(a=b.ey(a).f;a.next();)if(!b.uy(this,a.value))return p;return h};nf.prototype.addMembers=nf.prototype.gH=function(a,b){var c=this.b;if(c===m)return p;for(var c=c.yd,d=h,e=c.ey(a).f;e.next();){var g=e.value;!b||c.uy(this,g)?g.Va=this:d=p}return d};v.a(nf,"ungroupable",nf.prototype.ID);
v.defineProperty(nf,{ID:"ungroupable"},s("Vq"),function(a){var b=this.Vq;b!==a&&(v.e(a,"boolean",nf,"ungroupable"),this.Vq=a,this.d("ungroupable",b,a))});nf.prototype.canUngroup=nf.prototype.KH=function(){if(!this.ID)return p;var a=this.ta;if(a!==m&&!a.kn)return p;a=a.b;return a!==m&&!a.kn?p:h};nf.prototype.findSubGraphParts=nf.prototype.Eu=function(){var a=new qa(S);lf(a,this,h,p);a.remove(this);return a};
nf.prototype.collapseSubGraph=nf.prototype.kr=function(){var a=this.b;if(a!==m&&!a.qf){a.qf=h;var b=this.Eu();Jm(this,b);a.qf=p}};function Jm(a,b){a.je=p;for(var c=a.mc;c.next();){var d=c.value;d.J();d.r(uj);d.Wg();d instanceof nf&&(d.nv=d.je,Jm(d,b));if(d instanceof U)d.of(b);else if(d instanceof V)for(d=d.di;d.next();)d.value.of(b)}}nf.prototype.expandSubGraph=nf.prototype.qr=function(){var a=this.b;if(a!==m&&!a.qf){a.qf=h;var b=this.Eu();Km(this,b);a.qf=p}};
function Km(a,b){a.je=h;for(var c=a.mc;c.next();){var d=c.value;d.J();d.r(sj);d.ii();d instanceof nf&&d.nv&&Km(d,b);if(d instanceof U)d.of(b);else if(d instanceof V)for(d=d.di;d.next();)d.value.of(b)}}v.a(nf,"isSubGraphExpanded",nf.prototype.je);
v.defineProperty(nf,{je:"isSubGraphExpanded"},s("up"),function(a){var b=this.up;if(b!==a){v.e(a,"boolean",nf,"isSubGraphExpanded");this.up=a;var c=this.b;c!==m&&yh(c);this.d("isSubGraphExpanded",b,a);b=this.tD;if(b!==m){var d=h;c!==m&&(d=c.ya,c.ya=h);b(this);c!==m&&(c.ya=d)}c!==m&&c.da.cb||(a?this.qr():this.kr())}});v.a(nf,"wasSubGraphExpanded",nf.prototype.nv);
v.defineProperty(nf,{nv:"wasSubGraphExpanded"},s("$q"),function(a){var b=this.$q;b!==a&&(v.e(a,"boolean",nf,"wasSubGraphExpanded"),this.$q=a,this.d("wasSubGraphExpanded",b,a))});v.a(nf,"subGraphExpandedChanged",nf.prototype.tD);v.defineProperty(nf,{tD:"subGraphExpandedChanged"},s("Lq"),function(a){var b=this.Lq;b!==a&&(a!==m&&v.e(a,"function",nf,"subGraphExpandedChanged"),this.Lq=a,this.d("subGraphExpandedChanged",b,a))});
nf.prototype.move=nf.prototype.move=function(a){var b=this.position,c=b.x;isNaN(c)&&(c=0);b=b.y;isNaN(b)&&(b=0);c=a.x-c;b=a.y-b;U.prototype.move.call(this,a);for(a=this.Eu().f;a.next();){var d=a.value,e=d.position;U.prototype.move.call(d,new C(e.x+c,e.y+b))}};function Rg(){R.call(this);this.Jd=(new Kb(0)).freeze();this.Im=new E(NaN,NaN,NaN,NaN)}v.H("Placeholder",Rg);v.pa(Rg,R);Rg.prototype.jb=function(a){R.prototype.jb.call(this,a);a.Jd=this.Jd.B();a.Im=this.Im.copy()};
Rg.prototype.Ii=function(a){if(this.background===m&&this.Ph===m)return p;var b=this.ua;return Nb(0,0,b.width,b.height,a.x,a.y)};
Rg.prototype.Lr=function(){var a=this.V;(a===m||!(a instanceof nf)&&!(a instanceof mf))&&v.g("Placeholder is not inside a Group or Adornment.");if(a instanceof nf){var b;a:{b=this.V;if(b instanceof nf&&b.Tx&&this.Im.aa()){var c=b.b;if(c!==m&&(c=c.ra,c instanceof Ef&&!c.To&&c.Hb!==m&&!c.Hb.contains(b))){b=this.Im;break a}}b=this.V;if(b instanceof nf){for(var d=c=Infinity,e=-Infinity,g=-Infinity,i=b.mc;i.next();){var j=i.value;if(j.eb()){if(j instanceof V){if(j.$b)continue;if(j.ea===b||j.ia===b)continue}j=
j.la;j.left<c&&(c=j.left);j.top<d&&(d=j.top);j.right>e&&(e=j.right);j.bottom>g&&(g=j.bottom)}}!isFinite(c)||!isFinite(d)?(b=b.location,c=this.padding,b=new E(b.x+c.left,b.y+c.top,0,0)):b=new E(c,d,e-c,g-d)}else b=new E;c=this.padding;b=new E(b.x-c.left,b.y-c.top,b.width+c.left+c.right,b.height+c.top+c.bottom)}this.Im=b;c=this.qc;Ab(c,b.width||0,b.height||0);$i(this,0,0,c.width,c.height);c=a.mc;for(d=p;c.next();)if(c.value.eb()){d=h;break}d&&(!isNaN(b.x)&&!isNaN(b.y))&&(a.location=new C(b.x,b.y))}else b=
this.ma,c=this.qc,Ab(c,b.width||0,b.height||0),$i(this,0,0,c.width,c.height)};Rg.prototype.Gi=function(a,b,c,d){var e=this.la;e.x=a;e.y=b;e.width=c;e.height=d};v.a(Rg,"padding",Rg.prototype.padding);v.defineProperty(Rg,{padding:"padding"},s("Jd"),function(a){"number"===typeof a?a=new Kb(a):v.c(a,Kb,w,"padding");var b=this.Jd;b.u(a)||(this.Jd=a=a.B(),this.d("padding",b,a))});function Nh(){v.Mb(this);this.xw=this.L=m;this.Xs=this.rp=h;this.yp=this.xp=p;this.to=(new C(0,0)).freeze();this.p=m}
v.H("Layout",Nh);Nh.prototype.cloneProtected=Nh.prototype.jb=function(a){a.rp=this.rp;a.Xs=this.Xs;a.yp=this.yp;a.to=this.to.B()};Nh.prototype.copy=Nh.prototype.copy=function(){var a=new this.constructor;this.jb(a);return a};Nh.prototype.toString=function(){var a=v.Ri(Object.getPrototypeOf(this)),a=a+"(";this.group!==m&&(a+=" in "+this.group);this.b!==m&&(a+=" for "+this.b);return a+")"};v.a(Nh,"diagram",Nh.prototype.b);
v.defineProperty(Nh,{b:"diagram"},s("L"),function(a){this.L!==a&&(a!==m&&v.c(a,A,Nh,"diagram"),this.L=a)});v.a(Nh,"group",Nh.prototype.group);v.defineProperty(Nh,{group:"group"},s("xw"),function(a){this.xw!==a&&(a!==m&&v.c(a,nf,Nh,"group"),this.xw=a)});v.a(Nh,"isOngoing",Nh.prototype.lC);v.defineProperty(Nh,{lC:"isOngoing"},s("rp"),function(a){this.rp!==a&&(v.e(a,"boolean",Nh,"isOngoing"),this.rp=a)});v.a(Nh,"isInitial",Nh.prototype.kC);
v.defineProperty(Nh,{kC:"isInitial"},s("Xs"),function(a){v.e(a,"boolean",Nh,"isInitial");this.Xs=a;a||(this.xp=h)});v.a(Nh,"isValidLayout",Nh.prototype.Se);v.defineProperty(Nh,{Se:"isValidLayout"},s("xp"),function(a){this.xp!==a&&(this.xp=a,a||(a=this.b,a!==m&&(a.ss=h)))});Nh.prototype.invalidateLayout=Nh.prototype.r=function(){if(this.xp){var a=this.b;if(a!==m&&!a.da.cb&&(this.lC&&a.Pf||this.kC&&!a.Pf))this.Se=p,a.Wq=h,yf(a)}};v.a(Nh,"isViewportSized",Nh.prototype.Ru);
v.defineProperty(Nh,{Ru:"isViewportSized"},s("yp"),function(a){this.yp!==a&&(this.yp=a)&&this.r()});v.a(Nh,"network",Nh.prototype.Kc);v.defineProperty(Nh,{Kc:"network"},s("p"),function(a){var b=this.p;b!==a&&(a!==m&&v.c(a,Lm,Nh,"network"),b!==m&&Mm(b,m),this.p=a,a!==m&&Mm(a,this))});Nh.prototype.createNetwork=Nh.prototype.uu=function(){var a=new Lm;Mm(a,this);return a};
Nh.prototype.makeNetwork=Nh.prototype.cG=function(a){var b=this.createNetwork();a instanceof A?(b.fr(a.ok,h),b.fr(a.links,h)):a instanceof nf?b.fr(a.mc):a.f&&b.fr(a.f);return b};Nh.prototype.updateParts=Nh.prototype.DK=function(){var a=this.b;if(a===m&&this.p!==m)for(var b=this.p.R.f;b.next();){var c=b.value.Ea;if(c!==m&&(a=c.b,a!==m))break}a!==m&&a.Lb("Layout");this.commitLayout();a!==m&&a.Rd("Layout")};Nh.prototype.commitLayout=Nh.prototype.ru=aa();
Nh.prototype.doLayout=Nh.prototype.or=function(a){a===m&&v.g("Layout.doLayout(collection) argument must not be null");var b=new qa(S);a===this.b?(Nm(this,b,a.ok,h,this.Gy,h,p,h),Nm(this,b,a.Yi,h,this.Gy,h,p,h)):a===this.group&&Nm(this,b,a.mc,p,this.Gy,h,p,h);var c=b.count;if(0<c){a=this.b;a!==m&&a.Lb("Layout");for(var c=Math.ceil(Math.sqrt(c)),d=this.Qc.x,e=d,g=this.Qc.y,i=0,j=0,b=b.f;b.next();){var k=b.value;k.Zh();var l=k.la.width,n=k.la.height;k.move(new C(e,g));delete k.jA;e+=Math.max(l,50)+20;
j=Math.max(j,Math.max(n,50));i>=c-1?(i=0,e=d,g+=j+20,j=0):i++}a!==m&&a.Rd("Layout")}this.Se=h};Nh.prototype.Gy=function(a){return!a.location.aa()||a instanceof nf&&a.jA?h:p};function Nm(a,b,c,d,e,g,i,j){for(c=c.f;c.next();){var k=c.value;if(!d||k.Gr)if(!e||e(k))k.ir()&&(g&&k instanceof U?k.Ti||(k instanceof nf&&k.vb===m?Nm(a,b,k.mc,p,e,g,i,j):b.add(k)):i&&k instanceof V?b.add(k):j&&k.constructor===S&&b.add(k))}}v.a(Nh,"arrangementOrigin",Nh.prototype.Qc);
v.defineProperty(Nh,{Qc:"arrangementOrigin"},s("to"),function(a){this.to.u(a)||(t&&v.c(a,C,Nh,"arrangementOrigin"),this.to.Ra(a),this.r())});function Om(a,b){var c=a.group;if(c!==m){var d=c.location;if(isNaN(d.x)||isNaN(d.y))return b;var e=c.placeholder;e!==m?(d=e.xb(pc),d.x+=e.padding.left,d.y+=e.padding.top):d=c.position.copy();return d}return b}function Lm(){v.Mb(this);this.Yc=m;this.clear()}v.H("LayoutNetwork",Lm);
Lm.prototype.clear=function(){if(this.Zq)for(var a=this.Zq.f;a.next();){var b=a.value;b.clear();b.p=m}if(this.Vo)for(a=this.Vo.f;a.next();)b=a.value,b.clear(),b.p=m;this.Zq=new qa(Pm);this.Vo=new qa(Qm);this.Pw=new oa(U,Pm);this.Hw=new oa(V,Qm)};Lm.prototype.toString=function(){return"LayoutNetwork"+(this.vb!==m?"("+this.vb.toString()+")":"")};v.m(Lm,{vb:"layout"},s("Yc"));function Mm(a,b){t&&b!==m&&v.c(b,Nh,Lm,"setLayout");a.Yc=b}v.m(Lm,{R:"vertexes"},s("Zq"));v.m(Lm,{Qb:"edges"},s("Vo"));
Lm.prototype.createVertex=Lm.prototype.Ji=function(){return new Pm};Lm.prototype.createEdge=Lm.prototype.on=function(){return new Qm};
Lm.prototype.addParts=Lm.prototype.fr=function(a,b){if(a!==m){b===f&&(b=p);v.e(b,"boolean",Lm,"addParts:toplevelonly");for(var c=a.f;c.next();){var d=c.value;if(d instanceof U&&(!b||d.Gr)&&d.ir()&&!d.Ti)if(d instanceof nf&&d.vb===m)this.fr(d.mc,p);else if(this.ie(d)===m){var e=this.Ji();e.gh=d;this.ak(e)}}for(c.reset();c.next();)if(d=c.value,d instanceof V&&(!b||d.Gr)&&d.ir()&&this.Cu(d)===m){var g=d.ea,e=d.ia;g!==e&&(g=this.Du(g),e=this.Du(e),g!==m&&e!==m&&this.El(g,e,d))}}};
Lm.prototype.findGroupVertex=Lm.prototype.Du=function(a){if(a===m)return m;a=sl(a);if(a===m)return m;var b=this.ie(a);if(b!==m)return b;a=a.Va;return a!==m&&(b=this.ie(a),b!==m)?b:m};Lm.prototype.addVertex=Lm.prototype.ak=function(a){if(a!==m){t&&v.c(a,Pm,Lm,"addVertex:vertex");this.Zq.add(a);var b=a.Ea;b!==m&&this.Pw.add(b,a);a.p=this}};Lm.prototype.addNode=Lm.prototype.$m=function(a){if(a===m)return m;t&&v.c(a,U,Lm,"addNode:node");var b=this.ie(a);b===m&&(b=this.Ji(),b.gh=a,this.ak(b));return b};
Lm.prototype.deleteVertex=Lm.prototype.EB=function(a){if(a!==m&&(t&&v.c(a,Pm,Lm,"deleteVertex:vertex"),Rm(this,a))){for(var b=a.hf,c=b.count-1;0<=c;c--){var d=b.Z(c);this.pn(d)}b=a.we;for(c=b.count-1;0<=c;c--)d=b.Z(c),this.pn(d)}};function Rm(a,b){if(b===m)return p;var c=a.Zq.remove(b);c&&(a.Pw.remove(b.Ea),b.p=m);return c}Lm.prototype.deleteNode=Lm.prototype.hI=function(a){a!==m&&(t&&v.c(a,U,Lm,"deleteNode:node"),a=this.ie(a),a!==m&&this.EB(a))};
Lm.prototype.findVertex=Lm.prototype.ie=function(a){if(a===m)return m;t&&v.c(a,U,Lm,"findVertex:node");return this.Pw.ca(a)};Lm.prototype.addEdge=Lm.prototype.Zm=function(a){if(a!==m){t&&v.c(a,Qm,Lm,"addEdge:edge");this.Vo.add(a);var b=a.Da;b!==m&&this.Cu(b)===m&&this.Hw.add(b,a);b=a.D;b!==m&&b.WA(a);b=a.G;b!==m&&b.SA(a);a.p=this}};
Lm.prototype.addLink=Lm.prototype.fH=function(a){if(a===m)return m;t&&v.c(a,V,Lm,"addLink:link");var b=a.ea,c=a.ia,d=this.Cu(a);d===m?(d=this.on(),d.Da=a,b!==m&&(d.G=this.$m(b)),c!==m&&(d.D=this.$m(c)),this.Zm(d)):(d.G=b!==m?this.$m(b):m,d.D=c!==m?this.$m(c):m);return d};Lm.prototype.deleteEdge=Lm.prototype.pn=function(a){if(a!==m){t&&v.c(a,Qm,Lm,"deleteEdge:edge");var b=a.D;b!==m&&b.DB(a);b=a.G;b!==m&&b.CB(a);Sm(this,a)}};function Sm(a,b){b!==m&&a.Vo.remove(b)&&(a.Hw.remove(b.Da),b.p=m)}
Lm.prototype.deleteLink=Lm.prototype.gI=function(a){a!==m&&(t&&v.c(a,V,Lm,"deleteLink:link"),a=this.Cu(a),a!==m&&this.pn(a))};Lm.prototype.findEdge=Lm.prototype.Cu=function(a){if(a===m)return m;t&&v.c(a,V,Lm,"findEdge:link");return this.Hw.ca(a)};
Lm.prototype.linkVertexes=Lm.prototype.El=function(a,b,c){if(a===m||b===m)return m;t&&(v.c(a,Pm,Lm,"linkVertexes:fromVertex"),v.c(b,Pm,Lm,"linkVertexes:toVertex"),v.c(c,V,Lm,"linkVertexes:link"));if(a.p===this&&b.p===this){var d=this.on();d.Da=c;d.G=a;d.D=b;this.Zm(d);return d}return m};Lm.prototype.reverseEdge=Lm.prototype.av=function(a){if(a!==m){t&&v.c(a,Qm,Lm,"reverseEdge:edge");var b=a.G,c=a.D;b===m||c===m||(b.CB(a),c.DB(a),a.av(),b.WA(a),c.SA(a))}};
Lm.prototype.deleteSelfEdges=Lm.prototype.yu=function(){for(var a=[],b=this.Qb.f;b.next();){var c=b.value;c.G===c.D&&a.push(c)}b=a.length;for(c=0;c<b;c++)this.pn(a[c])};Lm.prototype.deleteArtificialVertexes=Lm.prototype.jF=function(){for(var a=[],b=this.R.f;b.next();){var c=b.value;c.Ea===m&&a.push(c)}c=a.length;for(b=0;b<c;b++)this.EB(a[b]);a=[];for(b=this.Qb.f;b.next();)c=b.value,c.Da===m&&a.push(c);c=a.length;for(b=0;b<c;b++)this.pn(a[b])};
Lm.prototype.splitIntoSubNetworks=Lm.prototype.JG=function(){this.jF();for(var a=[],b=this.Qb.f;b.next();){var c=b.value;(c.G===m||c.D===m)&&a.push(c)}b=a.length;for(c=0;c<b;c++)this.pn(a[c]);this.yu();a=new y(Lm);for(c=h;c;)for(var c=p,d=this.R.f;d.next();)if(b=d.value,0<b.hf.count||0<b.we.count){c=this.vb.createNetwork();a.add(c);Tm(this,c,b);c=h;break}a.sort(function(a,b){return a===m||b===m||a===b?0:b.R.count-a.R.count});return a};
function Tm(a,b,c){if(c!==m&&c.p!==b){Rm(a,c);b.ak(c);for(var d=c.sb;d.next();){var e=d.value;e.p!==b&&(Sm(a,e),b.Zm(e),Tm(a,b,e.G))}for(d=c.rb;d.next();)e=d.value,e.p!==b&&(Sm(a,e),b.Zm(e),Tm(a,b,e.D))}}Lm.prototype.getParts=Lm.prototype.VI=function(){for(var a=new qa(S),b=this.R.f;b.next();)a.add(b.value.Ea);for(b=this.Qb.f;b.next();)a.add(b.value.Da);return a};function Pm(){v.Mb(this);this.p=m;this.A=(new E(0,0,10,10)).freeze();this.z=(new C(5,5)).freeze();this.clear()}v.H("LayoutVertex",Pm);
Pm.prototype.clear=function(){this.Ea=m;this.hf=new y(Qm);this.we=new y(Qm)};Pm.prototype.toString=function(){return"LayoutVertex#"+v.kc(this)+(this.Ea!==m?"("+this.Ea.toString()+")":"")};v.a(Pm,"network",Pm.prototype.Kc);v.defineProperty(Pm,{Kc:"network"},s("p"),function(a){this.p!==a&&(a!==m&&v.c(a,Lm,Pm,"network"),this.p=a)});v.a(Pm,"node",Pm.prototype.gh);
v.defineProperty(Pm,{gh:"node"},s("Ea"),function(a){if(this.Ea!==a){t&&a!==m&&v.c(a,U,Pm,"node");this.Ea=a;a.Zh();var b=a.la;if(b.aa()&&(this.A.Ra(b),a=a.location,a.aa())){var c=this.z;c.qa();c.x=a.x-b.x;c.y=a.y-b.y;c.freeze()}}});v.a(Pm,"bounds",Pm.prototype.lb);v.defineProperty(Pm,{lb:"bounds"},s("A"),function(a){this.A.u(a)||(t&&v.c(a,E,Pm,"bounds"),this.A.Ra(a))});v.a(Pm,"focus",Pm.prototype.focus);v.defineProperty(Pm,{focus:"focus"},s("z"),function(a){this.z.u(a)||(t&&v.c(a,C,Pm,"focus"),this.z.Ra(a))});
v.a(Pm,"centerX",Pm.prototype.za);v.defineProperty(Pm,{za:"centerX"},function(){return this.A.x+this.z.x},function(a){var b=this.A;b.x+this.z.x!==a&&(t&&v.j(a,Pm,"centerX"),b.qa(),b.x=a-this.z.x,b.freeze())});v.a(Pm,"centerY",Pm.prototype.Aa);v.defineProperty(Pm,{Aa:"centerY"},function(){return this.A.y+this.z.y},function(a){var b=this.A;b.y+this.z.y!==a&&(t&&v.j(a,Pm,"centerY"),b.qa(),b.y=a-this.z.y,b.freeze())});v.a(Pm,"focusX",Pm.prototype.Gu);
v.defineProperty(Pm,{Gu:"focusX"},function(){return this.z.x},function(a){var b=this.z;b.x!==a&&(b.qa(),b.x=a,b.freeze())});v.a(Pm,"focusY",Pm.prototype.Hu);v.defineProperty(Pm,{Hu:"focusY"},function(){return this.z.y},function(a){var b=this.z;b.y!==a&&(b.qa(),b.y=a,b.freeze())});v.a(Pm,"x",Pm.prototype.x);v.defineProperty(Pm,{x:"x"},function(){return this.A.x},function(a){var b=this.A;b.x!==a&&(b.qa(),b.x=a,b.freeze())});v.a(Pm,"y",Pm.prototype.y);
v.defineProperty(Pm,{y:"y"},function(){return this.A.y},function(a){var b=this.A;b.y!==a&&(b.qa(),b.y=a,b.freeze())});v.a(Pm,"width",Pm.prototype.width);v.defineProperty(Pm,{width:"width"},function(){return this.A.width},function(a){var b=this.A;b.width!==a&&(b.qa(),b.width=a,b.freeze())});v.a(Pm,"height",Pm.prototype.height);v.defineProperty(Pm,{height:"height"},function(){return this.A.height},function(a){var b=this.A;b.height!==a&&(b.qa(),b.height=a,b.freeze())});
Pm.prototype.commit=Pm.prototype.Th=function(){var a=this.Ea;a!==m&&a.move(this.lb.position)};Pm.prototype.addSourceEdge=Pm.prototype.WA=function(a){a!==m&&(t&&v.c(a,Qm,Pm,"addSourceEdge:edge"),this.hf.contains(a)||this.hf.add(a))};Pm.prototype.deleteSourceEdge=Pm.prototype.DB=function(a){a!==m&&(t&&v.c(a,Qm,Pm,"deleteSourceEdge:edge"),this.hf.remove(a))};Pm.prototype.addDestinationEdge=Pm.prototype.SA=function(a){a!==m&&(t&&v.c(a,Qm,Pm,"addDestinationEdge:edge"),this.we.contains(a)||this.we.add(a))};
Pm.prototype.deleteDestinationEdge=Pm.prototype.CB=function(a){a!==m&&(t&&v.c(a,Qm,Pm,"deleteDestinationEdge:edge"),this.we.remove(a))};v.m(Pm,{IG:"sourceVertexes"},function(){for(var a=new qa(Pm),b=this.sb;b.next();){var c=b.value.G;c!==m&&!a.contains(c)&&a.add(c)}return a.f});v.m(Pm,{mF:"destinationVertexes"},function(){for(var a=new qa(Pm),b=this.rb;b.next();){var c=b.value.D;c!==m&&!a.contains(c)&&a.add(c)}return a.f});
v.m(Pm,{R:"vertexes"},function(){for(var a=new qa(Pm),b=this.sb;b.next();){var c=b.value,c=c.G;c!==m&&!a.contains(c)&&a.add(c)}for(b=this.rb;b.next();)c=b.value,c=c.D,c!==m&&!a.contains(c)&&a.add(c);return a.f});v.m(Pm,{sb:"sourceEdges"},function(){return this.hf.f});v.m(Pm,{rb:"destinationEdges"},function(){return this.we.f});v.m(Pm,{Qb:"edges"},function(){for(var a=new y(Qm),b=this.sb;b.next();){var c=b.value;a.add(c)}for(b=this.rb;b.next();)c=b.value,a.add(c);return a.f});
v.m(Pm,{uF:"edgesCount"},function(){return this.hf.count+this.we.count});var Um;Pm.standardComparer=Um=function(a,b){t&&v.c(a,Pm,Pm,"standardComparer:m");t&&v.c(b,Pm,Pm,"standardComparer:n");var c=a.Ea,d=b.Ea;return c?d?(c=c.text,d=d.text,c<d?-1:c>d?1:0):1:d!==m?-1:0};
Pm.smartComparer=function(a,b){t&&v.c(a,Pm,Pm,"smartComparer:m");t&&v.c(b,Pm,Pm,"smartComparer:n");if(a!==m){if(b!==m){var c=a.Ea,d=b.Ea;if(c!==m){if(d!==m){var c=c.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=d.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e;for(e=0;e<c.length;e++)if(""!==d[e]&&d[e]!==f){var g=parseFloat(c[e]),i=parseFloat(d[e]);if(isNaN(g))if(isNaN(i)){if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else return 1;
else{if(isNaN(i))return-1;if(0!==g-i)return g-i}}else if(""!==c[e])return 1;return""!==d[e]&&d[e]!==f?-1:0}return 1}return d!==m?-1:0}return 1}return b!==m?-1:0};function Qm(){v.Mb(this);this.p=m;this.clear()}v.H("LayoutEdge",Qm);Qm.prototype.clear=function(){this.D=this.G=this.Da=m};Qm.prototype.toString=function(){return"LayoutEdge#"+v.kc(this)+(this.Da!==m?"("+this.Da.toString()+")":"")};v.a(Qm,"network",Qm.prototype.Kc);
v.defineProperty(Qm,{Kc:"network"},s("p"),function(a){this.p!==a&&(t&&a!==m&&v.c(a,Lm,Qm,"network"),this.p=a)});v.a(Qm,"link",Qm.prototype.link);v.defineProperty(Qm,{link:"link"},s("Da"),function(a){this.Da!==a&&(t&&a!==m&&v.c(a,V,Qm,"link"),this.Da=a)});v.a(Qm,"fromVertex",Qm.prototype.BF);v.defineProperty(Qm,{BF:"fromVertex"},s("G"),function(a){this.G!==a&&(t&&a!==m&&v.c(a,Pm,Qm,"fromVertex"),this.G=a)});v.a(Qm,"toVertex",Qm.prototype.SG);
v.defineProperty(Qm,{SG:"toVertex"},s("D"),function(a){this.D!==a&&(t&&a!==m&&v.c(a,Pm,Qm,"toVertex"),this.D=a)});Qm.prototype.av=function(){var a=this.G;this.G=this.D;this.D=a};Qm.prototype.commit=Qm.prototype.Th=aa();Qm.prototype.getOtherVertex=Qm.prototype.DF=function(a){t&&v.c(a,Pm,Qm,"getOtherVertex:v");return this.D===a?this.G:this.G===a?this.D:m};
function Qi(){Nh.call(this);this.Ru=h;this.br=this.cr=NaN;this.ki=(new yb(NaN,NaN)).freeze();this.Jg=(new yb(10,10)).freeze();this.ja=dk;this.Cc=bk;this.ac=Yj;this.Yb=Vm}v.H("GridLayout",Qi);v.pa(Qi,Nh);Qi.prototype.cloneProtected=Qi.prototype.jb=function(a){Nh.prototype.jb.call(this,a);a.cr=this.cr;a.br=this.br;a.ki=this.ki.B();a.Jg=this.Jg.B();a.ja=this.ja;a.Cc=this.Cc;a.ac=this.ac;a.Yb=this.Yb};
Qi.prototype.doLayout=Qi.prototype.or=function(a){var b=this.b;b===m&&v.g("The diagram for this layout is not set.");this.Qc=Om(this,this.Qc);var c=new qa(S);a===this.b?(Nm(this,c,a.ok,h,m,h,p,h),Nm(this,c,a.links,h,m,h,p,h),Nm(this,c,a.Yi,h,m,h,p,h)):a===this.group&&Nm(this,c,a.mc,p,m,h,p,h);for(a=c.copy().f;a.next();){var d=a.value;if(d instanceof V&&(d.ea!==m||d.ia!==m))c.remove(d);else if(d.Zh(),d instanceof nf)for(d=d.mc;d.next();)c.remove(d.value)}c=c.Cf();if(0!==c.length){switch(this.yf){case ak:c.reverse();
break;case Yj:c.sort(this.Xg);break;case Zj:c.sort(this.Xg),c.reverse()}d=this.ND;isNaN(d)&&(d=0);a=this.lz;a=isNaN(a)?Math.max(this.b.ob.width-b.padding.left-b.padding.right,0):Math.max(this.lz,0);0>=d&&0>=a&&(d=1);var e=this.aj.width;isFinite(e)||(e=0);var g=this.aj.height;isFinite(g)||(g=0);b.Lb("Layout");switch(this.pb){case ek:var i=Math.max(this.fk.width,1);if(!isFinite(i))for(var j=i=0;j<c.length;j++)var k=c[j],l=k.ua,i=Math.max(i,l.width);var i=Math.max(i+e,1),n=Math.max(this.fk.height,1);
if(!isFinite(n))for(j=n=0;j<c.length;j++)k=c[j],l=k.ua,n=Math.max(n,l.height);for(var n=Math.max(n+g,1),r=this.Pd,q=this.Qc.x,u=q,x=this.Qc.y,z=0,D=0,j=0;j<c.length;j++){var k=c[j],l=k.ua,F=Math.ceil((l.width+e)/i)*i,G=Math.ceil((l.height+g)/n)*n,I;switch(r){case ck:I=Math.abs(u-l.width)+q;break;default:I=u+l.width-q}if(0<d&&z>d-1||0<a&&0<z&&I>a)z=0,u=q,x+=D,D=0;D=Math.max(D,G);switch(r){case ck:l=-l.width;break;default:l=0}k.move(new C(u+l,x));switch(r){case ck:u-=F;break;default:u+=F}z++}break;
case dk:i=Math.max(this.fk.width,1);for(k=j=z=x=0;k<c.length;k++)n=c[k],r=n.ua,q=tl(n,n.yb,n.sf),x=Math.max(x,q.x),z=Math.max(z,r.width-q.x),j=Math.max(j,q.y);u=this.Pd;switch(u){case ck:x+=e;break;default:z+=e}var i=isFinite(i)?Math.max(i+e,1):Math.max(x+z,1),M=x=this.Qc.x,z=this.Qc.y,F=D=0,l=Math.max(this.fk.height,1),G=j=0;I=h;for(k=0;k<c.length;k++){n=c[k];r=n.ua;q=tl(n,n.yb,n.sf);if(0<D)switch(u){case ck:M=Math.floor((M-x-(r.width-q.x))/i)*i+x;break;default:M=Math.ceil((M-x+q.x)/i)*i+x}else switch(u){case ck:F=
M+q.x+r.width;break;default:F=M-q.x}var T;switch(u){case ck:T=-(M+q.x)+x+F;break;default:T=M+r.width-q.x-x-F}if(0<d&&D>d-1||0<a&&0<D&&T>a){for(M=0;M<D&&k!==D;M++){T=c[k-D+M];var pa=tl(T,T.yb,T.sf);T.move(new C(T.position.x,T.position.y+j-pa.y))}G+=g;z=I?z+G:z+(G+j);D=G=j=0;M=x;I=p}j=Math.max(j,q.y);G=Math.max(G,r.height-q.y);isFinite(l)&&(G=Math.max(G,Math.max(r.height,l)-q.y));I?n.move(new C(M-q.x,z-q.y)):n.move(new C(M-q.x,z));switch(u){case ck:M-=q.x+e;break;default:M+=r.width-q.x+e}D++}for(M=
0;M<D&&k!==D;M++)T=c[k-D+M],pa=tl(T,T.yb,T.sf),T.move(new C(T.position.x,T.position.y+j-pa.y))}b.Rd("Layout");this.Se=h}};v.a(Qi,"wrappingWidth",Qi.prototype.lz);v.defineProperty(Qi,{lz:"wrappingWidth"},s("cr"),function(a){if(this.cr!==a&&(0<a||isNaN(a)))this.cr=a,this.Ru=isNaN(a),this.r()});v.a(Qi,"wrappingColumn",Qi.prototype.ND);v.defineProperty(Qi,{ND:"wrappingColumn"},s("br"),function(a){if(this.br!==a&&(0<a||isNaN(a)))this.br=a,this.r()});v.a(Qi,"cellSize",Qi.prototype.fk);
v.defineProperty(Qi,{fk:"cellSize"},s("ki"),function(a){this.ki.u(a)||(this.ki.Ra(a),this.r())});v.a(Qi,"spacing",Qi.prototype.aj);v.defineProperty(Qi,{aj:"spacing"},s("Jg"),function(a){this.Jg.u(a)||(this.Jg.Ra(a),this.r())});v.a(Qi,"alignment",Qi.prototype.pb);v.defineProperty(Qi,{pb:"alignment"},s("ja"),function(a){if(this.ja!==a&&(t&&v.c(a,na,Qi,"alignment"),a===dk||a===ek))this.ja=a,this.r()});v.a(Qi,"arrangement",Qi.prototype.Pd);
v.defineProperty(Qi,{Pd:"arrangement"},s("Cc"),function(a){if(this.Cc!==a&&(t&&v.c(a,na,Qi,"arrangement"),a===bk||a===ck))this.Cc=a,this.r()});v.a(Qi,"sorting",Qi.prototype.yf);v.defineProperty(Qi,{yf:"sorting"},s("ac"),function(a){if(this.ac!==a&&(t&&v.c(a,na,Qi,"sorting"),a===$j||a===ak||a===Yj||Zj))this.ac=a,this.r()});v.a(Qi,"comparer",Qi.prototype.Xg);v.defineProperty(Qi,{Xg:"comparer"},s("Yb"),function(a){this.Yb!==a&&(t&&v.e(a,"function",Qi,"comparer"),this.Yb=a,this.r())});var Vm;
Qi.standardComparer=Vm=function(a,b){t&&v.c(a,S,Qi,"standardComparer:a");t&&v.c(b,S,Qi,"standardComparer:b");var c=a.text,d=b.text;return c<d?-1:c>d?1:0};
Qi.smartComparer=function(a,b){t&&v.c(a,S,Qi,"standardComparer:a");t&&v.c(b,S,Qi,"standardComparer:b");if(a!==m){if(b!==m){var c=a.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=b.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e;for(e=0;e<c.length;e++)if(""!==d[e]&&d[e]!==f){var g=parseFloat(c[e]),i=parseFloat(d[e]);if(isNaN(g))if(isNaN(i)){if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else return 1;else{if(isNaN(i))return-1;
if(0!==g-i)return g-i}}else if(""!==c[e])return 1;return""!==d[e]&&d[e]!==f?-1:0}return 1}return b!==m?-1:0};var ek;Qi.Position=ek=v.l(Qi,"Position",0);var dk;Qi.Location=dk=v.l(Qi,"Location",1);var bk;Qi.LeftToRight=bk=v.l(Qi,"LeftToRight",2);var ck;Qi.RightToLeft=ck=v.l(Qi,"RightToLeft",3);var $j;Qi.Forward=$j=v.l(Qi,"Forward",4);var ak;Qi.Reverse=ak=v.l(Qi,"Reverse",5);var Yj;Qi.Ascending=Yj=v.l(Qi,"Ascending",6);var Zj;Qi.Descending=Zj=v.l(Qi,"Descending",7);
function fk(){Nh.call(this);this.nw=this.km=this.dc=0;this.Uo=360;this.mw=rk;this.Cs=this.ee=this.NA=this.xj=0;this.eu=new Wm;this.Fs=this.Gm=0;this.sA=function(a){a||(a=(new Date).getTime());return(9301*a+49297)%233280/233280};this.iE=600;this.gq=NaN;this.vo=1;this.Kg=0;this.Mg=360;this.Cc=rk;this.Q=nk;this.ac=kk;this.Yb=Um;this.Jg=6;this.$p=uk}v.H("CircularLayout",fk);v.pa(fk,Nh);
fk.prototype.cloneProtected=fk.prototype.jb=function(a){Nh.prototype.jb.call(this,a);a.gq=this.gq;a.vo=this.vo;a.Kg=this.Kg;a.Mg=this.Mg;a.Cc=this.Cc;a.Q=this.Q;a.ac=this.ac;a.Yb=this.Yb;a.Jg=this.Jg;a.$p=this.$p};fk.prototype.createNetwork=fk.prototype.uu=function(){var a=new Xm;Mm(a,this);return a};
fk.prototype.doLayout=fk.prototype.or=function(a){this.Kc===m&&(this.Kc=this.makeNetwork(a));if(1===this.p.R.count)a=this.p.R.Z(0),a.za=0,a.Aa=0;else{for(var a=this.p.R.f,b=new y(Ym);a.next();){var c=a.value,d=c.Ea;d!==m&&(c.width=d.na.width,c.height=d.na.height);b.add(c)}var a=new y(Ym),c=new y(Ym),b=this.sort(b),a=new y(Ym),c=new y(Ym),d=this.mw,e=this.aE,g=this.dc,i=this.km,j=this.nw,k=this.Uo,l=this.xj,n=this.NA,r=this.ee,q=this.Cs,d=this.Pd,e=this.Ur,g=this.PC;if(!isFinite(g)||0>=g)g=NaN;i=this.cB;
if(!isFinite(i)||0>=i)i=1;j=this.fi;isFinite(j)||(j=0);k=this.cj;if(!isFinite(k)||360<k||1>k)k=360;l=this.aj;isFinite(l)||(l=NaN);d===sk&&e===tk?d=rk:d===sk&&e!==tk&&(e=tk,d=this.Pd);if((this.direction===lk||this.direction===mk)&&this.yf!==kk){for(var u=0;!(u>=b.length);u+=2){a.add(b.Z(u));if(u+1>=b.length)break;c.add(b.Z(u+1))}this.direction===lk?(this.Pd===sk&&a.reverse(),b=new y(Ym),b.cg(a),b.cg(c)):(this.Pd===sk&&c.reverse(),b=new y(Ym),b.cg(c),b.cg(a))}for(var x=b.length,z=n=0,u=0;u<b.length;u++){var r=
j+k*z*(this.direction===nk?1:-1)/x,D=b.Z(u).Me;isNaN(D)&&(D=Zm(b.Z(u),r));if(360>k&&(0===u||u===b.length-1))D/=2;n+=D;z++}if(isNaN(g)||d===sk){isNaN(l)&&(l=6);if(d!==rk&&d!==sk){D=-Infinity;for(u=0;u<x;u++){var q=b.Z(u),F=b.Z(u===x-1?0:u+1);isNaN(q.Me)&&Zm(q,0);isNaN(F.Me)&&Zm(F,0);D=Math.max(D,(q.Me+F.Me)/2)}q=D+l;d===pk?(r=2*Math.PI/x,g=(D+l)/r):g=$m(this,q*(360<=k?x:x-1),i,j*Math.PI/180,k*Math.PI/180)}else g=$m(this,n+(360<=k?x:x-1)*(d!==sk?l:1.6*l),i,j*Math.PI/180,k*Math.PI/180);r=g*i}else if(r=
g*i,z=an(this,g,r,j*Math.PI/180,k*Math.PI/180),isNaN(l)){if(d===rk||d===sk)l=(z-n)/(360<=k?x:x-1)}else if(d===rk||d===sk)u=(z-n)/(360<=k?x:x-1),u<l?(g=$m(this,n+l*(360<=k?x:x-1),i,j*Math.PI/180,k*Math.PI/180),r=g*i):l=u;else{D=-Infinity;for(u=0;u<x;u++)q=b.Z(u),F=b.Z(u===x-1?0:u+1),isNaN(q.Me)&&Zm(q,0),isNaN(F.Me)&&Zm(F,0),D=Math.max(D,(q.Me+F.Me)/2);q=D+l;u=$m(this,q*(360<=k?x:x-1),i,j*Math.PI/180,k*Math.PI/180);u>g?(g=u,r=g*i):q=z/(360<=k?x:x-1)}this.mw=d;this.aE=e;this.dc=g;this.km=i;this.nw=j;
this.Uo=k;this.xj=l;this.NA=n;this.ee=r;this.Cs=q;c=[b,a,c];b=c[0];a=c[1];c=c[2];d=this.mw;e=this.dc;i=this.nw;j=this.Uo;k=this.xj;l=this.ee;n=this.Cs;if((this.direction===lk||this.direction===mk)&&d===sk)bn(this,b,j,i-j/2,nk);else if(this.direction===lk||this.direction===mk){g=0;switch(d){case qk:g=180*cn(this,e,l,i,n)/Math.PI;break;case rk:n=b=0;g=a.ic();g!==m&&(b=Zm(g,Math.PI/2));g=c.ic();g!==m&&(n=Zm(g,Math.PI/2));g=180*cn(this,e,l,i,k+(b+n)/2)/Math.PI;break;case pk:g=j/b.length}if(this.direction===
lk){switch(d){case qk:dn(this,a,i,ok);break;case rk:en(this,a,i,ok);break;case pk:fn(this,a,j/2,i,ok)}switch(d){case qk:dn(this,c,i+g,nk);break;case rk:en(this,c,i+g,nk);break;case pk:fn(this,c,j/2,i+g,nk)}}else{switch(d){case qk:dn(this,c,i,ok);break;case rk:en(this,c,i,ok);break;case pk:fn(this,c,j/2,i,ok)}switch(d){case qk:dn(this,a,i+g,nk);break;case rk:en(this,a,i+g,nk);break;case pk:fn(this,a,j/2,i+g,nk)}}}else switch(d){case qk:dn(this,b,i,this.direction);break;case rk:en(this,b,i,this.direction);
break;case pk:fn(this,b,j,i,this.direction);break;case sk:bn(this,b,j,i,this.direction)}this.updateParts();this.Kc=m;this.Se=h}};function fn(a,b,c,d,e){for(var g=a.Uo,i=a.dc,a=a.ee,d=d*Math.PI/180,c=c*Math.PI/180,j=b.length,k=0;k<j;k++){var l=d+(e===nk?k*c/(360<=g?j:j-1):-(k*c)/j),n=b.Z(k),r=i*Math.tan(l)/a,r=Math.sqrt((i*i+a*a*r*r)/(1+r*r));n.za=r*Math.cos(l);n.Aa=r*Math.sin(l);n.hu=180*l/Math.PI}}
function en(a,b,c,d){for(var e=a.dc,g=a.ee,i=a.xj,c=c*Math.PI/180,j=b.length,k=0;k<j;k++){var l=b.Z(k),n=b.Z(k===j-1?0:k+1),r=g*Math.sin(c);l.za=e*Math.cos(c);l.Aa=r;l.hu=180*c/Math.PI;isNaN(l.Me)&&Zm(l,0);isNaN(n.Me)&&Zm(n,0);l=cn(a,e,g,d===nk?c:-c,(l.Me+n.Me)/2+i);c+=d===nk?l:-l}}function dn(a,b,c,d){for(var e=a.dc,g=a.ee,i=a.Cs,c=c*Math.PI/180,j=b.length,k=0;k<j;k++){var l=b.Z(k);l.za=e*Math.cos(c);l.Aa=g*Math.sin(c);l.hu=180*c/Math.PI;l=cn(a,e,g,d===nk?c:-c,i);c+=d===nk?l:-l}}
function bn(a,b,c,d,e){var g=a.Fs,g=a.Uo;a.rA=0;a.eu=new Wm;if(360>c){for(g=d+(e===nk?g:-g);0>g;)g+=360;g%=360;180<g&&(g-=360);g*=Math.PI/180;a.Fs=g;gn(a,b,c,d,e)}else hn(a,b,c,d,e);a.eu.Th(b)}
function hn(a,b,c,d,e){for(var g=a.xj,i=a.km,j=a.dc*Math.cos(d*Math.PI/180),k=a.ee*Math.sin(d*Math.PI/180),l=b.Cf(),n=0;n<l.length;n++){l[n].za=j;l[n].Aa=k;if(n===l.length-1)break;var r=[],r=jn(a,j,k,l,n,e);r[0]||(r=kn(a,j,k,l,n,e));j=r[1];k=r[2]}a.Gm++;if(!(128<a.Gm)){var j=l[0].za,k=l[0].Aa,n=l[l.length-1].za,r=l[l.length-1].Aa,q=Math.abs(j-n)-((l[0].width+l[l.length-1].width)/2+g),u=Math.abs(k-r)-((l[0].height+l[l.length-1].height)/2+g),g=0;2.5>Math.abs(u)?Math.abs(j-n)<(l[0].width+l[l.length-
1].width)/2&&(g=0):g=0<u?u:2.5>Math.abs(q)?0:q;q=p;q=Math.abs(n)>Math.abs(r)?0<n^k>r:0<r^j<n;if(q=e===nk?q:!q)g=-Math.abs(g),g=Math.min(g,-l[l.length-1].width),g=Math.min(g,-l[l.length-1].height);j=a.eu;if(0<g&&0>j.om||Math.abs(g)<Math.abs(j.om)&&!(0>g&&0<j.om)){j.om=g;j.jl=[];j.Xm=[];for(k=0;k<l.length;k++)j.jl[k]=l[k].lb.x,j.Xm[k]=l[k].lb.y}l=a.Gm;36<l&&0===l%13&&(a.dc*=(0===l%2?0.75:1.1)+0.15*a.sA(a.Gm),a.ee=a.dc*i);2.5<Math.abs(g)&&(a.dc-=g/(2*Math.PI),a.ee=a.dc*i,hn(a,b,c,d,e))}}
function gn(a,b,c,d,e){for(var g=a.dc,i=a.ee,j=a.km,k=g*Math.cos(d*Math.PI/180),l=i*Math.sin(d*Math.PI/180),n=b.Cf(),r=0;r<n.length;r++){n[r].za=k;n[r].Aa=l;if(r===n.length-1)break;var q=[],q=jn(a,k,l,n,r,e);q[0]||(q=kn(a,k,l,n,r,e));k=q[1];l=q[2]}a.rA++;if(!(128<a.rA)){b.Z(b.length-1);k=Math.atan2(l,k);k=e===nk?a.Fs-k:k-a.Fs;k=Math.abs(k)<Math.abs(k-2*Math.PI)?k:k-2*Math.PI;g=k*(g+i)/2;i=a.eu;if(Math.abs(g)<Math.abs(i.om)){i.om=g;i.jl=[];i.Xm=[];for(k=0;k<n.length;k++)i.jl[k]=n[k].lb.x,i.Xm[k]=n[k].lb.y}n=
a.Gm;36<n&&0===n%13&&(a.dc*=(0==n%2?0.75:1.1)+0.15*a.sA(a.Gm),a.ee=a.dc*j);2.5<Math.abs(g)&&(a.dc-=g/(2*Math.PI),a.ee=a.dc*j,gn(a,b,c,d,e))}}
function jn(a,b,c,d,e,g){var i=a.xj,j=a.dc,a=a.ee,k=0,l=0,n=p;if(0<=c^g===nk){if(k=b+((d[e].width+d[e+1].width)/2+i),k>j){k=b-((d[e].width+d[e+1].width)/2+i);if(k<-j)return[p,k,l];n=h}}else if(k=b-((d[e].width+d[e+1].width)/2+i),k<-j){k=b+((d[e].width+d[e+1].width)/2+i);if(k>j)return[p,k,l];n=h}l=Math.sqrt(1-k*k/(j*j))*a;0>c^n&&(l=-l);return Math.abs(c-l)>(d[e].height+d[e+1].height)/2?[p,k,l]:[h,k,l]}
function kn(a,b,c,d,e,g){var i=a.xj,j=a.dc,a=a.ee,k=0,l=0,n=p;if(0<=b^g===nk){if(l=c-((d[e].height+d[e+1].height)/2+i),l<-a){l=c+((d[e].height+d[e+1].height)/2+i);if(l>a)return[p,k,l];n=h}}else if(l=c+((d[e].height+d[e+1].height)/2+i),l>a){l=c-((d[e].height+d[e+1].height)/2+i);if(l<-a)return[p,k,l];n=h}k=Math.sqrt(1-l*l/(a*a))*j;0>b^n&&(k=-k);return Math.abs(b-k)>(d[e].width+d[e+1].width)/2?[p,k,l]:[h,k,l]}function Wm(){this.om=-Infinity;this.Xm=this.jl=m}
Wm.prototype.Th=function(a){if(!(this.jl===m||this.Xm===m))for(var b=0;b<this.jl.length;b++){var c=a.Z(b);c.x=this.jl[b];c.y=this.Xm[b]}};fk.prototype.commitLayout=fk.prototype.ru=function(){this.commitNodes();this.commitLinks()};fk.prototype.commitNodes=fk.prototype.Sx=function(){for(var a=this.tE,b=this.p.R.f,c;b.next();)c=b.value,c.x+=a.x,c.y+=a.y,c.Th()};fk.prototype.commitLinks=fk.prototype.Rx=function(){for(var a=this.p.Qb.f;a.next();)a.value.Th()};
function an(a,b,c,d,e){var g=a.iE;if(0.0010>Math.abs(a.km-1))return d!==f&&e!==f?e*b:2*Math.PI*b;var a=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,i=0,j;j=d!==f&&e!==f?e/(g+1):Math.PI/(2*(g+1));for(var k=0;k<=g;k++)var l=Math.sin(d!==f&&e!==f?d+k*e/g:k*Math.PI/(2*g)),i=i+Math.sqrt(1-a*a*l*l)*j;return d!==f&&e!==f?(b>c?b:c)*i:4*(b>c?b:c)*i}function $m(a,b,c,d,e){return b/(d!==f&&e!==f?an(a,1,c,d,e):an(a,1,c))}
function cn(a,b,c,d,e){if(0.0010>Math.abs(a.km-1))return e/b;var g=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,i=0,a=2*Math.PI/(700*a.p.R.count);b>c&&(d+=Math.PI/2);for(var j=0;;j++){var k=Math.sin(d+j*a),i=i+(b>c?b:c)*Math.sqrt(1-g*g*k*k)*a;if(i>=e)return j*a}return 0}
fk.prototype.sort=function(a){switch(this.yf){case ik:break;case jk:a.reverse();break;case gk:a.sort(this.Xg);break;case hk:a.sort(this.Xg);a.reverse();break;case kk:for(var b=[],c=0;c<a.length;c++)b.push(0);for(var d=new y(Ym),c=0;c<a.length;c++){var e=-1,g=-1;if(0===c)for(var i=0;i<a.length;i++){var j=a.Z(i).uF;j>e&&(e=j,g=i)}else for(i=0;i<a.length;i++)j=b[i],j>e&&(e=j,g=i);d.add(a.Z(g));b[g]=-1;g=a.Z(g);e=g.sb;for(g=g.rb;e.next();)i=e.value,i=i.G,i=a.indexOf(i),0>i||0<=b[i]&&b[i]++;for(;g.next();)i=
g.value,i=i.D,i=a.indexOf(i),0>i||0<=b[i]&&b[i]++}a=[];for(b=0;b<d.length;b++){j=d.Z(b);a[b]=[];for(var c=j.rb,e=j.sb,k,l;c.next();)k=c.value,l=d.indexOf(k.D),l!==b&&0>a[b].indexOf(l)&&a[b].push(l);for(;e.next();)k=e.value,l=d.indexOf(k.G),l!==b&&0>a[b].indexOf(l)&&a[b].push(l)}j=[];for(b=0;b<a.length;b++)j[b]=0;for(var c=[],n=[],r=[],e=[],g=new y(Ym),i=b=0;b<a.length;b++){var q=a[b].length;if(1===q)e.push(b);else if(0===q)g.add(d.Z(b));else{if(0===i)c.push(b);else{for(var u=Infinity,x=Infinity,z=
-1,D=[],q=0;q<c.length;q++)if(0>a[c[q]].indexOf(c[q===c.length-1?0:q+1]))D.push(q===c.length-1?0:q+1);if(0===D.length)for(q=0;q<c.length;q++)D.push(q);for(q=0;q<D.length;q++){var F=D[q],G;l=a[b];k=n;G=r;for(var I=j,M=F,T=c,pa=0,ea=0;ea<k.length;ea++){var Aa=I[k[ea]],ta=I[G[ea]],va=0,Ia=0;Aa<ta?(va=Aa,Ia=ta):(va=ta,Ia=Aa);if(va<M&&M<=Ia)for(Aa=0;Aa<l.length;Aa++)ta=l[Aa],0>T.indexOf(ta)||va<I[ta]&&I[ta]<Ia||(va===I[ta]||Ia===I[ta])||pa++;else for(Aa=0;Aa<l.length;Aa++)ta=l[Aa],0>T.indexOf(ta)||va<
I[ta]&&I[ta]<Ia&&!(va===I[ta]||Ia===I[ta])&&pa++}G=pa;for(k=I=0;k<a[b].length;k++)l=c.indexOf(a[b][k]),0<=l&&(l=Math.abs(F-(l>=F?l+1:l)),I+=l<c.length+1-l?l:c.length+1-l);for(k=0;k<n.length;k++)l=j[n[k]],M=j[r[k]],l>=F&&l++,M>=F&&M++,l>M&&(T=M,M=l,l=T),M-l<(c.length+2)/2^(l<F&&F<=M)||I++;if(G<u||G===u&&I<x)u=G,x=I,z=F}c.splice(z,0,b);for(q=0;q<c.length;q++)j[c[q]]=q;for(q=0;q<a[b].length;q++)u=a[b][q],0<=c.indexOf(u)&&(n.push(b),r.push(u))}i++}}n=p;for(r=c.length;;){n=h;for(j=0;j<e.length;j++)if(b=
e[j],q=a[b][0],l=c.indexOf(q),0<=l){for(i=x=0;i<a[q].length;i++)u=a[q][i],u=c.indexOf(u),0>u||u===l||(z=u>l?u-l:l-u,x+=u<l^z>r-z?1:-1);c.splice(0>x?l:l+1,0,b);e.splice(j,1);j--}else n=p;if(n)break;else c.push(e[0]),e.splice(0,1)}for(b=0;b<c.length;b++)l=c[b],g.add(d.Z(l));return g;default:v.g("Invalid sorting type.")}return a};v.a(fk,"radius",fk.prototype.PC);v.defineProperty(fk,{PC:"radius"},s("gq"),function(a){if(this.gq!==a&&(0<a||isNaN(a)))this.gq=a,this.r()});v.a(fk,"aspectRatio",fk.prototype.cB);
v.defineProperty(fk,{cB:"aspectRatio"},s("vo"),function(a){this.vo!==a&&0<a&&(this.vo=a,this.r())});v.a(fk,"startAngle",fk.prototype.fi);v.defineProperty(fk,{fi:"startAngle"},s("Kg"),function(a){this.Kg!==a&&(this.Kg=a,this.r())});v.a(fk,"sweepAngle",fk.prototype.cj);v.defineProperty(fk,{cj:"sweepAngle"},s("Mg"),function(a){this.Mg!==a&&(this.Mg=0<a&&360>=a?a:360,this.r())});v.a(fk,"arrangement",fk.prototype.Pd);
v.defineProperty(fk,{Pd:"arrangement"},s("Cc"),function(a){if(this.Cc!==a&&(t&&v.c(a,na,fk,"arrangement"),a===sk||a===rk||a===qk||a===pk))this.Cc=a,this.r()});v.a(fk,"direction",fk.prototype.direction);v.defineProperty(fk,{direction:"direction"},s("Q"),function(a){if(this.Q!==a&&(t&&v.c(a,na,fk,"direction"),a===nk||a===ok||a===lk||a===mk))this.Q=a,this.r()});v.a(fk,"sorting",fk.prototype.yf);
v.defineProperty(fk,{yf:"sorting"},s("ac"),function(a){if(this.ac!==a&&(t&&v.c(a,na,fk,"sorting"),a===ik||a===jk||a===gk||hk||a===kk))this.ac=a,this.r()});v.a(fk,"comparer",fk.prototype.Xg);v.defineProperty(fk,{Xg:"comparer"},s("Yb"),function(a){this.Yb!==a&&(t&&v.e(a,"function",fk,"comparer"),this.Yb=a,this.r())});v.a(fk,"spacing",fk.prototype.aj);v.defineProperty(fk,{aj:"spacing"},s("Jg"),function(a){this.Jg!==a&&(this.Jg=a,this.r())});v.a(fk,"nodeDiameterFormula",fk.prototype.Ur);
v.defineProperty(fk,{Ur:"nodeDiameterFormula"},s("$p"),function(a){if(this.$p!==a&&(t&&v.c(a,na,fk,"nodeDiameterFormula"),a===uk||a===tk))this.$p=a,this.r()});v.m(fk,{uE:"actualXRadius"},s("dc"));v.m(fk,{vE:"actualYRadius"},s("ee"));v.m(fk,{dH:"actualSpacing"},s("xj"));v.m(fk,{tE:"actualCenter"},function(){return isNaN(this.Qc.x)||isNaN(this.Qc.y)?new C(0,0):new C(this.Qc.x+this.uE,this.Qc.y+this.vE)});var rk;fk.ConstantSpacing=rk=v.l(fk,"ConstantSpacing",0);var qk;
fk.ConstantDistance=qk=v.l(fk,"ConstantDistance",1);var pk;fk.ConstantAngle=pk=v.l(fk,"ConstantAngle",2);var sk;fk.Packed=sk=v.l(fk,"Packed",3);var nk;fk.Clockwise=nk=v.l(fk,"Clockwise",4);var ok;fk.Counterclockwise=ok=v.l(fk,"Counterclockwise",5);var lk;fk.BidirectionalLeft=lk=v.l(fk,"BidirectionalLeft",6);var mk;fk.BidirectionalRight=mk=v.l(fk,"BidirectionalRight",7);var ik;fk.Forwards=ik=v.l(fk,"Forwards",8);var jk;fk.Reverse=jk=v.l(fk,"Reverse",9);var gk;fk.Ascending=gk=v.l(fk,"Ascending",10);
var hk;fk.Descending=hk=v.l(fk,"Descending",11);var kk;fk.Optimized=kk=v.l(fk,"Optimized",12);var uk;fk.Pythagorean=uk=v.l(fk,"Pythagorean",13);var tk;fk.Circular=tk=v.l(fk,"Circular",14);function Xm(){Lm.call(this)}v.H("CircularNetwork",Xm);v.pa(Xm,Lm);Xm.prototype.createVertex=Xm.prototype.Ji=function(){return new Ym};Xm.prototype.createEdge=Xm.prototype.on=function(){return new ln};function Ym(){Pm.call(this);this.tz=this.jm=NaN}v.H("CircularVertex",Ym);v.pa(Ym,Pm);
function Zm(a,b){var c=a.p;if(c===m)return NaN;c=c.vb;if(c===m)return NaN;if(c.Pd===sk)if(c.Ur===tk)a.jm=Math.max(a.width,a.height);else{var c=Math.abs(Math.sin(b)),d=Math.abs(Math.cos(b));if(0===c)return a.width;if(0===d)return a.height;a.jm=Math.min(a.height/c,a.width/d)}else a.jm=c.Ur===tk?Math.max(a.width,a.height):Math.sqrt(a.width*a.width+a.height*a.height);return a.jm}v.a(Ym,"diameter",Ym.prototype.Me);v.defineProperty(Ym,{Me:"diameter"},s("jm"),ba("jm"));v.a(Ym,"actualAngle",Ym.prototype.hu);
v.defineProperty(Ym,{hu:"actualAngle"},s("tz"),ba("tz"));function ln(){Qm.call(this)}v.H("CircularEdge",ln);v.pa(ln,Qm);function mn(){Nh.call(this);this.kf=m;this.zp=0;this.Ye=(new yb(100,100)).freeze();this.uo=p;this.jd=this.Ig=h;this.Em=100;this.Xo=1;this.kp=1E3;this.Po=0.05;this.Oo=50;this.Mo=150;this.No=0;this.Ko=20;this.Jo=25}v.H("ForceDirectedLayout",mn);v.pa(mn,Nh);
mn.prototype.cloneProtected=mn.prototype.jb=function(a){Nh.prototype.jb.call(this,a);a.Ye=this.Ye.B();a.uo=this.uo;a.Ig=this.Ig;a.jd=this.jd;a.Em=this.Em;a.Xo=this.Xo;a.kp=this.kp;a.Po=this.Po;a.Oo=this.Oo;a.Mo=this.Mo;a.No=this.No;a.Ko=this.Ko;a.Jo=this.Jo};mn.prototype.createNetwork=mn.prototype.uu=function(){var a=new nn;Mm(a,this);return a};
mn.prototype.doLayout=mn.prototype.or=function(a){this.Kc===m&&(this.Kc=this.makeNetwork(a));a=this.Su;if(0<this.p.R.count){this.p.yu();for(var b=this.p.R.f;b.next();){var c=b.value;c.mi=this.electricalCharge(c);c.Dm=this.gravitationalMass(c);var d=c.Ea;if(d!==m){var e=d.la.width,d=d.la.height;c.width=e;c.height=d;c.Gu=0.5*e;c.Hu=0.5*d}}for(b=this.p.Qb.f;b.next();)c=b.value,c.Jq=this.springStiffness(c),c.zh=this.springLength(c);this.zp=0;a:{if(!(3>this.p.R.count)){e=b=0;c=this.p.R.f;c.next();for(d=
c.value.A;c.next();){if(c.value.A.Re(d)&&(b++,1<b)){b=h;break a}if(10<e)break;e++}}b=p}if(b){b=this.p;for(e=b.JG().f;e.next();){this.Kc=d=e.value;for(c=this.p.R.f;c.next();){for(var d=c.value,g=0,i=d.R;i.next();)g++;d.ze=g;d.zi=1;d.Fk=m;d.$f=m}on(this,0,a)}this.Kc=b;e.reset();t&&v.c(b,nn,mn,"arrangeConnectedGraphs:singletons");for(var c=this.mu,j=e.count,d=h,i=g=0,k=[],l=0;l<j+b.R.count+2;l++)k[l]=m;j=0;for(e.reset();e.next();){var n=e.value,l=this.Ke(n);if(d)d=p,g=l.x+l.width/2,i=l.y+l.height/2,
k[0]=new C(l.right+c.width,l.top),k[1]=new C(l.left,l.bottom+c.height),j=2;else{var r=pn(k,j,new C(g,i),new yb(l.width,l.height),c),q=k[r],u=new C(q.x+l.width+c.width,q.y),x=new C(q.x,q.y+l.height+c.height);r+1<j&&k.splice(r+1,0,m);k[r]=u;k[r+1]=x;j++;r=q.x-l.x;l=q.y-l.y;for(n=n.R.f;n.next();){var z=n.value;z.za+=r;z.Aa+=l}}}for(n=b.R.f;n.next();)z=n.value,l=z.A,2>j?(g=l.x+l.width/2,i=l.y+l.height/2,k[0]=new C(l.right+c.width,l.top),k[1]=new C(l.left,l.bottom+c.height),j=2):(r=pn(k,j,new C(g,i),new yb(l.width,
l.height),c),q=k[r],u=new C(q.x+l.width+c.width,q.y),x=new C(q.x,q.y+l.height+c.height),r+1<j&&k.splice(r+1,0,m),k[r]=u,k[r+1]=x,j++,z.za=q.x+z.width/2,z.Aa=q.y+z.height/2);for(e.reset();e.next();){d=e.value;for(g=d.R.f;g.next();)c=g.value,b.ak(c);for(d=d.Qb.f;d.next();)c=d.value,b.Zm(c)}}qn(this,a);this.updateParts()}this.Em=a;this.Kc=m;this.Se=h};mn.prototype.Ke=function(a){t&&v.c(a,nn,mn,"computeBounds:net");for(var b=new E,c=h,a=a.R.f;a.next();){var d=a.value;c?(c=p,b.set(d.A)):b.ej(d.A)}return b};
function rn(a,b,c){t&&(v.j(b,mn,"computeClusterLayoutIterations:level"),v.j(c,mn,"computeClusterLayoutIterations:maxiter"));return Math.max(Math.min(a.p.R.count,c*(b+1)/11),10)}
function on(a,b,c){t&&(v.j(b,mn,"layoutClusters:level"),v.j(c,mn,"layoutClusters:maxiter"));var d;t&&v.j(b,mn,"hasClusters:level");if(10<b||3>a.p.R.count)d=p;else{a.kf===m?a.kf=new y(sn):a.kf.clear();a.kf.cg(a.p.R);d=a.kf;d.sort(function(a,b){return a===m||b===m||a===b?0:b.ze-a.ze});for(var e=d.count-1;0<=e&&1>=d.i[e].ze;)e--;d=1<d.count-e}if(d){d=a.Bl;a.Bl*=1+1/(b+1);t&&v.j(b,mn,"pushSubNetwork:level");for(var e=a.p,g=new nn,i=a.kf.f;i.next();){var j=i.value;if(1<j.ze){g.ak(j);var k={oz:j.ze,pz:j.width,
nz:j.height,PD:j.z.x,QD:j.z.y};j.$f===m&&(j.$f=new y);j.$f.add(k);j.bx=j.$f.count-1}else break}for(var l=e.Qb.f;l.next();){var n=l.value;if(n.G.p===g&&n.D.p===g)g.Zm(n);else if(n.G.p===g){var r=n.G.Fk;r===m&&(r=new y(sn),n.G.Fk=r);r.add(n.D);n.G.ze--;n.G.zi+=n.D.zi}else n.D.p===g&&(r=n.D.Fk,r===m&&(r=new y(sn),n.D.Fk=r),r.add(n.G),n.D.ze--,n.D.zi+=n.G.zi)}for(l=g.Qb.f;l.next();)n=l.value,n.zh*=Math.max(1,Math.sqrt((n.G.zi+n.D.zi)/(4*b+1)));for(i=g.R.f;i.next();)if(j=i.value,r=j.Fk,r!==m&&0<r.count&&
(k=j.$f.i[j.$f.count-1],k=k.oz-j.ze,!(0>=k))){for(var q=0,u=0,x=r.count-k;x<r.count;x++){for(var z=r.i[x],n=m,l=z.Qb.f;l.next();){var D=l.value;if(D.DF(z)===j){n=D;break}}n!==m&&(u+=n.zh,q+=z.width*z.height)}r=j.za;l=j.Aa;n=j.width;x=j.height;z=j.z;D=n*x;1>D&&(D=1);q=Math.sqrt((q+D+4*u*u/(k*k))/D);k=(q-1)*n/2;q=(q-1)*x/2;j.lb=new E(r-z.x-k,l-z.y-q,n+2*k,x+2*q);j.focus=new C(z.x+k,z.y+q)}a.Kc=g;g=Math.max(0,rn(a,b,c));a.Su+=g;on(a,b+1,c);qn(a,g);t&&(v.c(e,nn,mn,"popNetwork:oldnet"),v.j(b,mn,"popNetwork:level"));
for(c=a.p.R.f;c.next();)g=c.value,g.p=e,g.$f!==m&&(i=g.$f.i[g.bx],g.ze=i.oz,j=i.PD,k=i.QD,g.lb=new E(g.za-j,g.Aa-k,i.pz,i.nz),g.focus=new C(j,k),g.bx--);for(c=a.p.Qb.f;c.next();)c.value.p=e;a.Kc=e;c=a.kf;c===m?c=new y(sn):c.clear();c.cg(e.R);c.sort(function(a,b){return a===m||b===m||a===b?0:b.ze-a.ze});for(e=c.f;e.next();)tn(a,e.value,b);a.Bl=d}}
function tn(a,b,c){t&&(v.c(b,sn,mn,"surroundNode:oldnet"),v.j(c,mn,"surroundNode:level"));var d=b.Fk;if(!(d===m||0===d.count)){var c=b.za,e=b.Aa,g=b.width,i=b.height;b.$f!==m&&0<b.$f.count&&(i=b.$f.i[0],g=i.pz,i=i.nz);for(var g=Math.sqrt(g*g+i*i)/2,j=p,k=i=0,l=0,n=b.R.f;n.next();){var r=n.value;1>=r.ze?k++:(j=h,l++,i+=Math.atan2(b.Aa-r.Aa,b.za-r.za))}if(0!==k){0<l&&(i/=l);l=b=0;b=j?2*Math.PI/(k+1):2*Math.PI/k;0===k%2&&(l=b/2);1<d.count&&d.sort(function(a,b){return a===m||b===m||a===b?0:b.width*b.height-
a.width*a.height});j=0===k%2?0:1;for(n=d.f;n.next();)if(r=n.value,!(1<r.ze)&&!a.isFixed(r)){d=m;for(k=r.Qb.f;k.next();){d=k.value;break}var k=r.width,q=r.height,d=g+d.zh+Math.sqrt(k*k+q*q)/2,k=i+(b*(j/2>>1)+l)*(0==j%2?1:-1);r.za=c+d*Math.cos(k);r.Aa=e+d*Math.sin(k);j++}}}}
function pn(a,b,c,d,e){var g=9E19,i=-1,j=0;a:for(;j<b;j++){var k=a[j],l=k.x-c.x,n=k.y-c.y,l=l*l+n*n;if(l<g){for(n=j-1;0<=n;n--)if(a[n].y>k.y&&a[n].x-k.x<d.width+e.width)continue a;for(n=j+1;n<b;n++)if(a[n].x>k.x&&a[n].y-k.y<d.height+e.height)continue a;i=j;g=l}}return i}mn.prototype.RA=function(a){var b=a.Ea;if(b!==m)for(b=b.MB();b.next();){var c=b.value;if("Comment"===c.nd){var d=this.p.ie(c);d===m&&(d=this.p.$m(c),d.mi=this.uB,c=this.p.El(a,d,m),c!==m&&(c.zh=this.vB))}}};
function un(a,b){t&&(v.c(a,sn,mn,"getNodeDistance:vertexA"),v.c(b,sn,mn,"getNodeDistance:vertexB"));var c=a.lb,d=c.x,e=c.y,g=c.width,c=c.height,i=b.lb,j=i.x,k=i.y,l=i.width,i=i.height;return d+g<j?e>k+i?(d=d+g-j,e=e-k-i,Math.sqrt(d*d+e*e)):e+c<k?(d=d+g-j,e=e+c-k,Math.sqrt(d*d+e*e)):j-(d+g):d>j+l?e>k+i?(d=d-j-l,e=e-k-i,Math.sqrt(d*d+e*e)):e+c<k?(d=d-j-l,e=e+c-k,Math.sqrt(d*d+e*e)):d-(j+l):e>k+i?e-(k+i):e+c<k?k-(e+c):0.1}
function qn(a,b){t&&v.j(b,mn,"performIterations:num");a.kf=m;for(var c=a.zp+b;a.zp<c&&!(a.zp++,!vn(a)););a.kf=m}
function vn(a){a.kf===m&&(a.kf=new y(sn),a.kf.cg(a.p.R));var b=a.kf;if(0>=b.count)return p;var c=b.i[0];c.sd=0;c.td=0;for(var d=c.za,e=d,g=c.Aa,i=g,c=1;c<b.count;c++){var j=b.i[c];j.sd=0;j.td=0;var k=j.za,j=j.Aa,d=Math.min(d,k),e=Math.max(e,k),g=Math.min(g,j),i=Math.max(i,j)}(i=e-d>i-g)?b.sort(function(a,b){return a===m||b===m||a===b?0:a.za-b.za}):b.sort(function(a,b){return a===m||b===m||a===b?0:a.Aa-b.Aa});for(var l=0,n=k=0,c=0;c<b.count;c++){j=b.i[c];d=j.za;e=j.Aa;k=j.mi*a.electricalFieldX(d,e);
n=j.mi*a.electricalFieldY(d,e);j.sd+=k;j.td+=n;k=j.Dm*a.gravitationalFieldX(d,e);n=j.Dm*a.gravitationalFieldY(d,e);j.sd+=k;j.td+=n;for(var r=a.Bl,q=c+1;q<b.count;q++)if(g=b.i[q],g!==j){var n=g.za,u=g.Aa;if(Math.abs(d-n)>r){if(i)break}else if(Math.abs(e-u)>r){if(!i)break}else{var x=un(j,g);1>x?(d>n?(k=Math.abs(g.A.right-j.A.left),k=wn(1+k)):d<n?(k=Math.abs(g.A.left-j.A.right),k=-wn(1+k)):(k=Math.max(g.width,j.width),k=wn(1+k)-k/2),e>u?(n=Math.abs(g.A.bottom-j.A.top),n=wn(1+n)):d<n?(n=Math.abs(g.A.top-
j.A.bottom),n=-wn(1+n)):(n=Math.max(g.height,j.height),n=wn(1+n)-n/2)):(l=-(j.mi*g.mi)/(x*x),k=l*((n-d)/x),n=l*((u-e)/x));j.sd+=k;j.td+=n;g.sd-=k;g.td-=n}}}for(c=a.p.Qb.f;c.next();)i=c.value,j=i.G,g=i.D,d=j.za,e=j.Aa,n=g.za,u=g.Aa,x=un(j,g),1>x?(k=(d>n?1:-1)*wn(1+Math.max(g.width,j.width)),n=(e>u?1:-1)*wn(1+Math.max(g.height,j.height))):(l=i.Jq*(x-i.zh),k=l*((n-d)/x),n=l*((u-e)/x)),j.sd+=k,j.td+=n,g.sd-=k,g.td-=n;c=0;d=Math.max(a.Bl/20,50);for(e=0;e<b.count;e++)j=b.i[e],a.isFixed(j)||(g=j.sd,i=j.td,
g<-d?g=-d:g>d&&(g=d),i<-d?i=-d:i>d&&(i=d),j.za+=g,j.Aa+=i,c=Math.max(c,g*g+i*i));return c>a.cy*a.cy}function wn(a){t&&v.j(a,mn,"randNext:max");return Math.floor(a*Math.random())}mn.prototype.commitLayout=mn.prototype.ru=function(){this.Xy();this.commitNodes();this.commitLinks()};mn.prototype.Xy=function(){if(this.Nl)for(var a=this.p.Qb.f;a.next();){var b=a.value.Da;b!==m&&(b.Xa=mc,b.Za=mc)}};
mn.prototype.commitNodes=mn.prototype.Sx=function(){var a=0,b=0;if(this.bB)var b=this.Ke(this.p),c=this.Qc,a=c.x-b.x,b=c.y-b.y;for(var c=new E,d=this.p.R.f;d.next();){var e=d.value;if(0!==a||0!==b)c.set(e.A),c.x+=a,c.y+=b,e.lb=c;e.Th()}};mn.prototype.commitLinks=mn.prototype.Rx=function(){for(var a=this.p.Qb.f;a.next();)a.value.Th()};mn.prototype.springStiffness=mn.prototype.qK=function(a){a=a.Jq;return!isNaN(a)?a:this.zB};
mn.prototype.springLength=mn.prototype.pK=function(a){a=a.zh;return!isNaN(a)?a:this.yB};mn.prototype.electricalCharge=mn.prototype.BI=function(a){a=a.mi;return!isNaN(a)?a:this.wB};mn.prototype.electricalFieldX=mn.prototype.CI=da(0);mn.prototype.electricalFieldY=mn.prototype.DI=da(0);mn.prototype.gravitationalMass=mn.prototype.YI=function(a){a=a.Dm;return!isNaN(a)?a:this.xB};mn.prototype.gravitationalFieldX=mn.prototype.WI=da(0);mn.prototype.gravitationalFieldY=mn.prototype.XI=da(0);
mn.prototype.isFixed=mn.prototype.jC=function(a){return a.Cw};v.m(mn,{dI:"currentIteration"},s("zp"));v.a(mn,"arrangementSpacing",mn.prototype.mu);v.defineProperty(mn,{mu:"arrangementSpacing"},s("Ye"),function(a){this.Ye.u(a)||(this.Ye.Ra(a),this.r())});v.a(mn,"arrangesToOrigin",mn.prototype.bB);v.defineProperty(mn,{bB:"arrangesToOrigin"},s("uo"),function(a){this.uo!==a&&(this.uo=a,this.r())});v.a(mn,"setsPortSpots",mn.prototype.Nl);
v.defineProperty(mn,{Nl:"setsPortSpots"},s("Ig"),function(a){this.Ig!==a&&(this.Ig=a,this.r())});v.a(mn,"comments",mn.prototype.Qx);v.defineProperty(mn,{Qx:"comments"},s("jd"),function(a){this.jd!==a&&(this.jd=a,this.r())});v.a(mn,"maxIterations",mn.prototype.Su);v.defineProperty(mn,{Su:"maxIterations"},s("Em"),function(a){this.Em!==a&&0<=a&&(this.Em=a,this.r())});v.a(mn,"epsilonDistance",mn.prototype.cy);
v.defineProperty(mn,{cy:"epsilonDistance"},s("Xo"),function(a){this.Xo!==a&&0<a&&(this.Xo=a,this.r())});v.a(mn,"infinityDistance",mn.prototype.Bl);v.defineProperty(mn,{Bl:"infinityDistance"},s("kp"),function(a){this.kp!==a&&1<a&&(this.kp=a,this.r())});v.a(mn,"defaultSpringStiffness",mn.prototype.zB);v.defineProperty(mn,{zB:"defaultSpringStiffness"},s("Po"),function(a){this.Po!==a&&(this.Po=a,this.r())});v.a(mn,"defaultSpringLength",mn.prototype.yB);
v.defineProperty(mn,{yB:"defaultSpringLength"},s("Oo"),function(a){this.Oo!==a&&(this.Oo=a,this.r())});v.a(mn,"defaultElectricalCharge",mn.prototype.wB);v.defineProperty(mn,{wB:"defaultElectricalCharge"},s("Mo"),function(a){this.Mo!==a&&(this.Mo=a,this.r())});v.a(mn,"defaultGravitationalMass",mn.prototype.xB);v.defineProperty(mn,{xB:"defaultGravitationalMass"},s("No"),function(a){this.No!==a&&(this.No=a,this.r())});v.a(mn,"defaultCommentSpringLength",mn.prototype.vB);
v.defineProperty(mn,{vB:"defaultCommentSpringLength"},s("Ko"),function(a){this.Ko!==a&&(this.Ko=a,this.r())});v.a(mn,"defaultCommentElectricalCharge",mn.prototype.uB);v.defineProperty(mn,{uB:"defaultCommentElectricalCharge"},s("Jo"),function(a){this.Jo!==a&&(this.Jo=a,this.r())});function nn(){Lm.call(this)}v.H("ForceDirectedNetwork",nn);v.pa(nn,Lm);nn.prototype.createVertex=nn.prototype.Ji=function(){return new sn};nn.prototype.createEdge=nn.prototype.on=function(){return new xn};
function sn(){Pm.call(this);this.Cw=p;this.Dm=this.mi=NaN;this.zi=this.ze=this.td=this.sd=0;this.$f=this.Fk=m;this.bx=0}v.H("ForceDirectedVertex",sn);v.pa(sn,Pm);v.a(sn,"isFixed",sn.prototype.jC);v.defineProperty(sn,{jC:"isFixed"},s("Cw"),ba("Cw"));v.a(sn,"charge",sn.prototype.YE);v.defineProperty(sn,{YE:"charge"},s("mi"),ba("mi"));v.a(sn,"mass",sn.prototype.eG);v.defineProperty(sn,{eG:"mass"},s("Dm"),ba("Dm"));v.a(sn,"forceX",sn.prototype.xF);v.defineProperty(sn,{xF:"forceX"},s("sd"),ba("sd"));
v.a(sn,"forceY",sn.prototype.yF);v.defineProperty(sn,{yF:"forceY"},s("td"),ba("td"));function xn(){Qm.call(this);this.zh=this.Jq=NaN}v.H("ForceDirectedEdge",xn);v.pa(xn,Qm);v.a(xn,"stiffness",xn.prototype.LG);v.defineProperty(xn,{LG:"stiffness"},s("Jq"),ba("Jq"));v.a(xn,"length",xn.prototype.length);v.defineProperty(xn,{length:"length"},s("zh"),ba("zh"));
function Y(){Nh.call(this);this.Uc=this.kd=25;this.Q=0;this.em=yn;this.zm=zn;this.tm=An;this.Tk=4;this.Xl=Bn;this.Gh=Cn;this.Ig=h;this.$a=this.gt=this.Ma=-1;this.ye=this.Qp=0;this.Xc=this.xe=this.Sf=this.Dg=this.Wc=m;this.Xp=0;this.rt=this.Yk=m;this.ff=0;this.Yp=m;this.Vf=[];this.Vf.length=100}v.H("LayeredDigraphLayout",Y);v.pa(Y,Nh);
Y.prototype.cloneProtected=Y.prototype.jb=function(a){Nh.prototype.jb.call(this,a);a.kd=this.kd;a.Uc=this.Uc;a.Q=this.Q;a.em=this.em;a.zm=this.zm;a.tm=this.tm;a.Tk=this.Tk;a.Xl=this.Xl;a.Gh=this.Gh;a.Ig=this.Ig};Y.prototype.createNetwork=Y.prototype.uu=function(){var a=new Dn;Mm(a,this);return a};
Y.prototype.doLayout=Y.prototype.or=function(a){this.Kc===m&&(this.Kc=this.makeNetwork(a));this.Qc=Om(this,this.Qc);this.gt=-1;this.ye=this.Qp=0;this.Yp=this.rt=this.Yk=m;var b;for(b=0;b<this.Vf.length;b++)this.Vf[b]=m;if(0<this.p.R.count){this.p.yu();for(var c=this.p.Qb.f;c.next();)c.value.ib=p;switch(this.em){default:case En:var d=0,e=this.p.R.count-1,g=[];g.length=e+1;for(var i=this.p.R.f;i.next();)i.value.ka=h;for(;Fn(this.p)!==m;){var j;for(j=Gn(this.p);j!==m;)g[e]=j,e--,j.ka=p,j=Gn(this.p);
for(j=Hn(this.p);j!==m;)g[d]=j,d++,j.ka=p,j=Hn(this.p);t&&v.c(this.p,Lm,Y,"greedyCycleRemovalFindNodeMaxDegDiff:network");for(var k=m,l=0,n=this.p.R.f;n.next();){var r=n.value;if(r.ka){for(var q=0,u=r.rb;u.next();)u.value.D.ka&&q++;for(var x=0,z=r.sb;z.next();)z.value.G.ka&&x++;if(k===m||l<q-x)k=r,l=q-x}}j=k;j!==m&&(g[d]=j,d++,j.ka=p)}var D;for(D=0;D<this.p.R.count;D++)g[D].W=D;for(var F=this.p.Qb.f;F.next();){var G=F.value;G.G.W>G.D.W&&(this.p.av(G),G.ib=h)}break;case yn:for(var I=this.p.R.f;I.next();)I.value.wj=
-1,I.value.mm=-1;for(var M=this.p.Qb.f;M.next();)M.value.$o=p;this.Xp=0;for(I.reset();I.next();)0===I.value.sb.count&&In(this,I.value);for(I.reset();I.next();)-1===I.value.wj&&In(this,I.value);for(M.reset();M.next();){var T=M.value;if(!T.$o){var pa=T.G,ea=pa.mm,Aa=T.D,ta=Aa.mm;Aa.wj<pa.wj&&ea<ta&&(this.p.av(T),T.ib=h)}}}for(var va=this.p.R.f,Ia;va.next();){Ia=va.value;Ia.s=-1;var jb=Ia.Ea;if("undefined"!==typeof jb&&jb!==m){var hb=jb.la.width,ub=jb.la.height;Ia.width=hb;Ia.height=ub;Ia.Gu=0.5*hb;
Ia.Hu=0.5*ub}}this.Ma=-1;switch(this.zm){case Jn:Kn(this);break;case Ln:for(var kb,Wa=this.p.R.f;Wa.next();)kb=Mn(this,Wa.value),this.Ma=Math.max(kb,this.Ma);Wa.reset();for(var rb;Wa.next();)rb=Wa.value,rb.s=this.Ma-rb.s;break;default:case zn:Kn(this);for(var bb=this.p.R.f;bb.next();)bb.value.ka=p;for(bb.reset();bb.next();)0===bb.value.sb.count&&Nn(this,bb.value);var Bc=Infinity;for(bb.reset();bb.next();)Bc=Math.min(Bc,bb.value.s);this.Ma=-1;for(bb.reset();bb.next();)bb.value.s-=Bc,this.Ma=Math.max(this.Ma,
bb.value.s)}for(va.reset();va.next();)this.Ma=Math.max(this.Ma,va.value.s);for(var Sc=this.p.Qb.f,eb,$c=[];Sc.next();)eb=Sc.value,eb.ka=p,$c.push(eb);for(var Pd=0;Pd<$c.length;Pd++)if(eb=$c[Pd],!eb.ka&&!((eb.G.Ea===m||eb.D.Ea===m)&&eb.G.s===eb.D.s)){var Tc,Jc,md,Hd;Tc=Jc=md=Hd=0;var jc=eb.G,Pb=eb.D;if(eb.Da!==m){var Xb=eb.Da;if(Xb===m)continue;var Oe=jc.Ea,Uc=Pb.Ea;if(Oe===m||Uc===m)continue;var ad=Xb.ea,yd=Xb.ia,zd=Xb.Ic,ee=Xb.rd;if(eb.ib)var Qd=ad,tc=zd,ad=yd,zd=ee,yd=Qd,ee=tc;var nd=jc.z.copy(),
od=eb.D.z.copy(),Tb=eb.ib?Pb.A.copy():jc.A.copy(),Ub=isNaN(Tb.x)?nd.copy():tl(ad,zd,sc);if(Oe!==ad&&!isNaN(Tb.x)&&ad.eb()){var Vb=jc.A.copy();isNaN(Vb.x)||(Ub.x+=Tb.x-Vb.x,Ub.y+=Tb.y-Vb.y)}var fb=eb.ib?jc.A.copy():Pb.A.copy(),kc=isNaN(fb.x)?od.copy():tl(yd,ee,sc);if(Uc!==yd&&!isNaN(fb.x)&&yd.eb()){var Kc=Pb.A;isNaN(Kc.x)||(kc.x+=fb.x-Kc.x,kc.y+=fb.y-Kc.y)}90===this.Q||270===this.Q?(Tc=Math.round((Ub.x-nd.x)/this.Uc),md=Ub.x,Jc=Math.round((kc.x-od.x)/this.Uc),Hd=kc.x):(Tc=Math.round((Ub.y-nd.y)/this.Uc),
md=Ub.y,Jc=Math.round((kc.y-od.y)/this.Uc),Hd=kc.y);eb.Ae=Tc;eb.Be=md;eb.be=Jc;eb.De=Hd}else eb.Ae=0,eb.Be=0,eb.be=0,eb.De=0;var Eb=jc.s,Bb=Pb.s,vb,uc=eb;t&&v.c(uc,On,Y,"_goesAround:edge");var P=0,qb=uc.Da;if(qb!==m){if(qb.Ic!==m){var Q=qb.ea;$l(qb)===Pn(this,uc,h)?P+=1:this.Nl&&Q!==m&&1===Q.ports.count&&uc.ib&&(P+=1)}if(qb.rd!==m){var ca=qb.ia;am(qb)===Pn(this,uc,p)?P+=2:this.Nl&&ca!==m&&1===ca.ports.count&&uc.ib&&(P+=2)}}vb=P;var ec=1===vb||3===vb?h:p,$b=2===vb||3===vb?h:p,la,ga;$b&&(ga=this.p.Ji(),
ga.Ea=m,ga.Bk=1,ga.s=Eb,ga.wi=jc,this.p.ak(ga),la=this.p.El(jc,ga,eb.Da),la.ka=p,la.ib=eb.ib,la.Ae=Tc,la.be=0,la.Be=md,la.De=0,jc=ga);var wb=1;ec&&wb--;if(Eb-Bb>wb&&0<Eb){eb.ka=p;ga=this.p.Ji();ga.Ea=m;ga.Bk=2;ga.s=Eb-1;this.p.ak(ga);la=this.p.El(jc,ga,eb.Da);la.ka=h;la.ib=eb.ib;la.Ae=$b?0:Tc;la.be=0;la.Be=$b?0:md;la.De=0;jc=ga;for(Eb--;Eb-Bb>wb&&0<Eb;)ga=this.p.Ji(),ga.Ea=m,ga.Bk=3,ga.s=Eb-1,this.p.ak(ga),la=this.p.El(jc,ga,eb.Da),la.ka=h,la.ib=eb.ib,la.Ae=0,la.be=0,la.Be=0,la.De=0,jc=ga,Eb--;la=
this.p.El(ga,Pb,eb.Da);la.ka=!ec;ec&&(ga.wi=Pb);la.ib=eb.ib;la.Ae=0;la.be=Jc;la.Be=0;la.De=Hd}else eb.ka=h}var Za=this.Wc=[],xb;for(xb=0;xb<=this.Ma;xb++)Za[xb]=0;for(var pd=this.p.R.f;pd.next();)pd.value.W=-1;switch(this.tm){default:case Qn:for(var Jb,ac=this.p.R.f;ac.next();){var Rd=ac.value;Jb=Rd.s;Rd.W=this.Wc[Jb];this.Wc[Jb]++}break;case An:var Sd,qd=this.p.R.f;for(Sd=this.Ma;0<=Sd;Sd--){for(;qd.next();)qd.value.s===Sd&&-1===qd.value.W&&Rn(this,qd.value);qd.reset()}break;case Sn:var Lc,Mc=this.p.R.f;
for(Lc=0;Lc<=this.Ma;Lc++){for(;Mc.next();)Mc.value.s===Lc&&-1===Mc.value.W&&Tn(this,Mc.value);Mc.reset()}}this.gt=-1;for(xb=this.ye=this.Qp=0;xb<=this.Ma;xb++)Za[xb]>Za[this.ye]&&(this.gt=Za[xb]-1,this.ye=xb),Za[xb]<Za[this.Qp]&&(this.Qp=xb);this.Yp=[];for(xb=0;xb<Za.length;xb++)this.Yp[xb]=[];pd.reset();for(var fe,Id;pd.next();)Id=pd.value,fe=Id.s,this.Yp[fe][Id.W]=Id;this.$a=-1;for(var bd=0;bd<=this.Ma;bd++){for(var Wb=eo(this,bd),nc=0,ge=this.Wc[bd],cd=0;cd<ge;cd++){var Jd=Wb[cd],nc=nc+mo(this,
Jd,h);Jd.I=nc;nc+=1;nc+=mo(this,Jd,p)}this.$a=Math.max(this.$a,nc-1);no(this,bd,Wb)}var lb=oo(this),nb=po(this),Cc,Ba,Xa;for(Cc=0;Cc<this.Tk;Cc++){for(Ba=0;Ba<=this.Ma;Ba++)qo(this,Ba,1),ro(this,Ba,1,1);Xa=oo(this);Xa<lb&&(lb=Xa,nb=po(this));for(Ba=this.Ma;0<=Ba;Ba--)qo(this,Ba,-1),ro(this,Ba,-1,-1);Xa=oo(this);Xa<lb&&(lb=Xa,nb=po(this))}so(this,nb);for(Cc=0;Cc<this.Tk;Cc++){for(Ba=0;Ba<=this.Ma;Ba++)qo(this,Ba,0),ro(this,Ba,0,0);Xa=oo(this);Xa<lb&&(lb=Xa,nb=po(this));for(Ba=this.Ma;0<=Ba;Ba--)qo(this,
Ba,0),ro(this,Ba,0,0);Xa=oo(this);Xa<lb&&(lb=Xa,nb=po(this))}so(this,nb);var Ca,Ua,db,Qb,Dc;switch(this.Xl){case to:break;case uo:for(Qb=lb+1;(Dc=oo(this))<Qb;){Qb=Dc;for(Ua=this.Ma;0<=Ua;Ua--)for(db=0;db<=Ua;db++){for(Ca=h;Ca;){Ca=p;for(Ba=Ua;Ba>=db;Ba--)Ca=ro(this,Ba,-1,-1)||Ca}Xa=oo(this);Xa>=lb?so(this,nb):(lb=Xa,nb=po(this));for(Ca=h;Ca;){Ca=p;for(Ba=Ua;Ba>=db;Ba--)Ca=ro(this,Ba,1,1)||Ca}Xa=oo(this);Xa>=lb?so(this,nb):(lb=Xa,nb=po(this));for(Ca=h;Ca;){Ca=p;for(Ba=db;Ba<=Ua;Ba++)Ca=ro(this,Ba,
1,1)||Ca}Xa>=lb?so(this,nb):(lb=Xa,nb=po(this));for(Ca=h;Ca;){Ca=p;for(Ba=db;Ba<=Ua;Ba++)Ca=ro(this,Ba,-1,-1)||Ca}Xa>=lb?so(this,nb):(lb=Xa,nb=po(this));for(Ca=h;Ca;){Ca=p;for(Ba=Ua;Ba>=db;Ba--)Ca=ro(this,Ba,0,0)||Ca}Xa>=lb?so(this,nb):(lb=Xa,nb=po(this));for(Ca=h;Ca;){Ca=p;for(Ba=db;Ba<=Ua;Ba++)Ca=ro(this,Ba,0,0)||Ca}Xa>=lb?so(this,nb):(lb=Xa,nb=po(this))}}break;default:case Bn:Ua=this.Ma;db=0;for(Qb=lb+1;(Dc=oo(this))<Qb;){Qb=Dc;for(Ca=h;Ca;){Ca=p;for(Ba=Ua;Ba>=db;Ba--)Ca=ro(this,Ba,-1,-1)||Ca}Xa=
oo(this);Xa>=lb?so(this,nb):(lb=Xa,nb=po(this));for(Ca=h;Ca;){Ca=p;for(Ba=Ua;Ba>=db;Ba--)Ca=ro(this,Ba,1,1)||Ca}Xa=oo(this);Xa>=lb?so(this,nb):(lb=Xa,nb=po(this));for(Ca=h;Ca;){Ca=p;for(Ba=db;Ba<=Ua;Ba++)Ca=ro(this,Ba,1,1)||Ca}Xa>=lb?so(this,nb):(lb=Xa,nb=po(this));for(Ca=h;Ca;){Ca=p;for(Ba=db;Ba<=Ua;Ba++)Ca=ro(this,Ba,-1,-1)||Ca}Xa>=lb?so(this,nb):(lb=Xa,nb=po(this));for(Ca=h;Ca;){Ca=p;for(Ba=Ua;Ba>=db;Ba--)Ca=ro(this,Ba,0,0)||Ca}Xa>=lb?so(this,nb):(lb=Xa,nb=po(this));for(Ca=h;Ca;){Ca=p;for(Ba=db;Ba<=
Ua;Ba++)Ca=ro(this,Ba,0,0)||Ca}Xa>=lb?so(this,nb):(lb=Xa,nb=po(this))}}so(this,nb);var Oa,ka,Ta=0!==(this.Gh&vo),qf=this.Gh===Cn;1E3<this.p.Qb.count&&!qf&&(Ta=p);if(Ta){var re=[],Ga;for(Ga=0;Ga<=this.Ma;Ga++)re[Ga]=0;for(var za=this.p.R.f,Td,Rf;za.next();){Td=za.value;Oa=Td.s;Rf=Td.I;var Hb=mo(this,Td,p);re[Oa]=Math.max(re[Oa],Rf+Hb)}for(za.reset();za.next();)Td=za.value,Oa=Td.s,Rf=Td.I,Td.I=(8*(this.$a-re[Oa])>>1)+8*Rf;this.$a*=8}if(0!==(this.Gh&wo))for(ka=h;ka;){ka=p;for(Oa=this.ye+1;Oa<=this.Ma;Oa++)ka=
xo(this,Oa,1)||ka;for(Oa=this.ye-1;0<=Oa;Oa--)ka=xo(this,Oa,-1)||ka;ka=xo(this,this.ye,0)||ka}if(0!==(this.Gh&yo)){for(Oa=this.ye+1;Oa<=this.Ma;Oa++)zo(this,Oa,1);for(Oa=this.ye-1;0<=Oa;Oa--)zo(this,Oa,-1);zo(this,this.ye,0)}Ta&&(Ao(this,-1),Ao(this,1));if(0!==(this.Gh&wo))for(ka=h;ka;){ka=p;ka=xo(this,this.ye,0)||ka;for(Oa=this.ye+1;Oa<=this.Ma;Oa++)ka=xo(this,Oa,0)||ka;for(Oa=this.ye-1;0<=Oa;Oa--)ka=xo(this,Oa,0)||ka}this.updateParts()}this.Kc=m;this.Se=h};
function Bo(a){t&&v.c(a,Qm,Y,"linkMinLength:edge");for(var b=a.D,c=0,a=a.G.rb;a.next();)a.value.D===b&&c++;return 1<c?2:1}function Co(a){t&&v.c(a,Qm,Y,"linkLengthWeight:edge");return 1}function Do(a){t&&v.c(a,Qm,Y,"linkStraightenWeight:edge");var b=a.G.Ea,a=a.D.Ea;return b===m&&a===m?8:b===m||a===m?4:1}
function Eo(a,b,c){t&&(v.c(b,Fo,Y,"nodeMinLayerSpace:v"),v.e(c,"boolean",Y,"nodeMinLayerSpace:topleft"));return b.Ea===m?0:90===a.Q||270===a.Q?c?b.z.y+10:b.A.height-b.z.y+10:c?b.z.x+10:b.A.width-b.z.x+10}
function mo(a,b,c){t&&(v.c(b,Fo,Y,"nodeMinColumnSpace:v"),v.e(c,"boolean",Y,"nodeMinColumnSpace:topleft"));if(b.Ea===m)return 0;var d=c?b.Nw:b.Mw;if(d!==f)return d;d=a.Q;return 90===d||270===d?c?b.Nw=b.z.x/a.Uc+1|0:b.Mw=(b.A.width-b.z.x)/a.Uc+1|0:c?b.Nw=b.z.y/a.Uc+1|0:b.Mw=(b.A.height-b.z.y)/a.Uc+1|0}function po(a){a.Yk===m&&(a.Yk=[]);for(var b=0,c=a.p.R.f,d;c.next();)d=c.value,a.Yk[b]=d.s,b++,a.Yk[b]=d.I,b++,a.Yk[b]=d.W,b++;return a.Yk}
function so(a,b){t&&v.c(b,Array,Y,"restoreLayout:layout");for(var c=0,d=a.p.R.f,e;d.next();)e=d.value,e.s=b[c],c++,e.I=b[c],c++,e.W=b[c],c++}
function Go(a,b,c){t&&(v.j(b,Y,"crossingMatrix:unfixedLayer"),v.j(c,Y,"crossingMatrix:direction"));var d=eo(a,b),e=a.Wc[b];a.rt||(a.rt=[]);for(var g=a.rt,i,j=0;j<e;j++){i=0;var k=d[j],l=k.wi,n,r;if(l!==m&&l.s===k.s)if(k=l.W,k>j)for(r=j+1;r<k;r++)n=d[r],(n.wi!==l||n.Bk!==l.Bk)&&i++;else for(r=j-1;r>k;r--)n=d[r],(n.wi!==l||n.Bk!==l.Bk)&&i++;var q,u,x,z,D,F;if(0<=c){k=d[j].hf;for(l=0;l<k.count;l++)if(q=k.i[l],q.ka&&q.G.s!==b){n=q.G.W;r=q.De;q=q.Be;for(u=l+1;u<k.count;u++)x=k.i[u],x.ka&&x.G.s!==b&&(z=
x.G.W,D=x.De,x=x.Be,r<D&&(n>z||n===z&&q>x)&&i++,D<r&&(z>n||z===n&&x>q)&&i++)}}if(0>=c){k=d[j].we;for(l=0;l<k.count;l++)if(q=k.i[l],q.ka&&q.D.s!==b){n=q.D.W;r=q.De;q=q.Be;for(u=l+1;u<k.count;u++)x=k.i[u],x.ka&&x.D.s!==b&&(z=x.D.W,D=x.De,x=x.Be,q<x&&(n>z||n===z&&r>D)&&i++,x<q&&(z>n||z===n&&D>r)&&i++)}}g[j*e+j]=i;for(k=j+1;k<e;k++){var G=0,I=0;if(0<=c){i=d[j].hf;F=d[k].hf;for(l=0;l<i.count;l++)if(q=i.i[l],q.ka&&q.G.s!==b){n=q.G.W;q=q.Be;for(u=0;u<F.count;u++)x=F.i[u],x.ka&&x.G.s!==b&&(z=x.G.W,x=x.Be,
(n<z||n===z&&q<x)&&I++,(z<n||z===n&&x<q)&&G++)}}if(0>=c){i=d[j].we;F=d[k].we;for(l=0;l<i.count;l++)if(q=i.i[l],q.ka&&q.D.s!==b){n=q.D.W;r=q.De;for(u=0;u<F.count;u++)x=F.i[u],x.ka&&x.D.s!==b&&(z=x.D.W,D=x.De,(n<z||n===z&&r<D)&&I++,(z<n||z===n&&D<r)&&G++)}}g[j*e+k]=G;g[k*e+j]=I}}no(a,b,d);return g}function oo(a){var b,c=0,d,e;for(b=0;b<=a.Ma;b++){d=Go(a,b,1);e=a.Wc[b];for(var g=0;g<e;g++)for(var i=g;i<e;i++)c+=d[g*e+i]}return c}
function Ho(a){t&&v.e(h,"boolean",Y,"countBends:weighted");for(var b=0,c=0;c<=a.Ma;c++){var d=a,e=c;t&&(v.j(e,Y,"bends:unfixedLayer"),v.j(1,Y,"bends:direction"),v.e(h,"boolean",Y,"bends:weighted"));for(var g=eo(d,e),i=d.Wc[e],j=0,k=f,k=0;k<i;k++){var l=g[k].we,n,r,q;if("undefined"!==typeof l)for(var u=0;u<l.count;u++)n=l.i[u],n.ka&&n.D.s!==e&&(r=n.G.I+n.Ae,q=n.D.I+n.be,j+=(Math.abs(r-q)+1)*Do(n))}no(d,e,g);b+=j}return b}
Y.prototype.normalize=function(){var a=Infinity;this.$a=-1;for(var b=this.p.R.f,c;b.next();)c=b.value,a=Math.min(a,c.I-mo(this,c,h)),this.$a=Math.max(this.$a,c.I+mo(this,c,p));for(b.reset();b.next();)b.value.I-=a;this.$a-=a};
function Io(a,b,c){t&&(v.j(b,Y,"barycenters:unfixedLayer"),v.j(c,Y,"barycenters:direction"));var d=eo(a,b),e=a.Wc[b],g=[],i;for(i=0;i<e;i++){var j=d[i],k=m;0>=c&&(k=j.hf);var l=m;0<=c&&(l=j.we);var n=0,r=0,q=j.wi;q!==m&&q.s===j.s&&(n+=q.I-1,r++);if(k!==m)for(q=0;q<k.count;q++){var j=k.i[q],u=j.G;j.ka&&(!j.ib&&u.s!==b)&&(n+=u.I+j.Ae,r++)}if(l!==m)for(k=0;k<l.count;k++)j=l.i[k],q=j.D,j.ka&&(!j.ib&&q.s!==b)&&(n+=q.I+j.be,r++);g[i]=0===r?-1:n/r}no(a,b,d);return g}
function Jo(a,b,c){t&&(v.j(b,Y,"medians:unfixedLayer"),v.j(c,Y,"medians:direction"));for(var d=eo(a,b),e=a.Wc[b],g=[],i=0;i<e;i++){var j=d[i],k=m;0>=c&&(k=j.hf);var l=m;0<=c&&(l=j.we);var n=0,r=[],q=j.wi;q!==m&&q.s===j.s&&(r[n]=q.I-1,n++);if(k!==m)for(q=0;q<k.count;q++){var j=k.i[q],u=j.G;j.ka&&(!j.ib&&u.s!==b)&&(r[n]=u.I+j.Ae,n++)}if(l!==m)for(k=0;k<l.count;k++)j=l.i[k],q=j.D,j.ka&&(!j.ib&&q.s!==b)&&(r[n]=q.I+j.be,n++);0===n?g[i]=-1:(r.sort(function(a,b){return a-b}),l=n>>1,g[i]=n&1?r[l]:r[l-1]+
r[l]>>1)}no(a,b,d);return g}function Ko(a,b,c,d,e,g){t&&(v.c(b,Fo,Y,"tightComponentUnset:v"),v.j(c,Y,"tightComponentUnset:component"),v.j(d,Y,"tightComponentUnset:unset"),v.e(e,"boolean",Y,"tightComponentUnset:forward"),v.e(g,"boolean",Y,"tightComponentUnset:backward"));if(b.tb===d){b.tb=c;var i,j;if(e)for(var k=b.rb;k.next();){var l=k.value.D;i=b.s-l.s;j=Bo(k.value);i===j&&Ko(a,l,c,d,e,g)}if(g)for(k=b.sb;k.next();)l=k.value.G,i=l.s-b.s,j=Bo(k.value),i===j&&Ko(a,l,c,d,e,g)}}
function Lo(a,b,c,d,e,g){t&&(v.c(b,Fo,Y,"componentUnset:v"),v.j(c,Y,"componentUnset:component"),v.j(d,Y,"componentUnset:unset"),v.e(e,"boolean",Y,"componentUnset:forward"),v.e(g,"boolean",Y,"componentUnset:backward"));if(b.tb===d){b.tb=c;if(e)for(var i=b.rb,j;i.next();)j=i.value.D,Lo(a,j,c,d,e,g);if(g)for(b=b.sb;b.next();)i=b.value.G,Lo(a,i,c,d,e,g)}}function Fn(a){t&&v.c(a,Lm,Y,"greedyCycleRemovalFindNode:network");for(a=a.R.f;a.next();){var b=a.value;if(b.ka)return b}return m}
function Gn(a){t&&v.c(a,Lm,Y,"greedyCycleRemovalFindSink:network");for(a=a.R.f;a.next();){var b=a.value;if(b.ka){for(var c=h,d=b.rb;d.next();)if(d.value.D.ka){c=p;break}if(c)return b}}return m}function Hn(a){t&&v.c(a,Lm,Y,"greedyCycleRemovalFindSource:network");for(a=a.R.f;a.next();){var b=a.value;if(b.ka){for(var c=h,d=b.sb;d.next();)if(d.value.G.ka){c=p;break}if(c)return b}}return m}
function In(a,b){t&&v.c(b,Fo,Y,"depthFirstSearchCycleRemovalVisit:v");b.wj=a.Xp;a.Xp++;for(var c=b.rb;c.next();){var d=c.value,e=d.D;-1===e.wj&&(d.$o=h,In(a,e))}b.mm=a.Xp;a.Xp++}function Kn(a){for(var b=a.p.R.f;b.next();){var c=Mo(a,b.value);a.Ma=Math.max(c,a.Ma)}}function Mo(a,b){t&&v.c(b,Fo,Y,"longestPathSinkLayeringLength:v");var c=0;if(-1===b.s){for(var d=b.rb;d.next();)var e=d.value,g=Bo(e),c=Math.max(c,Mo(a,e.D)+g);b.s=c}else c=b.s;return c}
function Mn(a,b){t&&v.c(b,Fo,Y,"longestPathSourceLayeringLength:v");var c=0;if(-1===b.s){for(var d,e,g=b.sb;g.next();)e=g.value,d=Bo(e),c=Math.max(c,Mn(a,e.G)+d);b.s=c}else c=b.s;return c}
function Nn(a,b){t&&v.c(b,Fo,Y,"optimalLinkLengthLayeringDepthFirstSearch:v");if(!b.ka){b.ka=h;for(var c=b.rb;c.next();)Nn(a,c.value.D);t&&v.c(b,Fo,Y,"optimalLinkLengthLayeringPull:v");for(c=a.p.R.f;c.next();)c.value.tb=-1;for(var d=b.sb;d.next();){var e=d.value,g=Bo(e);e.G.s-e.D.s>g&&Ko(a,e.G,0,-1,h,p)}for(Ko(a,b,1,-1,h,h);0!==b.tb;){for(var g=0,d=Infinity,i=0,j=m,k=a.p.R.f;k.next();){var l=k.value;if(1===l.tb){for(var n=0,r=p,q=l.sb;q.next();){var e=q.value,u=e.G,n=n+Co(e);1!==u.tb&&(g+=Co(e),u=
u.s-l.s,e=Bo(e),d=Math.min(d,u-e))}for(e=l.rb;e.next();)q=e.value,u=q.D,n-=Co(q),1!==u.tb?g-=Co(q):r=h;if((j===m||n<i)&&!r)j=l,i=n}}if(0<g){for(c.reset();c.next();)g=c.value,1===g.tb&&(g.s+=d);b.tb=0}else j.tb=0}t&&v.c(b,Fo,Y,"optimalLinkLengthLayeringPush:v");for(c=a.p.R.f;c.next();)c.value.tb=-1;for(Ko(a,b,1,-1,h,p);0!==b.tb;){g=0;d=Infinity;i=0;j=m;for(k=a.p.R.f;k.next();)if(l=k.value,1===l.tb){n=0;r=p;for(e=l.sb;e.next();)q=e.value.G,n+=Co(e.value),1!==q.tb?g+=Co(e.value):r=h;for(e=k.value.rb;e.next();)q=
e.value,u=q.D,n-=Co(q),1!==u.tb&&(g-=Co(q),u=l.s-u.s,q=Bo(q),d=Math.min(d,u-q));if((j===m||n>i)&&!r)j=l,i=n}if(0>g){for(c.reset();c.next();)g=c.value,1===g.tb&&(g.s-=d);b.tb=0}else j.tb=0}}}function Pn(a,b,c){t&&(v.c(b,On,Y,"_oppositeSpotDir:edge"),v.e(c,"boolean",Y,"_oppositeSpotDir:from"));return 90===a.Q?c&&!b.ib||!c&&b.ib?qc:yc:180===a.Q?c&&!b.ib||!c&&b.ib?Fc:Ec:270===a.Q?c&&!b.ib||!c&&b.ib?yc:qc:c&&!b.ib||!c&&b.ib?Ec:Fc}
function Rn(a,b){t&&v.c(b,Fo,Y,"depthFirstOutInitializeIndicesVisit:v");var c=b.s;b.W=a.Wc[c];a.Wc[c]++;for(var c=b.we.Cf(),d=h,e;d;){d=p;for(e=0;e<c.length-1;e++){var g=c[e],i=c[e+1];g.Ae>i.Ae&&(d=h,c[e]=i,c[e+1]=g)}}for(e=0;e<c.length;e++)d=c[e],d.ka&&(d=d.D,-1===d.W&&Rn(a,d))}
function Tn(a,b){t&&v.c(b,Fo,Y,"depthFirstInInitializeIndicesVisit:v");var c=b.s;b.W=a.Wc[c];a.Wc[c]++;for(var c=b.hf.Cf(),d=h,e;d;){d=p;for(e=0;e<c.length-1;e++){var g=c[e],i=c[e+1];g.be>i.be&&(d=h,c[e]=i,c[e+1]=g)}}for(e=0;e<c.length;e++)d=c[e],d.ka&&(d=d.G,-1===d.W&&Tn(a,d))}
function qo(a,b,c){t&&(v.j(b,Y,"medianBarycenterCrossingReduction:unfixedLayer"),v.j(c,Y,"medianBarycenterCrossingReduction:direction"));for(var d=eo(a,b),e=a.Wc[b],g=Jo(a,b,c),i=Io(a,b,c),c=0;c<e;c++)-1===i[c]&&(i[c]=d[c].I),-1===g[c]&&(g[c]=d[c].I);for(var j=h,k;j;){j=p;for(c=0;c<e-1;c++)if(g[c+1]<g[c]||g[c+1]===g[c]&&i[c+1]<i[c])j=h,k=g[c],g[c]=g[c+1],g[c+1]=k,k=i[c],i[c]=i[c+1],i[c+1]=k,k=d[c],d[c]=d[c+1],d[c+1]=k}for(c=g=0;c<e;c++)k=d[c],k.W=c,g+=mo(a,k,h),k.I=g,g+=1,g+=mo(a,k,p);no(a,b,d)}
function ro(a,b,c,d){t&&(v.j(b,Y,"adjacentExchangeCrossingReductionBendStraighten:unfixedLayer"),v.j(c,Y,"adjacentExchangeCrossingReductionBendStraighten:directionCR"),v.e(p,"boolean",Y,"adjacentExchangeCrossingReductionBendStraighten:straighten"),v.j(d,Y,"adjacentExchangeCrossingReductionBendStraighten:directionBS"));var d=eo(a,b),e=a.Wc[b],c=Go(a,b,c),g,i;i=[];for(g=0;g<e;g++)i[g]=-1;var j;j=[];for(g=0;g<e;g++)j[g]=-1;for(var k=p,l=h;l;){l=p;for(g=0;g<e-1;g++){var n=c[d[g].W*e+d[g+1].W],r=c[d[g+
1].W*e+d[g].W],q=0,u=0,x=d[g].I,z=d[g+1].I,D=mo(a,d[g],h),F=mo(a,d[g],p),G=mo(a,d[g+1],h),I=mo(a,d[g+1],p),D=x-D+G,F=z-F+I,M=d[g].sb.f;for(M.reset();M.next();)if(I=M.value,I.ka&&I.G.s===b){I=I.G;for(G=0;d[G]!==I;)G++;G<g&&(q+=2*(g-G),u+=2*(g+1-G));G===g+1&&(q+=1);G>g+1&&(q+=4*(G-g),u+=4*(G-(g+1)))}M=d[g].rb.f;for(M.reset();M.next();)if(I=M.value,I.ka&&I.D.s===b){I=I.D;for(G=0;d[G]!==I;)G++;G===g+1&&(u+=1)}M=d[g+1].sb.f;for(M.reset();M.next();)if(I=M.value,I.ka&&I.G.s===b){I=I.G;for(G=0;d[G]!==I;)G++;
G<g&&(q+=2*(g+1-G),u+=2*(g-G));G===g&&(u+=1);G>g+1&&(q+=4*(G-(g+1)),u+=4*(G-g))}M=d[g+1].rb.f;for(M.reset();M.next();)if(I=M.value,I.ka&&I.D.s===b){I=I.D;for(G=0;d[G]!==I;)G++;G===g&&(q+=1)}var G=I=0,M=i[d[g].W],T=j[d[g].W],pa=i[d[g+1].W],ea=j[d[g+1].W];-1!==M&&(I+=Math.abs(M-x),G+=Math.abs(M-F));-1!==T&&(I+=Math.abs(T-x),G+=Math.abs(T-F));-1!==pa&&(I+=Math.abs(pa-z),G+=Math.abs(pa-D));-1!==ea&&(I+=Math.abs(ea-z),G+=Math.abs(ea-D));if(u<q-0.5||u===q&&r<n-0.5||u===q&&r===n&&G<I-0.5)l=k=h,d[g].I=F,
d[g+1].I=D,n=d[g],d[g]=d[g+1],d[g+1]=n}}for(g=0;g<e;g++)d[g].W=g;no(a,b,d);return k}function xo(a,b,c){t&&(v.j(b,Y,"bendStraighten:unfixedLayer"),v.j(c,Y,"bendStraighten:direction"));for(var d=p;No(a,b,c);)d=h;return d}
function No(a,b,c){t&&(v.j(b,Y,"shiftbendStraighten:unfixedLayer"),v.j(c,Y,"shiftbendStraighten:direction"));var d,e=eo(a,b),g=a.Wc[b],i=Io(a,b,-1);if(0<c)for(d=0;d<g;d++)i[d]=-1;var j=Io(a,b,1);if(0>c)for(d=0;d<g;d++)j[d]=-1;for(var k=p,l=h;l;){l=p;for(d=0;d<g;d++){var n=e[d].I,r=mo(a,e[d],h),q=mo(a,e[d],p),r=0>d-1||n-e[d-1].I-1>r+mo(a,e[d-1],p)?n-1:n,q=d+1>=g||e[d+1].I-n-1>q+mo(a,e[d+1],h)?n+1:n,u=0,x=0,z=0,D,F,G,I;if(0>=c)for(var M=e[d].sb.f;M.next();)D=M.value,D.ka&&D.G.s!==b&&(F=Do(D),G=D.Ae,
I=D.be,D=D.G.I,u+=(Math.abs(n+I-(D+G))+1)*F,x+=(Math.abs(r+I-(D+G))+1)*F,z+=(Math.abs(q+I-(D+G))+1)*F);if(0<=c)for(M=e[d].rb.f;M.next();)D=M.value,D.ka&&D.D.s!==b&&(F=Do(D),G=D.Ae,I=D.be,D=D.D.I,u+=(Math.abs(n+G-(D+I))+1)*F,x+=(Math.abs(r+G-(D+I))+1)*F,z+=(Math.abs(q+G-(D+I))+1)*F);I=G=F=0;D=i[e[d].W];M=j[e[d].W];-1!==D&&(F+=Math.abs(D-n),G+=Math.abs(D-r),I+=Math.abs(D-q));-1!==M&&(F+=Math.abs(M-n),G+=Math.abs(M-r),I+=Math.abs(M-q));if(x<u||x===u&&G<F)l=k=h,e[d].I=r;if(z<u||z===u&&I<F)l=k=h,e[d].I=
q}}no(a,b,e);a.normalize();return k}
function zo(a,b,c){t&&(v.j(b,Y,"medianStraighten:unfixedLayer"),v.j(c,Y,"medianStraighten:direction"));for(var d=eo(a,b),e=a.Wc[b],g=Jo(a,b,c),i=[],c=0;c<e;c++)i[c]=g[c];for(g=h;g;){g=p;for(c=0;c<e;c++){var j=d[c].I,k=mo(a,d[c],h),l=mo(a,d[c],p),n=0,r;-1===i[c]?0===c&&c===e-1?n=j:0===c?(r=d[c+1].I,n=r-j===l+mo(a,d[c+1],h)?j-1:j):c===e-1?(r=d[c-1].I,n=j-r===k+mo(a,d[c-1],p)?j+1:j):(r=d[c-1].I,k=r+mo(a,d[c-1],p)+k+1,r=d[c+1].I,l=r-mo(a,d[c+1],h)-l-1,n=(k+l)/2|0):0===c&&c===e-1?n=i[c]:0===c?(r=d[c+1].I,
l=r-mo(a,d[c+1],h)-l-1,n=Math.min(i[c],l)):c===e-1?(r=d[c-1].I,k=r+mo(a,d[c-1],p)+k+1,n=Math.max(i[c],k)):(r=d[c-1].I,k=r+mo(a,d[c-1],p)+k+1,r=d[c+1].I,l=r-mo(a,d[c+1],h)-l-1,k<i[c]&&i[c]<l?n=i[c]:k>=i[c]?n=k:l<=i[c]&&(n=l));n!==j&&(g=h,d[c].I=n)}}no(a,b,d);a.normalize()}
function Oo(a,b){t&&(v.j(b,Y,"packAux:column"),v.j(1,Y,"packAux:direction"));for(var c=h,d=a.p.R.f,e;d.next();){e=d.value;var g=mo(a,e,h),i=mo(a,e,p);if(e.I-g<=b&&e.I+i>=b){c=p;break}}g=p;if(c)for(d.reset();d.next();)e=d.value,e.I>b&&(e.I-=1,g=h);return g}
function Po(a,b){t&&(v.j(b,Y,"tightPackAux:column"),v.j(1,Y,"tightPackAux:direction"));var c=b,c=b+1,d,e=[],g=[];for(d=0;d<=a.Ma;d++)e[d]=p,g[d]=p;for(var i=a.p.R.f;i.next();){d=i.value;var j=d.I-mo(a,d,h),k=d.I+mo(a,d,p);j<=b&&k>=b&&(e[d.s]=h);j<=c&&k>=c&&(g[d.s]=h)}j=h;c=p;for(d=0;d<=a.Ma;d++)j=j&&!(e[d]&&g[d]);if(j)for(i.reset();i.next();)d=i.value,d.I>b&&(d.I-=1,c=h);return c}
function Ao(a,b){t&&v.j(b,Y,"componentPack:direction");for(var c=0;c<=a.$a;c++)for(;Oo(a,c););a.normalize();for(c=0;c<a.$a;c++)for(;Po(a,c););a.normalize();var d,e,g,i;if(0<b)for(c=0;c<=a.$a;c++){d=po(a);e=Ho(a);for(g=e+1;e<g;)g=e,Qo(a,c,1),i=Ho(a),i>e?so(a,d):i<e&&(e=i,d=po(a))}if(0>b)for(c=a.$a;0<=c;c--){d=po(a);e=Ho(a);for(g=e+1;e<g;)g=e,Qo(a,c,-1),i=Ho(a),i>e?so(a,d):i<e&&(e=i,d=po(a))}a.normalize()}
function Qo(a,b,c){t&&(v.j(b,Y,"componentPackAux:column"),v.j(c,Y,"componentPackAux:direction"));a.ff=0;for(var d=a.p.R.f,e;d.next();)d.value.tb=-1;if(0<c)for(d.reset();d.next();)e=d.value,e.I-mo(a,e,h)<=b&&(e.tb=a.ff);if(0>c)for(d.reset();d.next();)e=d.value,e.I+mo(a,e,p)>=b&&(e.tb=a.ff);a.ff++;for(d.reset();d.next();)e=d.value,-1===e.tb&&(Lo(a,e,a.ff,-1,h,h),a.ff++);b=[];for(e=0;e<a.ff*a.ff;e++)b[e]=p;var g=[];for(e=0;e<(a.Ma+1)*(a.$a+1);e++)g[e]=-1;for(d.reset();d.next();){e=d.value;for(var i=
e.s,j=Math.max(0,e.I-mo(a,e,h)),k=Math.min(a.$a,e.I+mo(a,e,p));j<=k;j++)g[i*(a.$a+1)+j]=e.tb}for(e=0;e<=a.Ma;e++){if(0<c)for(j=0;j<a.$a;j++)-1!==g[e*(a.$a+1)+j]&&(-1!==g[e*(a.$a+1)+j+1]&&g[e*(a.$a+1)+j]!==g[e*(a.$a+1)+j+1])&&(b[g[e*(a.$a+1)+j]*a.ff+g[e*(a.$a+1)+j+1]]=h);if(0>c)for(j=a.$a;0<j;j--)-1!==g[e*(a.$a+1)+j]&&(-1!==g[e*(a.$a+1)+j-1]&&g[e*(a.$a+1)+j]!==g[e*(a.$a+1)+j-1])&&(b[g[e*(a.$a+1)+j]*a.ff+g[e*(a.$a+1)+j-1]]=h)}g=[];for(e=0;e<a.ff;e++)g[e]=h;i=new y("number");for(i.add(0);0!==i.count;)if(k=
i.i[i.count-1],i.pe(i.count-1),g[k]){g[k]=p;for(e=0;e<a.ff;e++)b[k*a.ff+e]&&i.lc(0,e)}if(0<c)for(d.reset();d.next();)e=d.value,g[e.tb]&&(e.I-=1);if(0>c)for(d.reset();d.next();)e=d.value,g[e.tb]&&(e.I+=1)}Y.prototype.commitLayout=Y.prototype.ru=function(){if(this.Nl){var a,b;270===this.Q?(a=Ac,b=Gc):90===this.Q?(a=Gc,b=Ac):180===this.Q?(a=Ec,b=Fc):(a=Fc,b=Ec);for(var c=this.p.Qb.f,d;c.next();)d=c.value.Da,d!==m&&(d.Xa=a,d.Za=b)}this.commitNodes();this.commitLinks()};
Y.prototype.commitNodes=Y.prototype.Sx=function(){this.Dg=[];this.Sf=[];this.xe=[];this.Xc=[];for(var a=0;a<=this.Ma;a++)this.Dg[a]=0,this.Sf[a]=0,this.xe[a]=0,this.Xc[a]=0;for(var a=this.p.R.f,b,c;a.next();)b=a.value,c=b.s,this.Dg[c]=Math.max(this.Dg[c],Eo(this,b,h)),this.Sf[c]=Math.max(this.Sf[c],Eo(this,b,p));b=0;for(var d=this.kd,e=0;e<=this.Ma;e++)c=d,0>=this.Dg[e]+this.Sf[e]&&(c=0),0<e&&(b+=c/2),90===this.Q||0===this.Q?(b+=this.Sf[e],this.xe[e]=b,b+=this.Dg[e]):(b+=this.Dg[e],this.xe[e]=b,b+=
this.Sf[e]),e<this.Ma&&(b+=c/2),this.Xc[e]=b;d=this.Qc.copy();for(e=0;e<=this.Ma;e++)270===this.Q?(this.xe[e]=d.y+this.xe[e],this.Xc[e]=d.y+this.Xc[e]):90===this.Q?(this.xe[e]=d.y+b-this.xe[e],this.Xc[e]=d.y+b-this.Xc[e]):180===this.Q?(this.xe[e]=d.x+this.xe[e],this.Xc[e]=d.x+this.Xc[e]):(this.xe[e]=d.x+b-this.xe[e],this.Xc[e]=d.x+b-this.Xc[e]);for(a.reset();a.next();){b=a.value;c=b.s;var g=b.I|0;270===this.Q||90===this.Q?(e=d.x+this.Uc*g,c=this.xe[c]):(e=this.xe[c],c=d.y+this.Uc*g);b.za=e;b.Aa=c;
b.Th()}};
Y.prototype.commitLinks=Y.prototype.Rx=function(){for(var a=this.p.Qb.f,b,c;a.next();)c=a.value.Da,"undefined"!==typeof c&&c!==m&&(c.tk(),c.ln(),c.Uh());for(a.reset();a.next();)c=a.value.Da,"undefined"!==typeof c&&c!==m&&Ul(c);for(a.reset();a.next();)if(b=a.value,c=b.Da){c.tk();var d=c,e=d.ea,g=d.ia,i=d.Ic,j=d.rd;if(b.ka){if(c.Le===Rj&&4===c.ba){b.ib&&(d=e,e=g,g=d,d=i,i=j,j=d);var k,l,n,r;if(b.G.I===b.D.I)k=c.Sd(e,i,$l(c),h,p,g,j).copy(),l=c.Sd(g,j,am(c),p,p,e,i).copy(),n=new C((2*k.x+l.x)/3,(2*k.y+
l.y)/3),r=new C((k.x+2*l.x)/3,(k.y+2*l.y)/3),c.ln(),c.bd(k),c.bd(n),c.bd(r),c.bd(l);else{d=b=p;i!==m&&$l(c)===lc&&(b=h);j!==m&&am(c)===lc&&(d=h);if(b||d)k=c.h(0).copy(),n=c.h(1).copy(),r=c.h(2).copy(),l=c.h(3).copy();b&&(90===this.Q||270===this.Q?(n.x=k.x,n.y=(k.y+l.y)/2):(n.x=(k.x+l.x)/2,n.y=k.y),c.w(1,n),c.w(0,c.Sd(e,i,$l(c),h,p,g,j).copy()));d&&(90===this.Q||270===this.Q?(r.x=l.x,r.y=(k.y+l.y)/2):(r.x=(k.x+l.x)/2,r.y=l.y),c.w(2,r),c.w(3,c.Sd(g,j,am(c),p,p,e,i).copy()))}}c.Uh()}else if(b.G.s===
b.D.s)c.Uh();else{var q=p,u=p,x,z=c.Fu+1;if(Ng(c))u=h,x=c.ba,4<x&&c.mb.removeRange(2,x-3);else if(c.Le===Rj)q=h,x=c.ba,4<x&&c.mb.removeRange(2,x-3),z=2;else{x=c.ba;var D=$l(c)===lc,F=am(c)===lc;2<x&&D&&F?c.mb.removeRange(1,x-2):3<x&&D&&!F?c.mb.removeRange(1,x-3):3<x&&!D&&F?c.mb.removeRange(2,x-2):4<x&&(!D&&!F)&&c.mb.removeRange(2,x-3)}x=b.G;var F=b.D,G;if(b.ib){for(;F!==m&&x!==F;){G=D=m;for(var I=F.sb.f;I.next()&&!(M=I.value,M.Da===b.Da&&(D=M.G,G=M.D,D.Ea===m)););D!==x&&(M=c.h(z-1).copy(),I=new C(D.za,
D.Aa),u?180===this.Q||0===this.Q?2===z?(c.q(z++,new C(M.x,M.y)),c.q(z++,new C(M.x,I.y))):(G=G!==m?new C(G.za,G.Aa):M.copy(),G.y!==I.y&&(G=this.Xc[D.s-1],c.q(z++,new C(G,M.y)),c.q(z++,new C(G,I.y)))):2===z?(c.q(z++,new C(M.x,M.y)),c.q(z++,new C(I.x,M.y))):(G=G!==m?new C(G.za,G.Aa):M.copy(),G.x!==I.x&&(G=this.Xc[D.s-1],c.q(z++,new C(M.x,G)),c.q(z++,new C(I.x,G)))):2===z?q?(G=Math.max(10,this.Dg[F.s]),T=Math.max(10,this.Sf[F.s]),180===this.Q?(F=F.A.x,c.q(z++,new C(F-G,I.y)),c.q(z++,new C(F,I.y)),c.q(z++,
new C(F+T,I.y))):90===this.Q?(F=F.A.y+F.A.height,c.q(z++,new C(I.x,F+T)),c.q(z++,new C(I.x,F)),c.q(z++,new C(I.x,F-G))):270===this.Q?(F=F.A.y,c.q(z++,new C(I.x,F-G)),c.q(z++,new C(I.x,F)),c.q(z++,new C(I.x,F+T))):(F=F.A.x+F.A.width,c.q(z++,new C(F+T,I.y)),c.q(z++,new C(F,I.y)),c.q(z++,new C(F-G,I.y)))):(c.q(z++,M),180===this.Q||0===this.Q?c.q(z++,new C(M.x,I.y)):c.q(z++,new C(I.x,M.y)),c.q(z++,new C(I.x,I.y))):(G=Math.max(10,this.Dg[D.s]),T=Math.max(10,this.Sf[D.s]),180===this.Q?(q&&c.q(z++,new C(I.x-
G,I.y)),c.q(z++,I),q&&c.q(z++,new C(I.x+T,I.y))):90===this.Q?(q&&c.q(z++,new C(I.x,I.y+T)),c.q(z++,I),q&&c.q(z++,new C(I.x,I.y-G))):270===this.Q?(q&&c.q(z++,new C(I.x,I.y-G)),c.q(z++,I),q&&c.q(z++,new C(I.x,I.y+T))):(q&&c.q(z++,new C(I.x+T,I.y)),c.q(z++,I),q&&c.q(z++,new C(I.x-G,I.y)))));F=D}if(j===m||!am(c).u(lc))M=c.h(z-1).copy(),I=c.h(z).copy(),u?(D=this.Sf[x.s],180===this.Q||0===this.Q?(u=M.y,u>=x.A.y&&u<=x.A.bottom&&(F=x.za+D,u=u<x.A.y+x.A.height/2?x.A.y-this.Uc/2:x.A.bottom+this.Uc/2,c.q(z++,
new C(F,M.y)),c.q(z++,new C(F,u))),c.q(z++,new C(I.x,u))):(u=M.x,u>=x.A.x&&u<=x.A.right&&(F=x.Aa+D,u=u<x.A.x+x.A.width/2?x.A.x-this.Uc/2:x.A.right+this.Uc/2,c.q(z++,new C(M.x,F)),c.q(z++,new C(u,F))),c.q(z++,new C(u,I.y))),c.q(z++,I)):q?(G=Math.max(10,this.Dg[x.s]),T=Math.max(10,this.Sf[x.s]),180===this.Q?(F=x.A.x+x.A.width,c.w(z-2,new C(F,M.y)),c.w(z-1,new C(F+T,M.y))):90===this.Q?(F=x.A.y,c.w(z-2,new C(M.x,F)),c.w(z-1,new C(M.x,F-G))):270===this.Q?(F=x.A.y+x.A.height,c.w(z-2,new C(M.x,F)),c.w(z-
1,new C(M.x,F+T))):(F=x.A.x,c.w(z-2,new C(F,M.y)),c.w(z-1,new C(F-G,M.y)))):(180===this.Q||0===this.Q?c.q(z++,new C(I.x,M.y)):c.q(z++,new C(M.x,I.y)),c.q(z++,I))}else{for(;x!==m&&x!==F;){G=D=m;x=x.rb.f;for(var M;x.next()&&!(M=x.value,M.Da===b.Da&&(D=M.D,G=M.G,G.Ea!==m&&(G=m),D.Ea===m)););var T;D!==F&&(M=c.h(z-1).copy(),I=new C(D.za,D.Aa),u?180===this.Q||0===this.Q?(G=G!==m?new C(G.za,G.Aa):M.copy(),G.y!==I.y&&(G=this.Xc[D.s],2===z&&(G=0===this.Q?Math.max(G,M.x):Math.min(G,M.x)),c.q(z++,new C(G,M.y)),
c.q(z++,new C(G,I.y)))):(G=G!==m?new C(G.za,G.Aa):M.copy(),G.x!==I.x&&(G=this.Xc[D.s],2===z&&(G=90===this.Q?Math.max(G,M.y):Math.min(G,M.y)),c.q(z++,new C(M.x,G)),c.q(z++,new C(I.x,G)))):(G=Math.max(10,this.Dg[D.s]),T=Math.max(10,this.Sf[D.s]),180===this.Q?(c.q(z++,new C(I.x+T,I.y)),q&&c.q(z++,I),c.q(z++,new C(I.x-G,I.y))):90===this.Q?(c.q(z++,new C(I.x,I.y-G)),q&&c.q(z++,I),c.q(z++,new C(I.x,I.y+T))):270===this.Q?(c.q(z++,new C(I.x,I.y+T)),q&&c.q(z++,I),c.q(z++,new C(I.x,I.y-G))):(c.q(z++,new C(I.x-
G,I.y)),q&&c.q(z++,I),c.q(z++,new C(I.x+T,I.y)))));x=D}u&&(M=c.h(z-1).copy(),I=c.h(z).copy(),180===this.Q||0===this.Q?M.y!==I.y&&(G=0===this.Q?Math.min(Math.max((I.x+M.x)/2,this.Xc[F.s]),I.x):Math.max(Math.min((I.x+M.x)/2,this.Xc[F.s]),I.x),c.q(z++,new C(G,M.y)),c.q(z++,new C(G,I.y))):M.x!==I.x&&(G=90===this.Q?Math.min(Math.max((I.y+M.y)/2,this.Xc[F.s]),I.y):Math.max(Math.min((I.y+M.y)/2,this.Xc[F.s]),I.y),c.q(z++,new C(M.x,G)),c.q(z++,new C(I.x,G))))}d!==m&&q&&(i!==m&&(hc($l(c))&&(d=c.h(0).copy(),
q=c.h(2).copy(),d.u(q)||c.w(1,new C((d.x+q.x)/2,(d.y+q.y)/2))),c.w(0,c.Sd(e,i,lc,h,p,g,j))),j!==m&&(hc(am(c))&&(d=c.h(c.ba-1),q=c.h(c.ba-3),d.u(q)||c.w(c.ba-2,new C((d.x+q.x)/2,(d.y+q.y)/2))),c.w(c.ba-1,c.Sd(g,j,lc,p,p,e,i))));c.Uh();b.Th()}}e=new y(V);for(a=this.p.Qb.f;a.next();)c=a.value.Da,c!==m&&(Ng(c)&&!e.contains(c))&&e.add(c);if(0<e.count)if(90===this.Q||270===this.Q){t&&v.c(e,y,Y,"adjustOverlapsH:routables");a=0;c=new y(Ro);for(k=e.f;k.next();)if(g=k.value,g!==m&&Ng(g))for(e=2;e<g.ba-3;e++)i=
g.h(e).copy(),j=g.h(e+1).copy(),So(i.y,j.y)&&!So(i.x,j.x)&&(l=new Ro,l.s=Math.floor(i.y/2),n=g.h(0).copy(),r=g.h(g.ba-1).copy(),l.ic=n.x*n.x+n.y,l.ed=r.x*r.x+r.y,l.xd=Math.min(i.x,j.x),l.cd=Math.max(i.x,j.x),l.W=e,l.Da=g,e+2<g.ba&&(n=g.h(e-1).copy(),r=g.h(e+2).copy(),b=0,n.y<i.y?b=r.y<i.y?3:i.x<j.x?2:1:n.y>i.y&&(b=r.y>i.y?0:j.x<i.x?2:1),l.mh=b),c.add(l));if(1<c.count){c.sort(this.iD);for(k=0;k<c.count;){e=c.i[k].s;for(l=k+1;l<c.count&&c.i[l].s===e;)l++;if(1<l-k)for(g=k;g<l;){e=c.i[g].cd;for(n=k+1;n<
l&&c.i[n].xd<e;)e=Math.max(e,c.i[n].cd),n++;i=n-g;if(1<i){c.co(this.dv,g,g+i);j=1;r=c.i[g].ed;for(e=g;e<n;e++)b=c.i[e],b.ed!==r&&(j++,r=b.ed);c.co(this.hD,g,g+i);q=1;r=c.i[g].ic;for(e=g;e<n;e++)b=c.i[e],b.ic!==r&&(q++,r=b.ic);j<q?(d=p,q=j,r=c.i[g].ed,c.co(this.dv,g,g+i)):(d=h,r=c.i[g].ic);z=0;for(e=g;e<n;e++){b=c.i[e];if((d?b.ic:b.ed)!==r)z++,r=d?b.ic:b.ed;g=b.Da;i=g.h(b.W).copy();j=g.h(b.W+1).copy();u=4*(z-(q-1)/2);if(g.Xe!==Qf||To(i.x,i.y+u,j.x,j.y+u))a++,g.tk(),g.w(b.W,new C(i.x,i.y+u)),g.w(b.W+
1,new C(j.x,j.y+u)),g.Uh()}}g=n}k=l}}}else{t&&v.c(e,y,Y,"adjustOverlapsV:routables");a=0;c=new y(Ro);for(k=e.f;k.next();)if(g=k.value,g!==m&&Ng(g))for(e=2;e<g.ba-3;e++)i=g.h(e).copy(),j=g.h(e+1).copy(),So(i.x,j.x)&&!So(i.y,j.y)&&(l=new Ro,l.s=Math.floor(i.x/2),n=g.h(0).copy(),r=g.h(g.ba-1).copy(),l.ic=n.x+n.y*n.y,l.ed=r.x+r.y*r.y,l.xd=Math.min(i.y,j.y),l.cd=Math.max(i.y,j.y),l.W=e,l.Da=g,e+2<g.ba&&(n=g.h(e-1).copy(),r=g.h(e+2).copy(),b=0,n.x<i.x?b=r.x<i.x?3:i.y<j.y?2:1:n.x>i.x&&(b=r.x>i.x?0:j.y<i.y?
2:1),l.mh=b),c.add(l));if(1<c.count){c.sort(this.iD);for(k=0;k<c.count;){e=c.i[k].s;for(l=k+1;l<c.count&&c.i[l].s===e;)l++;if(1<l-k)for(g=k;g<l;){e=c.i[g].cd;for(n=k+1;n<l&&c.i[n].xd<e;)e=Math.max(e,c.i[n].cd),n++;i=n-g;if(1<i){c.co(this.dv,g,g+i);j=1;r=c.i[g].ed;for(e=g;e<n;e++)b=c.i[e],b.ed!==r&&(j++,r=b.ed);c.co(this.hD,g,g+i);q=1;r=c.i[g].ic;for(e=g;e<n;e++)b=c.i[e],b.ic!==r&&(q++,r=b.ic);j<q?(d=p,q=j,r=c.i[g].ed,c.co(this.dv,g,g+i)):(d=h,r=c.i[g].ic);z=0;for(e=g;e<n;e++){b=c.i[e];if((d?b.ic:
b.ed)!==r)z++,r=d?b.ic:b.ed;g=b.Da;i=g.h(b.W).copy();j=g.h(b.W+1).copy();u=4*(z-(q-1)/2);if(g.Xe!==Qf||To(i.x+u,i.y,j.x+u,j.y))a++,g.tk(),g.w(b.W,new C(i.x+u,i.y)),g.w(b.W+1,new C(j.x+u,j.y)),g.Uh()}}g=n}k=l}}}};function Ro(){this.W=this.cd=this.xd=this.ed=this.ic=this.s=0;this.Da=m;this.mh=0}v.od(Ro,{ta:h,ic:h,ed:h,xd:h,cd:h,index:h,link:h,mh:h});
Y.prototype.iD=function(a,b){return!(a instanceof Ro)||!(b instanceof Ro)||a===b?0:a.s<b.s?-1:a.s>b.s?1:a.xd<b.xd?-1:a.xd>b.xd?1:a.cd<b.cd?-1:a.cd>b.cd?1:0};Y.prototype.hD=function(a,b){return!(a instanceof Ro)||!(b instanceof Ro)||a===b?0:a.ic<b.ic?-1:a.ic>b.ic||a.mh<b.mh?1:a.mh>b.mh||a.xd<b.xd?-1:a.xd>b.xd?1:a.cd<b.cd?-1:a.cd>b.cd?1:0};
Y.prototype.dv=function(a,b){return!(a instanceof Ro)||!(b instanceof Ro)||a===b?0:a.ed<b.ed?-1:a.ed>b.ed||a.mh<b.mh?1:a.mh>b.mh||a.xd<b.xd?-1:a.xd>b.xd?1:a.cd<b.cd?-1:a.cd>b.cd?1:0};function So(a,b){t&&(v.j(a,Y,"isApprox:a"),v.j(b,Y,"isApprox:b"));var c=a-b;return-1<c&&1>c}function To(a,b,c,d){t&&(v.j(a,Y,"isUnoccupied2:px"),v.j(b,Y,"isUnoccupied2:py"),v.j(c,Y,"isUnoccupied2:qx"),v.j(d,Y,"isUnoccupied2:qy"));return h}
function eo(a,b){var c,d=a.Wc[b];if(d>=a.Vf.length){c=[];var e;for(e=0;e<a.Vf.length;e++)c[e]=a.Vf[e];a.Vf=c}"undefined"===typeof a.Vf[d]||a.Vf[d]===m?c=[]:(c=a.Vf[d],a.Vf[d]=m);var d=a.Yp[b],g;for(e=0;e<d.length;e++)g=d[e],g instanceof Fo&&(c[g.W]=g);return c}function no(a,b,c){a.Vf[a.Wc[b]]=c}v.a(Y,"layerSpacing",Y.prototype.Ir);v.defineProperty(Y,{Ir:"layerSpacing"},s("kd"),function(a){this.kd!==a&&("number"===typeof a&&0<=a)&&(this.kd=a,this.r())});v.a(Y,"columnSpacing",Y.prototype.bF);
v.defineProperty(Y,{bF:"columnSpacing"},s("Uc"),function(a){this.Uc!==a&&("number"===typeof a&&0<=a)&&(this.Uc=a,this.r())});v.a(Y,"direction",Y.prototype.direction);v.defineProperty(Y,{direction:"direction"},s("Q"),function(a){this.Q!==a&&"number"===typeof a&&(this.Q=a,this.r())});v.a(Y,"cycleRemoveOption",Y.prototype.tB);v.defineProperty(Y,{tB:"cycleRemoveOption"},s("em"),function(a){if(this.em!==a&&(t&&v.c(a,na,Dn,"cycleRemoveOption"),a===En||a===yn))this.em=a,this.r()});
v.a(Y,"layeringOption",Y.prototype.pC);v.defineProperty(Y,{pC:"layeringOption"},s("zm"),function(a){if(this.zm!==a&&(t&&v.c(a,na,Dn,"layeringOption"),a===zn||a===Jn||a===Ln))this.zm=a,this.r()});v.a(Y,"initializeOption",Y.prototype.hC);v.defineProperty(Y,{hC:"initializeOption"},s("tm"),function(a){if(this.tm!==a&&(t&&v.c(a,na,Dn,"initializeOption"),a===An||a===Sn||a===Qn))this.tm=a,this.r()});v.a(Y,"iterations",Y.prototype.WF);
v.defineProperty(Y,{WF:"iterations"},s("Tk"),function(a){t&&v.j(a,Dn,"iterations");this.Tk!==a&&("number"===typeof a&&0<=a)&&(this.Tk=a,this.r())});v.a(Y,"aggressiveOption",Y.prototype.YA);v.defineProperty(Y,{YA:"aggressiveOption"},s("Xl"),function(a){if(this.Xl!==a&&(t&&v.c(a,na,Dn,"cycleRemoveOption"),a===to||a===Bn||a===uo))this.Xl=a,this.r()});v.a(Y,"packOption",Y.prototype.mG);v.defineProperty(Y,{mG:"packOption"},s("Gh"),function(a){this.Gh!==a&&("number"===typeof a&&0<=a&&8>a)&&(this.Gh=a,this.r())});
v.a(Y,"setsPortSpots",Y.prototype.Nl);v.defineProperty(Y,{Nl:"setsPortSpots"},s("Ig"),function(a){this.Ig!==a&&"boolean"===typeof a&&(this.Ig=a,this.r())});v.m(Y,{DJ:"maxLayer"},s("Ma"));v.m(Y,{BJ:"maxIndex"},s("gt"));v.m(Y,{AJ:"maxColumn"},s("$a"));v.m(Y,{JJ:"minIndexLayer"},s("Qp"));v.m(Y,{CJ:"maxIndexLayer"},s("ye"));var yn;Y.CycleDepthFirst=yn=v.l(Y,"CycleDepthFirst",0);var En;Y.CycleGreedy=En=v.l(Y,"CycleGreedy",1);var zn;Y.LayerOptimalLinkLength=zn=v.l(Y,"LayerOptimalLinkLength",0);var Jn;
Y.LayerLongestPathSink=Jn=v.l(Y,"LayerLongestPathSink",1);var Ln;Y.LayerLongestPathSource=Ln=v.l(Y,"LayerLongestPathSource",2);var An;Y.InitDepthFirstOut=An=v.l(Y,"InitDepthFirstOut",0);var Sn;Y.InitDepthFirstIn=Sn=v.l(Y,"InitDepthFirstIn",1);var Qn;Y.InitNaive=Qn=v.l(Y,"InitNaive",2);var to;Y.AggressiveNone=to=v.l(Y,"AggressiveNone",0);var Bn;Y.AggressiveLess=Bn=v.l(Y,"AggressiveLess",1);var uo;Y.AggressiveMore=uo=v.l(Y,"AggressiveMore",2);Y.PackNone=0;var vo;Y.PackExpand=vo=1;var wo;
Y.PackStraighten=wo=2;var yo;Y.PackMedian=yo=4;var Cn;Y.PackAll=Cn=7;function Dn(){Lm.call(this)}v.H("LayeredDigraphNetwork",Dn);v.pa(Dn,Lm);Dn.prototype.createVertex=Dn.prototype.Ji=function(){return new Fo};Dn.prototype.createEdge=Dn.prototype.on=function(){return new On};function Fo(){Pm.call(this);this.W=this.I=this.s=-1;this.ka=p;this.tb=this.mm=this.wj=NaN;this.wi=m;this.Bk=0;this.Mw=this.Nw=f}v.H("LayeredDigraphVertex",Fo);v.pa(Fo,Pm);v.a(Fo,"layer",Fo.prototype.ta);
v.defineProperty(Fo,{ta:"layer"},s("s"),ba("s"));v.a(Fo,"column",Fo.prototype.hc);v.defineProperty(Fo,{hc:"column"},s("I"),ba("I"));v.a(Fo,"index",Fo.prototype.index);v.defineProperty(Fo,{index:"index"},s("W"),ba("W"));v.a(Fo,"valid",Fo.prototype.valid);v.defineProperty(Fo,{valid:"valid"},s("ka"),ba("ka"));v.a(Fo,"discover",Fo.prototype.nF);v.defineProperty(Fo,{nF:"discover"},s("wj"),ba("wj"));v.a(Fo,"finish",Fo.prototype.finish);v.defineProperty(Fo,{finish:"finish"},s("mm"),ba("mm"));
v.a(Fo,"component",Fo.prototype.cF);v.defineProperty(Fo,{cF:"component"},s("tb"),ba("tb"));v.a(Fo,"near",Fo.prototype.jG);v.defineProperty(Fo,{jG:"near"},s("wi"),function(a){a!==m&&v.c(a,Fo,Fo,"layeredDigraphVertex");this.wi=a});function On(){Qm.call(this);this.$o=this.ib=this.ka=p;this.De=this.Be=NaN;this.be=this.$G=0}v.H("LayeredDigraphEdge",On);v.pa(On,Qm);v.a(On,"valid",On.prototype.valid);v.defineProperty(On,{valid:"valid"},s("ka"),ba("ka"));v.a(On,"rev",On.prototype.rev);
v.defineProperty(On,{rev:"rev"},s("ib"),ba("ib"));v.a(On,"forest",On.prototype.zF);v.defineProperty(On,{zF:"forest"},s("$o"),ba("$o"));v.a(On,"portFromPos",On.prototype.oG);v.defineProperty(On,{oG:"portFromPos"},s("Be"),ba("Be"));v.a(On,"portToPos",On.prototype.qG);v.defineProperty(On,{qG:"portToPos"},s("De"),ba("De"));v.a(On,"portFromColOffset",On.prototype.nG);v.defineProperty(On,{nG:"portFromColOffset"},s("Ae"),ba("Ae"));v.a(On,"portToColOffset",On.prototype.pG);
v.defineProperty(On,{pG:"portToColOffset"},s("be"),ba("be"));function X(){Nh.call(this);this.tc=new y(U);this.gc=Uo;this.Kq=Vo;this.Cc=Wo;this.Ye=(new yb(10,10)).freeze();this.U=new Z;this.T=new Z}v.H("TreeLayout",X);v.pa(X,Nh);X.prototype.cloneProtected=X.prototype.jb=function(a){Nh.prototype.jb.call(this,a);a.gc=this.gc;a.Kq=this.Kq;a.Cc=this.Cc;a.Ye=this.Ye.B();Xo(a.U,this.U);Xo(a.T,this.T)};X.prototype.createNetwork=X.prototype.uu=function(){var a=new Yo;Mm(a,this);return a};
X.prototype.makeNetwork=X.prototype.cG=function(a){var b=this.createNetwork();a instanceof A?(Zo(this,b,a.ok,h),Zo(this,b,a.links,h)):a instanceof nf?Zo(this,b,a.mc,p):a.f&&Zo(this,b,a.f,p);return b};
function Zo(a,b,c,d){for(c=c.f;c.next();){var e=c.value;if(e instanceof U&&e.ir()&&"Comment"!==e.nd&&(!d||e.Gr))e.Ti||(e instanceof nf&&e.vb===m?Zo(a,b,e.mc,p):b.$m(e))}for(c.reset();c.next();)if(e=c.value,e instanceof V&&e.ir()&&"Comment"!==e.nd&&(!d||e.Gr)){var g=e.ea,a=e.ia;if(!(g===m||a===m||g===a)&&"Comment"!==g.nd&&"Comment"!==a.nd)g=b.Du(g),a=b.Du(a),g!==m&&a!==m&&b.El(g,a,e)}}
X.prototype.doLayout=X.prototype.or=function(a){this.Kc===m&&(this.Kc=this.makeNetwork(a));this.tc===m&&(this.tc=new y(U));this.Pd!==$o&&(this.Qc=Om(this,this.Qc));if(0<this.p.R.count){this.p.yu();for(var b=this.p.R.f;b.next();)a=b.value,a.Ej=p,a.Uk=0,a.hb=m,a.Eb=[];for(var c=this.tc.f;c.next();)b=c.value,a=this.p.ie(b),a===m&&this.tc.remove(b);if(0===this.tc.length){for(a=this.p.R.f;a.next();)switch(b=a.value,this.gc){case Uo:0===b.sb.count&&this.tc.add(b.Ea);break;case ap:0===b.rb.count&&this.tc.add(b.Ea);
break;default:v.g("Unhandled path value "+this.gc.toString())}if(0===this.tc.count){a=999999;b=m;for(c=this.p.R.f;c.next();){var d=c.value;switch(this.gc){case Uo:d.sb.count<a&&(a=d.sb.count,b=d);break;case ap:d.rb.count<a&&(a=d.rb.count,b=d);break;default:v.g("Unhandled path value "+this.gc.toString())}}b!==m&&this.tc.add(b.Ea)}}for(c=this.tc.f;c.next();)b=c.value,a=this.p.ie(b),a!==m&&!a.Ej&&(a.Ej=h,bp(this,a));for(a=this.tc.f;a.next();)b=this.p.ie(a.value),cp(this,b);for(a=this.tc.f;a.next();)b=
this.p.ie(a.value),dp(this,b);for(a=this.tc.f;a.next();)ep(this,this.p.ie(a.value));for(a=this.p.R.f;a.next();)this.RA(a.value);for(a=this.tc.f;a.next();)fp(this,this.p.ie(a.value));if(this.Cc===$o)for(a=this.tc.f;a.next();)c=a.value,b=this.p.ie(c),d=c.position,c=d.x,d=d.y,isFinite(c)||(c=0),isFinite(d)||(d=0),gp(this,b,c,d);else{d=this.Qc.copy();for(a=this.tc.f;a.next();)if(c=a.value,b=this.p.ie(c),b!==m)switch(gp(this,b,d.x+b.sa.x,d.y+b.sa.y),this.Cc){case Wo:d.y+=b.Fa.height+this.Ye.height;break;
case hp:d.x+=b.Fa.width+this.Ye.width;break;default:v.g("Unhandled arrangement value "+this.Cc.toString())}d.freeze()}this.updateParts()}this.tc=this.Kc=m;this.Se=h};
function bp(a,b){t&&v.c(b,Z,X,"walkTree:v");if(b!==m){var c,d,e;switch(a.gc){case Uo:if(0<b.rb.count){c=new y(Z);for(d=b.mF;d.next();)e=d.value,ip(a,b,e)&&c.add(e);0<c.count&&(b.Eb=c.Cf())}break;case ap:if(0<b.sb.count){c=new y(Z);for(d=b.IG;d.next();)e=d.value,ip(a,b,e)&&c.add(e);0<c.count&&(b.Eb=c.Cf())}break;default:v.g("Unhandled path value"+a.gc.toString())}d=b.Eb;var g=d.length;for(c=0;c<g;c++)e=d[c],e.Ej=h,e.Uk=b.Uk+1,e.hb=b,a.tc.remove(e.Ea);for(c=0;c<g;c++)e=d[c],bp(a,e)}}
function ip(a,b,c){t&&v.c(b,Z,X,"walkOK:v");t&&v.c(c,Z,X,"walkOK:c");if(c.Ej){var d;t&&v.c(c,Z,X,"isAncestor:a");t&&v.c(b,Z,X,"isAncestor:b");if(b===m)d=p;else{for(d=b.hb;d!==m&&d!==c;)d=d.hb;d=d===c}if(d||c.Uk>b.Uk)return p;a.removeChild(c.hb,c)}return h}
X.prototype.removeChild=function(a,b){t&&v.c(a,Z,X,"removeChild:p");t&&v.c(b,Z,X,"removeChild:c");if(a!==m&&b!==m){var c=a.Eb,d=0,e;for(e=0;e<c.length;e++)c[e]===b&&d++;if(0<d){var d=Array(c.length-d),g=0;for(e=0;e<c.length;e++)c[e]!==b&&(d[g++]=c[e]);a.Eb=d}}};
function cp(a,b){t&&v.c(b,Z,X,"initializeTree:v");if(b!==m){t&&v.c(b,Z,X,"initializeTreeVertexValues:v");var c=jp(a,b);Xo(b,c);if(b.hb!==m&&b.hb.ja===kp){for(var c=b.Pa,d=b.hb.Eb,e=0;e<d.length&&b!==d[e];)e++;0===e%2?e!==d.length-1&&(c=90===c?180:180===c?270:270===c?180:270):c=90===c?0:180===c?90:270===c?0:90;b.Pa=c}d=b.Ea;d!==m&&(c=d.na.width,d=d.na.height,b.width=c,b.height=d,b.Gu=c/2,b.Hu=d/2);b.Ej=h;b.ja===kp&&lp(b);for(var c=0,d=b.ol,e=0,g=b.Eb,i=g.length,j=0;j<i;j++){var k=g[j];cp(a,k);c+=k.Ks+
1;d=Math.max(d,k.ft);e=Math.max(e,k.Bh)}b.Ks=c;b.ft=d;b.Bh=0<d?e+1:0}}function jp(a,b){t&&v.c(b,Z,X,"mom:v");switch(a.Kq){default:case Vo:return b.hb!==m?b.hb:a.U;case mp:return b.hb===m?a.U:b.hb.hb===m?a.T:b.hb;case np:if(b.hb!==m)return b.hb.hb!==m?b.hb.hb:a.T;case op:var c=h;if(0===b.ol)c=p;else for(var d=b.Eb,e=d.length,g=0;g<e;g++)if(0<d[g].ol){c=p;break}return c&&b.hb!==m?a.T:b.hb!==m?b.hb:a.U}}
function dp(a,b){t&&v.c(b,Z,X,"assignTree:v");if(b!==m){t&&v.c(b,Z,X,"assignTreeVertexValues:v");for(var c=b.Eb,d=c.length,e=0;e<d;e++)dp(a,c[e])}}function ep(a,b){t&&v.c(b,Z,X,"sortTree:v");if(b!==m){b.ja!==kp&&lp(b);for(var c=b.Eb,d=c.length,e=0;e<d;e++)ep(a,c[e])}}
function lp(a){t&&v.c(a,Z,X,"sortTreeVertexChildren:v");switch(a.ac){case pp:break;case qp:a.Eb.reverse();break;case rp:a.Eb.sort(a.Yb);break;case sp:a.Eb.sort(a.Yb);a.Eb.reverse();break;default:v.g("Unhandled sorting value "+a.ac.toString())}}
X.prototype.RA=function(a){t&&v.c(a,Z,X,"addComments:v");var b=a.Ub,c=a.hb,d=0,e=tp,e=p;c!==m&&(d=c.Ub,e=c.ja,e=up(e));var b=90===b||270===b,d=90===d||270===d,c=0===a.ol,g=new E,i=g.width,g=g.height,j=0,k=a.hd;if(a.Ea!==m)for(var l=a.Ea.MB();l.next();){var n=l.value;"Comment"===n.nd&&n.eb()&&(a.jd===m&&(a.jd=[]),a.jd.push(n),n.Zh(),n=n.na,b&&!c||!e&&!d&&c||e&&d&&c?(i=Math.max(i,n.width),g+=n.height+Math.abs(j)):(i+=n.width+Math.abs(j),g=Math.max(g,n.height)),j=k)}a.jd!==m&&(b&&!c||!e&&!d&&c||e&&d&&
c?(i+=Math.abs(a.Xb),g=Math.max(0,g-a.height)):(g+=Math.abs(a.Xb),i=Math.max(0,i-a.width)),a.lb=new E(0,0,a.A.width+i,a.A.height+g))};function up(a){return a===vp||a===kp||a===wp||a===xp}function yp(a){return a===vp||a===kp}function zp(a){t&&v.c(a,Z,X,"isLeftSideBus:v");var b=a.hb;if(b!==m){var c=b.pb;if(up(c)){if(yp(c)){b=b.children;for(c=0;c<b.length&&a!==b[c];)c++;return 0===c%2}if(c===wp)return h}}return p}
function fp(a,b){t&&v.c(b,Z,X,"layoutTree:v");if(b!==m){var c=b.Eb,d=c.length,e,g;for(g=0;g<d;g++)e=c[g],fp(a,e);switch(b.Jf){case Ap:Bp(a,b);break;case Cp:if(b.ja===kp)Bp(a,b);else if(t&&v.c(b,Z,X,"layoutTreeBlock:v"),0===b.ol)e=b.hb,c=p,d=0,g=tp,e!==m&&(d=e.Ub,g=e.ja,c=up(g)),e=zp(b),b.M=new C(0,0),b.Fa=new yb(b.width,b.height),b.sa=b.hb!==m&&b.jd!==m&&((180===d||270===d)&&!c||e)?180===d&&!c||(90===d||270===d)&&e?new C(b.width-2*b.z.x,0):new C(0,b.height-2*b.z.y):new C(0,0),b.Cp=m,b.pq=m;else{var i=
Dp(b),c=90===i||270===i,j=0,k,l,n=b.Eb,r=n.length;for(k=0;k<r;k++)l=n[k],j=Math.max(j,c?l.Fa.width:l.Fa.height);var q=b.ja;e=q===Ep;var u=q===Fp,x=up(q),z=Math.max(0,b.Gf),d=Gp(b),D=b.ad,F=Hp(b),G=b.ce,I=0;if(e||u||b.Uj||b.Vj&&1===b.Bh)I=Math.max(0,b.Pc);e=b.width;g=b.height;var M=0,T=0,pa=0,ea=m,Aa=m,ta=new yb(0,0),va=0,Ia=0,jb=0,hb=0,ub=0,kb=0;l=0;x&&!yp(q)&&135<i&&n.reverse();if(yp(q))if(1<r)for(k=0;k<r;k++)0===k%2&&k!==r-1?kb=Math.max(kb,c?n[k].Fa.width:n[k].Fa.height):0!==k%2&&(l=Math.max(l,
c?n[k].Fa.width:n[k].Fa.height));else 1===r&&(kb=c?n[0].Fa.width:n[0].Fa.height);var Wa;if(x){switch(q){case vp:k=135>i?Ip(b,n,kb,M,T):Jp(b,n,kb,M,T);kb=k[0];M=k[1];T=k[2];break;case wp:for(k=0;k<r;k++)l=n[k],Wa=l.Fa,ea=0===hb?0:G,c?(l.M=new C(j-Wa.width,Ia+ea),M=Math.max(M,Wa.width),T=Math.max(T,Ia+ea+Wa.height),Ia+=ea+Wa.height):(l.M=new C(va+ea,j-Wa.height),M=Math.max(M,va+ea+Wa.width),T=Math.max(T,Wa.height),va+=ea+Wa.width),hb++;break;case xp:for(k=0;k<r;k++)l=n[k],Wa=l.Fa,ea=0===hb?0:G,c?(l.M=
new C(D/2+b.z.x,Ia+ea),M=Math.max(M,Wa.width),T=Math.max(T,Ia+ea+Wa.height),Ia+=ea+Wa.height):(l.M=new C(va+ea,D/2+b.z.y),M=Math.max(M,va+ea+Wa.width),T=Math.max(T,Wa.height),va+=ea+Wa.width),hb++}ea=[];Aa=[];c?(ea[0]=new C(0,0),ea[1]=new C(0,T),Aa[0]=new C(M,0)):(ea[0]=new C(0,0),ea[1]=new C(M,0),Aa[0]=new C(0,T));Aa[1]=new C(M,T)}else for(var rb,bb=0;bb<r;bb++){l=n[bb];Wa=l.Fa;if(c){0<z&&(0<hb&&va+D+Wa.width>z)&&(va<j&&Kp(b,q,j-va,0,ub,bb-1),jb++,hb=0,ub=bb,pa=T,va=0,Ia=135<i?-T-G:T+G);Lp(a,l,new C(0,
Ia));rb=0;if(0===hb){if(ea=l.Cp,Aa=l.pq,ta=Wa.copy(),ea===m||Aa===m||i!==Dp(l))ea=[],Aa=[],ea[0]=new C(0,0),ea[1]=new C(0,ta.height),Aa[0]=new C(ta.width,0),Aa[1]=new C(ta.width,ta.height)}else k=Rp(b,l,ea,Aa,ta.width,ta.height),rb=k[0],ea=k[1],Aa=k[2],ta.width=k[3],ta.height=k[4],va<Wa.width&&0>rb&&(Sp(b,-rb,0,ub,bb-1),Tp(ea,-rb,0),Tp(Aa,-rb,0),rb=0);l.M=new C(rb,Ia);M=Math.max(M,ta.width);T=Math.max(T,pa+(0===jb?0:G)+Wa.height);va=ta.width}else{0<z&&(0<hb&&Ia+D+Wa.height>z)&&(Ia<j&&Kp(b,q,0,j-Ia,
ub,bb-1),jb++,hb=0,ub=bb,pa=M,Ia=0,va=135<i?-M-G:M+G);Lp(a,l,new C(va,0));rb=0;if(0===hb){if(ea=l.Cp,Aa=l.pq,ta=Wa.copy(),ea===m||Aa===m||i!==Dp(l))ea=[],Aa=[],ea[0]=new C(0,0),ea[1]=new C(ta.width,0),Aa[0]=new C(0,ta.height),Aa[1]=new C(ta.width,ta.height)}else k=Rp(b,l,ea,Aa,ta.width,ta.height),rb=k[0],ea=k[1],Aa=k[2],ta.width=k[3],ta.height=k[4],Ia<Wa.height&&0>rb&&(Sp(b,0,-rb,ub,bb-1),Tp(ea,0,-rb),Tp(Aa,0,-rb),rb=0);l.M=new C(va,rb);T=Math.max(T,ta.height);M=Math.max(M,pa+(0===jb?0:G)+Wa.width);
Ia=ta.height}hb++}0<jb&&(c?(T+=Math.max(0,d),va<M&&Kp(b,q,M-va,0,ub,r-1),0<I&&(u||Sp(b,I,0,0,r-1),M+=I)):(M+=Math.max(0,d),Ia<T&&Kp(b,q,0,T-Ia,ub,r-1),0<I&&(u||Sp(b,0,I,0,r-1),T+=I)));j=new C(0,0);switch(q){case Up:c?j.x+=M/2-b.z.x-F/2:j.y+=T/2-b.z.y-F/2;break;case tp:0<jb?c?j.x+=M/2-b.z.x-F/2:j.y+=T/2-b.z.y-F/2:c?(k=n[0].M.x+n[0].sa.x,u=n[r-1].M.x+n[r-1].sa.x+2*n[r-1].z.x,j.x+=(u+k)/2-b.z.x-F/2):(k=n[0].M.y+n[0].sa.y,u=n[r-1].M.y+n[r-1].sa.y+2*n[r-1].z.y,j.y+=(u+k)/2-b.z.y-F/2);break;case Ep:c?(j.x-=
F,M+=F):(j.y-=F,T+=F);break;case Fp:c?(j.x+=M-b.width+F,M+=F):(j.y+=T-b.height+F,T+=F);break;case vp:c?j.x=1<r?j.x+(kb+D/2-b.z.x):j.x+(n[0].z.x-b.z.x+n[0].sa.x):j.y=1<r?j.y+(kb+D/2-b.z.y):j.y+(n[0].z.y-b.z.y+n[0].sa.y);break;case wp:c?j.x+=M+D/2-b.z.x:j.y+=T+D/2-b.z.y;break;case xp:break;default:v.g("Unhandled alignment value "+q.toString())}for(k=0;k<r;k++)l=n[k],l.M=c?new C(l.M.x+l.sa.x-j.x,l.M.y+(135<i?(x?-T:-l.Fa.height)+l.sa.y-d:g+d+l.sa.y)):new C(l.M.x+(135<i?(x?-M:-l.Fa.width)+l.sa.x-d:e+d+
l.sa.x),l.M.y+l.sa.y-j.y);n=new yb(0,0);x?c?(M=Vp(b,M,j.x),0>j.x&&(j.x=0),135<i&&(j.y+=T+d),T+=g+d,q===xp&&(n.width+=D/2+b.z.x),n.height+=g+d):(135<i&&(j.x+=M+d),M+=e+d,T=Wp(b,T,j.y),0>j.y&&(j.y=0),q===xp&&(n.height+=D/2+b.z.y),n.width+=e+d):c?(b.jd===m?e>M&&(q=Xp(q,e-M,0),n.width=q[0],n.height=q[1],M=e,j.x=0):M=Vp(b,M,j.x),0>j.x&&(n.width-=j.x,j.x=0),135<i&&(j.y+=T+d),T=Math.max(Math.max(T,g),T+g+d),n.height+=g+d):(135<i&&(j.x+=M+d),M=Math.max(Math.max(M,e),M+e+d),b.jd===m?g>T&&(q=Xp(q,0,g-T),n.width=
q[0],n.height=q[1],T=g,j.y=0):T=Wp(b,T,j.y),0>j.y&&(n.height-=j.y,j.y=0),n.width+=e+d);if(0<jb)i=[],q=[],c?(i[2]=new C(0,g+d),i[3]=new C(i[2].x,T),q[2]=new C(M,i[2].y),q[3]=new C(q[2].x,i[3].y)):(i[2]=new C(e+d,0),i[3]=new C(M,i[2].y),q[2]=new C(i[2].x,T),q[3]=new C(i[3].x,q[2].y));else{i=[];q=[];for(k=0;k<ea.length;k++)x=ea[k],i[k+2]=new C(x.x+n.width,x.y+n.height);for(k=0;k<Aa.length;k++)x=Aa[k],q[k+2]=new C(x.x+n.width,x.y+n.height)}c?(i[0]=new C(j.x,0),i[1]=new C(i[0].x,g),i[2].y<i[1].y&&(i[2].x>
i[0].x?i[2]=i[1].copy():i[1]=i[2].copy()),i[3].y<i[2].y&&(i[3].x>i[0].x?i[3]=i[2].copy():i[2]=i[3].copy()),q[0]=new C(j.x+e,0),q[1]=new C(q[0].x,g),q[2].y<q[1].y&&(q[2].x<q[0].x?q[2]=q[1].copy():q[1]=q[2].copy()),q[3].y<q[2].y&&(q[3].x<q[0].x?q[3]=q[2].copy():q[2]=q[3].copy()),i[2].y-=d/2,q[2].y-=d/2):(i[0]=new C(0,j.y),i[1]=new C(e,i[0].y),i[2].x<i[1].x&&(i[2].y>i[0].y?i[2]=i[1].copy():i[1]=i[2].copy()),i[3].x<i[2].x&&(i[3].y>i[0].y?i[3]=i[2].copy():i[2]=i[3].copy()),q[0]=new C(0,j.y+g),q[1]=new C(e,
q[0].y),q[2].x<q[1].x&&(q[2].y<q[0].y?q[2]=q[1].copy():q[1]=q[2].copy()),q[3].x<q[2].x&&(q[3].y<q[0].y?q[3]=q[2].copy():q[2]=q[3].copy()),i[2].x-=d/2,q[2].x-=d/2);b.Cp=i;b.pq=q;b.sa=j;b.Fa=new yb(M,T)}break;default:v.g("Unhandled compaction value "+b.Jf.toString())}}}
function Bp(a,b){t&&v.c(b,Z,X,"layoutTreeNone:v");if(0===b.ol){var c=b.hb,d=p,e=0,g=tp;c!==m&&(e=c.Ub,g=c.ja,d=up(g));c=zp(b);b.M=new C(0,0);b.Fa=new yb(b.width,b.height);b.sa=b.hb!==m&&b.jd!==m&&((180===e||270===e)&&!d||c)?180===e&&!d||(90===e||270===e)&&c?new C(b.width-2*b.z.x,0):new C(0,b.height-2*b.z.y):new C(0,0)}else{var d=Dp(b),e=90===d||270===d,i=0,j,k,c=b.Eb,g=c.length,l;for(j=0;j<g;j++)k=c[j],i=Math.max(i,e?k.Fa.width:k.Fa.height);var n=b.ja,r=n===Ep,q=n===Fp,u=up(n),x=Math.max(0,b.Gf),
z=Gp(b),D=b.ad,F=Hp(b),G=r||q?0:F/2,I=b.ce,M=0;if(r||q||b.Uj||b.Vj&&1===b.Bh)M=Math.max(0,b.Pc);var r=b.width,T=b.height,pa=0,ea=0,Aa=0,ta=0,va=0,Ia=0,jb=0,hb=0,ub=0,kb=0;u&&!yp(n)&&135<d&&c.reverse();if(yp(n))if(1<g)for(j=0;j<g;j++)k=c[j],l=k.Fa,0===j%2&&j!==g-1?ub=Math.max(ub,(e?l.width:l.height)+Yp(k)-D):0!==j%2&&(kb=Math.max(kb,(e?l.width:l.height)+Yp(k)-D));else 1===g&&(ub=e?c[0].Fa.width:c[0].Fa.height);if(u)switch(n){case vp:case kp:k=[];k=135>d?Ip(b,c,ub,pa,ea):Jp(b,c,ub,pa,ea);ub=k[0];pa=
k[1];ea=k[2];break;case wp:for(j=0;j<g;j++)k=c[j],l=k.Fa,x=0===jb?0:I,e?(k.M=new C(i-l.width,va+x),pa=Math.max(pa,l.width),ea=Math.max(ea,va+x+l.height),va+=x+l.height):(k.M=new C(ta+x,i-l.height),pa=Math.max(pa,ta+x+l.width),ea=Math.max(ea,l.height),ta+=x+l.width),jb++;break;case xp:for(i=0;i<g;i++)k=c[i],l=k.Fa,x=0===jb?0:I,e?(k.M=new C(D/2+b.z.x,va+x),pa=Math.max(pa,l.width),ea=Math.max(ea,va+x+l.height),va+=x+l.height):(k.M=new C(ta+x,D/2+b.z.y),pa=Math.max(pa,ta+x+l.width),ea=Math.max(ea,l.height),
ta+=x+l.width),jb++}else for(kb=0;kb<g;kb++)k=c[kb],l=k.Fa,e?(0<x&&(0<jb&&ta+D+l.width>x)&&(ta<i&&Kp(b,n,i-ta,0,hb,kb-1),Ia++,jb=0,hb=kb,Aa=ea,ta=0,va=135<d?-ea-I:ea+I),j=0===jb?G:D,Lp(a,k,new C(0,va)),k.M=new C(ta+j,va),pa=Math.max(pa,ta+j+l.width),ea=Math.max(ea,Aa+(0===Ia?0:I)+l.height),ta+=j+l.width):(0<x&&(0<jb&&va+D+l.height>x)&&(va<i&&Kp(b,n,0,i-va,hb,kb-1),Ia++,jb=0,hb=kb,Aa=pa,va=0,ta=135<d?-pa-I:pa+I),j=0===jb?G:D,Lp(a,k,new C(ta,0)),k.M=new C(ta,va+j),ea=Math.max(ea,va+j+l.height),pa=Math.max(pa,
Aa+(0===Ia?0:I)+l.width),va+=j+l.height),jb++;0<Ia&&(e?(ea+=Math.max(0,z),ta<pa&&Kp(b,n,pa-ta,0,hb,g-1),0<M&&(q||Sp(b,M,0,0,g-1),pa+=M)):(pa+=Math.max(0,z),va<ea&&Kp(b,n,0,ea-va,hb,g-1),0<M&&(q||Sp(b,0,M,0,g-1),ea+=M)));q=new C(0,0);switch(n){case Up:e?q.x+=pa/2-b.z.x-F/2:q.y+=ea/2-b.z.y-F/2;break;case tp:0<Ia?e?q.x+=pa/2-b.z.x-F/2:q.y+=ea/2-b.z.y-F/2:e?(n=c[0].M.x+c[0].sa.x,D=c[g-1].M.x+c[g-1].sa.x+2*c[g-1].z.x,q.x+=n+(D-n)/2-b.z.x-F/2):(n=c[0].M.y+c[0].sa.y,D=c[g-1].M.y+c[g-1].sa.y+2*c[g-1].z.y,
q.y+=n+(D-n)/2-b.z.y-F/2);break;case Ep:e?(q.x-=F,pa+=F):(q.y-=F,ea+=F);break;case Fp:e?(q.x+=pa-b.width+F,pa+=F):(q.y+=ea-b.height+F,ea+=F);break;case vp:case kp:e?q.x=1<g?q.x+(ub+D/2-b.z.x):q.x+(c[0].z.x-b.z.x+c[0].sa.x):q.y=1<g?q.y+(ub+D/2-b.z.y):q.y+(c[0].z.y-b.z.y+c[0].sa.y);break;case wp:e?q.x+=pa+D/2-b.z.x:q.y+=ea+D/2-b.z.y;break;case xp:break;default:v.g("Unhandled alignment value "+n.toString())}for(j=0;j<g;j++)k=c[j],k.M=e?new C(k.M.x+k.sa.x-q.x,k.M.y+(135<d?(u?-ea:-k.Fa.height)+k.sa.y-
z:T+z+k.sa.y)):new C(k.M.x+(135<d?(u?-pa:-k.Fa.width)+k.sa.x-z:r+z+k.sa.x),k.M.y+k.sa.y-q.y);e?(pa=Vp(b,pa,q.x),0>q.x&&(q.x=0),135<d&&(q.y+=ea+z),ea+=T+z):(135<d&&(q.x+=pa+z),pa+=r+z,ea=Wp(b,ea,q.y),0>q.y&&(q.y=0));b.sa=q;b.Fa=new yb(pa,ea)}}
function Ip(a,b,c,d,e){t&&v.c(a,Z,X,"layoutBusChildrenPosDir:v");var g=b.length,i,j;if(0===g)return a=[c,d,e];if(1===g)return i=b[0],j=i.Fa,d=j.width,e=j.height,a=[c,d,e];var k=a.ad,l=a.ce,n=90===Dp(a),r=0,q=0,u=0,x=0,z=0,D=0,x=D=0,F,G;for(F=0;F<g;F++)0!==F%2||1<g&&F===g-1||(i=b[F],j=i.Fa,G=0===r?0:l,n?(D=Yp(i)-k,i.M=new C(c-(j.width+D),u+G),d=Math.max(d,j.width+D),e=Math.max(e,u+G+j.height),u+=G+j.height):(D=Yp(i)-k,i.M=new C(q+G,c-(j.height+D)),e=Math.max(e,j.height+D),d=Math.max(d,q+G+j.width),
q+=G+j.width),r++);r=0;x=q;z=u;n?(q=c+k,u=0):(q=0,u=c+k);for(F=0;F<g;F++)0!==F%2&&(i=b[F],j=i.Fa,G=0===r?0:l,n?(D=Yp(i)-k,i.M=new C(q+D,u+G),d=Math.max(d,q+j.width+D),e=Math.max(e,u+G+j.height),u+=G+j.height):(D=Yp(i)-k,i.M=new C(q+G,u+D),d=Math.max(d,q+G+j.width),e=Math.max(e,u+j.height+D),q+=G+j.width),r++);1<g&&1===g%2&&(i=b[g-1],j=i.Fa,n?(b=Zp(i,Math.max(Math.abs(z),Math.abs(u))),i.M=new C(c+k/2-i.z.x-i.sa.x,e+b),x=c+k/2-i.z.x-i.sa.x,d=Math.max(d,x+j.width),0>x&&(d-=x),e=Math.max(e,Math.max(z,
u)+b+j.height),0>i.M.x&&(c=$p(a,i.M.x,p,c,k))):(b=Zp(i,Math.max(Math.abs(x),Math.abs(q))),i.M=new C(d+b,c+k/2-i.z.y-i.sa.y),d=Math.max(d,Math.max(x,q)+b+j.width),x=c+k/2-i.z.y-i.sa.y,e=Math.max(e,x+j.height),0>x&&(e-=x),0>i.M.y&&(c=$p(a,i.M.y,h,c,k))));return a=[c,d,e]}
function Jp(a,b,c,d,e){t&&v.c(a,Z,X,"layoutBusChildrenNegDir:v");var g=b.length,i,j;if(0===g)return a=[c,d,e];if(1===g)return i=b[0],j=i.Fa,d=j.width,e=j.height,a=[c,d,e];var k=a.ad,l=a.ce,n=270===Dp(a),r=0,q=0,u=0,x=0,z=0,D=0,x=D=0,F,G;for(F=0;F<g;F++)0!==F%2||1<g&&F===g-1||(i=b[F],j=i.Fa,G=0===r?0:l,n?(D=Yp(i)-k,u-=G+j.height,i.M=new C(c-(j.width+D),u),d=Math.max(d,j.width+D),e=Math.max(e,Math.abs(u))):(D=Yp(i)-k,q-=G+j.width,i.M=new C(q,c-(j.height+D)),e=Math.max(e,j.height+D),d=Math.max(d,Math.abs(q))),
r++);r=0;x=q;z=u;n?(q=c+k,u=0):(q=0,u=c+k);for(F=0;F<g;F++)0!==F%2&&(i=b[F],j=i.Fa,G=0===r?0:l,n?(D=Yp(i)-k,u-=G+j.height,i.M=new C(q+D,u),d=Math.max(d,q+j.width+D),e=Math.max(e,Math.abs(u))):(D=Yp(i)-k,q-=G+j.width,i.M=new C(q,u+D),e=Math.max(e,u+j.height+D),d=Math.max(d,Math.abs(q))),r++);1<g&&1===g%2&&(i=b[g-1],j=i.Fa,n?(l=Zp(i,Math.max(Math.abs(z),Math.abs(u))),i.M=new C(c+k/2-i.z.x-i.sa.x,-e-j.height-l),x=c+k/2-i.z.x-i.sa.x,d=Math.max(d,x+j.width),0>x&&(d-=x),e=Math.max(e,Math.abs(Math.min(z,
u))+l+j.height),0>i.M.x&&(c=$p(a,i.M.x,p,c,k))):(l=Zp(i,Math.max(Math.abs(q),Math.abs(q))),i.M=new C(-d-j.width-l,c+k/2-i.z.y-i.sa.y),d=Math.max(d,Math.abs(Math.min(x,q))+l+j.width),x=c+k/2-i.z.y-i.sa.y,e=Math.max(e,x+j.height),0>x&&(e-=x),0>i.M.y&&(c=$p(a,i.M.y,h,c,k))));for(F=0;F<g;F++)i=b[F],i.M=n?new C(i.M.x,i.M.y+e):new C(i.M.x+d,i.M.y);return a=[c,d,e]}function Yp(a){t&&v.c(a,Z,X,"fixRelativePostions:child");return a.parent===m?0:a.parent.Tu}
function Zp(a){t&&v.c(a,Z,X,"fixRelativePostions:lastchild");return a.parent===m?0:a.parent.cv}function $p(a,b,c,d,e){t&&v.c(a,Z,X,"fixRelativePostions:v");for(var a=a.Eb,g=a.length,i=0;i<g;i++)a[i].M=c?new C(a[i].M.x,a[i].M.y-b):new C(a[i].M.x-b,a[i].M.y);b=a[g-1];return Math.max(d,c?b.sa.y-b.z.y-e/2:b.sa.x-b.z.x-e/2)}
function Vp(a,b,c){t&&v.c(a,Z,X,"calculateSubwidth:v");switch(a.ja){case tp:case Up:var d=b;c+a.width>d&&(d=c+a.width);0>c&&(d-=c);return d;case Ep:return a.width>b?a.width:b;case Fp:return 2*a.z.x>b?a.width:b+a.width-2*a.z.x;case vp:case kp:return d=Math.min(0,c),c=Math.max(b,c+a.width),Math.max(a.width,c-d);case wp:return a.width-a.z.x+a.ad/2+b;case xp:return Math.max(a.width,a.z.x+a.ad/2+b);default:return b}}
function Wp(a,b,c){t&&v.c(a,Z,X,"calculateSubheight:v");switch(a.ja){case tp:case Up:var d=b;c+a.height>d&&(d=c+a.height);0>c&&(d-=c);return d;case Ep:return a.height>b?a.height:b;case Fp:return 2*a.z.y>b?a.height:b+a.height-2*a.z.y;case vp:case kp:return d=Math.min(0,c),c=Math.max(b,c+a.height),Math.max(a.height,c-d);case wp:return a.height-a.z.y+a.ad/2+b;case xp:return Math.max(a.height,a.z.y+a.ad/2+b);default:return b}}
function Xp(a,b,c){t&&v.c(a,na,X,"alignOffset:align");switch(a){case Up:b/=2;c/=2;break;case tp:b/=2;c/=2;break;case Ep:c=b=0;break;case Fp:break;default:v.g("Unhandled alignment value "+a.toString())}return[b,c]}function Kp(a,b,c,d,e,g){t&&v.c(a,Z,X,"shiftRelPosAlign:v");t&&v.c(b,na,X,"shiftRelPosAlign:align");b=Xp(b,c,d);Sp(a,b[0],b[1],e,g)}function Sp(a,b,c,d,e){t&&v.c(a,Z,X,"shiftRelPos:v");if(!(0===b&&0===c))for(a=a.Eb;d<=e;d++){var g=a[d];g.M.x+=b;g.M.y+=c}}
function Lp(a,b,c){t&&v.c(b,Z,X,"recordMidPoints:v");t&&v.c(c,C,X,"recordMidPoints:p");var d=b.hb;switch(a.gc){case Uo:for(a=b.sb;a.next();)b=a.value,b.G===d&&(b.hq=c);break;case ap:for(a=b.rb;a.next();)b=a.value,b.D===d&&(b.hq=c);break;default:v.g("Unhandled path value "+a.gc.toString())}}function Tp(a,b,c){for(var d=0;d<a.length;d++)a[d].x+=b,a[d].y+=c}
function Rp(a,b,c,d,e,g){t&&v.c(a,Z,X,"mergeFringes:parent");t&&v.c(b,Z,X,"mergeFringes:child");var i=Dp(a),j=90===i||270===i,k=a.ad,l=e,n=g,r=b.Cp,e=b.pq,g=b.Fa,a=j?Math.max(n,g.height):Math.max(l,g.width);if(r===m||i!==Dp(b))r=[],e=[],j?(r[0]=new C(0,0),r[1]=new C(0,g.height),e[0]=new C(g.width,0),e[1]=new C(e[0].x,r[1].y)):(r[0]=new C(0,0),r[1]=new C(g.width,0),e[0]=new C(0,g.height),e[1]=new C(r[1].x,e[0].y));if(j){b=j=l;i=r;l=9999999;if(!(d===m||2>d.length||i===m||2>i.length))for(var q=n=0;n<
d.length&&q<i.length;){var u=d[n],x=i[q].copy();x.x+=j;var z=u;n+1<d.length&&(z=d[n+1]);var D=x;q+1<i.length&&(D=i[q+1].copy(),D.x+=j);var F=l;u.y===x.y?F=x.x-u.x:u.y>x.y&&u.y<D.y?F=x.x+(u.y-x.y)/(D.y-x.y)*(D.x-x.x)-u.x:x.y>u.y&&x.y<z.y&&(F=x.x-(u.x+(x.y-u.y)/(z.y-u.y)*(z.x-u.x)));F<l&&(l=F);z.y<=u.y?n++:D.y<=x.y?q++:(z.y<=D.y&&n++,D.y<=z.y&&q++)}b-=l;b+=k;k=r;r=b;if(c===m||2>c.length||k===m||2>k.length)c=m;else{i=[];for(l=j=q=0;j<k.length&&k[j].y<c[0].y;)n=k[j++].copy(),n.x+=r,i[l++]=n;for(;q<c.length;)n=
c[q++],i[l++]=n;for(c=c[c.length-1].y;j<k.length&&k[j].y<=c;)j++;for(;j<k.length&&k[j].y>c;)n=k[j++].copy(),n.x+=r,i[l++]=n;c=i}j=e;l=b;if(d===m||2>d.length||j===m||2>j.length)d=m;else{e=[];for(r=n=k=0;k<d.length&&d[k].y<j[0].y;)i=d[k++],e[r++]=i;for(;n<j.length;)i=j[n++].copy(),i.x+=l,e[r++]=i;for(j=j[j.length-1].y;k<d.length&&d[k].y<=j;)k++;for(;k<d.length&&d[k].y>j;)i=d[k++],e[r++]=i;d=e}e=Math.max(0,b)+g.width;g=a}else{b=j=n;i=r;l=9999999;if(!(d===m||2>d.length||i===m||2>i.length))for(q=n=0;n<
d.length&&q<i.length;)u=d[n],x=i[q].copy(),x.y+=j,z=u,n+1<d.length&&(z=d[n+1]),D=x,q+1<i.length&&(D=i[q+1].copy(),D.y+=j),F=l,u.x===x.x?F=x.y-u.y:u.x>x.x&&u.x<D.x?F=x.y+(u.x-x.x)/(D.x-x.x)*(D.y-x.y)-u.y:x.x>u.x&&x.x<z.x&&(F=x.y-(u.y+(x.x-u.x)/(z.x-u.x)*(z.y-u.y))),F<l&&(l=F),z.x<=u.x?n++:D.x<=x.x?q++:(z.x<=D.x&&n++,D.x<=z.x&&q++);b-=l;b+=k;k=r;r=b;if(c===m||2>c.length||k===m||2>k.length)c=m;else{i=[];for(l=j=q=0;j<k.length&&k[j].x<c[0].x;)n=k[j++].copy(),n.y+=r,i[l++]=n;for(;q<c.length;)n=c[q++],
i[l++]=n;for(c=c[c.length-1].x;j<k.length&&k[j].x<=c;)j++;for(;j<k.length&&k[j].x>c;)n=k[j++].copy(),n.y+=r,i[l++]=n;c=i}j=e;l=b;if(d===m||2>d.length||j===m||2>j.length)d=m;else{e=[];for(r=n=k=0;k<d.length&&d[k].x<j[0].x;)i=d[k++],e[r++]=i;for(;n<j.length;)i=j[n++].copy(),i.y+=l,e[r++]=i;for(j=j[j.length-1].x;k<d.length&&d[k].x<=j;)k++;for(;k<d.length&&d[k].x>j;)i=d[k++],e[r++]=i;d=e}e=a;g=Math.max(0,b)+g.height}return[b,c,d,e,g]}
function gp(a,b,c,d){t&&v.c(b,Z,X,"assignAbsolutePositions:v");if(b!==m){b.x=c;b.y=d;for(var b=b.Eb,e=b.length,g=0;g<e;g++){var i=b[g];gp(a,i,c+i.M.x,d+i.M.y)}}}X.prototype.commitLayout=X.prototype.ru=function(){this.Xy();this.commitNodes();this.commitLinks()};
X.prototype.commitNodes=X.prototype.Sx=function(){for(var a=this.p.R.f,b;a.next();)b=a.value,b.commit();for(a.reset();a.next();)if(b=a.value,t&&v.c(b,Z,X,"layoutComments:v"),b.jd!==m){var c=b.gh.la,d=b.hb,e=f,e=f,e=b.Ub,g=0,i=tp,i=p;d!==m&&(g=d.Ub,i=d.ja,i=up(i));for(var d=90===e||270===e,j=90===g||270===g,k=0===b.ol,l=zp(b),n=0,r=b.jd,q=r.length,u=0;u<q;u++){var e=r[u],x=e.na,z;if(d&&!k||!i&&!j&&k||i&&j&&k){if(135<g&&!i||j&&l)if(0<=b.Xb){e.location=new C(b.A.x-b.Xb-x.width,b.A.y+n);for(z=e.Oe();z.next();)e=
z.value,e.Xa=Ec,e.Za=Fc}else{e.location=new C(b.A.x+2*b.z.x-b.Xb,b.A.y+n);for(z=e.Oe();z.next();)e=z.value,e.Xa=Fc,e.Za=Ec}else if(0<=b.Xb){e.location=new C(b.A.x+2*b.z.x+b.Xb,b.A.y+n);for(z=e.Oe();z.next();)e=z.value,e.Xa=Fc,e.Za=Ec}else{e.location=new C(b.A.x+b.Xb-x.width,b.A.y+n);for(z=e.Oe();z.next();)e=z.value,e.Xa=Ec,e.Za=Fc}n=0<=b.hd?n+(x.height+b.hd):n+(b.hd-x.height)}else{if(135<g&&!i||!j&&l)if(0<=b.Xb){e.location=new C(b.A.x+n,b.A.y-b.Xb-x.height);for(z=e.Oe();z.next();)e=z.value,e.Xa=qc,
e.Za=yc}else{e.location=new C(b.A.x+n,b.A.y+2*b.z.y-b.Xb);for(z=e.Oe();z.next();)e=z.value,e.Xa=yc,e.Za=qc}else if(0<=b.Xb){e.location=new C(b.A.x+n,b.A.y+2*b.z.y+b.Xb);for(z=e.Oe();z.next();)e=z.value,e.Xa=yc,e.Za=qc}else{e.location=new C(b.A.x+n,b.A.y+b.Xb-x.height);for(z=e.Oe();z.next();)e=z.value,e.Xa=qc,e.Za=yc}n=0<=b.hd?n+(x.width+b.hd):n+(b.hd-x.width)}}c=n-b.hd-(d?c.height:c.width);if(this.path===Uo)for(b=b.rb;b.next();){if(e=b.value,(e=e.link)&&e.Xe!==Qf)e.jk=0<c?c:NaN}else for(b=b.sb;b.next();)if(e=
b.value,(e=e.link)&&e.Xe!==Qf)e.uk=0<c?c:NaN}};X.prototype.commitLinks=X.prototype.Rx=function(){for(var a=this.p.Qb.f;a.next();)a.value.commit()};X.prototype.Xy=function(){for(var a=this.tc.f;a.next();){var b=this.p.ie(a.value);aq(this,b)}};
function aq(a,b){t&&v.c(b,Z,X,"setPortSpotsTree:v");if(b!==m){t&&v.c(b,Z,X,"setPortSpots:v");var c=b.ja;if(up(c)){t&&v.c(b,Z,X,"setPortSpotsBus:v");t&&v.c(c,na,X,"setPortSpots:align");var d=a.gc===Uo,e=Dp(b),g;switch(e){case 0:g=Fc;break;case 90:g=yc;break;case 180:g=Ec;break;default:g=qc}var i,j,k,l=b.Eb,n=l.length;switch(c){case vp:case kp:for(c=0;c<n;c++)if(i=l[c],j=d?i.sb:i.rb,j.next(),k=j.value,k!==m&&(k=k.Da,k!==m)){i=90===e||270===e?Ec:qc;if(1===n||c===n-1&&1===n%2)switch(e){case 0:i=Ec;break;
case 90:i=qc;break;case 180:i=Fc;break;default:i=yc}else 0===c%2&&(i=90===e||270===e?Fc:yc);d?(b.$i&&(k.Xa=g),b.Zi&&(k.Za=i)):(b.$i&&(k.Xa=i),b.Zi&&(k.Za=g))}break;case wp:i=90===e||270===e?Fc:yc;for(j=d?b.rb:b.sb;j.next();)k=j.value,k=k.Da,k!==m&&(d?(b.$i&&(k.Xa=g),b.Zi&&(k.Za=i)):(b.$i&&(k.Xa=i),b.Zi&&(k.Za=g)));break;case xp:i=90===e||270===e?Ec:qc;for(j=d?b.rb:b.sb;j.next();)k=j.value,k=k.Da,k!==m&&(d?(b.$i&&(k.Xa=g),b.Zi&&(k.Za=i)):(b.$i&&(k.Xa=i),b.Zi&&(k.Za=g)))}}else if(d=Dp(b),a.gc===Uo)for(e=
b.rb;e.next();){if(g=e.value,g=g.Da,g!==m){if(b.bg)if(ic(b.Ce))switch(d){case 0:g.Xa=Fc;break;case 90:g.Xa=yc;break;case 180:g.Xa=Ec;break;default:g.Xa=qc}else g.Xa=b.Ce;if(b.ag)if(ic(b.ue))switch(d){case 0:g.Za=Ec;break;case 90:g.Za=qc;break;case 180:g.Za=Fc;break;default:g.Za=yc}else g.Za=b.ue}}else for(e=b.sb;e.next();)if(g=e.value,g=g.Da,g!==m){if(b.bg)if(ic(b.Ce))switch(d){case 0:g.Za=Fc;break;case 90:g.Za=yc;break;case 180:g.Za=Ec;break;default:g.Za=qc}else g.Za=b.Ce;if(b.ag)if(ic(b.ue))switch(d){case 0:g.Xa=
Ec;break;case 90:g.Xa=qc;break;case 180:g.Xa=Fc;break;default:g.Xa=yc}else g.Xa=b.ue}d=b.Eb;e=d.length;for(g=0;g<e;g++)aq(a,d[g])}}function Dp(a){t&&v.c(a,Z,X,"orthoAngle:v");a=a.Ub;return 45>=a?0:135>=a?90:225>=a?180:315>=a?270:0}function Gp(a){t&&v.c(a,Z,X,"computeLayerSpacing:v");var b=Dp(a),b=90===b||270===b,c=a.kd;if(0<a.Tf)var d=Math.min(1,a.Tf),c=c-(b?a.height*d:a.width*d);if(c<(b?-a.height:-a.width))c=b?-a.height:-a.width;return c}
function Hp(a){t&&v.c(a,Z,X,"computeNodeIndent:v");var b=Dp(a),b=90===b||270===b,c=a.Gg;if(0<a.Yf)var d=Math.min(1,a.Yf),c=c+(b?a.width*d:a.height*d);return c=Math.max(0,c)}v.a(X,"roots",X.prototype.BG);v.defineProperty(X,{BG:"roots"},s("tc"),function(a){this.tc!==a&&(this.tc=a,this.r())});v.a(X,"path",X.prototype.path);v.defineProperty(X,{path:"path"},s("gc"),function(a){if(this.gc!==a&&(t&&v.c(a,na,X,"path"),a===Uo||a===ap))this.gc=a,this.r()});v.a(X,"treeStyle",X.prototype.HD);
v.defineProperty(X,{HD:"treeStyle"},s("Kq"),function(a){if(this.Cc!==a&&(t&&v.c(a,na,X,"treeStyle"),a===Vo||a===np||a===op||a===mp))this.Kq=a,this.r()});v.a(X,"arrangement",X.prototype.Pd);v.defineProperty(X,{Pd:"arrangement"},s("Cc"),function(a){if(this.Cc!==a&&(t&&v.c(a,na,X,"arrangement"),a===Wo||a===hp||a===$o))this.Cc=a,this.r()});v.a(X,"arrangementSpacing",X.prototype.mu);v.defineProperty(X,{mu:"arrangementSpacing"},s("Ye"),function(a){this.Ye.u(a)||(this.Ye.Ra(a),this.r())});
v.a(X,"rootDefaults",X.prototype.AG);v.defineProperty(X,{AG:"rootDefaults"},s("U"),function(a){this.U!==a&&(t&&v.c(a,Z,X,"rootDefaults"),this.U=a,this.r())});v.a(X,"alternateDefaults",X.prototype.IE);v.defineProperty(X,{IE:"alternateDefaults"},s("T"),function(a){this.T!==a&&(t&&v.c(a,Z,X,"alternateDefaults"),this.T=a,this.r())});v.a(X,"sorting",X.prototype.yf);
v.defineProperty(X,{yf:"sorting"},function(){return this.U.ac},function(a){if(this.U.ac!==a&&(t&&v.c(a,na,X,"sorting"),a===pp||a===qp||a===rp||sp))this.U.ac=a,this.r()});v.a(X,"comparer",X.prototype.Xg);v.defineProperty(X,{Xg:"comparer"},function(){return this.U.Yb},function(a){this.U.Yb!==a&&(t&&v.e(a,"function",X,"comparer"),this.U.Yb=a,this.r())});v.a(X,"angle",X.prototype.Pa);
v.defineProperty(X,{Pa:"angle"},function(){return this.U.Ub},function(a){if(this.U.Ub!==a&&(0===a||90===a||180===a||270===a))this.U.Ub=a,this.r()});v.a(X,"alignment",X.prototype.pb);v.defineProperty(X,{pb:"alignment"},function(){return this.U.ja},function(a){this.U.ja!==a&&(t&&v.Ua(a,X,X,"alignment"),this.U.ja=a,this.r())});v.a(X,"nodeIndent",X.prototype.Hy);v.defineProperty(X,{Hy:"nodeIndent"},function(){return this.U.Gg},function(a){this.U.Gg!==a&&0<=a&&(this.U.Gg=a,this.r())});
v.a(X,"nodeIndentPastParent",X.prototype.Iy);v.defineProperty(X,{Iy:"nodeIndentPastParent"},function(){return this.U.Yf},function(a){this.U.Yf!==a&&(0<=a&&1>=a)&&(this.U.Yf=a,this.r())});v.a(X,"nodeSpacing",X.prototype.Tu);v.defineProperty(X,{Tu:"nodeSpacing"},function(){return this.U.ad},function(a){this.U.ad!==a&&(this.U.ad=a,this.r())});v.a(X,"layerSpacing",X.prototype.Ir);v.defineProperty(X,{Ir:"layerSpacing"},function(){return this.U.kd},function(a){this.U.kd!==a&&(this.U.kd=a,this.r())});
v.a(X,"layerSpacingParentOverlap",X.prototype.xy);v.defineProperty(X,{xy:"layerSpacingParentOverlap"},function(){return this.U.Tf},function(a){this.U.Tf!==a&&(0<=a&&1>=a)&&(this.U.Tf=a,this.r())});v.a(X,"compaction",X.prototype.su);v.defineProperty(X,{su:"compaction"},function(){return this.U.Jf},function(a){if(this.U.Jf!==a&&(t&&v.c(a,na,X,"compaction"),a===Ap||a===Cp))this.U.Jf=a,this.r()});v.a(X,"breadthLimit",X.prototype.Ix);
v.defineProperty(X,{Ix:"breadthLimit"},function(){return this.U.Gf},function(a){this.U.Gf!==a&&0<=a&&(this.U.Gf=a,this.r())});v.a(X,"rowSpacing",X.prototype.cv);v.defineProperty(X,{cv:"rowSpacing"},function(){return this.U.ce},function(a){this.U.ce!==a&&(this.U.ce=a,this.r())});v.a(X,"rowIndent",X.prototype.Qy);v.defineProperty(X,{Qy:"rowIndent"},function(){return this.U.Pc},function(a){this.U.Pc!==a&&0<=a&&(this.U.Pc=a,this.r())});v.a(X,"commentSpacing",X.prototype.Px);
v.defineProperty(X,{Px:"commentSpacing"},function(){return this.U.hd},function(a){this.U.hd!==a&&(this.U.hd=a,this.r())});v.a(X,"commentMargin",X.prototype.Ox);v.defineProperty(X,{Ox:"commentMargin"},function(){return this.U.Xb},function(a){this.U.Xb!==a&&(this.U.Xb=a,this.r())});v.a(X,"setsPortSpot",X.prototype.$i);v.defineProperty(X,{$i:"setsPortSpot"},function(){return this.U.bg},function(a){this.U.bg!==a&&(this.U.bg=a,this.r())});v.a(X,"portSpot",X.prototype.My);
v.defineProperty(X,{My:"portSpot"},function(){return this.U.Ce},function(a){this.U.Ce.u(a)||(this.U.Ce=a,this.r())});v.a(X,"setsChildPortSpot",X.prototype.Zi);v.defineProperty(X,{Zi:"setsChildPortSpot"},function(){return this.U.ag},function(a){this.U.ag!==a&&(this.U.ag=a,this.r())});v.a(X,"childPortSpot",X.prototype.Mx);v.defineProperty(X,{Mx:"childPortSpot"},function(){return this.U.ue},function(a){this.U.ue.u(a)||(this.U.ue=a,this.r())});v.a(X,"alternateSorting",X.prototype.TE);
v.defineProperty(X,{TE:"alternateSorting"},function(){return this.T.ac},function(a){if(this.T.ac!==a&&(t&&v.c(a,na,X,"alternateSorting"),a===pp||a===qp||a===rp||sp))this.T.ac=a,this.r()});v.a(X,"alternateComparer",X.prototype.GE);v.defineProperty(X,{GE:"alternateComparer"},function(){return this.T.Yb},function(a){this.T.Yb!==a&&(t&&v.e(a,"function",X,"alternateComparer"),this.T.Yb=a,this.r())});v.a(X,"alternateAngle",X.prototype.AE);
v.defineProperty(X,{AE:"alternateAngle"},function(){return this.T.Ub},function(a){if(this.T.Ub!==a&&(0===a||90===a||180===a||270===a))this.T.Ub=a,this.r()});v.a(X,"alternateAlignment",X.prototype.zE);v.defineProperty(X,{zE:"alternateAlignment"},function(){return this.T.ja},function(a){this.T.ja!==a&&(t&&v.Ua(a,X,X,"alternateAlignment"),this.T.ja=a,this.r())});v.a(X,"alternateNodeIndent",X.prototype.LE);
v.defineProperty(X,{LE:"alternateNodeIndent"},function(){return this.T.Gg},function(a){this.T.Gg!==a&&0<=a&&(this.T.Gg=a,this.r())});v.a(X,"alternateNodeIndentPastParent",X.prototype.ME);v.defineProperty(X,{ME:"alternateNodeIndentPastParent"},function(){return this.T.Yf},function(a){this.T.Yf!==a&&(0<=a&&1>=a)&&(this.T.Yf=a,this.r())});v.a(X,"alternateNodeSpacing",X.prototype.NE);v.defineProperty(X,{NE:"alternateNodeSpacing"},function(){return this.T.ad},function(a){this.T.ad!==a&&(this.T.ad=a,this.r())});
v.a(X,"alternateLayerSpacing",X.prototype.JE);v.defineProperty(X,{JE:"alternateLayerSpacing"},function(){return this.T.kd},function(a){this.T.kd!==a&&(this.T.kd=a,this.r())});v.a(X,"alternateLayerSpacingParentOverlap",X.prototype.KE);v.defineProperty(X,{KE:"alternateLayerSpacingParentOverlap"},function(){return this.T.Tf},function(a){this.T.Tf!==a&&(0<=a&&1>=a)&&(this.T.Tf=a,this.r())});v.a(X,"alternateCompaction",X.prototype.FE);
v.defineProperty(X,{FE:"alternateCompaction"},function(){return this.T.Jf},function(a){if(this.T.Jf!==a&&(t&&v.c(a,na,X,"alternateCompaction"),a===Ap||a===Cp))this.T.Jf=a,this.r()});v.a(X,"alternateBreadthLimit",X.prototype.BE);v.defineProperty(X,{BE:"alternateBreadthLimit"},function(){return this.T.Gf},function(a){this.T.Gf!==a&&0<=a&&(this.T.Gf=a,this.r())});v.a(X,"alternateRowSpacing",X.prototype.QE);
v.defineProperty(X,{QE:"alternateRowSpacing"},function(){return this.T.ce},function(a){this.T.ce!==a&&(this.T.ce=a,this.r())});v.a(X,"alternateRowIndent",X.prototype.PE);v.defineProperty(X,{PE:"alternateRowIndent"},function(){return this.T.Pc},function(a){this.T.Pc!==a&&0<=a&&(this.T.Pc=a,this.r())});v.a(X,"alternateCommentSpacing",X.prototype.EE);v.defineProperty(X,{EE:"alternateCommentSpacing"},function(){return this.T.hd},function(a){this.T.hd!==a&&(this.T.hd=a,this.r())});
v.a(X,"alternateCommentMargin",X.prototype.DE);v.defineProperty(X,{DE:"alternateCommentMargin"},function(){return this.T.Xb},function(a){this.T.Xb!==a&&(this.T.Xb=a,this.r())});v.a(X,"alternateSetsPortSpot",X.prototype.SE);v.defineProperty(X,{SE:"alternateSetsPortSpot"},function(){return this.T.bg},function(a){this.T.bg!==a&&(this.T.bg=a,this.r())});v.a(X,"alternatePortSpot",X.prototype.OE);
v.defineProperty(X,{OE:"alternatePortSpot"},function(){return this.T.Ce},function(a){this.T.Ce.u(a)||(this.T.Ce=a,this.r())});v.a(X,"alternateSetsChildPortSpot",X.prototype.RE);v.defineProperty(X,{RE:"alternateSetsChildPortSpot"},function(){return this.T.ag},function(a){this.T.ag!==a&&(this.T.ag=a,this.r())});v.a(X,"alternateChildPortSpot",X.prototype.CE);v.defineProperty(X,{CE:"alternateChildPortSpot"},function(){return this.T.ue},function(a){this.T.ue.u(a)||(this.T.ue=a,this.r())});var Uo;
X.PathDestination=Uo=v.l(X,"PathDestination",0);var ap;X.PathSource=ap=v.l(X,"PathSource",1);var pp;X.SortingForwards=pp=v.l(X,"SortingForwards",10);var qp;X.SortingReverse=qp=v.l(X,"SortingReverse",11);var rp;X.SortingAscending=rp=v.l(X,"SortingAscending",12);var sp;X.SortingDescending=sp=v.l(X,"SortingDescending",13);var Up;X.AlignmentCenterSubtrees=Up=v.l(X,"AlignmentCenterSubtrees",20);var tp;X.AlignmentCenterChildren=tp=v.l(X,"AlignmentCenterChildren",21);var Ep;
X.AlignmentStart=Ep=v.l(X,"AlignmentStart",22);var Fp;X.AlignmentEnd=Fp=v.l(X,"AlignmentEnd",23);var vp;X.AlignmentBus=vp=v.l(X,"AlignmentBus",24);var kp;X.AlignmentBusBranching=kp=v.l(X,"AlignmentBusBranching",25);var wp;X.AlignmentTopLeftBus=wp=v.l(X,"AlignmentTopLeftBus",26);var xp;X.AlignmentBottomRightBus=xp=v.l(X,"AlignmentBottomRightBus",27);var Ap;X.CompactionNone=Ap=v.l(X,"CompactionNone",30);var Cp;X.CompactionBlock=Cp=v.l(X,"CompactionBlock",31);var Vo;
X.StyleLayered=Vo=v.l(X,"StyleLayered",40);var op;X.StyleLastParents=op=v.l(X,"StyleLastParents",41);var np;X.StyleAlternating=np=v.l(X,"StyleAlternating",42);var mp;X.StyleRootOnly=mp=v.l(X,"StyleRootOnly",43);var Wo;X.ArrangementVertical=Wo=v.l(X,"ArrangementVertical",50);var hp;X.ArrangementHorizontal=hp=v.l(X,"ArrangementHorizontal",51);var $o;X.ArrangementFixedRoots=$o=v.l(X,"ArrangementFixedRoots",52);function Yo(){Lm.call(this)}v.H("TreeNetwork",Yo);v.pa(Yo,Lm);
Yo.prototype.createVertex=Yo.prototype.Ji=function(){return new Z};Yo.prototype.createEdge=Yo.prototype.on=function(){return new bq};
function Z(){Pm.call(this);this.Ej=p;this.hb=m;this.Eb=[];this.Bh=this.ft=this.Ks=this.Uk=this.VG=0;this.pq=this.Cp=this.jd=this.sa=this.Fa=this.M=m;this.Vj=this.Uj=this.ax=p;this.ac=pp;this.Yb=Um;this.Ub=0;this.ja=tp;this.Yf=this.Gg=0;this.ad=20;this.kd=50;this.Tf=0;this.Jf=Cp;this.Gf=0;this.ce=25;this.hd=this.Pc=10;this.Xb=20;this.bg=h;this.Ce=mc;this.ag=h;this.ue=mc}v.H("TreeVertex",Z);v.pa(Z,Pm);
function Xo(a,b){b!==m&&(a.ac=b.ac,a.Yb=b.Yb,a.Ub=b.Ub,a.ja=b.ja,a.Gg=b.Gg,a.Yf=b.Yf,a.ad=b.ad,a.kd=b.kd,a.Tf=b.Tf,a.Jf=b.Jf,a.Gf=b.Gf,a.ce=b.ce,a.Pc=b.Pc,a.hd=b.hd,a.Xb=b.Xb,a.bg=b.bg,a.Ce=b.Ce,a.ag=b.ag,a.ue=b.ue)}v.a(Z,"initialized",Z.prototype.MF);v.defineProperty(Z,{MF:"initialized"},s("Ej"),ba("Ej"));v.a(Z,"parent",Z.prototype.parent);v.defineProperty(Z,{parent:"parent"},s("hb"),ba("hb"));v.a(Z,"children",Z.prototype.children);v.defineProperty(Z,{children:"children"},s("Eb"),ba("Eb"));
v.m(Z,{ol:"childrenCount"},function(){return this.Eb.length});v.a(Z,"level",Z.prototype.$F);v.defineProperty(Z,{$F:"level"},s("Uk"),ba("Uk"));v.a(Z,"descendantCount",Z.prototype.lF);v.defineProperty(Z,{lF:"descendantCount"},s("Ks"),ba("Ks"));v.a(Z,"maxChildrenCount",Z.prototype.fG);v.defineProperty(Z,{fG:"maxChildrenCount"},s("ft"),ba("ft"));v.a(Z,"maxGenerationCount",Z.prototype.gG);v.defineProperty(Z,{gG:"maxGenerationCount"},s("Bh"),ba("Bh"));v.a(Z,"relativePosition",Z.prototype.tG);
v.defineProperty(Z,{tG:"relativePosition"},s("M"),function(a){v.c(a,C,Z,"relativePosition");this.M=a});v.a(Z,"subtreeSize",Z.prototype.NG);v.defineProperty(Z,{NG:"subtreeSize"},s("Fa"),function(a){v.c(a,yb,Z,"subtreeSize");this.Fa=a});v.a(Z,"subtreeOffset",Z.prototype.MG);v.defineProperty(Z,{MG:"subtreeOffset"},s("sa"),function(a){v.c(a,C,Z,"subtreeOffset");this.sa=a});v.a(Z,"comments",Z.prototype.Qx);v.defineProperty(Z,{Qx:"comments"},s("jd"),ba("jd"));v.a(Z,"sorting",Z.prototype.yf);
v.defineProperty(Z,{yf:"sorting"},s("ac"),ba("ac"));v.a(Z,"comparer",Z.prototype.Xg);v.defineProperty(Z,{Xg:"comparer"},s("Yb"),ba("Yb"));v.a(Z,"angle",Z.prototype.Pa);v.defineProperty(Z,{Pa:"angle"},s("Ub"),ba("Ub"));v.a(Z,"alignment",Z.prototype.pb);v.defineProperty(Z,{pb:"alignment"},s("ja"),ba("ja"));v.a(Z,"nodeIndent",Z.prototype.Hy);v.defineProperty(Z,{Hy:"nodeIndent"},s("Gg"),ba("Gg"));v.a(Z,"nodeIndentPastParent",Z.prototype.Iy);v.defineProperty(Z,{Iy:"nodeIndentPastParent"},s("Yf"),ba("Yf"));
v.a(Z,"nodeSpacing",Z.prototype.Tu);v.defineProperty(Z,{Tu:"nodeSpacing"},s("ad"),ba("ad"));v.a(Z,"layerSpacing",Z.prototype.Ir);v.defineProperty(Z,{Ir:"layerSpacing"},s("kd"),ba("kd"));v.a(Z,"layerSpacingParentOverlap",Z.prototype.xy);v.defineProperty(Z,{xy:"layerSpacingParentOverlap"},s("Tf"),ba("Tf"));v.a(Z,"compaction",Z.prototype.su);v.defineProperty(Z,{su:"compaction"},s("Jf"),ba("Jf"));v.a(Z,"breadthLimit",Z.prototype.Ix);v.defineProperty(Z,{Ix:"breadthLimit"},s("Gf"),ba("Gf"));
v.a(Z,"rowSpacing",Z.prototype.cv);v.defineProperty(Z,{cv:"rowSpacing"},s("ce"),ba("ce"));v.a(Z,"rowIndent",Z.prototype.Qy);v.defineProperty(Z,{Qy:"rowIndent"},s("Pc"),ba("Pc"));v.a(Z,"commentSpacing",Z.prototype.Px);v.defineProperty(Z,{Px:"commentSpacing"},s("hd"),ba("hd"));v.a(Z,"commentMargin",Z.prototype.Ox);v.defineProperty(Z,{Ox:"commentMargin"},s("Xb"),ba("Xb"));v.a(Z,"setsPortSpot",Z.prototype.$i);v.defineProperty(Z,{$i:"setsPortSpot"},s("bg"),ba("bg"));v.a(Z,"portSpot",Z.prototype.My);
v.defineProperty(Z,{My:"portSpot"},s("Ce"),ba("Ce"));v.a(Z,"setsChildPortSpot",Z.prototype.Zi);v.defineProperty(Z,{Zi:"setsChildPortSpot"},s("ag"),ba("ag"));v.a(Z,"childPortSpot",Z.prototype.Mx);v.defineProperty(Z,{Mx:"childPortSpot"},s("ue"),ba("ue"));v.a(Z,"routeFirstRow",Z.prototype.FG);v.defineProperty(Z,{FG:"routeFirstRow"},s("ax"),ba("ax"));v.a(Z,"routeAroundCentered",Z.prototype.DG);v.defineProperty(Z,{DG:"routeAroundCentered"},s("Uj"),ba("Uj"));v.a(Z,"routeAroundLastParent",Z.prototype.EG);
v.defineProperty(Z,{EG:"routeAroundLastParent"},s("Vj"),ba("Vj"));function bq(){Qm.call(this);this.hq=new C(0,0)}v.H("TreeEdge",bq);v.pa(bq,Qm);
bq.prototype.commit=bq.prototype.Th=function(){var a=this.Da;if(a!==m&&a.Xe!==Qf){var b=this.p.vb,c=m,d=m;switch(b.gc){case Uo:c=this.G;d=this.D;break;case ap:c=this.D;d=this.G;break;default:v.g("Unhandled path value "+b.gc.toString())}if(!(c===m||d===m))if(b=this.hq,0===b.x&&0===b.y&&!c.ax){var e=c;t&&v.c(e,Z,bq,"adjustRouteForAngleChange:parent");t&&v.c(d,Z,bq,"adjustRouteForAngleChange:child");a=this.Da;c=Dp(e);b=Dp(d);if(c!==b&&(b=Gp(e),e=e.lb,d=d.lb,!(0===c&&d.left-e.right<b+1||90===c&&d.top-
e.bottom<b+1||180===c&&e.left-d.right<b+1||270===c&&e.top-d.bottom<b+1))){Ul(a);var d=a.Le===Rj,g=a.Xe===xh,i=up(this.G.ja);a.tk();0===c?(c=e.right+b/2,d?4===a.ba&&(b=a.h(3).y,a.w(1,new C(c-20,a.h(1).y)),a.q(2,new C(c-20,b)),a.q(3,new C(c,b)),a.q(4,new C(c+20,b)),a.w(5,new C(a.h(5).x,b))):g?i?a.w(3,new C(a.h(2).x,a.h(4).y)):6===a.ba&&(a.w(2,new C(c,a.h(2).y)),a.w(3,new C(c,a.h(3).y))):4===a.ba?a.q(2,new C(c,a.h(2).y)):3===a.ba?a.w(1,new C(c,a.h(2).y)):2===a.ba&&a.q(1,new C(c,a.h(1).y))):90===c?(b=
e.bottom+b/2,d?4===a.ba&&(c=a.h(3).x,a.w(1,new C(a.h(1).x,b-20)),a.q(2,new C(c,b-20)),a.q(3,new C(c,b)),a.q(4,new C(c,b+20)),a.w(5,new C(c,a.h(5).y))):g?i?a.w(3,new C(a.h(2).x,a.h(4).y)):6===a.ba&&(a.w(2,new C(a.h(2).x,b)),a.w(3,new C(a.h(3).x,b))):4===a.ba?a.q(2,new C(a.h(2).x,b)):3===a.ba?a.w(1,new C(a.h(2).x,b)):2===a.ba&&a.q(1,new C(a.h(1).x,b))):180===c?(c=e.left-b/2,d?4===a.ba&&(b=a.h(3).y,a.w(1,new C(c+20,a.h(1).y)),a.q(2,new C(c+20,b)),a.q(3,new C(c,b)),a.q(4,new C(c-20,b)),a.w(5,new C(a.h(5).x,
b))):g?i?a.w(3,new C(a.h(2).x,a.h(4).y)):6===a.ba&&(a.w(2,new C(c,a.h(2).y)),a.w(3,new C(c,a.h(3).y))):4===a.ba?a.q(2,new C(c,a.h(2).y)):3===a.ba?a.w(1,new C(c,a.h(2).y)):2===a.ba&&a.q(1,new C(c,a.h(1).y))):270===c&&(b=e.top-b/2,d?4===a.ba&&(c=a.h(3).x,a.w(1,new C(a.h(1).x,b+20)),a.q(2,new C(c,b+20)),a.q(3,new C(c,b)),a.q(4,new C(c,b-20)),a.w(5,new C(c,a.h(5).y))):g?i?a.w(3,new C(a.h(2).x,a.h(4).y)):6===a.ba&&(a.w(2,new C(a.h(2).x,b)),a.w(3,new C(a.h(3).x,b))):4===a.ba?a.q(2,new C(a.h(2).x,b)):3===
a.ba?a.w(1,new C(a.h(2).x,b)):2===a.ba&&a.q(1,new C(a.h(1).x,b)));a.Uh()}}else{var e=c.lb,j=Dp(c),d=Gp(c),g=c.ce;Ul(a);var i=a.Le===Rj,k=a.Xe===xh,l,n,r,q;a.tk();if(k||i){for(l=2;4<a.ba;)a.WC(2);n=a.h(1);r=a.h(2)}else{for(l=1;3<a.ba;)a.WC(1);n=a.h(0);r=a.h(a.ba-1)}q=a.h(a.ba-1);0===j?(c.ja===Fp?(j=e.bottom+b.y,0===b.y&&n.y>q.y+c.Pc&&(j=Math.min(j,Math.max(n.y,j-Hp(c))))):c.ja===Ep?(j=e.top+b.y,0===b.y&&n.y<q.y-c.Pc&&(j=Math.max(j,Math.min(n.y,j+Hp(c))))):j=c.Uj||c.Vj&&1===c.Bh?e.top-c.sa.y+b.y:e.y+
e.height/2+b.y,i?(a.q(l,new C(n.x,j)),l++,a.q(l,new C(e.right+d,j)),l++,a.q(l,new C(e.right+d+(b.x-g)/3,j)),l++,a.q(l,new C(e.right+d+2*(b.x-g)/3,j)),l++,a.q(l,new C(e.right+d+(b.x-g),j)),l++,a.q(l,new C(r.x,j))):(k&&(a.q(l,new C(e.right+d/2,n.y)),l++),a.q(l,new C(e.right+d/2,j)),l++,a.q(l,new C(e.right+d+b.x-(k?g/2:g),j)),l++,k&&a.q(l,new C(a.h(l-1).x,r.y)))):90===j?(c.ja===Fp?(j=e.right+b.x,0===b.x&&n.x>q.x+c.Pc&&(j=Math.min(j,Math.max(n.x,j-Hp(c))))):c.ja===Ep?(j=e.left+b.x,0===b.x&&n.x<q.x-c.Pc&&
(j=Math.max(j,Math.min(n.x,j+Hp(c))))):j=c.Uj||c.Vj&&1===c.Bh?e.left-c.sa.x+b.x:e.x+e.width/2+b.x,i?(a.q(l,new C(j,n.y)),l++,a.q(l,new C(j,e.bottom+d)),l++,a.q(l,new C(j,e.bottom+d+(b.y-g)/3)),l++,a.q(l,new C(j,e.bottom+d+2*(b.y-g)/3)),l++,a.q(l,new C(j,e.bottom+d+(b.y-g))),l++,a.q(l,new C(j,r.y))):(k&&(a.q(l,new C(n.x,e.bottom+d/2)),l++),a.q(l,new C(j,e.bottom+d/2)),l++,a.q(l,new C(j,e.bottom+d+b.y-(k?g/2:g))),l++,k&&a.q(l,new C(r.x,a.h(l-1).y)))):180===j?(c.ja===Fp?(j=e.bottom+b.y,0===b.y&&n.y>
q.y+c.Pc&&(j=Math.min(j,Math.max(n.y,j-Hp(c))))):c.ja===Ep?(j=e.top+b.y,0===b.y&&n.y<q.y-c.Pc&&(j=Math.max(j,Math.min(n.y,j+Hp(c))))):j=c.Uj||c.Vj&&1===c.Bh?e.top-c.sa.y+b.y:e.y+e.height/2+b.y,i?(a.q(l,new C(n.x,j)),l++,a.q(l,new C(e.left-d,j)),l++,a.q(l,new C(e.left-d+(b.x+g)/3,j)),l++,a.q(l,new C(e.left-d+2*(b.x+g)/3,j)),l++,a.q(l,new C(e.left-d+(b.x+g),j)),l++,a.q(l,new C(r.x,j))):(k&&(a.q(l,new C(e.left-d/2,n.y)),l++),a.q(l,new C(e.left-d/2,j)),l++,a.q(l,new C(e.left-d+b.x+(k?g/2:g),j)),l++,k&&
a.q(l,new C(a.h(l-1).x,r.y)))):270===j?(c.ja===Fp?(j=e.right+b.x,0===b.x&&n.x>q.x+c.Pc&&(j=Math.min(j,Math.max(n.x,j-Hp(c))))):c.ja===Ep?(j=e.left+b.x,0===b.x&&n.x<q.x-c.Pc&&(j=Math.max(j,Math.min(n.x,j+Hp(c))))):j=c.Uj||c.Vj&&1===c.Bh?e.left-c.sa.x+b.x:e.x+e.width/2+b.x,i?(a.q(l,new C(j,n.y)),l++,a.q(l,new C(j,e.top-d)),l++,a.q(l,new C(j,e.top-d+(b.y+g)/3)),l++,a.q(l,new C(j,e.top-d+2*(b.y+g)/3)),l++,a.q(l,new C(j,e.top-d+(b.y+g))),l++,a.q(l,new C(j,r.y))):(k&&(a.q(l,new C(n.x,e.top-d/2)),l++),a.q(l,
new C(j,e.top-d/2)),l++,a.q(l,new C(j,e.top-d+b.y+(k?g/2:g))),l++,k&&a.q(l,new C(r.x,a.h(l-1).y)))):v.g("Invalid angle "+j);a.Uh()}}};v.a(bq,"relativePoint",bq.prototype.sG);v.defineProperty(bq,{sG:"relativePoint"},s("hq"),ba("hq"));window.go=ha;ha.version="1.0.7"; })(window);